// usage: log('inside coolFunc',this,arguments);
// http://paulirish.com/2009/log-a-lightweight-wrapper-for-consolelog/
window.log = function(){
    log.history = log.history || [];   // store logs to an array for reference
    log.history.push(arguments);
    if(this.console){
        console.log( Array.prototype.slice.call(arguments) );
    }
};
// make it safe to use console.log always
(function(b){function c(){}for(var d="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),a;a=d.pop();)b[a]=b[a]||c})(window.console=window.console||{});
;
/*
 * jQuery Cookie Plugin v1.3.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(e){var a=/\+/g;function d(g){return g}function b(g){return decodeURIComponent(g.replace(a," "))}function f(g){if(g.indexOf('"')===0){g=g.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")}try{return c.json?JSON.parse(g):g}catch(h){}}var c=e.cookie=function(p,o,u){if(o!==undefined){u=e.extend({},c.defaults,u);if(typeof u.expires==="number"){var q=u.expires,s=u.expires=new Date();s.setDate(s.getDate()+q)}o=c.json?JSON.stringify(o):String(o);return(document.cookie=[c.raw?p:encodeURIComponent(p),"=",c.raw?o:encodeURIComponent(o),u.expires?"; expires="+u.expires.toUTCString():"",u.path?"; path="+u.path:"",u.domain?"; domain="+u.domain:"",u.secure?"; secure":""].join(""))}var g=c.raw?d:b;var r=document.cookie.split("; ");var v=p?undefined:{};for(var n=0,k=r.length;n<k;n++){var m=r[n].split("=");var h=g(m.shift());var j=g(m.join("="));if(p&&p===h){v=f(j);break}if(!p){v[h]=f(j)}}return v};c.defaults={};e.removeCookie=function(h,g){if(e.cookie(h)!==undefined){e.cookie(h,"",e.extend(g,{expires:-1}));return true}return false}}));;
/*!
 * Globalize
 *
 * http://github.com/jquery/globalize
 *
 * Copyright Software Freedom Conservancy, Inc.
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 */

(function( window, undefined ) {

var Globalize,
	// private variables
	regexHex,
	regexInfinity,
	regexParseFloat,
	regexTrim,
	// private JavaScript utility functions
	arrayIndexOf,
	endsWith,
	extend,
	isArray,
	isFunction,
	isObject,
	startsWith,
	trim,
	truncate,
	zeroPad,
	// private Globalization utility functions
	appendPreOrPostMatch,
	expandFormat,
	formatDate,
	formatNumber,
	getTokenRegExp,
	getEra,
	getEraYear,
	parseExact,
	parseNegativePattern;

// Global variable (Globalize) or CommonJS module (globalize)
Globalize = function( cultureSelector ) {
	return new Globalize.prototype.init( cultureSelector );
};

if ( typeof require !== "undefined" &&
	typeof exports !== "undefined" &&
	typeof module !== "undefined" ) {
	// Assume CommonJS
	module.exports = Globalize;
} else {
	// Export as global variable
	window.Globalize = Globalize;
}

Globalize.cultures = {};

Globalize.prototype = {
	constructor: Globalize,
	init: function( cultureSelector ) {
		this.cultures = Globalize.cultures;
		this.cultureSelector = cultureSelector;

		return this;
	}
};
Globalize.prototype.init.prototype = Globalize.prototype;

// 1. When defining a culture, all fields are required except the ones stated as optional.
// 2. Each culture should have a ".calendars" object with at least one calendar named "standard"
//    which serves as the default calendar in use by that culture.
// 3. Each culture should have a ".calendar" object which is the current calendar being used,
//    it may be dynamically changed at any time to one of the calendars in ".calendars".
Globalize.cultures[ "default" ] = {
	// A unique name for the culture in the form <language code>-<country/region code>
	name: "en",
	// the name of the culture in the english language
	englishName: "English",
	// the name of the culture in its own language
	nativeName: "English",
	// whether the culture uses right-to-left text
	isRTL: false,
	// "language" is used for so-called "specific" cultures.
	// For example, the culture "es-CL" means "Spanish, in Chili".
	// It represents the Spanish-speaking culture as it is in Chili,
	// which might have different formatting rules or even translations
	// than Spanish in Spain. A "neutral" culture is one that is not
	// specific to a region. For example, the culture "es" is the generic
	// Spanish culture, which may be a more generalized version of the language
	// that may or may not be what a specific culture expects.
	// For a specific culture like "es-CL", the "language" field refers to the
	// neutral, generic culture information for the language it is using.
	// This is not always a simple matter of the string before the dash.
	// For example, the "zh-Hans" culture is netural (Simplified Chinese).
	// And the "zh-SG" culture is Simplified Chinese in Singapore, whose lanugage
	// field is "zh-CHS", not "zh".
	// This field should be used to navigate from a specific culture to it's
	// more general, neutral culture. If a culture is already as general as it
	// can get, the language may refer to itself.
	language: "en",
	// numberFormat defines general number formatting rules, like the digits in
	// each grouping, the group separator, and how negative numbers are displayed.
	numberFormat: {
		// [negativePattern]
		// Note, numberFormat.pattern has no "positivePattern" unlike percent and currency,
		// but is still defined as an array for consistency with them.
		//   negativePattern: one of "(n)|-n|- n|n-|n -"
		pattern: [ "-n" ],
		// number of decimal places normally shown
		decimals: 2,
		// string that separates number groups, as in 1,000,000
		",": ",",
		// string that separates a number from the fractional portion, as in 1.99
		".": ".",
		// array of numbers indicating the size of each number group.
		// TODO: more detailed description and example
		groupSizes: [ 3 ],
		// symbol used for positive numbers
		"+": "+",
		// symbol used for negative numbers
		"-": "-",
		// symbol used for NaN (Not-A-Number)
		"NaN": "NaN",
		// symbol used for Negative Infinity
		negativeInfinity: "-Infinity",
		// symbol used for Positive Infinity
		positiveInfinity: "Infinity",
		percent: {
			// [negativePattern, positivePattern]
			//   negativePattern: one of "-n %|-n%|-%n|%-n|%n-|n-%|n%-|-% n|n %-|% n-|% -n|n- %"
			//   positivePattern: one of "n %|n%|%n|% n"
			pattern: [ "-n %", "n %" ],
			// number of decimal places normally shown
			decimals: 2,
			// array of numbers indicating the size of each number group.
			// TODO: more detailed description and example
			groupSizes: [ 3 ],
			// string that separates number groups, as in 1,000,000
			",": ",",
			// string that separates a number from the fractional portion, as in 1.99
			".": ".",
			// symbol used to represent a percentage
			symbol: "%"
		},
		currency: {
			// [negativePattern, positivePattern]
			//   negativePattern: one of "($n)|-$n|$-n|$n-|(n$)|-n$|n-$|n$-|-n $|-$ n|n $-|$ n-|$ -n|n- $|($ n)|(n $)"
			//   positivePattern: one of "$n|n$|$ n|n $"
			pattern: [ "($n)", "$n" ],
			// number of decimal places normally shown
			decimals: 2,
			// array of numbers indicating the size of each number group.
			// TODO: more detailed description and example
			groupSizes: [ 3 ],
			// string that separates number groups, as in 1,000,000
			",": ",",
			// string that separates a number from the fractional portion, as in 1.99
			".": ".",
			// symbol used to represent currency
			symbol: "$"
		}
	},
	// calendars defines all the possible calendars used by this culture.
	// There should be at least one defined with name "standard", and is the default
	// calendar used by the culture.
	// A calendar contains information about how dates are formatted, information about
	// the calendar's eras, a standard set of the date formats,
	// translations for day and month names, and if the calendar is not based on the Gregorian
	// calendar, conversion functions to and from the Gregorian calendar.
	calendars: {
		standard: {
			// name that identifies the type of calendar this is
			name: "Gregorian_USEnglish",
			// separator of parts of a date (e.g. "/" in 11/05/1955)
			"/": "/",
			// separator of parts of a time (e.g. ":" in 05:44 PM)
			":": ":",
			// the first day of the week (0 = Sunday, 1 = Monday, etc)
			firstDay: 0,
			days: {
				// full day names
				names: [ "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday" ],
				// abbreviated day names
				namesAbbr: [ "Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat" ],
				// shortest day names
				namesShort: [ "Su", "Mo", "Tu", "We", "Th", "Fr", "Sa" ]
			},
			months: {
				// full month names (13 months for lunar calendards -- 13th month should be "" if not lunar)
				names: [ "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December", "" ],
				// abbreviated month names
				namesAbbr: [ "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec", "" ]
			},
			// AM and PM designators in one of these forms:
			// The usual view, and the upper and lower case versions
			//   [ standard, lowercase, uppercase ]
			// The culture does not use AM or PM (likely all standard date formats use 24 hour time)
			//   null
			AM: [ "AM", "am", "AM" ],
			PM: [ "PM", "pm", "PM" ],
			eras: [
				// eras in reverse chronological order.
				// name: the name of the era in this culture (e.g. A.D., C.E.)
				// start: when the era starts in ticks (gregorian, gmt), null if it is the earliest supported era.
				// offset: offset in years from gregorian calendar
				{
					"name": "A.D.",
					"start": null,
					"offset": 0
				}
			],
			// when a two digit year is given, it will never be parsed as a four digit
			// year greater than this year (in the appropriate era for the culture)
			// Set it as a full year (e.g. 2029) or use an offset format starting from
			// the current year: "+19" would correspond to 2029 if the current year 2010.
			twoDigitYearMax: 2029,
			// set of predefined date and time patterns used by the culture
			// these represent the format someone in this culture would expect
			// to see given the portions of the date that are shown.
			patterns: {
				// short date pattern
				d: "M/d/yyyy",
				// long date pattern
				D: "dddd, MMMM dd, yyyy",
				// short time pattern
				t: "h:mm tt",
				// long time pattern
				T: "h:mm:ss tt",
				// long date, short time pattern
				f: "dddd, MMMM dd, yyyy h:mm tt",
				// long date, long time pattern
				F: "dddd, MMMM dd, yyyy h:mm:ss tt",
				// month/day pattern
				M: "MMMM dd",
				// month/year pattern
				Y: "yyyy MMMM",
				// S is a sortable format that does not vary by culture
				S: "yyyy\u0027-\u0027MM\u0027-\u0027dd\u0027T\u0027HH\u0027:\u0027mm\u0027:\u0027ss"
			}
			// optional fields for each calendar:
			/*
			monthsGenitive:
				Same as months but used when the day preceeds the month.
				Omit if the culture has no genitive distinction in month names.
				For an explaination of genitive months, see http://blogs.msdn.com/michkap/archive/2004/12/25/332259.aspx
			convert:
				Allows for the support of non-gregorian based calendars. This convert object is used to
				to convert a date to and from a gregorian calendar date to handle parsing and formatting.
				The two functions:
					fromGregorian( date )
						Given the date as a parameter, return an array with parts [ year, month, day ]
						corresponding to the non-gregorian based year, month, and day for the calendar.
					toGregorian( year, month, day )
						Given the non-gregorian year, month, and day, return a new Date() object
						set to the corresponding date in the gregorian calendar.
			*/
		}
	},
	// For localized strings
	messages: {}
};

Globalize.cultures[ "default" ].calendar = Globalize.cultures[ "default" ].calendars.standard;

Globalize.cultures.en = Globalize.cultures[ "default" ];

Globalize.cultureSelector = "en";

//
// private variables
//

regexHex = /^0x[a-f0-9]+$/i;
regexInfinity = /^[+\-]?infinity$/i;
regexParseFloat = /^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/;
regexTrim = /^\s+|\s+$/g;

//
// private JavaScript utility functions
//

arrayIndexOf = function( array, item ) {
	if ( array.indexOf ) {
		return array.indexOf( item );
	}
	for ( var i = 0, length = array.length; i < length; i++ ) {
		if ( array[i] === item ) {
			return i;
		}
	}
	return -1;
};

endsWith = function( value, pattern ) {
	return value.substr( value.length - pattern.length ) === pattern;
};

extend = function() {
	var options, name, src, copy, copyIsArray, clone,
		target = arguments[0] || {},
		i = 1,
		length = arguments.length,
		deep = false;

	// Handle a deep copy situation
	if ( typeof target === "boolean" ) {
		deep = target;
		target = arguments[1] || {};
		// skip the boolean and the target
		i = 2;
	}

	// Handle case when target is a string or something (possible in deep copy)
	if ( typeof target !== "object" && !isFunction(target) ) {
		target = {};
	}

	for ( ; i < length; i++ ) {
		// Only deal with non-null/undefined values
		if ( (options = arguments[ i ]) != null ) {
			// Extend the base object
			for ( name in options ) {
				src = target[ name ];
				copy = options[ name ];

				// Prevent never-ending loop
				if ( target === copy ) {
					continue;
				}

				// Recurse if we're merging plain objects or arrays
				if ( deep && copy && ( isObject(copy) || (copyIsArray = isArray(copy)) ) ) {
					if ( copyIsArray ) {
						copyIsArray = false;
						clone = src && isArray(src) ? src : [];

					} else {
						clone = src && isObject(src) ? src : {};
					}

					// Never move original objects, clone them
					target[ name ] = extend( deep, clone, copy );

				// Don't bring in undefined values
				} else if ( copy !== undefined ) {
					target[ name ] = copy;
				}
			}
		}
	}

	// Return the modified object
	return target;
};

isArray = Array.isArray || function( obj ) {
	return Object.prototype.toString.call( obj ) === "[object Array]";
};

isFunction = function( obj ) {
	return Object.prototype.toString.call( obj ) === "[object Function]";
};

isObject = function( obj ) {
	return Object.prototype.toString.call( obj ) === "[object Object]";
};

startsWith = function( value, pattern ) {
	return value.indexOf( pattern ) === 0;
};

trim = function( value ) {
	return ( value + "" ).replace( regexTrim, "" );
};

truncate = function( value ) {
	if ( isNaN( value ) ) {
		return NaN;
	}
	return Math[ value < 0 ? "ceil" : "floor" ]( value );
};

zeroPad = function( str, count, left ) {
	var l;
	for ( l = str.length; l < count; l += 1 ) {
		str = ( left ? ("0" + str) : (str + "0") );
	}
	return str;
};

//
// private Globalization utility functions
//

appendPreOrPostMatch = function( preMatch, strings ) {
	// appends pre- and post- token match strings while removing escaped characters.
	// Returns a single quote count which is used to determine if the token occurs
	// in a string literal.
	var quoteCount = 0,
		escaped = false;
	for ( var i = 0, il = preMatch.length; i < il; i++ ) {
		var c = preMatch.charAt( i );
		switch ( c ) {
			case "\'":
				if ( escaped ) {
					strings.push( "\'" );
				}
				else {
					quoteCount++;
				}
				escaped = false;
				break;
			case "\\":
				if ( escaped ) {
					strings.push( "\\" );
				}
				escaped = !escaped;
				break;
			default:
				strings.push( c );
				escaped = false;
				break;
		}
	}
	return quoteCount;
};

expandFormat = function( cal, format ) {
	// expands unspecified or single character date formats into the full pattern.
	format = format || "F";
	var pattern,
		patterns = cal.patterns,
		len = format.length;
	if ( len === 1 ) {
		pattern = patterns[ format ];
		if ( !pattern ) {
			throw "Invalid date format string \'" + format + "\'.";
		}
		format = pattern;
	}
	else if ( len === 2 && format.charAt(0) === "%" ) {
		// %X escape format -- intended as a custom format string that is only one character, not a built-in format.
		format = format.charAt( 1 );
	}
	return format;
};

formatDate = function( value, format, culture ) {
	var cal = culture.calendar,
		convert = cal.convert,
		ret;

	if ( !format || !format.length || format === "i" ) {
		if ( culture && culture.name.length ) {
			if ( convert ) {
				// non-gregorian calendar, so we cannot use built-in toLocaleString()
				ret = formatDate( value, cal.patterns.F, culture );
			}
			else {
				var eraDate = new Date( value.getTime() ),
					era = getEra( value, cal.eras );
				eraDate.setFullYear( getEraYear(value, cal, era) );
				ret = eraDate.toLocaleString();
			}
		}
		else {
			ret = value.toString();
		}
		return ret;
	}

	var eras = cal.eras,
		sortable = format === "s";
	format = expandFormat( cal, format );

	// Start with an empty string
	ret = [];
	var hour,
		zeros = [ "0", "00", "000" ],
		foundDay,
		checkedDay,
		dayPartRegExp = /([^d]|^)(d|dd)([^d]|$)/g,
		quoteCount = 0,
		tokenRegExp = getTokenRegExp(),
		converted;

	function padZeros( num, c ) {
		var r, s = num + "";
		if ( c > 1 && s.length < c ) {
			r = ( zeros[c - 2] + s);
			return r.substr( r.length - c, c );
		}
		else {
			r = s;
		}
		return r;
	}

	function hasDay() {
		if ( foundDay || checkedDay ) {
			return foundDay;
		}
		foundDay = dayPartRegExp.test( format );
		checkedDay = true;
		return foundDay;
	}

	function getPart( date, part ) {
		if ( converted ) {
			return converted[ part ];
		}
		switch ( part ) {
			case 0:
				return date.getFullYear();
			case 1:
				return date.getMonth();
			case 2:
				return date.getDate();
			default:
				throw "Invalid part value " + part;
		}
	}

	if ( !sortable && convert ) {
		converted = convert.fromGregorian( value );
	}

	for ( ; ; ) {
		// Save the current index
		var index = tokenRegExp.lastIndex,
			// Look for the next pattern
			ar = tokenRegExp.exec( format );

		// Append the text before the pattern (or the end of the string if not found)
		var preMatch = format.slice( index, ar ? ar.index : format.length );
		quoteCount += appendPreOrPostMatch( preMatch, ret );

		if ( !ar ) {
			break;
		}

		// do not replace any matches that occur inside a string literal.
		if ( quoteCount % 2 ) {
			ret.push( ar[0] );
			continue;
		}

		var current = ar[ 0 ],
			clength = current.length;

		switch ( current ) {
			case "ddd":
				//Day of the week, as a three-letter abbreviation
			case "dddd":
				// Day of the week, using the full name
				var names = ( clength === 3 ) ? cal.days.namesAbbr : cal.days.names;
				ret.push( names[value.getDay()] );
				break;
			case "d":
				// Day of month, without leading zero for single-digit days
			case "dd":
				// Day of month, with leading zero for single-digit days
				foundDay = true;
				ret.push(
					padZeros( getPart(value, 2), clength )
				);
				break;
			case "MMM":
				// Month, as a three-letter abbreviation
			case "MMMM":
				// Month, using the full name
				var part = getPart( value, 1 );
				ret.push(
					( cal.monthsGenitive && hasDay() ) ?
					( cal.monthsGenitive[ clength === 3 ? "namesAbbr" : "names" ][ part ] ) :
					( cal.months[ clength === 3 ? "namesAbbr" : "names" ][ part ] )
				);
				break;
			case "M":
				// Month, as digits, with no leading zero for single-digit months
			case "MM":
				// Month, as digits, with leading zero for single-digit months
				ret.push(
					padZeros( getPart(value, 1) + 1, clength )
				);
				break;
			case "y":
				// Year, as two digits, but with no leading zero for years less than 10
			case "yy":
				// Year, as two digits, with leading zero for years less than 10
			case "yyyy":
				// Year represented by four full digits
				part = converted ? converted[ 0 ] : getEraYear( value, cal, getEra(value, eras), sortable );
				if ( clength < 4 ) {
					part = part % 100;
				}
				ret.push(
					padZeros( part, clength )
				);
				break;
			case "h":
				// Hours with no leading zero for single-digit hours, using 12-hour clock
			case "hh":
				// Hours with leading zero for single-digit hours, using 12-hour clock
				hour = value.getHours() % 12;
				if ( hour === 0 ) hour = 12;
				ret.push(
					padZeros( hour, clength )
				);
				break;
			case "H":
				// Hours with no leading zero for single-digit hours, using 24-hour clock
			case "HH":
				// Hours with leading zero for single-digit hours, using 24-hour clock
				ret.push(
					padZeros( value.getHours(), clength )
				);
				break;
			case "m":
				// Minutes with no leading zero for single-digit minutes
			case "mm":
				// Minutes with leading zero for single-digit minutes
				ret.push(
					padZeros( value.getMinutes(), clength )
				);
				break;
			case "s":
				// Seconds with no leading zero for single-digit seconds
			case "ss":
				// Seconds with leading zero for single-digit seconds
				ret.push(
					padZeros( value.getSeconds(), clength )
				);
				break;
			case "t":
				// One character am/pm indicator ("a" or "p")
			case "tt":
				// Multicharacter am/pm indicator
				part = value.getHours() < 12 ? ( cal.AM ? cal.AM[0] : " " ) : ( cal.PM ? cal.PM[0] : " " );
				ret.push( clength === 1 ? part.charAt(0) : part );
				break;
			case "f":
				// Deciseconds
			case "ff":
				// Centiseconds
			case "fff":
				// Milliseconds
				ret.push(
					padZeros( value.getMilliseconds(), 3 ).substr( 0, clength )
				);
				break;
			case "z":
				// Time zone offset, no leading zero
			case "zz":
				// Time zone offset with leading zero
				hour = value.getTimezoneOffset() / 60;
				ret.push(
					( hour <= 0 ? "+" : "-" ) + padZeros( Math.floor(Math.abs(hour)), clength )
				);
				break;
			case "zzz":
				// Time zone offset with leading zero
				hour = value.getTimezoneOffset() / 60;
				ret.push(
					( hour <= 0 ? "+" : "-" ) + padZeros( Math.floor(Math.abs(hour)), 2 ) +
					// Hard coded ":" separator, rather than using cal.TimeSeparator
					// Repeated here for consistency, plus ":" was already assumed in date parsing.
					":" + padZeros( Math.abs(value.getTimezoneOffset() % 60), 2 )
				);
				break;
			case "g":
			case "gg":
				if ( cal.eras ) {
					ret.push(
						cal.eras[ getEra(value, eras) ].name
					);
				}
				break;
		case "/":
			ret.push( cal["/"] );
			break;
		default:
			throw "Invalid date format pattern \'" + current + "\'.";
		}
	}
	return ret.join( "" );
};

// formatNumber
(function() {
	var expandNumber;

	expandNumber = function( number, precision, formatInfo ) {
		var groupSizes = formatInfo.groupSizes,
			curSize = groupSizes[ 0 ],
			curGroupIndex = 1,
			factor = Math.pow( 10, precision ),
			rounded = Math.round( number * factor ) / factor;

		if ( !isFinite(rounded) ) {
			rounded = number;
		}
		number = rounded;

		var numberString = number+"",
			right = "",
			split = numberString.split( /e/i ),
			exponent = split.length > 1 ? parseInt( split[1], 10 ) : 0;
		numberString = split[ 0 ];
		split = numberString.split( "." );
		numberString = split[ 0 ];
		right = split.length > 1 ? split[ 1 ] : "";

		if ( exponent > 0 ) {
			right = zeroPad( right, exponent, false );
			numberString += right.slice( 0, exponent );
			right = right.substr( exponent );
		}
		else if ( exponent < 0 ) {
			exponent = -exponent;
			numberString = zeroPad( numberString, exponent + 1, true );
			right = numberString.slice( -exponent, numberString.length ) + right;
			numberString = numberString.slice( 0, -exponent );
		}

		if ( precision > 0 ) {
			right = formatInfo[ "." ] +
				( (right.length > precision) ? right.slice(0, precision) : zeroPad(right, precision) );
		}
		else {
			right = "";
		}

		var stringIndex = numberString.length - 1,
			sep = formatInfo[ "," ],
			ret = "";

		while ( stringIndex >= 0 ) {
			if ( curSize === 0 || curSize > stringIndex ) {
				return numberString.slice( 0, stringIndex + 1 ) + ( ret.length ? (sep + ret + right) : right );
			}
			ret = numberString.slice( stringIndex - curSize + 1, stringIndex + 1 ) + ( ret.length ? (sep + ret) : "" );

			stringIndex -= curSize;

			if ( curGroupIndex < groupSizes.length ) {
				curSize = groupSizes[ curGroupIndex ];
				curGroupIndex++;
			}
		}

		return numberString.slice( 0, stringIndex + 1 ) + sep + ret + right;
	};

	formatNumber = function( value, format, culture ) {
		if ( !isFinite(value) ) {
			if ( value === Infinity ) {
				return culture.numberFormat.positiveInfinity;
			}
			if ( value === -Infinity ) {
				return culture.numberFormat.negativeInfinity;
			}
			return culture.numberFormat.NaN;
		}
		if ( !format || format === "i" ) {
			return culture.name.length ? value.toLocaleString() : value.toString();
		}
		format = format || "D";

		var nf = culture.numberFormat,
			number = Math.abs( value ),
			precision = -1,
			pattern;
		if ( format.length > 1 ) precision = parseInt( format.slice(1), 10 );

		var current = format.charAt( 0 ).toUpperCase(),
			formatInfo;

		switch ( current ) {
			case "D":
				pattern = "n";
				number = truncate( number );
				if ( precision !== -1 ) {
					number = zeroPad( "" + number, precision, true );
				}
				if ( value < 0 ) number = "-" + number;
				break;
			case "N":
				formatInfo = nf;
				/* falls through */
			case "C":
				formatInfo = formatInfo || nf.currency;
				/* falls through */
			case "P":
				formatInfo = formatInfo || nf.percent;
				pattern = value < 0 ? formatInfo.pattern[ 0 ] : ( formatInfo.pattern[1] || "n" );
				if ( precision === -1 ) precision = formatInfo.decimals;
				number = expandNumber( number * (current === "P" ? 100 : 1), precision, formatInfo );
				break;
			default:
				throw "Bad number format specifier: " + current;
		}

		var patternParts = /n|\$|-|%/g,
			ret = "";
		for ( ; ; ) {
			var index = patternParts.lastIndex,
				ar = patternParts.exec( pattern );

			ret += pattern.slice( index, ar ? ar.index : pattern.length );

			if ( !ar ) {
				break;
			}

			switch ( ar[0] ) {
				case "n":
					ret += number;
					break;
				case "$":
					ret += nf.currency.symbol;
					break;
				case "-":
					// don't make 0 negative
					if ( /[1-9]/.test(number) ) {
						ret += nf[ "-" ];
					}
					break;
				case "%":
					ret += nf.percent.symbol;
					break;
			}
		}

		return ret;
	};

}());

getTokenRegExp = function() {
	// regular expression for matching date and time tokens in format strings.
	return (/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g);
};

getEra = function( date, eras ) {
	if ( !eras ) return 0;
	var start, ticks = date.getTime();
	for ( var i = 0, l = eras.length; i < l; i++ ) {
		start = eras[ i ].start;
		if ( start === null || ticks >= start ) {
			return i;
		}
	}
	return 0;
};

getEraYear = function( date, cal, era, sortable ) {
	var year = date.getFullYear();
	if ( !sortable && cal.eras ) {
		// convert normal gregorian year to era-shifted gregorian
		// year by subtracting the era offset
		year -= cal.eras[ era ].offset;
	}
	return year;
};

// parseExact
(function() {
	var expandYear,
		getDayIndex,
		getMonthIndex,
		getParseRegExp,
		outOfRange,
		toUpper,
		toUpperArray;

	expandYear = function( cal, year ) {
		// expands 2-digit year into 4 digits.
		if ( year < 100 ) {
			var now = new Date(),
				era = getEra( now ),
				curr = getEraYear( now, cal, era ),
				twoDigitYearMax = cal.twoDigitYearMax;
			twoDigitYearMax = typeof twoDigitYearMax === "string" ? new Date().getFullYear() % 100 + parseInt( twoDigitYearMax, 10 ) : twoDigitYearMax;
			year += curr - ( curr % 100 );
			if ( year > twoDigitYearMax ) {
				year -= 100;
			}
		}
		return year;
	};

	getDayIndex = function	( cal, value, abbr ) {
		var ret,
			days = cal.days,
			upperDays = cal._upperDays;
		if ( !upperDays ) {
			cal._upperDays = upperDays = [
				toUpperArray( days.names ),
				toUpperArray( days.namesAbbr ),
				toUpperArray( days.namesShort )
			];
		}
		value = toUpper( value );
		if ( abbr ) {
			ret = arrayIndexOf( upperDays[1], value );
			if ( ret === -1 ) {
				ret = arrayIndexOf( upperDays[2], value );
			}
		}
		else {
			ret = arrayIndexOf( upperDays[0], value );
		}
		return ret;
	};

	getMonthIndex = function( cal, value, abbr ) {
		var months = cal.months,
			monthsGen = cal.monthsGenitive || cal.months,
			upperMonths = cal._upperMonths,
			upperMonthsGen = cal._upperMonthsGen;
		if ( !upperMonths ) {
			cal._upperMonths = upperMonths = [
				toUpperArray( months.names ),
				toUpperArray( months.namesAbbr )
			];
			cal._upperMonthsGen = upperMonthsGen = [
				toUpperArray( monthsGen.names ),
				toUpperArray( monthsGen.namesAbbr )
			];
		}
		value = toUpper( value );
		var i = arrayIndexOf( abbr ? upperMonths[1] : upperMonths[0], value );
		if ( i < 0 ) {
			i = arrayIndexOf( abbr ? upperMonthsGen[1] : upperMonthsGen[0], value );
		}
		return i;
	};

	getParseRegExp = function( cal, format ) {
		// converts a format string into a regular expression with groups that
		// can be used to extract date fields from a date string.
		// check for a cached parse regex.
		var re = cal._parseRegExp;
		if ( !re ) {
			cal._parseRegExp = re = {};
		}
		else {
			var reFormat = re[ format ];
			if ( reFormat ) {
				return reFormat;
			}
		}

		// expand single digit formats, then escape regular expression characters.
		var expFormat = expandFormat( cal, format ).replace( /([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g, "\\\\$1" ),
			regexp = [ "^" ],
			groups = [],
			index = 0,
			quoteCount = 0,
			tokenRegExp = getTokenRegExp(),
			match;

		// iterate through each date token found.
		while ( (match = tokenRegExp.exec(expFormat)) !== null ) {
			var preMatch = expFormat.slice( index, match.index );
			index = tokenRegExp.lastIndex;

			// don't replace any matches that occur inside a string literal.
			quoteCount += appendPreOrPostMatch( preMatch, regexp );
			if ( quoteCount % 2 ) {
				regexp.push( match[0] );
				continue;
			}

			// add a regex group for the token.
			var m = match[ 0 ],
				len = m.length,
				add;
			switch ( m ) {
				case "dddd": case "ddd":
				case "MMMM": case "MMM":
				case "gg": case "g":
					add = "(\\D+)";
					break;
				case "tt": case "t":
					add = "(\\D*)";
					break;
				case "yyyy":
				case "fff":
				case "ff":
				case "f":
					add = "(\\d{" + len + "})";
					break;
				case "dd": case "d":
				case "MM": case "M":
				case "yy": case "y":
				case "HH": case "H":
				case "hh": case "h":
				case "mm": case "m":
				case "ss": case "s":
					add = "(\\d\\d?)";
					break;
				case "zzz":
					add = "([+-]?\\d\\d?:\\d{2})";
					break;
				case "zz": case "z":
					add = "([+-]?\\d\\d?)";
					break;
				case "/":
					add = "(\\/)";
					break;
				default:
					throw "Invalid date format pattern \'" + m + "\'.";
			}
			if ( add ) {
				regexp.push( add );
			}
			groups.push( match[0] );
		}
		appendPreOrPostMatch( expFormat.slice(index), regexp );
		regexp.push( "$" );

		// allow whitespace to differ when matching formats.
		var regexpStr = regexp.join( "" ).replace( /\s+/g, "\\s+" ),
			parseRegExp = { "regExp": regexpStr, "groups": groups };

		// cache the regex for this format.
		return re[ format ] = parseRegExp;
	};

	outOfRange = function( value, low, high ) {
		return value < low || value > high;
	};

	toUpper = function( value ) {
		// "he-IL" has non-breaking space in weekday names.
		return value.split( "\u00A0" ).join( " " ).toUpperCase();
	};

	toUpperArray = function( arr ) {
		var results = [];
		for ( var i = 0, l = arr.length; i < l; i++ ) {
			results[ i ] = toUpper( arr[i] );
		}
		return results;
	};

	parseExact = function( value, format, culture ) {
		// try to parse the date string by matching against the format string
		// while using the specified culture for date field names.
		value = trim( value );
		var cal = culture.calendar,
			// convert date formats into regular expressions with groupings.
			// use the regexp to determine the input format and extract the date fields.
			parseInfo = getParseRegExp( cal, format ),
			match = new RegExp( parseInfo.regExp ).exec( value );
		if ( match === null ) {
			return null;
		}
		// found a date format that matches the input.
		var groups = parseInfo.groups,
			era = null, year = null, month = null, date = null, weekDay = null,
			hour = 0, hourOffset, min = 0, sec = 0, msec = 0, tzMinOffset = null,
			pmHour = false;
		// iterate the format groups to extract and set the date fields.
		for ( var j = 0, jl = groups.length; j < jl; j++ ) {
			var matchGroup = match[ j + 1 ];
			if ( matchGroup ) {
				var current = groups[ j ],
					clength = current.length,
					matchInt = parseInt( matchGroup, 10 );
				switch ( current ) {
					case "dd": case "d":
						// Day of month.
						date = matchInt;
						// check that date is generally in valid range, also checking overflow below.
						if ( outOfRange(date, 1, 31) ) return null;
						break;
					case "MMM": case "MMMM":
						month = getMonthIndex( cal, matchGroup, clength === 3 );
						if ( outOfRange(month, 0, 11) ) return null;
						break;
					case "M": case "MM":
						// Month.
						month = matchInt - 1;
						if ( outOfRange(month, 0, 11) ) return null;
						break;
					case "y": case "yy":
					case "yyyy":
						year = clength < 4 ? expandYear( cal, matchInt ) : matchInt;
						if ( outOfRange(year, 0, 9999) ) return null;
						break;
					case "h": case "hh":
						// Hours (12-hour clock).
						hour = matchInt;
						if ( hour === 12 ) hour = 0;
						if ( outOfRange(hour, 0, 11) ) return null;
						break;
					case "H": case "HH":
						// Hours (24-hour clock).
						hour = matchInt;
						if ( outOfRange(hour, 0, 23) ) return null;
						break;
					case "m": case "mm":
						// Minutes.
						min = matchInt;
						if ( outOfRange(min, 0, 59) ) return null;
						break;
					case "s": case "ss":
						// Seconds.
						sec = matchInt;
						if ( outOfRange(sec, 0, 59) ) return null;
						break;
					case "tt": case "t":
						// AM/PM designator.
						// see if it is standard, upper, or lower case PM. If not, ensure it is at least one of
						// the AM tokens. If not, fail the parse for this format.
						pmHour = cal.PM && ( matchGroup === cal.PM[0] || matchGroup === cal.PM[1] || matchGroup === cal.PM[2] );
						if (
							!pmHour && (
								!cal.AM || ( matchGroup !== cal.AM[0] && matchGroup !== cal.AM[1] && matchGroup !== cal.AM[2] )
							)
						) return null;
						break;
					case "f":
						// Deciseconds.
					case "ff":
						// Centiseconds.
					case "fff":
						// Milliseconds.
						msec = matchInt * Math.pow( 10, 3 - clength );
						if ( outOfRange(msec, 0, 999) ) return null;
						break;
					case "ddd":
						// Day of week.
					case "dddd":
						// Day of week.
						weekDay = getDayIndex( cal, matchGroup, clength === 3 );
						if ( outOfRange(weekDay, 0, 6) ) return null;
						break;
					case "zzz":
						// Time zone offset in +/- hours:min.
						var offsets = matchGroup.split( /:/ );
						if ( offsets.length !== 2 ) return null;
						hourOffset = parseInt( offsets[0], 10 );
						if ( outOfRange(hourOffset, -12, 13) ) return null;
						var minOffset = parseInt( offsets[1], 10 );
						if ( outOfRange(minOffset, 0, 59) ) return null;
						tzMinOffset = ( hourOffset * 60 ) + ( startsWith(matchGroup, "-") ? -minOffset : minOffset );
						break;
					case "z": case "zz":
						// Time zone offset in +/- hours.
						hourOffset = matchInt;
						if ( outOfRange(hourOffset, -12, 13) ) return null;
						tzMinOffset = hourOffset * 60;
						break;
					case "g": case "gg":
						var eraName = matchGroup;
						if ( !eraName || !cal.eras ) return null;
						eraName = trim( eraName.toLowerCase() );
						for ( var i = 0, l = cal.eras.length; i < l; i++ ) {
							if ( eraName === cal.eras[i].name.toLowerCase() ) {
								era = i;
								break;
							}
						}
						// could not find an era with that name
						if ( era === null ) return null;
						break;
				}
			}
		}
		var result = new Date(), defaultYear, convert = cal.convert;
		defaultYear = convert ? convert.fromGregorian( result )[ 0 ] : result.getFullYear();
		if ( year === null ) {
			year = defaultYear;
		}
		else if ( cal.eras ) {
			// year must be shifted to normal gregorian year
			// but not if year was not specified, its already normal gregorian
			// per the main if clause above.
			year += cal.eras[( era || 0 )].offset;
		}
		// set default day and month to 1 and January, so if unspecified, these are the defaults
		// instead of the current day/month.
		if ( month === null ) {
			month = 0;
		}
		if ( date === null ) {
			date = 1;
		}
		// now have year, month, and date, but in the culture's calendar.
		// convert to gregorian if necessary
		if ( convert ) {
			result = convert.toGregorian( year, month, date );
			// conversion failed, must be an invalid match
			if ( result === null ) return null;
		}
		else {
			// have to set year, month and date together to avoid overflow based on current date.
			result.setFullYear( year, month, date );
			// check to see if date overflowed for specified month (only checked 1-31 above).
			if ( result.getDate() !== date ) return null;
			// invalid day of week.
			if ( weekDay !== null && result.getDay() !== weekDay ) {
				return null;
			}
		}
		// if pm designator token was found make sure the hours fit the 24-hour clock.
		if ( pmHour && hour < 12 ) {
			hour += 12;
		}
		result.setHours( hour, min, sec, msec );
		if ( tzMinOffset !== null ) {
			// adjust timezone to utc before applying local offset.
			var adjustedMin = result.getMinutes() - ( tzMinOffset + result.getTimezoneOffset() );
			// Safari limits hours and minutes to the range of -127 to 127.  We need to use setHours
			// to ensure both these fields will not exceed this range.	adjustedMin will range
			// somewhere between -1440 and 1500, so we only need to split this into hours.
			result.setHours( result.getHours() + parseInt(adjustedMin / 60, 10), adjustedMin % 60 );
		}
		return result;
	};
}());

parseNegativePattern = function( value, nf, negativePattern ) {
	var neg = nf[ "-" ],
		pos = nf[ "+" ],
		ret;
	switch ( negativePattern ) {
		case "n -":
			neg = " " + neg;
			pos = " " + pos;
			/* falls through */
		case "n-":
			if ( endsWith(value, neg) ) {
				ret = [ "-", value.substr(0, value.length - neg.length) ];
			}
			else if ( endsWith(value, pos) ) {
				ret = [ "+", value.substr(0, value.length - pos.length) ];
			}
			break;
		case "- n":
			neg += " ";
			pos += " ";
			/* falls through */
		case "-n":
			if ( startsWith(value, neg) ) {
				ret = [ "-", value.substr(neg.length) ];
			}
			else if ( startsWith(value, pos) ) {
				ret = [ "+", value.substr(pos.length) ];
			}
			break;
		case "(n)":
			if ( startsWith(value, "(") && endsWith(value, ")") ) {
				ret = [ "-", value.substr(1, value.length - 2) ];
			}
			break;
	}
	return ret || [ "", value ];
};

//
// public instance functions
//

Globalize.prototype.findClosestCulture = function( cultureSelector ) {
	return Globalize.findClosestCulture.call( this, cultureSelector );
};

Globalize.prototype.format = function( value, format, cultureSelector ) {
	return Globalize.format.call( this, value, format, cultureSelector );
};

Globalize.prototype.localize = function( key, cultureSelector ) {
	return Globalize.localize.call( this, key, cultureSelector );
};

Globalize.prototype.parseInt = function( value, radix, cultureSelector ) {
	return Globalize.parseInt.call( this, value, radix, cultureSelector );
};

Globalize.prototype.parseFloat = function( value, radix, cultureSelector ) {
	return Globalize.parseFloat.call( this, value, radix, cultureSelector );
};

Globalize.prototype.culture = function( cultureSelector ) {
	return Globalize.culture.call( this, cultureSelector );
};

//
// public singleton functions
//

Globalize.addCultureInfo = function( cultureName, baseCultureName, info ) {

	var base = {},
		isNew = false;

	if ( typeof cultureName !== "string" ) {
		// cultureName argument is optional string. If not specified, assume info is first
		// and only argument. Specified info deep-extends current culture.
		info = cultureName;
		cultureName = this.culture().name;
		base = this.cultures[ cultureName ];
	} else if ( typeof baseCultureName !== "string" ) {
		// baseCultureName argument is optional string. If not specified, assume info is second
		// argument. Specified info deep-extends specified culture.
		// If specified culture does not exist, create by deep-extending default
		info = baseCultureName;
		isNew = ( this.cultures[ cultureName ] == null );
		base = this.cultures[ cultureName ] || this.cultures[ "default" ];
	} else {
		// cultureName and baseCultureName specified. Assume a new culture is being created
		// by deep-extending an specified base culture
		isNew = true;
		base = this.cultures[ baseCultureName ];
	}

	this.cultures[ cultureName ] = extend(true, {},
		base,
		info
	);
	// Make the standard calendar the current culture if it's a new culture
	if ( isNew ) {
		this.cultures[ cultureName ].calendar = this.cultures[ cultureName ].calendars.standard;
	}
};

Globalize.findClosestCulture = function( name ) {
	var match;
	if ( !name ) {
		return this.findClosestCulture( this.cultureSelector ) || this.cultures[ "default" ];
	}
	if ( typeof name === "string" ) {
		name = name.split( "," );
	}
	if ( isArray(name) ) {
		var lang,
			cultures = this.cultures,
			list = name,
			i, l = list.length,
			prioritized = [];
		for ( i = 0; i < l; i++ ) {
			name = trim( list[i] );
			var pri, parts = name.split( ";" );
			lang = trim( parts[0] );
			if ( parts.length === 1 ) {
				pri = 1;
			}
			else {
				name = trim( parts[1] );
				if ( name.indexOf("q=") === 0 ) {
					name = name.substr( 2 );
					pri = parseFloat( name );
					pri = isNaN( pri ) ? 0 : pri;
				}
				else {
					pri = 1;
				}
			}
			prioritized.push({ lang: lang, pri: pri });
		}
		prioritized.sort(function( a, b ) {
			if ( a.pri < b.pri ) {
				return 1;
			} else if ( a.pri > b.pri ) {
				return -1;
			}
			return 0;
		});
		// exact match
		for ( i = 0; i < l; i++ ) {
			lang = prioritized[ i ].lang;
			match = cultures[ lang ];
			if ( match ) {
				return match;
			}
		}

		// neutral language match
		for ( i = 0; i < l; i++ ) {
			lang = prioritized[ i ].lang;
			do {
				var index = lang.lastIndexOf( "-" );
				if ( index === -1 ) {
					break;
				}
				// strip off the last part. e.g. en-US => en
				lang = lang.substr( 0, index );
				match = cultures[ lang ];
				if ( match ) {
					return match;
				}
			}
			while ( 1 );
		}

		// last resort: match first culture using that language
		for ( i = 0; i < l; i++ ) {
			lang = prioritized[ i ].lang;
			for ( var cultureKey in cultures ) {
				var culture = cultures[ cultureKey ];
				if ( culture.language === lang ) {
					return culture;
				}
			}
		}
	}
	else if ( typeof name === "object" ) {
		return name;
	}
	return match || null;
};

Globalize.format = function( value, format, cultureSelector ) {
	var culture = this.findClosestCulture( cultureSelector );
	if ( value instanceof Date ) {
		value = formatDate( value, format, culture );
	}
	else if ( typeof value === "number" ) {
		value = formatNumber( value, format, culture );
	}
	return value;
};

Globalize.localize = function( key, cultureSelector ) {
	return this.findClosestCulture( cultureSelector ).messages[ key ] ||
		this.cultures[ "default" ].messages[ key ];
};

Globalize.parseDate = function( value, formats, culture ) {
	culture = this.findClosestCulture( culture );

	var date, prop, patterns;
	if ( formats ) {
		if ( typeof formats === "string" ) {
			formats = [ formats ];
		}
		if ( formats.length ) {
			for ( var i = 0, l = formats.length; i < l; i++ ) {
				var format = formats[ i ];
				if ( format ) {
					date = parseExact( value, format, culture );
					if ( date ) {
						break;
					}
				}
			}
		}
	} else {
		patterns = culture.calendar.patterns;
		for ( prop in patterns ) {
			date = parseExact( value, patterns[prop], culture );
			if ( date ) {
				break;
			}
		}
	}

	return date || null;
};

Globalize.parseInt = function( value, radix, cultureSelector ) {
	return truncate( Globalize.parseFloat(value, radix, cultureSelector) );
};

Globalize.parseFloat = function( value, radix, cultureSelector ) {
	// radix argument is optional
	if ( typeof radix !== "number" ) {
		cultureSelector = radix;
		radix = 10;
	}

	var culture = this.findClosestCulture( cultureSelector );
	var ret = NaN,
		nf = culture.numberFormat;

	if ( value.indexOf(culture.numberFormat.currency.symbol) > -1 ) {
		// remove currency symbol
		value = value.replace( culture.numberFormat.currency.symbol, "" );
		// replace decimal seperator
		value = value.replace( culture.numberFormat.currency["."], culture.numberFormat["."] );
	}

	//Remove percentage character from number string before parsing
	if ( value.indexOf(culture.numberFormat.percent.symbol) > -1){
		value = value.replace( culture.numberFormat.percent.symbol, "" );
	}

	// remove spaces: leading, trailing and between - and number. Used for negative currency pt-BR
	value = value.replace( / /g, "" );

	// allow infinity or hexidecimal
	if ( regexInfinity.test(value) ) {
		ret = parseFloat( value );
	}
	else if ( !radix && regexHex.test(value) ) {
		ret = parseInt( value, 16 );
	}
	else {

		// determine sign and number
		var signInfo = parseNegativePattern( value, nf, nf.pattern[0] ),
			sign = signInfo[ 0 ],
			num = signInfo[ 1 ];

		// #44 - try parsing as "(n)"
		if ( sign === "" && nf.pattern[0] !== "(n)" ) {
			signInfo = parseNegativePattern( value, nf, "(n)" );
			sign = signInfo[ 0 ];
			num = signInfo[ 1 ];
		}

		// try parsing as "-n"
		if ( sign === "" && nf.pattern[0] !== "-n" ) {
			signInfo = parseNegativePattern( value, nf, "-n" );
			sign = signInfo[ 0 ];
			num = signInfo[ 1 ];
		}

		sign = sign || "+";

		// determine exponent and number
		var exponent,
			intAndFraction,
			exponentPos = num.indexOf( "e" );
		if ( exponentPos < 0 ) exponentPos = num.indexOf( "E" );
		if ( exponentPos < 0 ) {
			intAndFraction = num;
			exponent = null;
		}
		else {
			intAndFraction = num.substr( 0, exponentPos );
			exponent = num.substr( exponentPos + 1 );
		}
		// determine decimal position
		var integer,
			fraction,
			decSep = nf[ "." ],
			decimalPos = intAndFraction.indexOf( decSep );
		if ( decimalPos < 0 ) {
			integer = intAndFraction;
			fraction = null;
		}
		else {
			integer = intAndFraction.substr( 0, decimalPos );
			fraction = intAndFraction.substr( decimalPos + decSep.length );
		}
		// handle groups (e.g. 1,000,000)
		var groupSep = nf[ "," ];
		integer = integer.split( groupSep ).join( "" );
		var altGroupSep = groupSep.replace( /\u00A0/g, " " );
		if ( groupSep !== altGroupSep ) {
			integer = integer.split( altGroupSep ).join( "" );
		}
		// build a natively parsable number string
		var p = sign + integer;
		if ( fraction !== null ) {
			p += "." + fraction;
		}
		if ( exponent !== null ) {
			// exponent itself may have a number patternd
			var expSignInfo = parseNegativePattern( exponent, nf, "-n" );
			p += "e" + ( expSignInfo[0] || "+" ) + expSignInfo[ 1 ];
		}
		if ( regexParseFloat.test(p) ) {
			ret = parseFloat( p );
		}
	}
	return ret;
};

Globalize.culture = function( cultureSelector ) {
	// setter
	if ( typeof cultureSelector !== "undefined" ) {
		this.cultureSelector = cultureSelector;
	}
	// getter
	return this.findClosestCulture( cultureSelector ) || this.cultures[ "default" ];
};

}( this ));
;
(function(a,b){var c;if(typeof require!=="undefined"&&typeof exports!=="undefined"&&typeof module!=="undefined"){c=require("globalize")}else{c=a.Globalize}c.addCultureInfo("en-GB","default",{name:"en-GB",englishName:"English (United Kingdom)",nativeName:"English (United Kingdom)",numberFormat:{currency:{pattern:["-$n","$n"],symbol:"£"}},calendars:{standard:{firstDay:1,patterns:{d:"dd/MM/yyyy",D:"dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dd MMMM yyyy HH:mm",F:"dd MMMM yyyy HH:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}});c.addCultureInfo("fr-FR","default",{name:"fr-FR",englishName:"French (France)",nativeName:"français (France)",language:"fr",numberFormat:{",":" ",".":",","NaN":"Non Numérique",negativeInfinity:"-Infini",positiveInfinity:"+Infini",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],namesAbbr:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],namesShort:["di","lu","ma","me","je","ve","sa"]},months:{names:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre",""],namesAbbr:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc.",""]},AM:null,PM:null,eras:[{name:"ap. J.-C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd d MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd d MMMM yyyy HH:mm",F:"dddd d MMMM yyyy HH:mm:ss",M:"d MMMM",Y:"MMMM yyyy"}}}});c.addCultureInfo("ja-JP","default",{name:"ja-JP",englishName:"Japanese (Japan)",nativeName:"日本語 (日本)",language:"ja",numberFormat:{"NaN":"NaN (非数値)",negativeInfinity:"-∞",positiveInfinity:"+∞",percent:{pattern:["-n%","n%"]},currency:{pattern:["-$n","$n"],decimals:0,symbol:"¥"}},calendars:{standard:{days:{names:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],namesAbbr:["日","月","火","水","木","金","土"],namesShort:["日","月","火","水","木","金","土"]},months:{names:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月",""],namesAbbr:["1","2","3","4","5","6","7","8","9","10","11","12",""]},AM:["午前","午前","午前"],PM:["午後","午後","午後"],eras:[{name:"西暦",start:null,offset:0}],patterns:{d:"yyyy/MM/dd",D:"yyyy'年'M'月'd'日'",t:"H:mm",T:"H:mm:ss",f:"yyyy'年'M'月'd'日' H:mm",F:"yyyy'年'M'月'd'日' H:mm:ss",M:"M'月'd'日'",Y:"yyyy'年'M'月'"}},Japanese:{name:"Japanese",days:{names:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],namesAbbr:["日","月","火","水","木","金","土"],namesShort:["日","月","火","水","木","金","土"]},months:{names:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月",""],namesAbbr:["1","2","3","4","5","6","7","8","9","10","11","12",""]},AM:["午前","午前","午前"],PM:["午後","午後","午後"],eras:[{name:"平成",start:null,offset:1867},{name:"昭和",start:-1812153600000,offset:1911},{name:"大正",start:-1357603200000,offset:1925},{name:"明治",start:60022080000,offset:1988}],twoDigitYearMax:99,patterns:{d:"gg y/M/d",D:"gg y'年'M'月'd'日'",t:"H:mm",T:"H:mm:ss",f:"gg y'年'M'月'd'日' H:mm",F:"gg y'年'M'月'd'日' H:mm:ss",M:"M'月'd'日'",Y:"gg y'年'M'月'"}}}})}(this));;
/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.0.6
 * 
 * Requires: 1.2.2+
 */
(function(a){function d(b){var c=b||window.event,d=[].slice.call(arguments,1),e=0,f=!0,g=0,h=0;return b=a.event.fix(c),b.type="mousewheel",c.wheelDelta&&(e=c.wheelDelta/120),c.detail&&(e=-c.detail/3),h=e,c.axis!==undefined&&c.axis===c.HORIZONTAL_AXIS&&(h=0,g=-1*e),c.wheelDeltaY!==undefined&&(h=c.wheelDeltaY/120),c.wheelDeltaX!==undefined&&(g=-1*c.wheelDeltaX/120),d.unshift(b,e,g,h),(a.event.dispatch||a.event.handle).apply(this,d)}var b=["DOMMouseScroll","mousewheel"];if(a.event.fixHooks)for(var c=b.length;c;)a.event.fixHooks[b[--c]]=a.event.mouseHooks;a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=b.length;a;)this.addEventListener(b[--a],d,!1);else this.onmousewheel=d},teardown:function(){if(this.removeEventListener)for(var a=b.length;a;)this.removeEventListener(b[--a],d,!1);else this.onmousewheel=null}},a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})})(jQuery)
;
/*
 * jQuery Form Plugin
 * version: 3.33.0-2013.05.02
 * @requires jQuery v1.5 or later
 * Copyright (c) 2013 M. Alsup
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses.
 * https://github.com/malsup/form#copyright-and-license
 */
(function(f){var c={};c.fileapi=f("<input type='file'/>").get(0).files!==undefined;c.formdata=window.FormData!==undefined;var e=!!f.fn.prop;f.fn.attr2=function(){if(!e){return this.attr.apply(this,arguments)}var g=this.prop.apply(this,arguments);if((g&&g.jquery)||typeof g==="string"){return g}return this.attr.apply(this,arguments)};f.fn.ajaxSubmit=function(j){if(!this.length){d("ajaxSubmit: skipping submit process - no element selected");return this}var i,C,m,o=this;if(typeof j=="function"){j={success:j}}i=this.attr2("method");C=this.attr2("action");m=(typeof C==="string")?f.trim(C):"";m=m||window.location.href||"";if(m){m=(m.match(/^([^#]+)/)||[])[1]}j=f.extend(true,{url:m,success:f.ajaxSettings.success,type:i||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},j);var u={};this.trigger("form-pre-serialize",[this,j,u]);if(u.veto){d("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(j.beforeSerialize&&j.beforeSerialize(this,j)===false){d("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var n=j.traditional;if(n===undefined){n=f.ajaxSettings.traditional}var s=[];var E,F=this.formToArray(j.semantic,s);if(j.data){j.extraData=j.data;E=f.param(j.data,n)}if(j.beforeSubmit&&j.beforeSubmit(F,this,j)===false){d("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[F,this,j,u]);if(u.veto){d("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var y=f.param(F,n);if(E){y=(y?(y+"&"+E):E)}if(j.type.toUpperCase()=="GET"){j.url+=(j.url.indexOf("?")>=0?"&":"?")+y;j.data=null}else{j.data=y}var H=[];if(j.resetForm){H.push(function(){o.resetForm()})}if(j.clearForm){H.push(function(){o.clearForm(j.includeHidden)})}if(!j.dataType&&j.target){var l=j.success||function(){};H.push(function(q){var k=j.replaceTarget?"replaceWith":"html";f(j.target)[k](q).each(l,arguments)})}else{if(j.success){H.push(j.success)}}j.success=function(K,q,L){var J=j.context||this;for(var I=0,k=H.length;I<k;I++){H[I].apply(J,[K,q,L||o,o])}};if(j.error){var z=j.error;j.error=function(J,k,q){var I=j.context||this;z.apply(I,[J,k,q,o])}}if(j.complete){var h=j.complete;j.complete=function(I,k){var q=j.context||this;h.apply(q,[I,k,o])}}var D=f('input[type=file]:enabled[value!=""]',this);var p=D.length>0;var B="multipart/form-data";var x=(o.attr("enctype")==B||o.attr("encoding")==B);var w=c.fileapi&&c.formdata;d("fileAPI :"+w);var r=(p||x)&&!w;var v;if(j.iframe!==false&&(j.iframe||r)){if(j.closeKeepAlive){f.get(j.closeKeepAlive,function(){v=G(F)})}else{v=G(F)}}else{if((p||x)&&w){v=t(F)}else{v=f.ajax(j)}}o.removeData("jqxhr").data("jqxhr",v);for(var A=0;A<s.length;A++){s[A]=null}this.trigger("form-submit-notify",[this,j]);return this;function g(K){var L=f.param(K).split("&");var q=L.length;var k=[];var J,I;for(J=0;J<q;J++){L[J]=L[J].replace(/\+/g," ");I=L[J].split("=");k.push([decodeURIComponent(I[0]),decodeURIComponent(I[1])])}return k}function t(q){var k=new FormData();for(var I=0;I<q.length;I++){k.append(q[I].name,q[I].value)}if(j.extraData){var L=g(j.extraData);for(I=0;I<L.length;I++){if(L[I]){k.append(L[I][0],L[I][1])}}}j.data=null;var K=f.extend(true,{},f.ajaxSettings,j,{contentType:false,processData:false,cache:false,type:i||"POST"});if(j.uploadProgress){K.xhr=function(){var M=jQuery.ajaxSettings.xhr();if(M.upload){M.upload.addEventListener("progress",function(Q){var P=0;var N=Q.loaded||Q.position;var O=Q.total;if(Q.lengthComputable){P=Math.ceil(N/O*100)}j.uploadProgress(Q,N,O,P)},false)}return M}}K.data=null;var J=K.beforeSend;K.beforeSend=function(N,M){M.data=k;if(J){J.call(this,N,M)}};return f.ajax(K)}function G(af){var L=o[0],K,ab,V,ad,Y,N,Q,O,P,Z,ac,T;var ai=f.Deferred();if(af){for(ab=0;ab<s.length;ab++){K=f(s[ab]);if(e){K.prop("disabled",false)}else{K.removeAttr("disabled")}}}V=f.extend(true,{},f.ajaxSettings,j);V.context=V.context||V;Y="jqFormIO"+(new Date().getTime());if(V.iframeTarget){N=f(V.iframeTarget);Z=N.attr2("name");if(!Z){N.attr2("name",Y)}else{Y=Z}}else{N=f('<iframe name="'+Y+'" src="'+V.iframeSrc+'" />');N.css({position:"absolute",top:"-1000px",left:"-1000px"})}Q=N[0];O={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(aj){var ak=(aj==="timeout"?"timeout":"aborted");d("aborting upload... "+ak);this.aborted=1;try{if(Q.contentWindow.document.execCommand){Q.contentWindow.document.execCommand("Stop")}}catch(al){}N.attr("src",V.iframeSrc);O.error=ak;if(V.error){V.error.call(V.context,O,ak,aj)}if(ad){f.event.trigger("ajaxError",[O,V,ak])}if(V.complete){V.complete.call(V.context,O,ak)}}};ad=V.global;if(ad&&0===f.active++){f.event.trigger("ajaxStart")}if(ad){f.event.trigger("ajaxSend",[O,V])}if(V.beforeSend&&V.beforeSend.call(V.context,O,V)===false){if(V.global){f.active--}ai.reject();return ai}if(O.aborted){ai.reject();return ai}P=L.clk;if(P){Z=P.name;if(Z&&!P.disabled){V.extraData=V.extraData||{};V.extraData[Z]=P.value;if(P.type=="image"){V.extraData[Z+".x"]=L.clk_x;V.extraData[Z+".y"]=L.clk_y}}}var U=1;var R=2;function S(al){var ak=null;try{if(al.contentWindow){ak=al.contentWindow.document}}catch(aj){d("cannot get iframe.contentWindow document: "+aj)}if(ak){return ak}try{ak=al.contentDocument?al.contentDocument:al.document}catch(aj){d("cannot get iframe.contentDocument: "+aj);ak=al.document}return ak}var J=f("meta[name=csrf-token]").attr("content");var I=f("meta[name=csrf-param]").attr("content");if(I&&J){V.extraData=V.extraData||{};V.extraData[I]=J}function aa(){var al=o.attr2("target"),aj=o.attr2("action");L.setAttribute("target",Y);if(!i){L.setAttribute("method","POST")}if(aj!=V.url){L.setAttribute("action",V.url)}if(!V.skipEncodingOverride&&(!i||/post/i.test(i))){o.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(V.timeout){T=setTimeout(function(){ac=true;X(U)},V.timeout)}function am(){try{var aq=S(Q).readyState;d("state = "+aq);if(aq&&aq.toLowerCase()=="uninitialized"){setTimeout(am,50)}}catch(ar){d("Server abort: ",ar," (",ar.name,")");X(R);if(T){clearTimeout(T)}T=undefined}}var ak=[];try{if(V.extraData){for(var ap in V.extraData){if(V.extraData.hasOwnProperty(ap)){if(f.isPlainObject(V.extraData[ap])&&V.extraData[ap].hasOwnProperty("name")&&V.extraData[ap].hasOwnProperty("value")){ak.push(f('<input type="hidden" name="'+V.extraData[ap].name+'">').val(V.extraData[ap].value).appendTo(L)[0])}else{ak.push(f('<input type="hidden" name="'+ap+'">').val(V.extraData[ap]).appendTo(L)[0])}}}}if(!V.iframeTarget){N.appendTo("body");if(Q.attachEvent){Q.attachEvent("onload",X)}else{Q.addEventListener("load",X,false)}}setTimeout(am,15);try{L.submit()}catch(an){var ao=document.createElement("form").submit;ao.apply(L)}}finally{L.setAttribute("action",aj);if(al){L.setAttribute("target",al)}else{o.removeAttr("target")}f(ak).remove()}}if(V.forceSync){aa()}else{setTimeout(aa,10)}var ag,ah,ae=50,M;function X(ap){if(O.aborted||M){return}ah=S(Q);if(!ah){d("cannot access response document");ap=R}if(ap===U&&O){O.abort("timeout");ai.reject(O,"timeout");return}else{if(ap==R&&O){O.abort("server abort");ai.reject(O,"error","server abort");return}}if(!ah||ah.location.href==V.iframeSrc){if(!ac){return}}if(Q.detachEvent){Q.detachEvent("onload",X)}else{Q.removeEventListener("load",X,false)}var an="success",ar;try{if(ac){throw"timeout"}var am=V.dataType=="xml"||ah.XMLDocument||f.isXMLDoc(ah);d("isXml="+am);if(!am&&window.opera&&(ah.body===null||!ah.body.innerHTML)){if(--ae){d("requeing onLoad callback, DOM not available");setTimeout(X,250);return}}var at=ah.body?ah.body:ah.documentElement;O.responseText=at?at.innerHTML:null;O.responseXML=ah.XMLDocument?ah.XMLDocument:ah;if(am){V.dataType="xml"}O.getResponseHeader=function(aw){var av={"content-type":V.dataType};return av[aw]};if(at){O.status=Number(at.getAttribute("status"))||O.status;O.statusText=at.getAttribute("statusText")||O.statusText}var aj=(V.dataType||"").toLowerCase();var aq=/(json|script|text)/.test(aj);if(aq||V.textarea){var ao=ah.getElementsByTagName("textarea")[0];if(ao){O.responseText=ao.value;O.status=Number(ao.getAttribute("status"))||O.status;O.statusText=ao.getAttribute("statusText")||O.statusText}else{if(aq){var ak=ah.getElementsByTagName("pre")[0];var au=ah.getElementsByTagName("body")[0];if(ak){O.responseText=ak.textContent?ak.textContent:ak.innerText}else{if(au){O.responseText=au.textContent?au.textContent:au.innerText}}}}}else{if(aj=="xml"&&!O.responseXML&&O.responseText){O.responseXML=W(O.responseText)}}try{ag=k(O,aj,V)}catch(al){an="parsererror";O.error=ar=(al||an)}}catch(al){d("error caught: ",al);an="error";O.error=ar=(al||an)}if(O.aborted){d("upload aborted");an=null}if(O.status){an=(O.status>=200&&O.status<300||O.status===304)?"success":"error"}if(an==="success"){if(V.success){V.success.call(V.context,ag,"success",O)}ai.resolve(O.responseText,"success",O);if(ad){f.event.trigger("ajaxSuccess",[O,V])}}else{if(an){if(ar===undefined){ar=O.statusText}if(V.error){V.error.call(V.context,O,an,ar)}ai.reject(O,"error",ar);if(ad){f.event.trigger("ajaxError",[O,V,ar])}}}if(ad){f.event.trigger("ajaxComplete",[O,V])}if(ad&&!--f.active){f.event.trigger("ajaxStop")}if(V.complete){V.complete.call(V.context,O,an)}M=true;if(V.timeout){clearTimeout(T)}setTimeout(function(){if(!V.iframeTarget){N.remove()}O.responseXML=null},100)}var W=f.parseXML||function(aj,ak){if(window.ActiveXObject){ak=new ActiveXObject("Microsoft.XMLDOM");ak.async="false";ak.loadXML(aj)}else{ak=(new DOMParser()).parseFromString(aj,"text/xml")}return(ak&&ak.documentElement&&ak.documentElement.nodeName!="parsererror")?ak:null};var q=f.parseJSON||function(aj){return window["eval"]("("+aj+")")};var k=function(ao,am,al){var ak=ao.getResponseHeader("content-type")||"",aj=am==="xml"||!am&&ak.indexOf("xml")>=0,an=aj?ao.responseXML:ao.responseText;if(aj&&an.documentElement.nodeName==="parsererror"){if(f.error){f.error("parsererror")}}if(al&&al.dataFilter){an=al.dataFilter(an,am)}if(typeof an==="string"){if(am==="json"||!am&&ak.indexOf("json")>=0){an=q(an)}else{if(am==="script"||!am&&ak.indexOf("javascript")>=0){f.globalEval(an)}}}return an};return ai}};f.fn.ajaxForm=function(g){g=g||{};g.delegation=g.delegation&&f.isFunction(f.fn.on);if(!g.delegation&&this.length===0){var h={s:this.selector,c:this.context};if(!f.isReady&&h.s){d("DOM not ready, queuing ajaxForm");f(function(){f(h.s,h.c).ajaxForm(g)});return this}d("terminating; zero elements found by selector"+(f.isReady?"":" (DOM not ready)"));return this}if(g.delegation){f(document).off("submit.form-plugin",this.selector,b).off("click.form-plugin",this.selector,a).on("submit.form-plugin",this.selector,g,b).on("click.form-plugin",this.selector,g,a);return this}return this.ajaxFormUnbind().bind("submit.form-plugin",g,b).bind("click.form-plugin",g,a)};function b(h){var g=h.data;if(!h.isDefaultPrevented()){h.preventDefault();f(this).ajaxSubmit(g)}}function a(k){var j=k.target;var h=f(j);if(!(h.is("[type=submit],[type=image]"))){var g=h.closest("[type=submit]");if(g.length===0){return}j=g[0]}var i=this;i.clk=j;if(j.type=="image"){if(k.offsetX!==undefined){i.clk_x=k.offsetX;i.clk_y=k.offsetY}else{if(typeof f.fn.offset=="function"){var l=h.offset();i.clk_x=k.pageX-l.left;i.clk_y=k.pageY-l.top}else{i.clk_x=k.pageX-j.offsetLeft;i.clk_y=k.pageY-j.offsetTop}}}setTimeout(function(){i.clk=i.clk_x=i.clk_y=null},100)}f.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};f.fn.formToArray=function(x,g){var w=[];if(this.length===0){return w}var l=this[0];var p=x?l.getElementsByTagName("*"):l.elements;if(!p){return w}var r,q,o,y,m,t,k;for(r=0,t=p.length;r<t;r++){m=p[r];o=m.name;if(!o||m.disabled){continue}if(x&&l.clk&&m.type=="image"){if(l.clk==m){w.push({name:o,value:f(m).val(),type:m.type});w.push({name:o+".x",value:l.clk_x},{name:o+".y",value:l.clk_y})}continue}y=f.fieldValue(m,true);if(y&&y.constructor==Array){if(g){g.push(m)}for(q=0,k=y.length;q<k;q++){w.push({name:o,value:y[q]})}}else{if(c.fileapi&&m.type=="file"){if(g){g.push(m)}var h=m.files;if(h.length){for(q=0;q<h.length;q++){w.push({name:o,value:h[q],type:m.type})}}else{w.push({name:o,value:"",type:m.type})}}else{if(y!==null&&typeof y!="undefined"){if(g){g.push(m)}w.push({name:o,value:y,type:m.type,required:m.required})}}}}if(!x&&l.clk){var s=f(l.clk),u=s[0];o=u.name;if(o&&!u.disabled&&u.type=="image"){w.push({name:o,value:s.val()});w.push({name:o+".x",value:l.clk_x},{name:o+".y",value:l.clk_y})}}return w};f.fn.formSerialize=function(g){return f.param(this.formToArray(g))};f.fn.fieldSerialize=function(h){var g=[];this.each(function(){var m=this.name;if(!m){return}var k=f.fieldValue(this,h);if(k&&k.constructor==Array){for(var l=0,j=k.length;l<j;l++){g.push({name:m,value:k[l]})}}else{if(k!==null&&typeof k!="undefined"){g.push({name:this.name,value:k})}}});return f.param(g)};f.fn.fieldValue=function(m){for(var l=[],j=0,g=this.length;j<g;j++){var k=this[j];var h=f.fieldValue(k,m);if(h===null||typeof h=="undefined"||(h.constructor==Array&&!h.length)){continue}if(h.constructor==Array){f.merge(l,h)}else{l.push(h)}}return l};f.fieldValue=function(g,o){var j=g.name,u=g.type,w=g.tagName.toLowerCase();if(o===undefined){o=true}if(o&&(!j||g.disabled||u=="reset"||u=="button"||(u=="checkbox"||u=="radio")&&!g.checked||(u=="submit"||u=="image")&&g.form&&g.form.clk!=g||w=="select"&&g.selectedIndex==-1)){return null}if(w=="select"){var p=g.selectedIndex;if(p<0){return null}var r=[],h=g.options;var l=(u=="select-one");var q=(l?p+1:h.length);for(var k=(l?p:0);k<q;k++){var m=h[k];if(m.selected){var s=m.value;if(!s){s=(m.attributes&&m.attributes.value&&!(m.attributes.value.specified))?m.text:m.value}if(l){return s}r.push(s)}}return r}return f(g).val()};f.fn.clearForm=function(g){return this.each(function(){f("input,select,textarea",this).clearFields(g)})};f.fn.clearFields=f.fn.clearInputs=function(g){var h=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var j=this.type,i=this.tagName.toLowerCase();if(h.test(j)||i=="textarea"){this.value=""}else{if(j=="checkbox"||j=="radio"){this.checked=false}else{if(i=="select"){this.selectedIndex=-1}else{if(j=="file"){if(/MSIE/.test(navigator.userAgent)){f(this).replaceWith(f(this).clone(true))}else{f(this).val("")}}else{if(g){if((g===true&&/hidden/.test(j))||(typeof g=="string"&&f(this).is(g))){this.value=""}}}}}}})};f.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})};f.fn.enable=function(g){if(g===undefined){g=true}return this.each(function(){this.disabled=!g})};f.fn.selected=function(g){if(g===undefined){g=true}return this.each(function(){var h=this.type;if(h=="checkbox"||h=="radio"){this.checked=g}else{if(this.tagName.toLowerCase()=="option"){var i=f(this).parent("select");if(g&&i[0]&&i[0].type=="select-one"){i.find("option").selected(false)}this.selected=g}}})};f.fn.ajaxSubmit.debug=false;function d(){if(!f.fn.ajaxSubmit.debug){return}var g="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(g)}else{if(window.opera&&window.opera.postError){window.opera.postError(g)}}}})(jQuery);;
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(e,t){function i(t,i){var a,n,r,o=t.nodeName.toLowerCase();return"area"===o?(a=t.parentNode,n=a.name,t.href&&n&&"map"===a.nodeName.toLowerCase()?(r=e("img[usemap=#"+n+"]")[0],!!r&&s(r)):!1):(/input|select|textarea|button|object/.test(o)?!t.disabled:"a"===o?t.href||i:i)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var a=0,n=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,s){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),s&&s.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var s,a,n=e(this[0]);n.length&&n[0]!==document;){if(s=n.css("position"),("absolute"===s||"relative"===s||"fixed"===s)&&(a=parseInt(n.css("zIndex"),10),!isNaN(a)&&0!==a))return a;n=n.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})},removeUniqueId:function(){return this.each(function(){n.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,s){return!!e.data(t,s[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var s=e.attr(t,"tabindex"),a=isNaN(s);return(a||s>=0)&&i(t,!a)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,s){function a(t,i,s,a){return e.each(n,function(){i-=parseFloat(e.css(t,"padding"+this))||0,s&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var n="Width"===s?["Left","Right"]:["Top","Bottom"],r=s.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+s]=function(i){return i===t?o["inner"+s].call(this):this.each(function(){e(this).css(r,a(this,i)+"px")})},e.fn["outer"+s]=function(t,i){return"number"!=typeof t?o["outer"+s].call(this,t):this.each(function(){e(this).css(r,a(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,s){var a,n=e.ui[t].prototype;for(a in s)n.plugins[a]=n.plugins[a]||[],n.plugins[a].push([i,s[a]])},call:function(e,t,i){var s,a=e.plugins[t];if(a&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(s=0;a.length>s;s++)e.options[a[s][0]]&&a[s][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",a=!1;return t[s]>0?!0:(t[s]=1,a=t[s]>0,t[s]=0,a)}})})(jQuery);;
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(e,t){var i=0,s=Array.prototype.slice,n=e.cleanData;e.cleanData=function(t){for(var i,s=0;null!=(i=t[s]);s++)try{e(i).triggerHandler("remove")}catch(a){}n(t)},e.widget=function(i,s,n){var a,r,o,h,l={},u=i.split(".")[0];i=i.split(".")[1],a=u+"-"+i,n||(n=s,s=e.Widget),e.expr[":"][a.toLowerCase()]=function(t){return!!e.data(t,a)},e[u]=e[u]||{},r=e[u][i],o=e[u][i]=function(e,i){return this._createWidget?(arguments.length&&this._createWidget(e,i),t):new o(e,i)},e.extend(o,r,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),h=new s,h.options=e.widget.extend({},h.options),e.each(n,function(i,n){return e.isFunction(n)?(l[i]=function(){var e=function(){return s.prototype[i].apply(this,arguments)},t=function(e){return s.prototype[i].apply(this,e)};return function(){var i,s=this._super,a=this._superApply;return this._super=e,this._superApply=t,i=n.apply(this,arguments),this._super=s,this._superApply=a,i}}(),t):(l[i]=n,t)}),o.prototype=e.widget.extend(h,{widgetEventPrefix:r?h.widgetEventPrefix:i},l,{constructor:o,namespace:u,widgetName:i,widgetFullName:a}),r?(e.each(r._childConstructors,function(t,i){var s=i.prototype;e.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete r._childConstructors):s._childConstructors.push(o),e.widget.bridge(i,o)},e.widget.extend=function(i){for(var n,a,r=s.call(arguments,1),o=0,h=r.length;h>o;o++)for(n in r[o])a=r[o][n],r[o].hasOwnProperty(n)&&a!==t&&(i[n]=e.isPlainObject(a)?e.isPlainObject(i[n])?e.widget.extend({},i[n],a):e.widget.extend({},a):a);return i},e.widget.bridge=function(i,n){var a=n.prototype.widgetFullName||i;e.fn[i]=function(r){var o="string"==typeof r,h=s.call(arguments,1),l=this;return r=!o&&h.length?e.widget.extend.apply(null,[r].concat(h)):r,o?this.each(function(){var s,n=e.data(this,a);return n?e.isFunction(n[r])&&"_"!==r.charAt(0)?(s=n[r].apply(n,h),s!==n&&s!==t?(l=s&&s.jquery?l.pushStack(s.get()):s,!1):t):e.error("no such method '"+r+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; "+"attempted to call method '"+r+"'")}):this.each(function(){var t=e.data(this,a);t?t.option(r||{})._init():e.data(this,a,new n(r,this))}),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,s){s=e(s||this.defaultElement||this)[0],this.element=e(s),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),s!==this&&(e.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===s&&this.destroy()}}),this.document=e(s.style?s.ownerDocument:s.document||s),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,s){var n,a,r,o=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(o={},n=i.split("."),i=n.shift(),n.length){for(a=o[i]=e.widget.extend({},this.options[i]),r=0;n.length-1>r;r++)a[n[r]]=a[n[r]]||{},a=a[n[r]];if(i=n.pop(),s===t)return a[i]===t?null:a[i];a[i]=s}else{if(s===t)return this.options[i]===t?null:this.options[i];o[i]=s}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(i,s,n){var a,r=this;"boolean"!=typeof i&&(n=s,s=i,i=!1),n?(s=a=e(s),this.bindings=this.bindings.add(s)):(n=s,s=this.element,a=this.widget()),e.each(n,function(n,o){function h(){return i||r.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?r[o]:o).apply(r,arguments):t}"string"!=typeof o&&(h.guid=o.guid=o.guid||h.guid||e.guid++);var l=n.match(/^(\w+)\s*(.*)$/),u=l[1]+r.eventNamespace,c=l[2];c?a.delegate(c,u,h):s.bind(u,h)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?s[e]:e).apply(s,arguments)}var s=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,s){var n,a,r=this.options[t];if(s=s||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(n in a)n in i||(i[n]=a[n]);return this.element.trigger(i,s),!(e.isFunction(r)&&r.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(s,n,a){"string"==typeof n&&(n={effect:n});var r,o=n?n===!0||"number"==typeof n?i:n.effect||i:t;n=n||{},"number"==typeof n&&(n={duration:n}),r=!e.isEmptyObject(n),n.complete=a,n.delay&&s.delay(n.delay),r&&e.effects&&e.effects.effect[o]?s[t](n):o!==t&&s[o]?s[o](n.duration,n.easing,a):s.queue(function(i){e(this)[t](),a&&a.call(s[0]),i()})}})})(jQuery);;
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t,e){function i(t,e,i){return[parseFloat(t[0])*(p.test(t[0])?e/100:1),parseFloat(t[1])*(p.test(t[1])?i/100:1)]}function s(e,i){return parseInt(t.css(e,i),10)||0}function n(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var a,o=Math.max,r=Math.abs,h=Math.round,l=/left|center|right/,c=/top|center|bottom/,u=/[\+\-]\d+(\.[\d]+)?%?/,d=/^\w+/,p=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(a!==e)return a;var i,s,n=t("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=n.children()[0];return t("body").append(n),i=o.offsetWidth,n.css("overflow","scroll"),s=o.offsetWidth,i===s&&(s=n[0].clientWidth),n.remove(),a=i-s},getScrollInfo:function(e){var i=e.isWindow?"":e.element.css("overflow-x"),s=e.isWindow?"":e.element.css("overflow-y"),n="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,a="scroll"===s||"auto"===s&&e.height<e.element[0].scrollHeight;return{width:a?t.position.scrollbarWidth():0,height:n?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),s=t.isWindow(i[0]);return{element:i,isWindow:s,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s?i.width():i.outerWidth(),height:s?i.height():i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return f.apply(this,arguments);e=t.extend({},e);var a,p,m,g,v,b,_=t(e.of),y=t.position.getWithinInfo(e.within),w=t.position.getScrollInfo(y),x=(e.collision||"flip").split(" "),k={};return b=n(_),_[0].preventDefault&&(e.at="left top"),p=b.width,m=b.height,g=b.offset,v=t.extend({},g),t.each(["my","at"],function(){var t,i,s=(e[this]||"").split(" ");1===s.length&&(s=l.test(s[0])?s.concat(["center"]):c.test(s[0])?["center"].concat(s):["center","center"]),s[0]=l.test(s[0])?s[0]:"center",s[1]=c.test(s[1])?s[1]:"center",t=u.exec(s[0]),i=u.exec(s[1]),k[this]=[t?t[0]:0,i?i[0]:0],e[this]=[d.exec(s[0])[0],d.exec(s[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===e.at[0]?v.left+=p:"center"===e.at[0]&&(v.left+=p/2),"bottom"===e.at[1]?v.top+=m:"center"===e.at[1]&&(v.top+=m/2),a=i(k.at,p,m),v.left+=a[0],v.top+=a[1],this.each(function(){var n,l,c=t(this),u=c.outerWidth(),d=c.outerHeight(),f=s(this,"marginLeft"),b=s(this,"marginTop"),D=u+f+s(this,"marginRight")+w.width,T=d+b+s(this,"marginBottom")+w.height,C=t.extend({},v),M=i(k.my,c.outerWidth(),c.outerHeight());"right"===e.my[0]?C.left-=u:"center"===e.my[0]&&(C.left-=u/2),"bottom"===e.my[1]?C.top-=d:"center"===e.my[1]&&(C.top-=d/2),C.left+=M[0],C.top+=M[1],t.support.offsetFractions||(C.left=h(C.left),C.top=h(C.top)),n={marginLeft:f,marginTop:b},t.each(["left","top"],function(i,s){t.ui.position[x[i]]&&t.ui.position[x[i]][s](C,{targetWidth:p,targetHeight:m,elemWidth:u,elemHeight:d,collisionPosition:n,collisionWidth:D,collisionHeight:T,offset:[a[0]+M[0],a[1]+M[1]],my:e.my,at:e.at,within:y,elem:c})}),e.using&&(l=function(t){var i=g.left-C.left,s=i+p-u,n=g.top-C.top,a=n+m-d,h={target:{element:_,left:g.left,top:g.top,width:p,height:m},element:{element:c,left:C.left,top:C.top,width:u,height:d},horizontal:0>s?"left":i>0?"right":"center",vertical:0>a?"top":n>0?"bottom":"middle"};u>p&&p>r(i+s)&&(h.horizontal="center"),d>m&&m>r(n+a)&&(h.vertical="middle"),h.important=o(r(i),r(s))>o(r(n),r(a))?"horizontal":"vertical",e.using.call(this,t,h)}),c.offset(t.extend(C,{using:l}))})},t.ui.position={fit:{left:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollLeft:s.offset.left,a=s.width,r=t.left-e.collisionPosition.marginLeft,h=n-r,l=r+e.collisionWidth-a-n;e.collisionWidth>a?h>0&&0>=l?(i=t.left+h+e.collisionWidth-a-n,t.left+=h-i):t.left=l>0&&0>=h?n:h>l?n+a-e.collisionWidth:n:h>0?t.left+=h:l>0?t.left-=l:t.left=o(t.left-r,t.left)},top:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollTop:s.offset.top,a=e.within.height,r=t.top-e.collisionPosition.marginTop,h=n-r,l=r+e.collisionHeight-a-n;e.collisionHeight>a?h>0&&0>=l?(i=t.top+h+e.collisionHeight-a-n,t.top+=h-i):t.top=l>0&&0>=h?n:h>l?n+a-e.collisionHeight:n:h>0?t.top+=h:l>0?t.top-=l:t.top=o(t.top-r,t.top)}},flip:{left:function(t,e){var i,s,n=e.within,a=n.offset.left+n.scrollLeft,o=n.width,h=n.isWindow?n.scrollLeft:n.offset.left,l=t.left-e.collisionPosition.marginLeft,c=l-h,u=l+e.collisionWidth-o-h,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>c?(i=t.left+d+p+f+e.collisionWidth-o-a,(0>i||r(c)>i)&&(t.left+=d+p+f)):u>0&&(s=t.left-e.collisionPosition.marginLeft+d+p+f-h,(s>0||u>r(s))&&(t.left+=d+p+f))},top:function(t,e){var i,s,n=e.within,a=n.offset.top+n.scrollTop,o=n.height,h=n.isWindow?n.scrollTop:n.offset.top,l=t.top-e.collisionPosition.marginTop,c=l-h,u=l+e.collisionHeight-o-h,d="top"===e.my[1],p=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,m=-2*e.offset[1];0>c?(s=t.top+p+f+m+e.collisionHeight-o-a,t.top+p+f+m>c&&(0>s||r(c)>s)&&(t.top+=p+f+m)):u>0&&(i=t.top-e.collisionPosition.marginTop+p+f+m-h,t.top+p+f+m>u&&(i>0||u>r(i))&&(t.top+=p+f+m))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,s,n,a,o=document.getElementsByTagName("body")[0],r=document.createElement("div");e=document.createElement(o?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&t.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(a in s)e.style[a]=s[a];e.appendChild(r),i=o||document.documentElement,i.insertBefore(e,i.firstChild),r.style.cssText="position: absolute; left: 10.7432222px;",n=t(r).offset().left,t.support.offsetFractions=n>10&&11>n,e.innerHTML="",i.removeChild(e)}()})(jQuery);;
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):undefined}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var s=this,n=1===i.which,a="string"==typeof this.options.cancel&&i.target.nodeName?e(i.target).closest(this.options.cancel).length:!1;return n&&!a&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){s.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===e.data(i.target,this.widgetName+".preventClickEvent")&&e.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return s._mouseMove(e)},this._mouseUpDelegate=function(e){return s._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);;
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",t,s)===!1)return this._mouseUp({}),!1;this.position=s.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,s=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(s=e.ui.ddmanager.drop(this,t)),this.dropped&&(s=this.dropped,this.dropped=!1),"original"!==this.options.helper||e.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1):!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return s.parents("body").length||s.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s[0]===this.element[0]||/(fixed|absolute)/.test(s.css("position"))||s.css("position","absolute"),s},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,n=this.options;return n.containment?"window"===n.containment?(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],undefined):"document"===n.containment?(this.containment=[0,0,e(document).width()-this.helperProportions.width-this.margins.left,(e(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],undefined):n.containment.constructor===Array?(this.containment=n.containment,undefined):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),i=e(n.containment),s=i[0],s&&(t="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i),undefined):(this.containment=null,undefined)},_convertPositionTo:function(t,i){i||(i=this.position);var s="absolute"===t?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:n.scrollTop(),left:n.scrollLeft()}),{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*s}},_generatePosition:function(t){var i,s,n,a,o=this.options,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=t.pageX,l=t.pageY;return this.offset.scroll||(this.offset.scroll={top:r.scrollTop(),left:r.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(s=this.relative_container.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(h=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(l=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(h=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(l=i[3]+this.offset.click.top)),o.grid&&(n=o.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,l=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-o.grid[1]:n+o.grid[1]:n,a=o.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,h=i?a-this.offset.click.left>=i[0]||a-this.offset.click.left>i[2]?a:a-this.offset.click.left>=i[0]?a-o.grid[0]:a+o.grid[0]:a)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,s){return s=s||this._uiHash(),e.ui.plugin.call(this,t,[i,s]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var s=e(this).data("ui-draggable"),n=s.options,a=e.extend({},i,{item:s.element});s.sortables=[],e(n.connectToSortable).each(function(){var i=e.data(this,"ui-sortable");i&&!i.options.disabled&&(s.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,a))})},stop:function(t,i){var s=e(this).data("ui-draggable"),n=e.extend({},i,{item:s.element});e.each(s.sortables,function(){this.instance.isOver?(this.instance.isOver=0,s.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===s.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,n))})},drag:function(t,i){var s=e(this).data("ui-draggable"),n=this;e.each(s.sortables,function(){var a=!1,o=this;this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(a=!0,e.each(s.sortables,function(){return this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this!==o&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(o.instance.element[0],this.instance.element[0])&&(a=!1),a})),a?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(n).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=s.offset.click.top,this.instance.offset.click.left=s.offset.click.left,this.instance.offset.parent.left-=s.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=s.offset.parent.top-this.instance.offset.parent.top,s._trigger("toSortable",t),s.dropped=this.instance.element,s.currentItem=s.element,this.instance.fromOutside=s),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),s._trigger("fromSortable",t),s.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),i=e(this).data("ui-draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor")),t.css("cursor",i.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var s=e(i.helper),n=e(this).data("ui-draggable").options;s.css("opacity")&&(n._opacity=s.css("opacity")),s.css("opacity",n.opacity)},stop:function(t,i){var s=e(this).data("ui-draggable").options;s._opacity&&e(i.helper).css("opacity",s._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var i=e(this).data("ui-draggable"),s=i.options,n=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(s.axis&&"x"===s.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY<s.scrollSensitivity?i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop+s.scrollSpeed:t.pageY-i.overflowOffset.top<s.scrollSensitivity&&(i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop-s.scrollSpeed)),s.axis&&"y"===s.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX<s.scrollSensitivity?i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft+s.scrollSpeed:t.pageX-i.overflowOffset.left<s.scrollSensitivity&&(i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft-s.scrollSpeed))):(s.axis&&"x"===s.axis||(t.pageY-e(document).scrollTop()<s.scrollSensitivity?n=e(document).scrollTop(e(document).scrollTop()-s.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<s.scrollSensitivity&&(n=e(document).scrollTop(e(document).scrollTop()+s.scrollSpeed))),s.axis&&"y"===s.axis||(t.pageX-e(document).scrollLeft()<s.scrollSensitivity?n=e(document).scrollLeft(e(document).scrollLeft()-s.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<s.scrollSensitivity&&(n=e(document).scrollLeft(e(document).scrollLeft()+s.scrollSpeed)))),n!==!1&&e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),i=t.options;t.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=e(this),s=i.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:s.top,left:s.left})})},drag:function(t,i){var s,n,a,o,r,h,l,u,c,d,p=e(this).data("ui-draggable"),f=p.options,m=f.snapTolerance,g=i.offset.left,v=g+p.helperProportions.width,b=i.offset.top,y=b+p.helperProportions.height;for(c=p.snapElements.length-1;c>=0;c--)r=p.snapElements[c].left,h=r+p.snapElements[c].width,l=p.snapElements[c].top,u=l+p.snapElements[c].height,r-m>v||g>h+m||l-m>y||b>u+m||!e.contains(p.snapElements[c].item.ownerDocument,p.snapElements[c].item)?(p.snapElements[c].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=!1):("inner"!==f.snapMode&&(s=m>=Math.abs(l-y),n=m>=Math.abs(u-b),a=m>=Math.abs(r-v),o=m>=Math.abs(h-g),s&&(i.position.top=p._convertPositionTo("relative",{top:l-p.helperProportions.height,left:0}).top-p.margins.top),n&&(i.position.top=p._convertPositionTo("relative",{top:u,left:0}).top-p.margins.top),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r-p.helperProportions.width}).left-p.margins.left),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:h}).left-p.margins.left)),d=s||n||a||o,"outer"!==f.snapMode&&(s=m>=Math.abs(l-b),n=m>=Math.abs(u-y),a=m>=Math.abs(r-g),o=m>=Math.abs(h-v),s&&(i.position.top=p._convertPositionTo("relative",{top:l,left:0}).top-p.margins.top),n&&(i.position.top=p._convertPositionTo("relative",{top:u-p.helperProportions.height,left:0}).top-p.margins.top),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r}).left-p.margins.left),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:h-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[c].snapping&&(s||n||a||o||d)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=s||n||a||o||d)}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,i=this.data("ui-draggable").options,s=e.makeArray(e(i.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});s.length&&(t=parseInt(e(s[0]).css("zIndex"),10)||0,e(s).each(function(i){e(this).css("zIndex",t+i)}),this.css("zIndex",t+s.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var s=e(i.helper),n=e(this).data("ui-draggable").options;s.css("zIndex")&&(n._zIndex=s.css("zIndex")),s.css("zIndex",n.zIndex)},stop:function(t,i){var s=e(this).data("ui-draggable").options;s._zIndex&&e(i.helper).css("zIndex",s._zIndex)}})})(jQuery);;
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(e){function t(e,t,i){return e>t&&t+i>e}e.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t=this.options,i=t.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(i)?i:function(e){return e.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=0,i=e.ui.ddmanager.droppables[this.options.scope];i.length>t;t++)i[t]===this&&i.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){"accept"===t&&(this.accept=e.isFunction(i)?i:function(e){return e.is(i)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var s=i||e.ui.ddmanager.current,n=!1;return s&&(s.currentItem||s.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"ui-droppable");return t.options.greedy&&!t.options.disabled&&t.options.scope===s.options.scope&&t.accept.call(t.element[0],s.currentItem||s.element)&&e.ui.intersect(s,e.extend(t,{offset:t.element.offset()}),t.options.tolerance)?(n=!0,!1):undefined}),n?!1:this.accept.call(this.element[0],s.currentItem||s.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(s)),this.element):!1):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(e,i,s){if(!i.offset)return!1;var n,a,o=(e.positionAbs||e.position.absolute).left,r=o+e.helperProportions.width,h=(e.positionAbs||e.position.absolute).top,l=h+e.helperProportions.height,u=i.offset.left,c=u+i.proportions.width,d=i.offset.top,p=d+i.proportions.height;switch(s){case"fit":return o>=u&&c>=r&&h>=d&&p>=l;case"intersect":return o+e.helperProportions.width/2>u&&c>r-e.helperProportions.width/2&&h+e.helperProportions.height/2>d&&p>l-e.helperProportions.height/2;case"pointer":return n=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,a=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,t(a,d,i.proportions.height)&&t(n,u,i.proportions.width);case"touch":return(h>=d&&p>=h||l>=d&&p>=l||d>h&&l>p)&&(o>=u&&c>=o||r>=u&&c>=r||u>o&&r>c);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var s,n,a=e.ui.ddmanager.droppables[t.options.scope]||[],o=i?i.type:null,r=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(s=0;a.length>s;s++)if(!(a[s].options.disabled||t&&!a[s].accept.call(a[s].element[0],t.currentItem||t.element))){for(n=0;r.length>n;n++)if(r[n]===a[s].element[0]){a[s].proportions.height=0;continue e}a[s].visible="none"!==a[s].element.css("display"),a[s].visible&&("mousedown"===o&&a[s]._activate.call(a[s],i),a[s].offset=a[s].element.offset(),a[s].proportions={width:a[s].element[0].offsetWidth,height:a[s].element[0].offsetHeight})}},drop:function(t,i){var s=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),s},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s,n,a,o=e.ui.intersect(t,this,this.options.tolerance),r=!o&&this.isover?"isout":o&&!this.isover?"isover":null;r&&(this.options.greedy&&(n=this.options.scope,a=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===n}),a.length&&(s=e.data(a[0],"ui-droppable"),s.greedyChild="isover"===r)),s&&"isover"===r&&(s.isover=!1,s.isout=!0,s._out.call(s,i)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,i),s&&"isout"===r&&(s.isout=!1,s.isover=!0,s._over.call(s,i)))}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}}})(jQuery);;
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(e){function t(e){return parseInt(e,10)||0}function i(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,i,s,n,a,o=this,r=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;t.length>i;i++)s=e.trim(t[i]),a="ui-resizable-"+s,n=e("<div class='ui-resizable-handle "+a+"'></div>"),n.css({zIndex:r.zIndex}),"se"===s&&n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(n);this._renderAxis=function(t){var i,s,n,a;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=e(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(s=e(this.handles[i],this.element),a=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),n=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(n,a),this._proportionallyResize()),e(this.handles[i]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=n&&n[1]?n[1]:"se")}),r.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||(e(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){r.disabled||o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,s,n=!1;for(i in this.handles)s=e(this.handles[i])[0],(s===t.target||e.contains(s,t.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(i){var s,n,a,o=this.options,r=this.element.position(),h=this.element;return this.resizing=!0,/absolute/.test(h.css("position"))?h.css({position:"absolute",top:h.css("top"),left:h.css("left")}):h.is(".ui-draggable")&&h.css({position:"absolute",top:r.top,left:r.left}),this._renderProxy(),s=t(this.helper.css("left")),n=t(this.helper.css("top")),o.containment&&(s+=e(o.containment).scrollLeft()||0,n+=e(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:s,top:n},this.size=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:{width:h.width(),height:h.height()},this.originalSize=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:{width:h.width(),height:h.height()},this.originalPosition={left:s,top:n},this.sizeDiff={width:h.outerWidth()-h.width(),height:h.outerHeight()-h.height()},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,a=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===a?this.axis+"-resize":a),h.addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(t){var i,s=this.helper,n={},a=this.originalMousePosition,o=this.axis,r=this.position.top,h=this.position.left,l=this.size.width,u=this.size.height,c=t.pageX-a.left||0,d=t.pageY-a.top||0,p=this._change[o];return p?(i=p.apply(this,[t,c,d]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),this.position.top!==r&&(n.top=this.position.top+"px"),this.position.left!==h&&(n.left=this.position.left+"px"),this.size.width!==l&&(n.width=this.size.width+"px"),this.size.height!==u&&(n.height=this.size.height+"px"),s.css(n),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(n)||this._trigger("resize",t,this.ui()),!1):!1},_mouseStop:function(t){this.resizing=!1;var i,s,n,a,o,r,h,l=this.options,u=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),n=s&&e.ui.hasScroll(i[0],"left")?0:u.sizeDiff.height,a=s?0:u.sizeDiff.width,o={width:u.helper.width()-a,height:u.helper.height()-n},r=parseInt(u.element.css("left"),10)+(u.position.left-u.originalPosition.left)||null,h=parseInt(u.element.css("top"),10)+(u.position.top-u.originalPosition.top)||null,l.animate||this.element.css(e.extend(o,{top:h,left:r})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!l.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,s,n,a,o,r=this.options;o={minWidth:i(r.minWidth)?r.minWidth:0,maxWidth:i(r.maxWidth)?r.maxWidth:1/0,minHeight:i(r.minHeight)?r.minHeight:0,maxHeight:i(r.maxHeight)?r.maxHeight:1/0},(this._aspectRatio||e)&&(t=o.minHeight*this.aspectRatio,n=o.minWidth/this.aspectRatio,s=o.maxHeight*this.aspectRatio,a=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),n>o.minHeight&&(o.minHeight=n),o.maxWidth>s&&(o.maxWidth=s),o.maxHeight>a&&(o.maxHeight=a)),this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),i(e.left)&&(this.position.left=e.left),i(e.top)&&(this.position.top=e.top),i(e.height)&&(this.size.height=e.height),i(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,s=this.size,n=this.axis;return i(e.height)?e.width=e.height*this.aspectRatio:i(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===n&&(e.left=t.left+(s.width-e.width),e.top=null),"nw"===n&&(e.top=t.top+(s.height-e.height),e.left=t.left+(s.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,s=this.axis,n=i(e.width)&&t.maxWidth&&t.maxWidth<e.width,a=i(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=i(e.width)&&t.minWidth&&t.minWidth>e.width,r=i(e.height)&&t.minHeight&&t.minHeight>e.height,h=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,u=/sw|nw|w/.test(s),c=/nw|ne|n/.test(s);return o&&(e.width=t.minWidth),r&&(e.height=t.minHeight),n&&(e.width=t.maxWidth),a&&(e.height=t.maxHeight),o&&u&&(e.left=h-t.minWidth),n&&u&&(e.left=h-t.maxWidth),r&&c&&(e.top=l-t.minHeight),a&&c&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,i,s,n,a=this.helper||this.element;for(e=0;this._proportionallyResizeElements.length>e;e++){if(n=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],i=[n.css("borderTopWidth"),n.css("borderRightWidth"),n.css("borderBottomWidth"),n.css("borderLeftWidth")],s=[n.css("paddingTop"),n.css("paddingRight"),n.css("paddingBottom"),n.css("paddingLeft")],t=0;i.length>t;t++)this.borderDif[t]=(parseInt(i[t],10)||0)+(parseInt(s[t],10)||0);n.css({height:a.height()-this.borderDif[0]-this.borderDif[2]||0,width:a.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize,s=this.originalPosition;return{left:s.left+t,width:i.width-t}},n:function(e,t,i){var s=this.originalSize,n=this.originalPosition;return{top:n.top+i,height:s.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},sw:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,s]))},ne:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},nw:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,s]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).data("ui-resizable"),s=i.options,n=i._proportionallyResizeElements,a=n.length&&/textarea/i.test(n[0].nodeName),o=a&&e.ui.hasScroll(n[0],"left")?0:i.sizeDiff.height,r=a?0:i.sizeDiff.width,h={width:i.size.width-r,height:i.size.height-o},l=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,u=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(h,u&&l?{top:u,left:l}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};n&&n.length&&e(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var i,s,n,a,o,r,h,l=e(this).data("ui-resizable"),u=l.options,c=l.element,d=u.containment,p=d instanceof e?d.get(0):/parent/.test(d)?c.parent().get(0):d;p&&(l.containerElement=e(p),/document/.test(d)||d===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(i=e(p),s=[],e(["Top","Right","Left","Bottom"]).each(function(e,n){s[e]=t(i.css("padding"+n))}),l.containerOffset=i.offset(),l.containerPosition=i.position(),l.containerSize={height:i.innerHeight()-s[3],width:i.innerWidth()-s[1]},n=l.containerOffset,a=l.containerSize.height,o=l.containerSize.width,r=e.ui.hasScroll(p,"left")?p.scrollWidth:o,h=e.ui.hasScroll(p)?p.scrollHeight:a,l.parentData={element:p,left:n.left,top:n.top,width:r,height:h}))},resize:function(t){var i,s,n,a,o=e(this).data("ui-resizable"),r=o.options,h=o.containerOffset,l=o.position,u=o._aspectRatio||t.shiftKey,c={top:0,left:0},d=o.containerElement;d[0]!==document&&/static/.test(d.css("position"))&&(c=h),l.left<(o._helper?h.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-h.left:o.position.left-c.left),u&&(o.size.height=o.size.width/o.aspectRatio),o.position.left=r.helper?h.left:0),l.top<(o._helper?h.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-h.top:o.position.top),u&&(o.size.width=o.size.height*o.aspectRatio),o.position.top=o._helper?h.top:0),o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top,i=Math.abs((o._helper?o.offset.left-c.left:o.offset.left-c.left)+o.sizeDiff.width),s=Math.abs((o._helper?o.offset.top-c.top:o.offset.top-h.top)+o.sizeDiff.height),n=o.containerElement.get(0)===o.element.parent().get(0),a=/relative|absolute/.test(o.containerElement.css("position")),n&&a&&(i-=o.parentData.left),i+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-i,u&&(o.size.height=o.size.width/o.aspectRatio)),s+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-s,u&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),i=t.options,s=t.containerOffset,n=t.containerPosition,a=t.containerElement,o=e(t.helper),r=o.offset(),h=o.outerWidth()-t.sizeDiff.width,l=o.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:h,height:l}),t._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:h,height:l})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,s=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?s(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):e.each(i.alsoResize,function(e){s(e)})},resize:function(t,i){var s=e(this).data("ui-resizable"),n=s.options,a=s.originalSize,o=s.originalPosition,r={height:s.size.height-a.height||0,width:s.size.width-a.width||0,top:s.position.top-o.top||0,left:s.position.left-o.left||0},h=function(t,s){e(t).each(function(){var t=e(this),n=e(this).data("ui-resizable-alsoresize"),a={},o=s&&s.length?s:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var i=(n[t]||0)+(r[t]||0);i&&i>=0&&(a[t]=i||null)}),t.css(a)})};"object"!=typeof n.alsoResize||n.alsoResize.nodeType?h(n.alsoResize):e.each(n.alsoResize,function(e,t){h(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,s=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),i=t.options,s=t.size,n=t.originalSize,a=t.originalPosition,o=t.axis,r="number"==typeof i.grid?[i.grid,i.grid]:i.grid,h=r[0]||1,l=r[1]||1,u=Math.round((s.width-n.width)/h)*h,c=Math.round((s.height-n.height)/l)*l,d=n.width+u,p=n.height+c,f=i.maxWidth&&d>i.maxWidth,m=i.maxHeight&&p>i.maxHeight,g=i.minWidth&&i.minWidth>d,v=i.minHeight&&i.minHeight>p;i.grid=r,g&&(d+=h),v&&(p+=l),f&&(d-=h),m&&(p-=l),/^(se|s|e)$/.test(o)?(t.size.width=d,t.size.height=p):/^(ne)$/.test(o)?(t.size.width=d,t.size.height=p,t.position.top=a.top-c):/^(sw)$/.test(o)?(t.size.width=d,t.size.height=p,t.position.left=a.left-u):(t.size.width=d,t.size.height=p,t.position.top=a.top-c,t.position.left=a.left-u)}})})(jQuery);;
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t){function e(t,e,i){return t>e&&e+i>t}function i(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))}t.widget("ui.sortable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===t.axis||i(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(e,i){"disabled"===e?(this.options[e]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):t.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(e,i){var s=null,n=!1,a=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,a.widgetName+"-item")===a?(s=t(this),!1):undefined}),t.data(e.target,a.widgetName+"-item")===a&&(s=t(e.target)),s?!this.options.handle||i||(t(this.options.handle,s).find("*").addBack().each(function(){this===e.target&&(n=!0)}),n)?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(e,i,s){var n,a,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(a=this.document.find("body"),this.storedCursor=a.css("cursor"),a.css("cursor",o.cursor),this.storedStylesheet=t("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(a)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,s,n,a,o=this.options,r=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+o.scrollSpeed:e.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+o.scrollSpeed:e.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(e.pageY-t(document).scrollTop()<o.scrollSensitivity?r=t(document).scrollTop(t(document).scrollTop()-o.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<o.scrollSensitivity&&(r=t(document).scrollTop(t(document).scrollTop()+o.scrollSpeed)),e.pageX-t(document).scrollLeft()<o.scrollSensitivity?r=t(document).scrollLeft(t(document).scrollLeft()-o.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<o.scrollSensitivity&&(r=t(document).scrollLeft(t(document).scrollLeft()+o.scrollSpeed))),r!==!1&&t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],n=s.item[0],a=this._intersectsWithPointer(s),a&&s.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===a?"next":"prev"]()[0]!==n&&!t.contains(this.placeholder[0],n)&&("semi-dynamic"===this.options.type?!t.contains(this.element[0],n):!0)){if(this.direction=1===a?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(e,s),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var s=this,n=this.placeholder.offset(),a=this.options.axis,o={};a&&"x"!==a||(o.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),a&&"y"!==a||(o.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){s._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&s.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!s.length&&e.key&&s.push(e.key+"="),s.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},i.each(function(){s.push(t(e.item||this).attr(e.attribute||"id")||"")}),s},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,a=t.left,o=a+t.width,r=t.top,h=r+t.height,l=this.offset.click.top,c=this.offset.click.left,u="x"===this.options.axis||s+l>r&&h>s+l,d="y"===this.options.axis||e+c>a&&o>e+c,p=u&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:e+this.helperProportions.width/2>a&&o>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>r&&h>n-this.helperProportions.height/2},_intersectsWithPointer:function(t){var i="x"===this.options.axis||e(this.positionAbs.top+this.offset.click.top,t.top,t.height),s="y"===this.options.axis||e(this.positionAbs.left+this.offset.click.left,t.left,t.width),n=i&&s,a=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return n?this.floating?o&&"right"===o||"down"===a?2:1:a&&("down"===a?2:1):!1},_intersectsWithSides:function(t){var i=e(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),s=e(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),n=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return this.floating&&a?"right"===a&&s||"left"===a&&!s:n&&("down"===n&&i||"up"===n&&!i)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var i,s,n,a,o=[],r=[],h=this._connectWith();if(h&&e)for(i=h.length-1;i>=0;i--)for(n=t(h[i]),s=n.length-1;s>=0;s--)a=t.data(n[s],this.widgetFullName),a&&a!==this&&!a.options.disabled&&r.push([t.isFunction(a.options.items)?a.options.items.call(a.element):t(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a]);for(r.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=r.length-1;i>=0;i--)r[i][0].each(function(){o.push(this)});return t(o)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;e.length>i;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i,s,n,a,o,r,h,l,c=this.items,u=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(i=d.length-1;i>=0;i--)for(n=t(d[i]),s=n.length-1;s>=0;s--)a=t.data(n[s],this.widgetFullName),a&&a!==this&&!a.options.disabled&&(u.push([t.isFunction(a.options.items)?a.options.items.call(a.element[0],e,{item:this.currentItem}):t(a.options.items,a.element),a]),this.containers.push(a));for(i=u.length-1;i>=0;i--)for(o=u[i][1],r=u[i][0],s=0,l=r.length;l>s;s++)h=t(r[s]),h.data(this.widgetName+"-item",o),c.push({item:h,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,n,a;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?t(this.options.toleranceElement,s.item):s.item,e||(s.width=n.outerWidth(),s.height=n.outerHeight()),a=n.offset(),s.left=a.left,s.top=a.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)a=this.containers[i].element.offset(),this.containers[i].containerCache.left=a.left,this.containers[i].containerCache.top=a.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var i,s=e.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=e.currentItem[0].nodeName.toLowerCase(),n=t("<"+s+">",e.document[0]).addClass(i||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===s?e.currentItem.children().each(function(){t("<td>&#160;</td>",e.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(n)}):"img"===s&&n.attr("src",e.currentItem.attr("src")),i||n.css("visibility","hidden"),n},update:function(t,n){(!i||s.forcePlaceholderSize)&&(n.height()||n.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(s.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),s.placeholder.update(e,e.placeholder)},_contactContainers:function(s){var n,a,o,r,h,l,c,u,d,p,f=null,m=null;for(n=this.containers.length-1;n>=0;n--)if(!t.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(f&&t.contains(this.containers[n].element[0],f.element[0]))continue;f=this.containers[n],m=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",s,this._uiHash(this)),this.containers[n].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[m].containerCache.over||(this.containers[m]._trigger("over",s,this._uiHash(this)),this.containers[m].containerCache.over=1);else{for(o=1e4,r=null,p=f.floating||i(this.currentItem),h=p?"left":"top",l=p?"width":"height",c=this.positionAbs[h]+this.offset.click[h],a=this.items.length-1;a>=0;a--)t.contains(this.containers[m].element[0],this.items[a].item[0])&&this.items[a].item[0]!==this.currentItem[0]&&(!p||e(this.positionAbs.top+this.offset.click.top,this.items[a].top,this.items[a].height))&&(u=this.items[a].item.offset()[h],d=!1,Math.abs(u-c)>Math.abs(u+this.items[a][l]-c)&&(d=!0,u+=this.items[a][l]),o>Math.abs(u-c)&&(o=Math.abs(u-c),r=this.items[a],this.direction=d?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[m])return;r?this._rearrange(s,r,null,!0):this._rearrange(s,null,this.containers[m].element,!0),this._trigger("change",s,this._uiHash()),this.containers[m]._trigger("change",s,this._uiHash(this)),this.currentContainer=this.containers[m],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[m]._trigger("over",s,this._uiHash(this)),this.containers[m].containerCache.over=1}},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||t("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,t("document"===n.containment?document:window).width()-this.helperProportions.width-this.margins.left,(t("document"===n.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(e=t(n.containment)[0],i=t(n.containment).offset(),s="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"===e?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:n.scrollLeft())*s}},_generatePosition:function(e){var i,s,n=this.options,a=e.pageX,o=e.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(a=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(a=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1],o=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-n.grid[1]:i+n.grid[1]:i,s=this.originalPageX+Math.round((a-this.originalPageX)/n.grid[0])*n.grid[0],a=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-n.grid[0]:s+n.grid[0]:s)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:r.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:r.scrollLeft())}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(t,e){this.reverting=!1;var i,s=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&s.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||s.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(s.push(function(t){this._trigger("remove",t,this._uiHash())}),s.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),s.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)e||s.push(function(t){return function(e){t._trigger("deactivate",e,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(s.push(function(t){return function(e){t._trigger("out",e,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!e){for(this._trigger("beforeStop",t,this._uiHash()),i=0;s.length>i;i++)s[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!e){for(i=0;s.length>i;i++)s[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}})})(jQuery);;
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t){var e={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};t.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var i=t(this).css(e).offset().top;0>i&&t(this).css("top",e.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),t=e.parent.children().eq(e.index),t.length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var i=this;this._isOpen&&this._trigger("beforeClose",e)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||t(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",e)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,e){var i=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return i&&!e&&this._trigger("focus",t),i},open:function(){var e=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),undefined):(this._isOpen=!0,this.opener=t(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){e._focusTabbable(),e._trigger("focus")}),this._trigger("open"),undefined)},_focusTabbable:function(){var t=this.element.find("[autofocus]");t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).focus()},_keepFocus:function(e){function i(){var e=this.document[0].activeElement,i=this.uiDialog[0]===e||t.contains(this.uiDialog[0],e);i||this._focusTabbable()}e.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=t("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),this.close(e),undefined;if(e.keyCode===t.ui.keyCode.TAB){var i=this.uiDialog.find(":tabbable"),s=i.filter(":first"),n=i.filter(":last");e.target!==n[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==s[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(n.focus(1),e.preventDefault()):(s.focus(1),e.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=t("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(e),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title||t.html("&#160;"),t.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=t("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var e=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(i)||t.isArray(i)&&!i.length?(this.uiDialog.removeClass("ui-dialog-buttons"),undefined):(t.each(i,function(i,s){var n,a;s=t.isFunction(s)?{click:s,text:i}:s,s=t.extend({type:"button"},s),n=s.click,s.click=function(){n.apply(e.element[0],arguments)},a={icons:s.icons,text:s.showText},delete s.icons,delete s.showText,t("<button></button>",s).button(a).appendTo(e.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),undefined)},_makeDraggable:function(){function e(t){return{position:t.position,offset:t.offset}}var i=this,s=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(s,n){t(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",s,e(n))},drag:function(t,s){i._trigger("drag",t,e(s))},stop:function(n,a){s.position=[a.position.left-i.document.scrollLeft(),a.position.top-i.document.scrollTop()],t(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",n,e(a))}})},_makeResizable:function(){function e(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}var i=this,s=this.options,n=s.resizable,a=this.uiDialog.css("position"),o="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:o,start:function(s,n){t(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",s,e(n))},resize:function(t,s){i._trigger("resize",t,e(s))},stop:function(n,a){s.height=t(this).height(),s.width=t(this).width(),t(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",n,e(a))}}).css("position",a)},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(s){var n=this,a=!1,o={};t.each(s,function(t,s){n._setOption(t,s),t in e&&(a=!0),t in i&&(o[t]=s)}),a&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(t,e){var i,s,n=this.uiDialog;"dialogClass"===t&&n.removeClass(this.options.dialogClass).addClass(e),"disabled"!==t&&(this._super(t,e),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:""+e}),"draggable"===t&&(i=n.is(":data(ui-draggable)"),i&&!e&&n.draggable("destroy"),!i&&e&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&(s=n.is(":data(ui-resizable)"),s&&!e&&n.resizable("destroy"),s&&"string"==typeof e&&n.resizable("option","handles",e),s||e===!1||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,i,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),s.minWidth>s.width&&(s.width=s.minWidth),t=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),e=Math.max(0,s.minHeight-t),i="number"==typeof s.maxHeight?Math.max(0,s.maxHeight-t):"none","auto"===s.height?this.element.css({minHeight:e,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,s.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var e=t(this);return t("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return t(e.target).closest(".ui-dialog").length?!0:!!t(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=this,i=this.widgetFullName;t.ui.dialog.overlayInstances||this._delay(function(){t.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(s){e._allowInteraction(s)||(s.preventDefault(),t(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable())})}),this.overlay=t("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),t.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(t.ui.dialog.overlayInstances--,t.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),t.ui.dialog.overlayInstances=0,t.uiBackCompat!==!1&&t.widget("ui.dialog",t.ui.dialog,{_position:function(){var e,i=this.options.position,s=[],n=[0,0];i?(("string"==typeof i||"object"==typeof i&&"0"in i)&&(s=i.split?i.split(" "):[i[0],i[1]],1===s.length&&(s[1]=s[0]),t.each(["left","top"],function(t,e){+s[t]===s[t]&&(n[t]=s[t],s[t]=e)}),i={my:s[0]+(0>n[0]?n[0]:"+"+n[0])+" "+s[1]+(0>n[1]?n[1]:"+"+n[1]),at:s.join(" ")}),i=t.extend({},t.ui.dialog.prototype.options.position,i)):i=t.ui.dialog.prototype.options.position,e=this.uiDialog.is(":visible"),e||this.uiDialog.show(),this.uiDialog.position(i),e||this.uiDialog.hide()}})})(jQuery);;
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t){var e,i,s,n,a="ui-button ui-widget ui-state-default ui-corner-all",o="ui-state-hover ui-state-active ",r="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",h=function(){var e=t(this);setTimeout(function(){e.find(":ui-button").button("refresh")},1)},l=function(e){var i=e.name,s=e.form,n=t([]);return i&&(i=i.replace(/'/g,"\\'"),n=s?t(s).find("[name='"+i+"']"):t("[name='"+i+"']",e.ownerDocument).filter(function(){return!this.form})),n};t.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,h),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var o=this,r=this.options,c="checkbox"===this.type||"radio"===this.type,u=c?"":"ui-state-active",d="ui-state-focus";null===r.label&&(r.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(a).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){r.disabled||this===e&&t(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){r.disabled||t(this).removeClass(u)}).bind("click"+this.eventNamespace,function(t){r.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){o.buttonElement.addClass(d)}).bind("blur"+this.eventNamespace,function(){o.buttonElement.removeClass(d)}),c&&(this.element.bind("change"+this.eventNamespace,function(){n||o.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(t){r.disabled||(n=!1,i=t.pageX,s=t.pageY)}).bind("mouseup"+this.eventNamespace,function(t){r.disabled||(i!==t.pageX||s!==t.pageY)&&(n=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return r.disabled||n?!1:undefined}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(r.disabled||n)return!1;t(this).addClass("ui-state-active"),o.buttonElement.attr("aria-pressed","true");var e=o.element[0];l(e).not(e).map(function(){return t(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return r.disabled?!1:(t(this).addClass("ui-state-active"),e=this,o.document.one("mouseup",function(){e=null}),undefined)}).bind("mouseup"+this.eventNamespace,function(){return r.disabled?!1:(t(this).removeClass("ui-state-active"),undefined)}).bind("keydown"+this.eventNamespace,function(e){return r.disabled?!1:((e.keyCode===t.ui.keyCode.SPACE||e.keyCode===t.ui.keyCode.ENTER)&&t(this).addClass("ui-state-active"),undefined)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){t(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(e){e.keyCode===t.ui.keyCode.SPACE&&t(this).click()})),this._setOption("disabled",r.disabled),this._resetButton()},_determineButtonType:function(){var t,e,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(a+" "+o+" "+r).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(t,e){return this._super(t,e),"disabled"===t?(e?this.element.prop("disabled",!0):this.element.prop("disabled",!1),undefined):(this._resetButton(),undefined)},refresh:function(){var e=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOption("disabled",e),"radio"===this.type?l(this.element[0]).each(function(){t(this).is(":checked")?t(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):t(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),undefined;var e=this.buttonElement.removeClass(r),i=t("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),s=this.options.icons,n=s.primary&&s.secondary,a=[];s.primary||s.secondary?(this.options.text&&a.push("ui-button-text-icon"+(n?"s":s.primary?"-primary":"-secondary")),s.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+s.primary+"'></span>"),s.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+s.secondary+"'></span>"),this.options.text||(a.push(n?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||e.attr("title",t.trim(i)))):a.push("ui-button-text-only"),e.addClass(a.join(" "))}}),t.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),this._super(t,e)},refresh:function(){var e="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(jQuery);;
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t,e){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.dpDiv=s(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function s(e){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(i,"mouseout",function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){t.datepicker._isDisabledDatepicker(a.inline?e.parent()[0]:a.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))})}function n(e,i){t.extend(e,i);for(var s in i)null==i[s]&&(e[s]=i[s]);return e}t.extend(t.ui,{datepicker:{version:"1.10.3"}});var a,r="datepicker";t.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return n(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var s,n,a;s=e.nodeName.toLowerCase(),n="div"===s||"span"===s,e.id||(this.uuid+=1,e.id="dp"+this.uuid),a=this._newInst(t(e),n),a.settings=t.extend({},i||{}),"input"===s?this._connectDatepicker(e,a):n&&this._inlineDatepicker(e,a)},_newInst:function(e,i){var n=e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?s(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,i){var s=t(e);i.append=t([]),i.trigger=t([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),t.data(e,r,i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var s,n,a,r=this._get(i,"appendText"),o=this._get(i,"isRTL");i.append&&i.append.remove(),r&&(i.append=t("<span class='"+this._appendClass+"'>"+r+"</span>"),e[o?"before":"after"](i.append)),e.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),s=this._get(i,"showOn"),("focus"===s||"both"===s)&&e.focus(this._showDatepicker),("button"===s||"both"===s)&&(n=this._get(i,"buttonText"),a=this._get(i,"buttonImage"),i.trigger=t(this._get(i,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:a,alt:n,title:n}):t("<button type='button'></button>").addClass(this._triggerClass).html(a?t("<img/>").attr({src:a,alt:n,title:n}):n)),e[o?"before":"after"](i.trigger),i.trigger.click(function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,i,s,n,a=new Date(2009,11,20),r=this._get(t,"dateFormat");r.match(/[DM]/)&&(e=function(t){for(i=0,s=0,n=0;t.length>n;n++)t[n].length>i&&(i=t[n].length,s=n);return s},a.setMonth(e(this._get(t,r.match(/MM/)?"monthNames":"monthNamesShort"))),a.setDate(e(this._get(t,r.match(/DD/)?"dayNames":"dayNamesShort"))+20-a.getDay())),t.input.attr("size",this._formatDate(t,a).length)}},_inlineDatepicker:function(e,i){var s=t(e);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),t.data(e,r,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css("display","block"))},_dialogDatepicker:function(e,i,s,a,o){var h,l,c,u,d,p=this._dialogInst;return p||(this.uuid+=1,h="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+h+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),t("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},t.data(this._dialogInput[0],r,p)),n(p.settings,a||{}),i=i&&i.constructor===Date?this._formatDate(p,i):i,this._dialogInput.val(i),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(l=document.documentElement.clientWidth,c=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[l/2-100+u,c/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],r,p),this},_destroyDatepicker:function(e){var i,s=t(e),n=t.data(e,r);s.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),t.removeData(e,r),"input"===i?(n.append.remove(),n.trigger.remove(),s.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&s.removeClass(this.markerClassName).empty())},_enableDatepicker:function(e){var i,s,n=t(e),a=t.data(e,r);n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!1,a.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var i,s,n=t(e),a=t.data(e,r);n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!0,a.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;this._disabledInputs.length>e;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,r)}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(i,s,a){var r,o,h,l,c=this._getInst(i);return 2===arguments.length&&"string"==typeof s?"defaults"===s?t.extend({},t.datepicker._defaults):c?"all"===s?t.extend({},c.settings):this._get(c,s):null:(r=s||{},"string"==typeof s&&(r={},r[s]=a),c&&(this._curInst===c&&this._hideDatepicker(),o=this._getDateDatepicker(i,!0),h=this._getMinMaxDate(c,"min"),l=this._getMinMaxDate(c,"max"),n(c.settings,r),null!==h&&r.dateFormat!==e&&r.minDate===e&&(c.settings.minDate=this._formatDate(c,h)),null!==l&&r.dateFormat!==e&&r.maxDate===e&&(c.settings.maxDate=this._formatDate(c,l)),"disabled"in r&&(r.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(t(i),c),this._autoSize(c),this._setDate(c,o),this._updateAlternate(c),this._updateDatepicker(c)),e)},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(e){var i,s,n,a=t.datepicker._getInst(e.target),r=!0,o=a.dpDiv.is(".ui-datepicker-rtl");if(a._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),r=!1;break;case 13:return n=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",a.dpDiv),n[0]&&t.datepicker._selectDay(e.target,a.selectedMonth,a.selectedYear,n[0]),i=t.datepicker._get(a,"onSelect"),i?(s=t.datepicker._formatDate(a),i.apply(a.input?a.input[0]:null,[s,a])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(a,"stepBigMonths"):-t.datepicker._get(a,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(a,"stepBigMonths"):+t.datepicker._get(a,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),r=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),r=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,o?1:-1,"D"),r=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(a,"stepBigMonths"):-t.datepicker._get(a,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),r=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,o?-1:1,"D"),r=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(a,"stepBigMonths"):+t.datepicker._get(a,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),r=e.ctrlKey||e.metaKey;break;default:r=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):r=!1;r&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(i){var s,n,a=t.datepicker._getInst(i.target);return t.datepicker._get(a,"constrainInput")?(s=t.datepicker._possibleChars(t.datepicker._get(a,"dateFormat")),n=String.fromCharCode(null==i.charCode?i.keyCode:i.charCode),i.ctrlKey||i.metaKey||" ">n||!s||s.indexOf(n)>-1):e},_doKeyUp:function(e){var i,s=t.datepicker._getInst(e.target);if(s.input.val()!==s.lastVal)try{i=t.datepicker.parseDate(t.datepicker._get(s,"dateFormat"),s.input?s.input.val():null,t.datepicker._getFormatConfig(s)),i&&(t.datepicker._setDateFromField(s),t.datepicker._updateAlternate(s),t.datepicker._updateDatepicker(s))}catch(n){}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!==e.nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),!t.datepicker._isDisabledDatepicker(e)&&t.datepicker._lastInput!==e){var i,s,a,r,o,h,l;i=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==i&&(t.datepicker._curInst.dpDiv.stop(!0,!0),i&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),s=t.datepicker._get(i,"beforeShow"),a=s?s.apply(e,[e,i]):{},a!==!1&&(n(i.settings,a),i.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(i),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),r=!1,t(e).parents().each(function(){return r|="fixed"===t(this).css("position"),!r}),o={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(i),o=t.datepicker._checkOffset(i,o,r),i.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":r?"fixed":"absolute",display:"none",left:o.left+"px",top:o.top+"px"}),i.inline||(h=t.datepicker._get(i,"showAnim"),l=t.datepicker._get(i,"duration"),i.dpDiv.zIndex(t(e).zIndex()+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[h]?i.dpDiv.show(h,t.datepicker._get(i,"showOptions"),l):i.dpDiv[h||"show"](h?l:null),t.datepicker._shouldFocusInput(i)&&i.input.focus(),t.datepicker._curInst=i))}},_updateDatepicker:function(e){this.maxRows=4,a=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,s=this._getNumberOfMonths(e),n=s[1],r=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&e.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",r*n+"em"),e.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.focus(),e.yearshtml&&(i=e.yearshtml,setTimeout(function(){i===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),i=e.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,i,s){var n=e.dpDiv.outerWidth(),a=e.dpDiv.outerHeight(),r=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,h=document.documentElement.clientWidth+(s?0:t(document).scrollLeft()),l=document.documentElement.clientHeight+(s?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?n-r:0,i.left-=s&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=s&&i.top===e.input.offset().top+o?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+n>h&&h>n?Math.abs(i.left+n-h):0),i.top-=Math.min(i.top,i.top+a>l&&l>a?Math.abs(a+o):0),i},_findPos:function(e){for(var i,s=this._getInst(e),n=this._get(s,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[n?"previousSibling":"nextSibling"];return i=t(e).offset(),[i.left,i.top]},_hideDatepicker:function(e){var i,s,n,a,o=this._curInst;!o||e&&o!==t.data(e,r)||this._datepickerShowing&&(i=this._get(o,"showAnim"),s=this._get(o,"duration"),n=function(){t.datepicker._tidyDialog(o)},t.effects&&(t.effects.effect[i]||t.effects[i])?o.dpDiv.hide(i,t.datepicker._get(o,"showOptions"),s,n):o.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,n),i||n(),this._datepickerShowing=!1,a=this._get(o,"onClose"),a&&a.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var i=t(e.target),s=t.datepicker._getInst(i[0]);(i[0].id!==t.datepicker._mainDivId&&0===i.parents("#"+t.datepicker._mainDivId).length&&!i.hasClass(t.datepicker.markerClassName)&&!i.closest("."+t.datepicker._triggerClass).length&&t.datepicker._datepickerShowing&&(!t.datepicker._inDialog||!t.blockUI)||i.hasClass(t.datepicker.markerClassName)&&t.datepicker._curInst!==s)&&t.datepicker._hideDatepicker()}},_adjustDate:function(e,i,s){var n=t(e),a=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(a,i+("M"===s?this._get(a,"showCurrentAtPos"):0),s),this._updateDatepicker(a))},_gotoToday:function(e){var i,s=t(e),n=this._getInst(s[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(i=new Date,n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()),this._notifyChange(n),this._adjustDate(s)},_selectMonthYear:function(e,i,s){var n=t(e),a=this._getInst(n[0]);a["selected"+("M"===s?"Month":"Year")]=a["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(a),this._adjustDate(n)},_selectDay:function(e,i,s,n){var a,r=t(e);t(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(r[0])||(a=this._getInst(r[0]),a.selectedDay=a.currentDay=t("a",n).html(),a.selectedMonth=a.currentMonth=i,a.selectedYear=a.currentYear=s,this._selectDate(e,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear)))},_clearDate:function(e){var i=t(e);this._selectDate(i,"")},_selectDate:function(e,i){var s,n=t(e),a=this._getInst(n[0]);i=null!=i?i:this._formatDate(a),a.input&&a.input.val(i),this._updateAlternate(a),s=this._get(a,"onSelect"),s?s.apply(a.input?a.input[0]:null,[i,a]):a.input&&a.input.trigger("change"),a.inline?this._updateDatepicker(a):(this._hideDatepicker(),this._lastInput=a.input[0],"object"!=typeof a.input[0]&&a.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var i,s,n,a=this._get(e,"altField");a&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),s=this._getDate(e),n=this.formatDate(i,s,this._getFormatConfig(e)),t(a).each(function(){t(this).val(n)}))},noWeekends:function(t){var e=t.getDay();return[e>0&&6>e,""]},iso8601Week:function(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1},parseDate:function(i,s,n){if(null==i||null==s)throw"Invalid arguments";if(s="object"==typeof s?""+s:s+"",""===s)return null;var a,r,o,h,l=0,c=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),d=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,p=(n?n.dayNames:null)||this._defaults.dayNames,f=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,m=(n?n.monthNames:null)||this._defaults.monthNames,g=-1,v=-1,_=-1,b=-1,y=!1,x=function(t){var e=i.length>a+1&&i.charAt(a+1)===t;return e&&a++,e},k=function(t){var e=x(t),i="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,n=RegExp("^\\d{1,"+i+"}"),a=s.substring(l).match(n);if(!a)throw"Missing number at position "+l;return l+=a[0].length,parseInt(a[0],10)},w=function(i,n,a){var r=-1,o=t.map(x(i)?a:n,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(o,function(t,i){var n=i[1];return s.substr(l,n.length).toLowerCase()===n.toLowerCase()?(r=i[0],l+=n.length,!1):e}),-1!==r)return r+1;throw"Unknown name at position "+l},D=function(){if(s.charAt(l)!==i.charAt(a))throw"Unexpected literal at position "+l;l++};for(a=0;i.length>a;a++)if(y)"'"!==i.charAt(a)||x("'")?D():y=!1;else switch(i.charAt(a)){case"d":_=k("d");break;case"D":w("D",d,p);break;case"o":b=k("o");break;case"m":v=k("m");break;case"M":v=w("M",f,m);break;case"y":g=k("y");break;case"@":h=new Date(k("@")),g=h.getFullYear(),v=h.getMonth()+1,_=h.getDate();break;case"!":h=new Date((k("!")-this._ticksTo1970)/1e4),g=h.getFullYear(),v=h.getMonth()+1,_=h.getDate();break;case"'":x("'")?D():y=!0;break;default:D()}if(s.length>l&&(o=s.substr(l),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===g?g=(new Date).getFullYear():100>g&&(g+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u>=g?0:-100)),b>-1)for(v=1,_=b;;){if(r=this._getDaysInMonth(g,v-1),r>=_)break;v++,_-=r}if(h=this._daylightSavingAdjust(new Date(g,v-1,_)),h.getFullYear()!==g||h.getMonth()+1!==v||h.getDate()!==_)throw"Invalid date";return h},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(t,e,i){if(!e)return"";var s,n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,r=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,o=(i?i.monthNames:null)||this._defaults.monthNames,h=function(e){var i=t.length>s+1&&t.charAt(s+1)===e;return i&&s++,i},l=function(t,e,i){var s=""+e;if(h(t))for(;i>s.length;)s="0"+s;return s},c=function(t,e,i,s){return h(t)?s[e]:i[e]},u="",d=!1;if(e)for(s=0;t.length>s;s++)if(d)"'"!==t.charAt(s)||h("'")?u+=t.charAt(s):d=!1;else switch(t.charAt(s)){case"d":u+=l("d",e.getDate(),2);break;case"D":u+=c("D",e.getDay(),n,a);break;case"o":u+=l("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=l("m",e.getMonth()+1,2);break;case"M":u+=c("M",e.getMonth(),r,o);break;case"y":u+=h("y")?e.getFullYear():(10>e.getYear()%100?"0":"")+e.getYear()%100;break;case"@":u+=e.getTime();break;case"!":u+=1e4*e.getTime()+this._ticksTo1970;break;case"'":h("'")?u+="'":d=!0;break;default:u+=t.charAt(s)}return u},_possibleChars:function(t){var e,i="",s=!1,n=function(i){var s=t.length>e+1&&t.charAt(e+1)===i;return s&&e++,s};for(e=0;t.length>e;e++)if(s)"'"!==t.charAt(e)||n("'")?i+=t.charAt(e):s=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":n("'")?i+="'":s=!0;break;default:i+=t.charAt(e)}return i},_get:function(t,i){return t.settings[i]!==e?t.settings[i]:this._defaults[i]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),s=t.lastVal=t.input?t.input.val():null,n=this._getDefaultDate(t),a=n,r=this._getFormatConfig(t);try{a=this.parseDate(i,s,r)||n}catch(o){s=e?"":s}t.selectedDay=a.getDate(),t.drawMonth=t.selectedMonth=a.getMonth(),t.drawYear=t.selectedYear=a.getFullYear(),t.currentDay=s?a.getDate():0,t.currentMonth=s?a.getMonth():0,t.currentYear=s?a.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,i,s){var n=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},a=function(i){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),i,t.datepicker._getFormatConfig(e))}catch(s){}for(var n=(i.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,a=n.getFullYear(),r=n.getMonth(),o=n.getDate(),h=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=h.exec(i);l;){switch(l[2]||"d"){case"d":case"D":o+=parseInt(l[1],10);break;case"w":case"W":o+=7*parseInt(l[1],10);break;case"m":case"M":r+=parseInt(l[1],10),o=Math.min(o,t.datepicker._getDaysInMonth(a,r));break;case"y":case"Y":a+=parseInt(l[1],10),o=Math.min(o,t.datepicker._getDaysInMonth(a,r))}l=h.exec(i)}return new Date(a,r,o)},r=null==i||""===i?s:"string"==typeof i?a(i):"number"==typeof i?isNaN(i)?s:n(i):new Date(i.getTime());return r=r&&"Invalid Date"==""+r?s:r,r&&(r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)),this._daylightSavingAdjust(r)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var s=!e,n=t.selectedMonth,a=t.selectedYear,r=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=r.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=r.getMonth(),t.drawYear=t.selectedYear=t.currentYear=r.getFullYear(),n===t.selectedMonth&&a===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(s?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(e){var i=this._get(e,"stepMonths"),s="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){t.datepicker._adjustDate(s,-i,"M")},next:function(){t.datepicker._adjustDate(s,+i,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(s)},selectDay:function(){return t.datepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(s,this,"Y"),!1}};t(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,i,s,n,a,r,o,h,l,c,u,d,p,f,m,g,v,_,b,y,x,k,w,D,T,C,M,S,N,I,P,A,z,H,E,F,O,W,j,R=new Date,L=this._daylightSavingAdjust(new Date(R.getFullYear(),R.getMonth(),R.getDate())),Y=this._get(t,"isRTL"),B=this._get(t,"showButtonPanel"),J=this._get(t,"hideIfNoPrevNext"),K=this._get(t,"navigationAsDateFormat"),Q=this._getNumberOfMonths(t),V=this._get(t,"showCurrentAtPos"),U=this._get(t,"stepMonths"),q=1!==Q[0]||1!==Q[1],X=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),G=this._getMinMaxDate(t,"min"),$=this._getMinMaxDate(t,"max"),Z=t.drawMonth-V,te=t.drawYear;if(0>Z&&(Z+=12,te--),$)for(e=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth()-Q[0]*Q[1]+1,$.getDate())),e=G&&G>e?G:e;this._daylightSavingAdjust(new Date(te,Z,1))>e;)Z--,0>Z&&(Z=11,te--);for(t.drawMonth=Z,t.drawYear=te,i=this._get(t,"prevText"),i=K?this.formatDate(i,this._daylightSavingAdjust(new Date(te,Z-U,1)),this._getFormatConfig(t)):i,s=this._canAdjustMonth(t,-1,te,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>":J?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>",n=this._get(t,"nextText"),n=K?this.formatDate(n,this._daylightSavingAdjust(new Date(te,Z+U,1)),this._getFormatConfig(t)):n,a=this._canAdjustMonth(t,1,te,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>":J?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>",r=this._get(t,"currentText"),o=this._get(t,"gotoCurrent")&&t.currentDay?X:L,r=K?this.formatDate(r,o,this._getFormatConfig(t)):r,h=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",l=B?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Y?h:"")+(this._isInRange(t,o)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+r+"</button>":"")+(Y?"":h)+"</div>":"",c=parseInt(this._get(t,"firstDay"),10),c=isNaN(c)?0:c,u=this._get(t,"showWeek"),d=this._get(t,"dayNames"),p=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),m=this._get(t,"monthNamesShort"),g=this._get(t,"beforeShowDay"),v=this._get(t,"showOtherMonths"),_=this._get(t,"selectOtherMonths"),b=this._getDefaultDate(t),y="",k=0;Q[0]>k;k++){for(w="",this.maxRows=4,D=0;Q[1]>D;D++){if(T=this._daylightSavingAdjust(new Date(te,Z,t.selectedDay)),C=" ui-corner-all",M="",q){if(M+="<div class='ui-datepicker-group",Q[1]>1)switch(D){case 0:M+=" ui-datepicker-group-first",C=" ui-corner-"+(Y?"right":"left");break;case Q[1]-1:M+=" ui-datepicker-group-last",C=" ui-corner-"+(Y?"left":"right");break;default:M+=" ui-datepicker-group-middle",C=""}M+="'>"}for(M+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+C+"'>"+(/all|left/.test(C)&&0===k?Y?a:s:"")+(/all|right/.test(C)&&0===k?Y?s:a:"")+this._generateMonthYearHeader(t,Z,te,G,$,k>0||D>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",S=u?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",x=0;7>x;x++)N=(x+c)%7,S+="<th"+((x+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+d[N]+"'>"+p[N]+"</span></th>";for(M+=S+"</tr></thead><tbody>",I=this._getDaysInMonth(te,Z),te===t.selectedYear&&Z===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,I)),P=(this._getFirstDayOfMonth(te,Z)-c+7)%7,A=Math.ceil((P+I)/7),z=q?this.maxRows>A?this.maxRows:A:A,this.maxRows=z,H=this._daylightSavingAdjust(new Date(te,Z,1-P)),E=0;z>E;E++){for(M+="<tr>",F=u?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(H)+"</td>":"",x=0;7>x;x++)O=g?g.apply(t.input?t.input[0]:null,[H]):[!0,""],W=H.getMonth()!==Z,j=W&&!_||!O[0]||G&&G>H||$&&H>$,F+="<td class='"+((x+c+6)%7>=5?" ui-datepicker-week-end":"")+(W?" ui-datepicker-other-month":"")+(H.getTime()===T.getTime()&&Z===t.selectedMonth&&t._keyEvent||b.getTime()===H.getTime()&&b.getTime()===T.getTime()?" "+this._dayOverClass:"")+(j?" "+this._unselectableClass+" ui-state-disabled":"")+(W&&!v?"":" "+O[1]+(H.getTime()===X.getTime()?" "+this._currentClass:"")+(H.getTime()===L.getTime()?" ui-datepicker-today":""))+"'"+(W&&!v||!O[2]?"":" title='"+O[2].replace(/'/g,"&#39;")+"'")+(j?"":" data-handler='selectDay' data-event='click' data-month='"+H.getMonth()+"' data-year='"+H.getFullYear()+"'")+">"+(W&&!v?"&#xa0;":j?"<span class='ui-state-default'>"+H.getDate()+"</span>":"<a class='ui-state-default"+(H.getTime()===L.getTime()?" ui-state-highlight":"")+(H.getTime()===X.getTime()?" ui-state-active":"")+(W?" ui-priority-secondary":"")+"' href='#'>"+H.getDate()+"</a>")+"</td>",H.setDate(H.getDate()+1),H=this._daylightSavingAdjust(H);M+=F+"</tr>"}Z++,Z>11&&(Z=0,te++),M+="</tbody></table>"+(q?"</div>"+(Q[0]>0&&D===Q[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),w+=M}y+=w}return y+=l,t._keyEvent=!1,y},_generateMonthYearHeader:function(t,e,i,s,n,a,r,o){var h,l,c,u,d,p,f,m,g=this._get(t,"changeMonth"),v=this._get(t,"changeYear"),_=this._get(t,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",y="";if(a||!g)y+="<span class='ui-datepicker-month'>"+r[e]+"</span>";else{for(h=s&&s.getFullYear()===i,l=n&&n.getFullYear()===i,y+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;12>c;c++)(!h||c>=s.getMonth())&&(!l||n.getMonth()>=c)&&(y+="<option value='"+c+"'"+(c===e?" selected='selected'":"")+">"+o[c]+"</option>");y+="</select>"}if(_||(b+=y+(!a&&g&&v?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",a||!v)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(u=this._get(t,"yearRange").split(":"),d=(new Date).getFullYear(),p=function(t){var e=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?d+parseInt(t,10):parseInt(t,10);
return isNaN(e)?d:e},f=p(u[0]),m=Math.max(f,p(u[1]||"")),f=s?Math.max(f,s.getFullYear()):f,m=n?Math.min(m,n.getFullYear()):m,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=f;f++)t.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",b+=t.yearshtml,t.yearshtml=null}return b+=this._get(t,"yearSuffix"),_&&(b+=(!a&&g&&v?"":"&#xa0;")+y),b+="</div>"},_adjustInstDate:function(t,e,i){var s=t.drawYear+("Y"===i?e:0),n=t.drawMonth+("M"===i?e:0),a=Math.min(t.selectedDay,this._getDaysInMonth(s,n))+("D"===i?e:0),r=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(s,n,a)));t.selectedDay=r.getDate(),t.drawMonth=t.selectedMonth=r.getMonth(),t.drawYear=t.selectedYear=r.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),s=this._getMinMaxDate(t,"max"),n=i&&i>e?i:e;return s&&n>s?s:n},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,s){var n=this._getNumberOfMonths(t),a=this._daylightSavingAdjust(new Date(i,s+(0>e?e:n[0]*n[1]),1));return 0>e&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(t,a)},_isInRange:function(t,e){var i,s,n=this._getMinMaxDate(t,"min"),a=this._getMinMaxDate(t,"max"),r=null,o=null,h=this._get(t,"yearRange");return h&&(i=h.split(":"),s=(new Date).getFullYear(),r=parseInt(i[0],10),o=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(r+=s),i[1].match(/[+\-].*/)&&(o+=s)),(!n||e.getTime()>=n.getTime())&&(!a||e.getTime()<=a.getTime())&&(!r||e.getFullYear()>=r)&&(!o||o>=e.getFullYear())},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,s){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var n=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(s,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),n,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).mousedown(t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(i)):t.datepicker._attachDatepicker(this,e)}):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i))},t.datepicker=new i,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.10.3"})(jQuery);;
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t,e){var i="ui-effects-";t.effects={effect:{}},function(t,e){function i(t,e,i){var s=u[e.type]||{};return null==t?i||!e.def?null:e.def:(t=s.floor?~~t:parseFloat(t),isNaN(t)?e.def:s.mod?(t+s.mod)%s.mod:0>t?0:t>s.max?s.max:t)}function s(i){var s=l(),n=s._rgba=[];return i=i.toLowerCase(),f(h,function(t,a){var o,r=a.re.exec(i),h=r&&a.parse(r),l=a.space||"rgba";return h?(o=s[l](h),s[c[l].cache]=o[c[l].cache],n=s._rgba=o._rgba,!1):e}),n.length?("0,0,0,0"===n.join()&&t.extend(n,a.transparent),s):a[i]}function n(t,e,i){return i=(i+1)%1,1>6*i?t+6*(e-t)*i:1>2*i?e:2>3*i?t+6*(e-t)*(2/3-i):t}var a,o="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,h=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],l=t.Color=function(e,i,s,n){return new t.Color.fn.parse(e,i,s,n)},c={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},d=l.support={},p=t("<p>")[0],f=t.each;p.style.cssText="background-color:rgba(1,1,1,.5)",d.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(c,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),l.fn=t.extend(l.prototype,{parse:function(n,o,r,h){if(n===e)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=t(n).css(o),o=e);var u=this,d=t.type(n),p=this._rgba=[];return o!==e&&(n=[n,o,r,h],d="array"),"string"===d?this.parse(s(n)||a._default):"array"===d?(f(c.rgba.props,function(t,e){p[e.idx]=i(n[e.idx],e)}),this):"object"===d?(n instanceof l?f(c,function(t,e){n[e.cache]&&(u[e.cache]=n[e.cache].slice())}):f(c,function(e,s){var a=s.cache;f(s.props,function(t,e){if(!u[a]&&s.to){if("alpha"===t||null==n[t])return;u[a]=s.to(u._rgba)}u[a][e.idx]=i(n[t],e,!0)}),u[a]&&0>t.inArray(null,u[a].slice(0,3))&&(u[a][3]=1,s.from&&(u._rgba=s.from(u[a])))}),this):e},is:function(t){var i=l(t),s=!0,n=this;return f(c,function(t,a){var o,r=i[a.cache];return r&&(o=n[a.cache]||a.to&&a.to(n._rgba)||[],f(a.props,function(t,i){return null!=r[i.idx]?s=r[i.idx]===o[i.idx]:e})),s}),s},_space:function(){var t=[],e=this;return f(c,function(i,s){e[s.cache]&&t.push(i)}),t.pop()},transition:function(t,e){var s=l(t),n=s._space(),a=c[n],o=0===this.alpha()?l("transparent"):this,r=o[a.cache]||a.to(o._rgba),h=r.slice();return s=s[a.cache],f(a.props,function(t,n){var a=n.idx,o=r[a],l=s[a],c=u[n.type]||{};null!==l&&(null===o?h[a]=l:(c.mod&&(l-o>c.mod/2?o+=c.mod:o-l>c.mod/2&&(o-=c.mod)),h[a]=i((l-o)*e+o,n)))}),this[n](h)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),s=i.pop(),n=l(e)._rgba;return l(t.map(i,function(t,e){return(1-s)*n[e]+s*t}))},toRgbaString:function(){var e="rgba(",i=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===i[3]&&(i.pop(),e="rgb("),e+i.join()+")"},toHslaString:function(){var e="hsla(",i=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&3>e&&(t=Math.round(100*t)+"%"),t});return 1===i[3]&&(i.pop(),e="hsl("),e+i.join()+")"},toHexString:function(e){var i=this._rgba.slice(),s=i.pop();return e&&i.push(~~(255*s)),"#"+t.map(i,function(t){return t=(t||0).toString(16),1===t.length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,c.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,s=t[0]/255,n=t[1]/255,a=t[2]/255,o=t[3],r=Math.max(s,n,a),h=Math.min(s,n,a),l=r-h,c=r+h,u=.5*c;return e=h===r?0:s===r?60*(n-a)/l+360:n===r?60*(a-s)/l+120:60*(s-n)/l+240,i=0===l?0:.5>=u?l/c:l/(2-c),[Math.round(e)%360,i,u,null==o?1:o]},c.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],s=t[2],a=t[3],o=.5>=s?s*(1+i):s+i-s*i,r=2*s-o;return[Math.round(255*n(r,o,e+1/3)),Math.round(255*n(r,o,e)),Math.round(255*n(r,o,e-1/3)),a]},f(c,function(s,n){var a=n.props,o=n.cache,h=n.to,c=n.from;l.fn[s]=function(s){if(h&&!this[o]&&(this[o]=h(this._rgba)),s===e)return this[o].slice();var n,r=t.type(s),u="array"===r||"object"===r?s:arguments,d=this[o].slice();return f(a,function(t,e){var s=u["object"===r?t:e.idx];null==s&&(s=d[e.idx]),d[e.idx]=i(s,e)}),c?(n=l(c(d)),n[o]=d,n):l(d)},f(a,function(e,i){l.fn[e]||(l.fn[e]=function(n){var a,o=t.type(n),h="alpha"===e?this._hsla?"hsla":"rgba":s,l=this[h](),c=l[i.idx];return"undefined"===o?c:("function"===o&&(n=n.call(this,c),o=t.type(n)),null==n&&i.empty?this:("string"===o&&(a=r.exec(n),a&&(n=c+parseFloat(a[2])*("+"===a[1]?1:-1))),l[i.idx]=n,this[h](l)))})})}),l.hook=function(e){var i=e.split(" ");f(i,function(e,i){t.cssHooks[i]={set:function(e,n){var a,o,r="";if("transparent"!==n&&("string"!==t.type(n)||(a=s(n)))){if(n=l(a||n),!d.rgba&&1!==n._rgba[3]){for(o="backgroundColor"===i?e.parentNode:e;(""===r||"transparent"===r)&&o&&o.style;)try{r=t.css(o,"backgroundColor"),o=o.parentNode}catch(h){}n=n.blend(r&&"transparent"!==r?r:"_default")}n=n.toRgbaString()}try{e.style[i]=n}catch(h){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=l(e.elem,i),e.end=l(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}})},l.hook(o),t.cssHooks.borderColor={expand:function(t){var e={};return f(["Top","Right","Bottom","Left"],function(i,s){e["border"+s+"Color"]=t}),e}},a=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(e){var i,s,n=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,a={};if(n&&n.length&&n[0]&&n[n[0]])for(s=n.length;s--;)i=n[s],"string"==typeof n[i]&&(a[t.camelCase(i)]=n[i]);else for(i in n)"string"==typeof n[i]&&(a[i]=n[i]);return a}function s(e,i){var s,n,o={};for(s in i)n=i[s],e[s]!==n&&(a[s]||(t.fx.step[s]||!isNaN(parseFloat(n)))&&(o[s]=n));return o}var n=["add","remove","toggle"],a={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(jQuery.style(t.elem,i,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(e,a,o,r){var h=t.speed(a,o,r);return this.queue(function(){var a,o=t(this),r=o.attr("class")||"",l=h.children?o.find("*").addBack():o;l=l.map(function(){var e=t(this);return{el:e,start:i(this)}}),a=function(){t.each(n,function(t,i){e[i]&&o[i+"Class"](e[i])})},a(),l=l.map(function(){return this.end=i(this.el[0]),this.diff=s(this.start,this.end),this}),o.attr("class",r),l=l.map(function(){var e=this,i=t.Deferred(),s=t.extend({},h,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,s),i.promise()}),t.when.apply(t,l.get()).done(function(){a(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),h.complete.call(o[0])})})},t.fn.extend({addClass:function(e){return function(i,s,n,a){return s?t.effects.animateClass.call(this,{add:i},s,n,a):e.apply(this,arguments)}}(t.fn.addClass),removeClass:function(e){return function(i,s,n,a){return arguments.length>1?t.effects.animateClass.call(this,{remove:i},s,n,a):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(i){return function(s,n,a,o,r){return"boolean"==typeof n||n===e?a?t.effects.animateClass.call(this,n?{add:s}:{remove:s},a,o,r):i.apply(this,arguments):t.effects.animateClass.call(this,{toggle:s},n,a,o)}}(t.fn.toggleClass),switchClass:function(e,i,s,n,a){return t.effects.animateClass.call(this,{add:i,remove:e},s,n,a)}})}(),function(){function s(e,i,s,n){return t.isPlainObject(e)&&(i=e,e=e.effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(n=i,s=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(n=s,s=i,i={}),t.isFunction(s)&&(n=s,s=null),i&&t.extend(e,i),s=s||i.duration,e.duration=t.fx.off?0:"number"==typeof s?s:s in t.fx.speeds?t.fx.speeds[s]:t.fx.speeds._default,e.complete=n||i.complete,e}function n(e){return!e||"number"==typeof e||t.fx.speeds[e]?!0:"string"!=typeof e||t.effects.effect[e]?t.isFunction(e)?!0:"object"!=typeof e||e.effect?!1:!0:!0}t.extend(t.effects,{version:"1.10.3",save:function(t,e){for(var s=0;e.length>s;s++)null!==e[s]&&t.data(i+e[s],t[0].style[e[s]])},restore:function(t,s){var n,a;for(a=0;s.length>a;a++)null!==s[a]&&(n=t.data(i+s[a]),n===e&&(n=""),t.css(s[a],n))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var i,s;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=t[1]/e.width}return{x:s,y:i}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),"float":e.css("float")},s=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),n={width:e.width(),height:e.height()},a=document.activeElement;try{a.id}catch(o){a=document.body}return e.wrap(s),(e[0]===a||t.contains(e[0],a))&&t(a).focus(),s=e.parent(),"static"===e.css("position")?(s.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,s){i[s]=e.css(s),isNaN(parseInt(i[s],10))&&(i[s]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(n),s.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).focus()),e},setTransition:function(e,i,s,n){return n=n||{},t.each(i,function(t,i){var a=e.cssUnit(i);a[0]>0&&(n[i]=a[0]*s+a[1])}),n}}),t.fn.extend({effect:function(){function e(e){function s(){t.isFunction(a)&&a.call(n[0]),t.isFunction(e)&&e()}var n=t(this),a=i.complete,r=i.mode;(n.is(":hidden")?"hide"===r:"show"===r)?(n[r](),s()):o.call(n[0],i,s)}var i=s.apply(this,arguments),n=i.mode,a=i.queue,o=t.effects.effect[i.effect];return t.fx.off||!o?n?this[n](i.duration,i.complete):this.each(function(){i.complete&&i.complete.call(this)}):a===!1?this.each(e):this.queue(a||"fx",e)},show:function(t){return function(e){if(n(e))return t.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(t.fn.show),hide:function(t){return function(e){if(n(e))return t.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(t.fn.hide),toggle:function(t){return function(e){if(n(e)||"boolean"==typeof e)return t.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(t.fn.toggle),cssUnit:function(e){var i=this.css(e),s=[];return t.each(["em","px","%","pt"],function(t,e){i.indexOf(e)>0&&(s=[parseFloat(i),e])}),s}})}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,i){e[i]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;((e=Math.pow(2,--i))-1)/11>t;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return.5>t?i(2*t)/2:1-i(-2*t+2)/2}})}()})(jQuery);;
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t){var e=/up|down|vertical/,i=/up|left|vertical|horizontal/;t.effects.effect.blind=function(s,n){var a,o,r,h=t(this),l=["position","top","bottom","left","right","height","width"],c=t.effects.setMode(h,s.mode||"hide"),u=s.direction||"up",d=e.test(u),p=d?"height":"width",f=d?"top":"left",m=i.test(u),g={},v="show"===c;h.parent().is(".ui-effects-wrapper")?t.effects.save(h.parent(),l):t.effects.save(h,l),h.show(),a=t.effects.createWrapper(h).css({overflow:"hidden"}),o=a[p](),r=parseFloat(a.css(f))||0,g[p]=v?o:0,m||(h.css(d?"bottom":"right",0).css(d?"top":"left","auto").css({position:"absolute"}),g[f]=v?r:o+r),v&&(a.css(p,0),m||a.css(f,r+o)),a.animate(g,{duration:s.duration,easing:s.easing,queue:!1,complete:function(){"hide"===c&&h.hide(),t.effects.restore(h,l),t.effects.removeWrapper(h),n()}})}})(jQuery);;
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t){t.effects.effect.slide=function(e,i){var s,n=t(this),a=["position","top","bottom","left","right","width","height"],o=t.effects.setMode(n,e.mode||"show"),r="show"===o,h=e.direction||"left",l="up"===h||"down"===h?"top":"left",c="up"===h||"left"===h,u={};t.effects.save(n,a),n.show(),s=e.distance||n["top"===l?"outerHeight":"outerWidth"](!0),t.effects.createWrapper(n).css({overflow:"hidden"}),r&&n.css(l,c?isNaN(s)?"-"+s:-s:s),u[l]=(r?c?"+=":"-=":c?"-=":"+=")+s,n.animate(u,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===o&&n.hide(),t.effects.restore(n,a),t.effects.removeWrapper(n),i()}})}})(jQuery);;
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t){t.effects.effect.puff=function(e,i){var s=t(this),n=t.effects.setMode(s,e.mode||"hide"),a="hide"===n,o=parseInt(e.percent,10)||150,r=o/100,h={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()};t.extend(e,{effect:"scale",queue:!1,fade:!0,mode:n,complete:i,percent:a?o:100,from:a?h:{height:h.height*r,width:h.width*r,outerHeight:h.outerHeight*r,outerWidth:h.outerWidth*r}}),s.effect(e)},t.effects.effect.scale=function(e,i){var s=t(this),n=t.extend(!0,{},e),a=t.effects.setMode(s,e.mode||"effect"),o=parseInt(e.percent,10)||(0===parseInt(e.percent,10)?0:"hide"===a?0:100),r=e.direction||"both",h=e.origin,l={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()},c={y:"horizontal"!==r?o/100:1,x:"vertical"!==r?o/100:1};n.effect="size",n.queue=!1,n.complete=i,"effect"!==a&&(n.origin=h||["middle","center"],n.restore=!0),n.from=e.from||("show"===a?{height:0,width:0,outerHeight:0,outerWidth:0}:l),n.to={height:l.height*c.y,width:l.width*c.x,outerHeight:l.outerHeight*c.y,outerWidth:l.outerWidth*c.x},n.fade&&("show"===a&&(n.from.opacity=0,n.to.opacity=1),"hide"===a&&(n.from.opacity=1,n.to.opacity=0)),s.effect(n)},t.effects.effect.size=function(e,i){var s,n,a,o=t(this),r=["position","top","bottom","left","right","width","height","overflow","opacity"],h=["position","top","bottom","left","right","overflow","opacity"],l=["width","height","overflow"],c=["fontSize"],u=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],d=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=t.effects.setMode(o,e.mode||"effect"),f=e.restore||"effect"!==p,m=e.scale||"both",g=e.origin||["middle","center"],v=o.css("position"),_=f?r:h,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&o.show(),s={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},"toggle"===e.mode&&"show"===p?(o.from=e.to||b,o.to=e.from||s):(o.from=e.from||("show"===p?b:s),o.to=e.to||("hide"===p?b:s)),a={from:{y:o.from.height/s.height,x:o.from.width/s.width},to:{y:o.to.height/s.height,x:o.to.width/s.width}},("box"===m||"both"===m)&&(a.from.y!==a.to.y&&(_=_.concat(u),o.from=t.effects.setTransition(o,u,a.from.y,o.from),o.to=t.effects.setTransition(o,u,a.to.y,o.to)),a.from.x!==a.to.x&&(_=_.concat(d),o.from=t.effects.setTransition(o,d,a.from.x,o.from),o.to=t.effects.setTransition(o,d,a.to.x,o.to))),("content"===m||"both"===m)&&a.from.y!==a.to.y&&(_=_.concat(c).concat(l),o.from=t.effects.setTransition(o,c,a.from.y,o.from),o.to=t.effects.setTransition(o,c,a.to.y,o.to)),t.effects.save(o,_),o.show(),t.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),g&&(n=t.effects.getBaseline(g,s),o.from.top=(s.outerHeight-o.outerHeight())*n.y,o.from.left=(s.outerWidth-o.outerWidth())*n.x,o.to.top=(s.outerHeight-o.to.outerHeight)*n.y,o.to.left=(s.outerWidth-o.to.outerWidth)*n.x),o.css(o.from),("content"===m||"both"===m)&&(u=u.concat(["marginTop","marginBottom"]).concat(c),d=d.concat(["marginLeft","marginRight"]),l=r.concat(u).concat(d),o.find("*[width]").each(function(){var i=t(this),s={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};f&&t.effects.save(i,l),i.from={height:s.height*a.from.y,width:s.width*a.from.x,outerHeight:s.outerHeight*a.from.y,outerWidth:s.outerWidth*a.from.x},i.to={height:s.height*a.to.y,width:s.width*a.to.x,outerHeight:s.height*a.to.y,outerWidth:s.width*a.to.x},a.from.y!==a.to.y&&(i.from=t.effects.setTransition(i,u,a.from.y,i.from),i.to=t.effects.setTransition(i,u,a.to.y,i.to)),a.from.x!==a.to.x&&(i.from=t.effects.setTransition(i,d,a.from.x,i.from),i.to=t.effects.setTransition(i,d,a.to.x,i.to)),i.css(i.from),i.animate(i.to,e.duration,e.easing,function(){f&&t.effects.restore(i,l)})})),o.animate(o.to,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){0===o.to.opacity&&o.css("opacity",o.from.opacity),"hide"===p&&o.hide(),t.effects.restore(o,_),f||("static"===v?o.css({position:"relative",top:o.to.top,left:o.to.left}):t.each(["top","left"],function(t,e){o.css(e,function(e,i){var s=parseInt(i,10),n=t?o.to.left:o.to.top;return"auto"===i?n+"px":s+n+"px"})})),t.effects.removeWrapper(o),i()}})}})(jQuery);;
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t){t.effects.effect.transfer=function(e,i){var s=t(this),n=t(e.to),a="fixed"===n.css("position"),o=t("body"),r=a?o.scrollTop():0,h=a?o.scrollLeft():0,l=n.offset(),c={top:l.top-r,left:l.left-h,height:n.innerHeight(),width:n.innerWidth()},u=s.offset(),d=t("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(e.className).css({top:u.top-r,left:u.left-h,height:s.innerHeight(),width:s.innerWidth(),position:a?"fixed":"absolute"}).animate(c,e.duration,e.easing,function(){d.remove(),i()})}})(jQuery);;
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t){t.effects.effect.fade=function(e,i){var s=t(this),n=t.effects.setMode(s,e.mode||"toggle");s.animate({opacity:n},{queue:!1,duration:e.duration,easing:e.easing,complete:i})}})(jQuery);;
/*! jQuery UI - v1.9.2 - 2013-02-15
 * http://jqueryui.com
 * Includes: jquery.ui.datepicker-af.js, jquery.ui.datepicker-ar-DZ.js, jquery.ui.datepicker-ar.js, jquery.ui.datepicker-az.js, jquery.ui.datepicker-bg.js, jquery.ui.datepicker-bs.js, jquery.ui.datepicker-ca.js, jquery.ui.datepicker-cs.js, jquery.ui.datepicker-cy-GB.js, jquery.ui.datepicker-da.js, jquery.ui.datepicker-de.js, jquery.ui.datepicker-el.js, jquery.ui.datepicker-en-AU.js, jquery.ui.datepicker-en-GB.js, jquery.ui.datepicker-en-NZ.js, jquery.ui.datepicker-eo.js, jquery.ui.datepicker-es.js, jquery.ui.datepicker-et.js, jquery.ui.datepicker-eu.js, jquery.ui.datepicker-fa.js, jquery.ui.datepicker-fi.js, jquery.ui.datepicker-fo.js, jquery.ui.datepicker-fr-CH.js, jquery.ui.datepicker-fr.js, jquery.ui.datepicker-gl.js, jquery.ui.datepicker-he.js, jquery.ui.datepicker-hi.js, jquery.ui.datepicker-hr.js, jquery.ui.datepicker-hu.js, jquery.ui.datepicker-hy.js, jquery.ui.datepicker-id.js, jquery.ui.datepicker-is.js, jquery.ui.datepicker-it.js, jquery.ui.datepicker-ja.js, jquery.ui.datepicker-ka.js, jquery.ui.datepicker-kk.js, jquery.ui.datepicker-km.js, jquery.ui.datepicker-ko.js, jquery.ui.datepicker-lb.js, jquery.ui.datepicker-lt.js, jquery.ui.datepicker-lv.js, jquery.ui.datepicker-mk.js, jquery.ui.datepicker-ml.js, jquery.ui.datepicker-ms.js, jquery.ui.datepicker-nl-BE.js, jquery.ui.datepicker-nl.js, jquery.ui.datepicker-no.js, jquery.ui.datepicker-pl.js, jquery.ui.datepicker-pt-BR.js, jquery.ui.datepicker-pt.js, jquery.ui.datepicker-rm.js, jquery.ui.datepicker-ro.js, jquery.ui.datepicker-ru.js, jquery.ui.datepicker-sk.js, jquery.ui.datepicker-sl.js, jquery.ui.datepicker-sq.js, jquery.ui.datepicker-sr-SR.js, jquery.ui.datepicker-sr.js, jquery.ui.datepicker-sv.js, jquery.ui.datepicker-ta.js, jquery.ui.datepicker-th.js, jquery.ui.datepicker-tj.js, jquery.ui.datepicker-tr.js, jquery.ui.datepicker-uk.js, jquery.ui.datepicker-vi.js, jquery.ui.datepicker-zh-CN.js, jquery.ui.datepicker-zh-HK.js, jquery.ui.datepicker-zh-TW.js
 * Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */

/* English/UK initialisation for the jQuery UI date picker plugin. */
/* Written by Stuart. */
jQuery(function($){
    $.datepicker.regional['en'] = {
        closeText: 'Done',
        prevText: 'Prev',
        nextText: 'Next',
        currentText: 'Today',
        monthNames: ['January','February','March','April','May','June',
            'July','August','September','October','November','December'],
        monthNamesShort: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
            'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
        dayNames: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],
        dayNamesShort: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],
        dayNamesMin: ['Su','Mo','Tu','We','Th','Fr','Sa'],
        weekHeader: 'Wk',
        dateFormat: 'dd/mm/yy',
        firstDay: 1,
        isRTL: false,
        showMonthAfterYear: false,
        yearSuffix: ''};
});

/* French initialisation for the jQuery UI date picker plugin. */
/* Written by Keith Wood (kbwood{at}iinet.com.au),
 Stéphane Nahmani (sholby@sholby.net),
 Stéphane Raimbault <stephane.raimbault@gmail.com> */
jQuery(function($){
    $.datepicker.regional['fr'] = {
        closeText: 'Fermer',
        prevText: 'Précédent',
        nextText: 'Suivant',
        currentText: 'Aujourd\'hui',
        monthNames: ['Janvier','Février','Mars','Avril','Mai','Juin',
            'Juillet','Août','Septembre','Octobre','Novembre','Décembre'],
        monthNamesShort: ['Janv.','Févr.','Mars','Avril','Mai','Juin',
            'Juil.','Août','Sept.','Oct.','Nov.','Déc.'],
        dayNames: ['Dimanche','Lundi','Mardi','Mercredi','Jeudi','Vendredi','Samedi'],
        dayNamesShort: ['Dim.','Lun.','Mar.','Mer.','Jeu.','Ven.','Sam.'],
        dayNamesMin: ['D','L','M','M','J','V','S'],
        weekHeader: 'Sem.',
        dateFormat: 'dd/mm/yy',
        firstDay: 1,
        isRTL: false,
        showMonthAfterYear: false,
        yearSuffix: ''};
});

/* Japanese initialisation for the jQuery UI date picker plugin. */
/* Written by Kentaro SATO (kentaro@ranvis.com). */
jQuery(function($){
    $.datepicker.regional['ja'] = {
        closeText: '閉じる',
        prevText: '&#x3C;前',
        nextText: '次&#x3E;',
        currentText: '今日',
        monthNames: ['1月','2月','3月','4月','5月','6月',
            '7月','8月','9月','10月','11月','12月'],
        monthNamesShort: ['1月','2月','3月','4月','5月','6月',
            '7月','8月','9月','10月','11月','12月'],
        dayNames: ['日曜日','月曜日','火曜日','水曜日','木曜日','金曜日','土曜日'],
        dayNamesShort: ['日','月','火','水','木','金','土'],
        dayNamesMin: ['日','月','火','水','木','金','土'],
        weekHeader: '週',
        dateFormat: 'yy/mm/dd',
        firstDay: 0,
        isRTL: false,
        showMonthAfterYear: true,
        yearSuffix: '年'};
});
;
var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){var t=jQuery,n=function(){function e(){}return e.autoMobilize=!0,e.wijCSS={widget:"ui-widget",overlay:"ui-widget-overlay",content:"ui-widget-content",header:"ui-widget-header",stateDisabled:"ui-state-disabled",stateFocus:"ui-state-focus",stateActive:"ui-state-active",stateDefault:"ui-state-default",stateHightlight:"ui-state-highlight",stateHover:"ui-state-hover",stateChecked:"ui-state-checked",stateError:"ui-state-error",getState:function(e){return e=e.charAt(0).toUpperCase()+e.substr(1),t.wijmo.wijCSS["state"+e]},icon:"ui-icon",iconCheck:"ui-icon-check",iconRadioOn:"ui-icon-radio-on",iconRadioOff:"ui-icon-radio-off",iconClose:"ui-icon-close",iconArrow4Diag:"ui-icon-arrow-4-diag",iconNewWin:"ui-icon-newwin",iconVGripSolid:"ui-icon-grip-solid-vertical",iconHGripSolid:"ui-icon-grip-solid-horizontal",iconPlay:"ui-icon-play",iconPause:"ui-icon-pause",iconStop:"ui-icon-stop",iconArrowUp:"ui-icon-triangle-1-n",iconArrowRight:"ui-icon-triangle-1-e",iconArrowDown:"ui-icon-triangle-1-s",iconArrowLeft:"ui-icon-triangle-1-w",iconArrowRightDown:"ui-icon-triangle-1-se",iconCaratUp:"ui-icon-carat-1-n",iconCaratRight:"ui-icon-carat-1-e",iconCaratDown:"ui-icon-carat-1-s",iconCaratLeft:"ui-icon-carat-1-w",iconSeekFirst:"ui-icon-seek-first",iconSeekEnd:"ui-icon-seek-end",iconSeekNext:"ui-icon-seek-next",iconSeekPrev:"ui-icon-seek-prev",inputSpinnerLeft:"ui-input-spinner-left",inputSpinnerRight:"ui-input-spinner-right",inputTriggerLeft:"ui-input-trigger-left",inputTriggerRight:"ui-input-trigger-right",inputSpinnerTriggerLeft:"ui-input-spinner-trigger-left",inputSpinnerTriggerRight:"ui-input-spinner-trigger-right",cornerAll:"ui-corner-all",cornerLeft:"ui-corner-left",cornerRight:"ui-corner-right",cornerBottom:"ui-corner-bottom",cornerBL:"ui-corner-bl",cornerBR:"ui-corner-br",cornerTop:"ui-corner-top",cornerTL:"ui-corner-tl",cornerTR:"ui-corner-tr",helperClearFix:"ui-helper-clearfix",helperReset:"ui-helper-reset",helperHidden:"ui-helper-hidden",priorityPrimary:"ui-priority-primary",prioritySecondary:"ui-priority-secondary",button:"ui-button",buttonText:"ui-button-text",buttonTextOnly:"ui-button-text-only",tabs:"ui-tabs",tabsTop:"ui-tabs-top",tabsBottom:"ui-tabs-bottom",tabsLeft:"ui-tabs-left",tabsRight:"ui-tabs-right",tabsLoading:"ui-tabs-loading",tabsActive:"ui-tabs-active",tabsPanel:"ui-tabs-panel",tabsNav:"ui-tabs-nav",tabsHide:"ui-tabs-hide",tabsCollapsible:"ui-tabs-collapsible",activeMenuitem:"ui-active-menuitem"},e.wijMobileCSS={content:"ui-content",header:"ui-header",overlay:"ui-overlay",stateDisabled:"ui-disabled",stateFocus:"ui-focus",stateActive:"ui-btn-active",stateDefault:"ui-btn-up-a",iconArrowUp:"ui-icon-arrow-u",iconArrowRight:"ui-icon-arrow-r",iconArrowDown:"ui-icon-arrow-d",iconArrowLeft:"ui-icon-arrow-l",iconArrowRightDown:"ui-icon-arrow-d",iconSeekFirst:"ui-icon-arrow-l",iconSeekEnd:"ui-icon-arrow-r",iconSeekNext:"ui-icon-arrow-l",iconSeekPrev:"ui-icon-arrow-r",iconClose:"ui-icon-delete",iconStop:"ui-icon-grid",iconCheck:"ui-icon-checkbox-on"},e.autoInit=function(n,r){if(t.mobile&&t.mobile.page&&r){var i=t.mobile.page.prototype.options.keepNative;i&&i.length&&i.indexOf(r)===-1?i=[i,r].join(", "):i=r,t.mobile.page.prototype.options.keepNative=i}t.mobile&&t.wijmo[n]&&t.wijmo[n].prototype&&t.wijmo[n].prototype.enhanceWithin&&t(document).bind("pagecreate create",function(e){t.wijmo[n].prototype.enhanceWithin(e.target)})},e.registerWidget=function(n,r,i,s){var o="wijmo."+n,u;typeof i=="function"&&(u=i,i=null);if(i===null||i===undefined)i=t.extend(!0,{},r),r=t.wijmo.widget;i.options=i.options||{},i.options.initSelector=i.options.initSelector||":jqmData(role='"+n+"')",t.mobile&&i.options&&i.options.wijMobileCSS&&(i.options.wijCSS=i.options.wijCSS||{},t.extend(i.options.wijCSS,i.options.wijMobileCSS)),t.widget(o,r,i),u?u.call():this.autoInit&&this.autoInit(n,i.options.initSelector)},e}();t.wijmo=n;var r=function(){function e(){}return e.prototype.destroy=function(){},e.prototype._setOption=function(e,t){},e.prototype._create=function(){},e.prototype._init=function(){},e.prototype.widget=function(){return this.element},e}();e.JQueryUIWidget=r,r.prototype.options={wijCSS:t.wijmo.wijCSS},r.prototype.destroy=function(){t.Widget.prototype.destroy.apply(this,arguments)},r.prototype._setOption=function(e,n){t.Widget.prototype._setOption.apply(this,arguments)},r.prototype._create=function(){t.Widget.prototype._create.apply(this,arguments)},r.prototype._init=function(){t.Widget.prototype._init.apply(this,arguments)};var i=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(r);e.JQueryMobileWidget=i,t(window.document).trigger("wijmoinit");var s=function(e){function n(){e.apply(this,arguments),this._widgetCreated=!1}return __extends(n,e),n.prototype._baseWidget=function(){return this._isMobile?t.mobile.widget:t.Widget},n.prototype._createWidget=function(e,n){this._widgetCreated=!0,this._syncEventPrefix&&(this.widgetEventPrefix=this.widgetName),window.wijmoApplyWijTouchUtilEvents&&(t=window.wijmoApplyWijTouchUtilEvents(t)),this._baseWidget().prototype._createWidget.apply(this,arguments)},n.prototype._create=function(){this._baseWidget().prototype._create.apply(this,arguments)},n.prototype._init=function(){this._baseWidget().prototype._init.apply(this,arguments)},n.prototype.destroy=function(){this._baseWidget().prototype.destroy.apply(this,arguments)},n.prototype._setOption=function(e,t){this._baseWidget().prototype._setOption.apply(this,arguments),e==="disabled"&&this._isMobile&&this.element.removeClass("ui-state-disabled").addClass(this.options.wijCSS.stateDisabled)},n}(i);e.wijmoWidget=s,s.prototype._syncEventPrefix=!0,s.prototype._isMobile=!1,s.prototype.options=t.extend(!0,{},s.prototype.options,s.prototype._baseWidget().prototype.options),t.mobile!=null&&t.wijmo.autoMobilize===!0?(t.extend(!0,s.prototype.options.wijCSS,t.wijmo.wijMobileCSS),s.prototype._isMobile=!0,s.prototype.enhanceWithin=function(e,n){this._widgetCreated||t.mobile.widget.prototype.enhanceWithin.apply(this,arguments)},s.prototype._getCreateOptions=function(){var e=this.element,n,r=r=function(e){if(typeof e=="undefined")return{};if(e===null)return{};var n=/(?:(?:\{[\n\r\t\s]*(.+?)\s*\:[\n\r\t\s]*)|(?:,[\n\r\t\s]*(.+?)\s*\:[\n\r\t\s]*))('(.*?[^\\])')?/gi,r=/\[.*?(?=[\]\[])|[\]\[].*?(?=[\]])/gi,i=e.replace(n,function(e,t,n,r){var i,s=/[\n\r\t\s]*['"]?([^\{,\s]+?)['"]?\s*:[\n\r\t\s]*/i,o=/\:[\n\r\t\s]*(?:'(.*)')?/i;return i=e.replace(s,'"$1":'),r?i.replace(o,':"$1"'):i}).replace(r,function(e){var t=/'(.*?[^\\])'/g;return e.replace(t,'"$1"')});return t.parseJSON(i)},i=r(e.attr("data-"+t.mobile.nsNormalize("options")));return n=t.mobile.widget.prototype._getCreateOptions.apply(this,arguments),t.extend(n,i)},t.widget("wijmo.widget",t.mobile.widget,s.prototype)):t.widget("wijmo.widget",s.prototype)})(wijmo||(wijmo={}));;
var wijmo;(function(e){e.expando=".wijmo";var t=function(){function e(e){this.message=e,this.stack="Wijmo"+(new Error).stack,this.name="WijmoError"}return e}();e.WijmoError=t;var n=t;n.prototype=new Error,n.prototype.constructor=n})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){var n=function(){function t(e){this.object=e}return t.getFrom=function(r,i){typeof i=="undefined"&&(i=!0);var s=e.expando,o;if(Object(r)!==r)return null;o=r[s],o&&o.object!==r&&(o=null);if(i&&!(o instanceof t&&Object.prototype.hasOwnProperty.call(r,s))){o=new t(r);try{Object.defineProperty(r,s,{value:o,configurable:!1,enumerable:!1,writable:!1})}catch(u){r[s]=o}}return o},t}();t.Expando=n})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){(function(e){function t(e){return function(){var t=function(){return e.prototype._call.apply(t,arguments)};return $.extend(t,e.prototype),e.apply(t,arguments),t}}e.funcClass=t})(e.util||(e.util={}));var t=e.util})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(e){function i(e){return t.isFunction(e.subscribe)}function l(e){return typeof e=="undefined"&&(e=null),new f(e)}function c(e){return typeof e=="undefined"&&(e=null),new f(e,!0)}function h(e){return t.isFunction(e)&&i(e)}var t=jQuery,n=function(){function e(e,t){this.handler=e,this.context=t}return e.prototype.trigger=function(e){return this.handler.apply(this.context,e)},e}();e.SubscriberEntry=n;var r=function(){function r(e){this.defaultContext=e,this._entries=[]}return r.prototype.subscribe=function(t,r){typeof r=="undefined"&&(r=this.defaultContext);var i=this,s=new n(t,r);return this._entries.push(s),{dispose:function(){return e.util.remove(i._entries,s)}}},r.prototype.trigger=function(){var t=[];for(var n=0;n<arguments.length-0;n++)t[n]=arguments[n+0];e.util.each(this._entries,function(e,n){return n.trigger(t)})},r.makeSubscribable=function(n){var i=new r(n);return n.subscribe=t.proxy(i.subscribe,i),i},r}();e.Subscribable=r,e.isSubscriptable=i;var s=function(){function e(){}return e.prototype.subscribe=function(e,t){return this._subscribable=this._subscribable||new r(this),this._subscribable.subscribe(e,t)},e.prototype._trigger=function(){var e=[];for(var t=0;t<arguments.length-0;t++)e[t]=arguments[t+0];this._subscribable&&this._subscribable.trigger.apply(this._subscribable,arguments)},e}();e.BaseObservable=s;var o=function(e){function t(t){e.call(this),this.mutable=t}return __extends(t,e),t.prototype._call=function(){return this.mutable.value},t}(s);e._ReadOnlyObservable=o;var u=e.util.funcClass(o),a=function(e){function t(t,n){typeof n=="undefined"&&(n=!1),e.call(this),this.value=t,this.checkNewValue=n}return __extends(t,e),t.prototype._call=function(e){return arguments.length>0&&(!this.checkNewValue||e!==this.value)&&(this.value=e,this._trigger(e),this._readOnly&&this._readOnly._trigger(e)),this.value},t.prototype.read=function(){return this._readOnly=this._readOnly||new u(this),this._readOnly},t}(s);e._MutableObservable=a;var f=e.util.funcClass(a);e.observable=l,e.observableWithNewValueCheck=c,e.isObservable=h})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){(function(n){function i(e,t){return typeof t=="undefined"&&(t=!1),r.isArray(e)?e=e.slice(0):r.isPlainObject(e)&&(e=r.extend(!!t,{},e)),e}function s(e){return typeof e=="string"||e instanceof String}function o(e){return typeof e=="number"}function u(t){return t===e.expando||t===r.expando}function a(e,t){var n=this;r.each(e,function(e,r){if(!u(e))return t.call(n,e,r)})}function f(t,n){var i=r.map(t,n);return delete i[e.expando],i}function l(e){var t;return e&&r.isFunction(e.toString)&&e.toString!==Object.prototype.toString?t=e.toString():t=JSON.stringify(e),t!=null&&t.length>2&&t[0]==='"'&&t[t.length-1]==='"'&&(t=t.substr(1,t.length-2)),t}function c(e){var t=[];for(var n=0;n<arguments.length-1;n++)t[n]=arguments[n+1];return e.replace(/{(\d+)}/g,function(e,n){return l(t[parseInt(n,10)])})}function h(e,t){var n=!0;return a(e,function(e,r){n=r,t&&(n=t.call(n,n,e));if(!n)return!1}),n}function p(e,t){var n=!1;return a(e,function(e,r){n=r,t&&(n=t.call(n,n,e));if(n)return!1}),n}function d(e,t){var n,i,o;if(e==null)return t==null?0:-1;if(t==null)return 1;if(r.isArray(e)&&r.isArray(t)){i=Math.min(e.length,t.length);for(n=0;n<i;n++){o=d(e[n],t[n]);if(o!==0)return o}return e.length-t.length}return s(e)&&s(t)?e<t?-1:e>t?1:0:(o=e-t,isNaN(o)?0:o)}function v(e,t){return r.inArray(t,e)>=0}function m(e,t){var n=0,r;for(r=0;r<e.length;)e[r]!==t?r++:(e.splice(r,1),n++);return n}function g(e,t){return e==-1?-1:e==0?0:t?Math.ceil(e/t):1}function y(e,t){function i(){return e.apply(t,n)}var n=[];for(var r=0;r<arguments.length-2;r++)n[r]=arguments[r+2];if(typeof setTimeout==typeof undefined)return i();setTimeout(i,10)}function b(e){if(!console)return;console.error?console.error(e):console.log&&console.log(e)}function w(e,n){var r=0,i=e,s;for(;;){var o=n.indexOf(".",r);o>=0?(s=n.substring(r,o),r=o+1):r>0?s=n.substring(r):s=n,i=i[s],t.isObservable(i)&&(i=i());if(o<0)break}return i}function E(e,n,r){var i=0,s;for(;;){var o=n.indexOf(".",i);o>=0?(s=n.substring(i,o),i=o+1):i>0?s=n.substring(i):s=n;var u=e[s];if(!(o>=0)){t.isObservable(u)?u(r):e[s]=r;break}t.isObservable(u)&&(u=u()),e=u}}function S(e){return typeof e=="object"&&!r.isArray(e)&&!r.isPlainObject(e)&&e.constructor!==Object.prototype.constructor}function x(e){t.util.each(e,function(e,n){if(!n||typeof n!="object")return;t.util.each(n,function(e,r){var i;if(!t.util.isString(r))return;i=/\/Date\((-?\d+)\)\//.exec(r);if(!i)return;n[e]=new Date(parseInt(i[1],10))})})}var r=jQuery;n.clone=i,n.isString=s,n.isNumeric=o,n.isInternalProperty=u,n.each=a,n.map=f,n.toStr=l,n.format=c,n.every=h,n.some=p,n.compare=d,n.contains=v,n.remove=m,n.pageCount=g,n.executeDelayed=y,n.logError=b,n.getProperty=w,n.setProperty=E,n.isClassInstance=S,n.convertDateProperties=x})(t.util||(t.util={}));var n=t.util})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){t.errors={},t.errors._register=function(n){t.util.each(n,function(n,r){function i(){var n=[];for(var i=0;i<arguments.length-0;i++)n[i]=arguments[i+0];var s;return $.isFunction(r)?r=r.apply(this,arguments):arguments.length>0&&(n.unshift(r),r=t.util.format.apply(this,n)),r=$.trim(r),s=r[r.length-1],s!=="."&&s!=="!"&&s!=="?"&&(r+="."),new e.WijmoError(r)}t.errors[n]=function(){throw i.apply(this,arguments)},t.errors[n].create=i})},t.errors._register({indexOutOfBounds:"Index is outside the bounds of the array.",notImplemented:"The operation is not implemented",unsupprtedOperation:"Unsupported operation",unsupportedFilterOperator:"Unsupported filter operator: {0}",unsupportedDataSource:"Unsupported data source",argument:function(e){var t="Unexpected argument value.";return e&&(t+="\nParameter name: "+e),t},argumentNull:"Argument '{0}' is null/undefined",noParser:"There is no parser for type '{0}'",noUrl:"Url is not specified",cantConvert:"Value can't be converted to type '{0}': '{1}'",noGlobalize:"Globalize is not defined. Make sure you include globalize.js",itemNotInView:"Item {0} is not in the data view",unsupportedFilterFormat:"The filter format is not supported",multiPropertyKeysNotSupported:"Entities with multiple properties in the primary key are not supported. Entity type: {0}",keyPropertyNotFound:"Key property not found in {0} entity type"})})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){(function(t){function r(n,r){typeof r=="undefined"&&(r=!1),n=n.toLowerCase();var i=t.ops[n];if(!i){var s=t.opMap[n];s&&(i=t.ops[s])}return!i&&r&&e.errors.unsupportedOperator(n),i}function i(i){var s;if(!n.isPlainObject(i))return{operator:"==",op:t.ops.equals,value:i};var o=i.operator||t.ops.equals;if(e.util.isString(i.operator)){if(i.operator.toLowerCase()==="nofilter")return null;o=r(i.operator,!0)}else n.isFunction(o.apply)||e.errors.unsupportedOperator(o);return{operator:i.operator,op:o,value:i.value}}function s(t){var r={original:t,func:null,normalized:null};if(n.isFunction(t))r.func=t;else if(n.isArray(t))e.errors.unsupportedFilterFormat(t);else if(t){r.normalized={};var s=!1;e.util.each(t,function(t,o){n.isArray(o)&&e.errors.unsupportedFilterFormat(),o=i(o),o&&(r.normalized[t]=o,s=!0)}),s?r.func=function(t){return e.util.every(r.normalized,function(n,r){var i=e.util.getProperty(t,r);return n.op.apply(i,n.value)})}:r.normalized=null}return!r.normalized&&!r.func&&(r.func=function(e){return!0}),r}var n=jQuery;t.opMap={"==":"equals",doesnotcontain:"notcontain","!=":"notequal",">":"greater","<":"less",">=":"greaterorequal","<=":"lessorequal",isnotempty:"notisempty",isnotnull:"notisnull"},t.normalizeCondition=i,t.compile=s,t.ops=function(){function r(e,n,r,i){return t[e.toLowerCase()]={name:e,arity:n,applicableTo:r,apply:i}}function i(t){return t instanceof Date&&(t=t.getTime()),e.util.isString(t)&&(t=t.toLowerCase()),t}function s(e,t,n){r(e,2,t,function(e,t){return n(i(e),i(t))})}function o(e,t,n){r(e,1,t,n)}function u(e,t){s(e,n.prim,t)}function a(e,t){s(e,n.str,t)}var t={},n={str:["string"],prim:["string","number","datetime","currency","boolean"]};return u("Equals",function(e,t){return e==t}),u("NotEqual",function(e,t){return e!=t}),u("Greater",function(e,t){return e>t}),u("Less",function(e,t){return e<t}),u("GreaterOrEqual",function(e,t){return e>=t}),u("LessOrEqual",function(e,t){return e<=t}),a("Contains",function(e,t){return e==t||e&&e.indexOf&&e.indexOf(t)>=0}),a("NotContain",function(e,t){return e!=t&&(!e||!e.indexOf||e.indexOf(t)<0)}),a("BeginsWith",function(e,t){return e==t||e&&e.indexOf&&e.indexOf(t)==0}),a("EndsWith",function(t,n){var r;return!e.util.isString(t)||!e.util.isString(n)?!1:(r=t.lastIndexOf(n),r>=0&&t.length-r===n.length)}),o("IsEmpty",n.str,function(e){return!e&&e!==0&&e!==!1}),o("NotIsEmpty",n.str,function(e){return!!e||e===0||e===!1}),o("IsNull",n.prim,function(e){return e==null}),o("NotIsNull",n.prim,function(e){return e!=null}),t}()})(e.filtering||(e.filtering={}));var t=e.filtering})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){(function(t){function n(t){var n=[];return t=e.util.isString(t)?t.split(/,\s*/):$.isArray(t)?t.slice(0):[t],t=$.isArray(t)?t.slice(0):[t],e.util.each(t,function(t,r){var i=!0,s;if(r==null)return;if(!e.util.isString(r)){r.property!=null&&n.push(r);return}if(r[0]==="-")i=!1,r=r.substr(1);else{var o=/\s(asc|desc)\s*$/.exec(r);o&&(r=r.substr(0,o.index),i=o[1]!=="desc")}n.push({property:r,asc:i})}),n}function r(t,r){typeof r=="undefined"&&(r=e.util.compare);var i=n(t),s={original:t,propertyCompareTo:r,compare:null,normalized:i};return i!=null&&(s.compare=function(t,n){var s=0,o,u;for(s=0;s<i.length;s++){u=i[s],o=r(e.util.getProperty(t,u.property),e.util.getProperty(n,u.property));if(o!==0)return u.asc||(o=-o),o}return 0}),s}t.compile=r})(e.sorting||(e.sorting={}));var t=e.sorting})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){function r(r){return t.isFunction(r)||e.errors.argument("factory"),n.push(r),{dispose:function(){e.util.remove(n,r)}}}function i(t){if(s(t))return t;var r=e.util.some(n,function(e){return e(t)});return r||e.errors.unsupportedDataSource()}function s(e){return e&&t.isFunction(e.count)&&t.isFunction(e.item)&&t.isFunction(e.getProperty)}var t=jQuery,n=[];e.registerDataViewFactory=r,r(function(e){return s(e)&&e}),r(function(n){return t.isArray(n)&&new e.ArrayDataView(n)}),e.asDataView=i,e.isDataView=s})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){var t=jQuery,n=function(){function n(n){function i(e){return function(){if(r)return;r=!0;try{e.apply(this,arguments)}finally{r=!1}}}this.array=n,this.currentItem=e.observableWithNewValueCheck(null),this.currentPosition=e.observableWithNewValueCheck(-1);var r=!1;this.currentItem.subscribe(i(function(e){this.currentPosition(e==null?-1:t.inArray(e,this.array))}),this),this.currentPosition.subscribe(i(function(t){e.util.isNumeric(t)||e.errors.argument("value"),(t<-1||t>=this.array.length)&&e.errors.indexOutOfBounds(),this.currentItem(t<0?null:this.array[t])}),this)}return n.prototype.update=function(){var e=this.currentItem(),n=this.currentPosition(),r=t.inArray(e,this.array);r<0&&e==null&&this._recentlyRemovedItem!=null&&(r=t.inArray(this._recentlyRemovedItem,this.array)),r>=0?(e&&(this._recentlyRemovedItem=e),this.currentPosition(r)):n>=0&&n<this.array.length?this.currentItem(this.array[n]):(this.currentPosition(-1),this.currentItem(null))},n.prototype.updateDelayed=function(){e.util.executeDelayed(this.update,this)},n}();e.CurrencyManager=n})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){var t=jQuery,n=function(){function t(t){function n(){this.pageSize()>0&&this.pageIndex()>=0?(this._skip=this.pageSize()*this.pageIndex(),this._take=this.pageSize()):(this._skip=0,this._take=-1),t(!0)}this.onChanged=t,this.filter=e.observable(),this.sort=e.observable(),this.pageIndex=e.observable(0),this.pageSize=e.observable(0),this._skip=0,this._take=-1,this.filter.subscribe(function(e){this.onFilterChanged(e),t()},this),this.sort.subscribe(function(){this._compiledSort=e.sorting.compile(this.sort()),t()},this),this.pageIndex.subscribe(n,this),this.pageSize.subscribe(n,this)}return t.prototype.onFilterChanged=function(t){this._compiledFilter=e.filtering.compile(t)},t.prototype.setFilter=function(e){this.filter(e)},t.prototype.update=function(e){"filter"in e&&this.setFilter(e.filter),"sort"in e&&this.sort(e.sort),"pageSize"in e&&this.pageSize(e.pageSize),"pageIndex"in e&&this.pageIndex(e.pageIndex)},t.prototype.apply=function(t,n){typeof n=="undefined"&&(n=!0);var r=this,i=[];e.util.each(t,function(e,t){if(r._compiledFilter&&!r._compiledFilter.func(t))return;i.push(t)}),this._compiledSort&&i.sort(this._compiledSort.compare);var s=i.length;return n&&this._take>0&&(this._skip>0&&i.splice(0,Math.min(this._skip,i.length)),this._take<i.length&&(i.length=this._take)),{results:i,totalCount:s}},t.prototype.toObj=function(){return{filter:this._compiledFilter&&this._compiledFilter.normalized,sort:this._compiledSort&&this._compiledSort.normalized,pageSize:this.pageSize(),pageIndex:this.pageIndex()}},t}();e.Shape=n;var r=function(){function r(t){this.isRemote=!1,this.localPaging=!0,this.local=[],this._updatingShape=!1,this._pageCount=e.observable(1),this._totalItemCount=e.observable(0),this._isLoaded=e.observable(!1),this._isLoading=e.observable(!1),this._currentEditItem=e.observable(),this._isCurrentEditItemNew=!1,this._currentEditItemSnapshot=null,this.isLoading=this._isLoading.read(),this.isLoaded=this._isLoaded.read(),this._changed=new e.Subscribable(this),this.currentEditItem=this._currentEditItem.read(),this._initCurrency(),this._initShape(t)}return r.prototype.dispose=function(){},r.prototype.count=function(){return this.local.length},r.prototype.item=function(t){return(t<0||t>=this.local.length)&&e.errors.indexOutOfBounds(),this.local[t]},r.prototype.indexOf=function(e){return t.inArray(e,this.local)},r.prototype.getSource=function(){return this.sourceArray},r.prototype.toObservableArray=function(){return this._koArray||(this._koArray=ko.observableArray(this.local)),this._koArray},r.prototype._getProps=function(n){var r=[];return e.util.each(n,function(e,n){e=String(e);if(e.match(/^_/))return;if(t.isFunction(n)&&!n.subscribe)return;r.push({name:e})}),r},r.prototype.getProperties=function(){return this.count()?this._getProps(this.item(0)):[]},r.prototype._readProperty=function(t,n){return e.util.getProperty(t,n)},r.prototype.getProperty=function(e,t){var n=this._resolve(e,!0);return this._readProperty(n.item,t)},r.prototype._writeProperty=function(t,n,r){e.util.setProperty(t,n,r)},r.prototype.setProperty=function(e,t,n){var r=this._resolve(e,!0);return r.item===this.currentEditItem()&&this._currentEditItemSnapshot&&!(t in this._currentEditItemSnapshot)&&(this._currentEditItemSnapshot[t]=this.getProperty(e,t)),this._writeProperty(r.item,t,n),this},r.prototype.subscribe=function(e,t){return this._changed.subscribe(e,t)},r.prototype.trigger=function(){this._currencyManager.updateDelayed(),this._changed.trigger(this.local),this._koArray&&this._koArray.notifySubscribers(this.local)},r.prototype.canFilter=function(){return!0},r.prototype.canSort=function(){return!0},r.prototype._updateShape=function(e){this._updatingShape=!0;try{this._shape.update(e)}finally{this._updatingShape=!1}},r.prototype.prevPage=function(){return this.pageIndex()<1?!1:(this.pageIndex(this.pageIndex()-1),!0)},r.prototype.nextPage=function(){return this.pageCount()>0&&this.pageIndex()+1>=this.pageCount()?!1:(this.pageIndex(this.pageIndex()+1),!0)},r.prototype._createShape=function(e){return new n(e)},r.prototype._initShape=function(e){var t=this,n=function(e){typeof e=="undefined"&&(e=!1),t._updatingShape||t.refresh(null,e&&t.localPaging)};this._shape=this._createShape(n),e&&this._updateShape(e),this.filter=this._shape.filter,this.sort=this._shape.sort,this.pageIndex=this._shape.pageIndex,this.pageSize=this._shape.pageSize,this.pageCount=this._pageCount.read(),this.totalItemCount=this._totalItemCount.read()},r.prototype._localRefresh=function(n){typeof n=="undefined"&&(n=this.localPaging);var r=this,i=this._shape.apply(this.sourceArray,n);return this.local.length=0,t.each(i.results,function(e,t){return r.local.push(t)}),n&&this._totalItemCount(i.totalCount),this._pageCount(e.util.pageCount(this.totalItemCount(),this.pageSize())),this.trigger(),t.Deferred().resolve().promise()},r.prototype._remoteRefresh=function(){return this._localRefresh()},r.prototype.refresh=function(e,t){typeof t=="undefined"&&(t=!1);var n=this;this.cancelRefresh(),e&&this._updateShape(e),this._isLoading(!0);var r=t?this._localRefresh():this._remoteRefresh();return r.then(function(){n._isLoaded(!0),n._isLoading(!1)})},r.prototype.cancelRefresh=function(){},r.prototype._initCurrency=function(){this._currencyManager=new e.CurrencyManager(this.local),this.currentItem=this._currencyManager.currentItem,this.currentPosition=this._currencyManager.currentPosition},r.prototype.isCurrentEditItemNew=function(){return this._isCurrentEditItemNew},r.prototype._beginEdit=function(e,t){this.commitEdit(),this._currentEditItemSnapshot={},this._isCurrentEditItemNew=t,this._currentEditItem(e)},r.prototype.canAdd=function(){return!0},r.prototype.add=function(t){t||e.errors.argument("item"),this.commitEdit(),this.local.push(t),this._beginEdit(t,!0),this.trigger()},r.prototype.canAddNew=function(){return!1},r.prototype.addNew=function(){return e.errors.unsupportedOperation()},r.prototype.editItem=function(e){typeof e=="undefined"&&(e=this.currentItem()),this.commitEdit();var t=this._resolve(e);t&&this._beginEdit(t.item,!1)},r.prototype.canRemove=function(){return!0},r.prototype._remove=function(t){this.local.splice(t.index,1),e.util.remove(this.sourceArray,t.item),this.trigger()},r.prototype.remove=function(e){typeof e=="undefined"&&(e=this.currentItem()),this.commitEdit();var t=this._resolve(e);return t?(this._remove(t),!0):!1},r.prototype.canCancelEdit=function(){return!0},r.prototype.cancelEdit=function(){var n=this,r;if(!this.currentEditItem())return;var i=this.currentEditItem();this._currentEditItem(null),this._isCurrentEditItemNew?e.util.remove(this.local,this.item):this._currentEditItemSnapshot&&t.each(this._currentEditItemSnapshot,function(e,t){return n._writeProperty(i,e,t)}),this.trigger()},r.prototype.canCommitEdit=function(){return!0},r.prototype.commitEdit=function(){if(!this.currentEditItem())return;var t=this.currentEditItem;this._currentEditItem(null),this._isCurrentEditItemNew&&this.sourceArray.push(t);var n=this._shape._compiledFilter&&this._shape._compiledFilter.func;n&&!n(t)&&e.util.remove(this.local,t),this.trigger()},r.prototype._resolve=function(t,n){typeof n=="undefined"&&(n=!1);var r;return e.util.isNumeric(t)?{index:t,item:this.item(t)}:(r=this.indexOf(t),r<0?(n&&e.errors.itemNotInView(t),null):{index:r,item:t})},r}();e.ArrayDataViewBase=r;var i=function(e){function t(t,n){e.call(this,n),this.sourceArray=t,this.refresh()}return __extends(t,e),t}(r);e.ArrayDataView=i})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){var t=jQuery,n=function(e){function n(t){e.call(this),this.isRemote=!0,this.sourceArray=[],t&&this._construct(t)}return __extends(n,e),n.prototype._construct=function(e){this.options=e=t.extend({localPaging:!1},e),this.localPaging=e.localPaging,this._updateShape(e)},n}(e.ArrayDataViewBase);e.RemoteDataView=n})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(e){var t=jQuery,n=function(){function e(e){this._originalReader=e}return e.prototype.read=function(e){e.items=null,this._originalReader&&t.isFunction(this._originalReader.read)&&this._originalReader.read(e),t.isArray(e.items)||(t.isArray(e.data)?e.items=e.data:e.data&&t.isArray(e.data.rows)?e.items=e.data.rows:e.items=[]);if(e.dynamic)if(!e.data||isNaN(e.data.totalRows))throw"totalRows value is missing"},e}(),r=function(r){function i(e){var i=this;r.call(this),this.dataSource=e,this.isRemote=!0,this.localPaging=!0,this._origLoaded=e.loaded,this._origReader=e.reader,e.loaded=function(e,n){i._loaded(),t.isFunction(i._origLoaded)&&i._origLoaded.apply(i,arguments)},e.reader=new n(e.reader)}return __extends(i,r),i.prototype.dispose=function(){this.dataSource.loaded=this._origLoaded,this.dataSource.reader=this._origReader,r.prototype.dispose.call(this)},i.prototype.getProperties=function(){return this.sourceArray&&this.sourceArray.length?this._getProps(this.sourceArray[0]):[]},i.prototype._loaded=function(){this.sourceArray=this.dataSource.items,this.dataSource.data&&e.util.isNumeric(this.dataSource.data.totalRows)&&this._totalItemCount(this.dataSource.data.totalRows);var t=r.prototype._localRefresh.call(this,!this.dataSource.dynamic);this._currentDeferred&&t.then(this._currentDeferred.resolve)},i.prototype._remoteRefresh=function(){this._currentDeferred&&this._currentDeferred.state()==="pending"&&this._currentDeferred.fail(),this._currentDeferred=t.Deferred();var e={},n=!1;return this.dataSource.dynamic&&(n=!0,e.data=this._prepareRequest(),this.dataSource.proxy&&(this._origDataOption||(this._origDataOption=t.extend({},this.dataSource.proxy.options.data)),this.dataSource.proxy.options.data=t.extend({},this._origDataOption,e.data))),this.dataSource.load(e,n),this._currentDeferred},i.prototype._prepareRequest=function(){return{filtering:this._prepareFilterRequest(),paging:this._preparePageRequest(),sorting:this._prepareSortRequest()}},i.prototype._prepareFilterRequest=function(){var e=[];return this._shape._compiledFilter&&this._shape._compiledFilter.normalized&&t.each(this._shape._compiledFilter.normalized,function(t,n){e.push({dataKey:t,filterOperator:n.op.Name,filterValue:n.value})}),e},i.prototype._preparePageRequest=function(){return{pageIndex:this._shape.pageIndex(),pageSize:this._shape.pageSize()}},i.prototype._prepareSortRequest=function(){return!this._shape._compiledSort||!this._shape._compiledSort.normalized||this._shape._compiledSort.normalized.length==0?[]:t.map(this._shape._compiledSort.normalized,function(e){return{dataKey:e.property,sortDirection:e.asc?"ascending":"descending"}})},i}(e.ArrayDataViewBase);e.registerDataViewFactory(function(e){if(typeof wijdatasource=="function"&&e instanceof wijdatasource)return new r(e);return})})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));;
function __wijReadOptionEvents(e,t){for(var n=0;n<e.length;n++)t.options[e[n]]!==null&&t.element.bind(e[n],t.options[e[n]]);for(var n in t.options)if(n.indexOf(" ")!==-1){var r=n.split(" ");for(var i=0;i<r.length;i++)r[i].length>0&&t.element.bind(r[i],t.options[n])}}function wijmoASPNetParseOptionsReviewer(o,k){var a,v=o[k],d;if(v)switch(typeof v){case"string":a=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?):(\d{3})Z$/.exec(v),a&&(d=new Date(+a[1],+a[2]-1,+a[3],+a[4],+a[5],+a[6],+a[7]),d.setFullYear(+a[1]),o[k]=d);break;case"object":if(v.needQuotes!==undefined&&v.valueString!==undefined)v.needQuotes?o[k]=v.valueString:o[k]=eval(v.valueString);else for(k in v)wijmoASPNetParseOptionsReviewer(v,k)}}function wijmoASPNetParseOptions(e){var t;if(!e)return e;for(t in e)wijmoASPNetParseOptionsReviewer(e,t);return e}var wijmo;(function(e){function t(e){return isNaN(e)?0:e}$.fn.extend({wijContent:function(e){return this.each(function(){this.innerHTML='<iframe frameborder="0" style="width: 100%; height: 100%;" src="'+e+'">"'})},wijAddVisibilityObserver:function(e,t){return this.each(function(){$(this).addClass("wijmo-wijobserver-visibility"),$(this).bind("wijmovisibilitychanged"+(t?"."+t:""),e)})},wijRemoveVisibilityObserver:function(e){return this.each(function(){$(this).removeClass("wijmo-wijobserver-visibility"),e?jQuery.isFunction(e)?$(this).unbind("wijmovisibilitychanged",e):$(this).unbind("wijmovisibilitychanged."+e):$(this).unbind("wijmovisibilitychanged")})},wijTriggerVisibility:function(){return this.each(function(){var e=$(this);e.hasClass("wijmo-wijobserver-visibility")&&e.trigger("wijmovisibilitychanged"),e.find(".wijmo-wijobserver-visibility").trigger("wijmovisibilitychanged")})},leftBorderWidth:function(){var e=parseFloat($(this).css("borderLeftWidth")),n=parseFloat($(this).css("padding-left")),r=0;return $(this).css("margin-left")!=="auto"&&(r=parseFloat($(this).css("margin-left"))),t(e)+t(n)+t(r)},rightBorderWidth:function(){var e=parseFloat($(this).css("borderRightWidth")),n=parseFloat($(this).css("padding-right")),r=0;return $(this).css("margin-right")!=="auto"&&(r=parseFloat($(this).css("margin-right"))),t(e)+t(n)+t(r)},topBorderWidth:function(){var e=parseFloat($(this).css("borderTopWidth")),n=parseFloat($(this).css("padding-top")),r=0;return $(this).css("margin-top")!=="auto"&&(r=parseFloat($(this).css("margin-top"))),t(e)+t(n)+t(r)},bottomBorderWidth:function(){var e=parseFloat($(this).css("borderBottomWidth")),n=parseFloat($(this).css("padding-bottom")),r=0;return $(this).css("margin-bottom")!=="auto"&&(r=parseFloat($(this).css("margin-bottom"))),t(e)+t(n)+t(r)},borderSize:function(){var e=$(this).leftBorderWidth()+$(this).rightBorderWidth(),t=$(this).topBorderWidth()+$(this).bottomBorderWidth(),n={width:e,height:t};return n},setOutWidth:function(e){var t=$(this).leftBorderWidth()+$(this).rightBorderWidth();return $(this).width(e-t),this},setOutHeight:function(e){var t=$(this).topBorderWidth()+$(this).bottomBorderWidth();return $(this).height(e-t),this},getWidget:function(){var e=this.data("widgetName");return e&&e!==""?this.data(e):null},wijshow:function(e,t,n,r,i){var s=e.animated||!1,o=e.duration||400,u=e.easing,a=e.option||{};r&&$.isFunction(r)&&r.call(this);if(s){if(t&&t[s]){t[s](e,$.extend(n,{complete:i}));return}if($.effects)if($.effects[s]||$.effects.effect&&$.effects.effect[s]){this.show(s,$.extend(a,{easing:u}),o,i);return}}this.show(),i&&$.isFunction(i)&&i.call(this)},wijhide:function(e,t,n,r,i){var s=e.animated||!1,o=e.duration||400,u=e.easing,a=e.option||{};r&&$.isFunction(r)&&r.call(this);if(s){if(t&&t[s]){t[s](e,$.extend(n,{complete:i}));return}if($.effects)if($.effects[s]||$.effects.effect&&$.effects.effect[s]){this.hide(s,$.extend(a,{easing:u}),o,i);return}}this.hide(),i&&$.isFunction(i)&&i.call(this)}}),$.save=function(e,t){if($.effects)return $.effects.save(e,t);for(var n=0;n<t.length;n++)t[n]!==null&&e.data("ec.storage."+t[n],e[0].style[t[n]])},$.restore=function(e,t){if($.effects)return $.effects.restore(e,t);for(var n=0;n<t.length;n++)t[n]!==null&&e.css(t[n],e.data("ec.storage."+t[n]))},$.createWrapper=function(e){if($.effects)return $.effects.createWrapper(e);if(e.parent().is(".ui-effects-wrapper"))return e.parent();var t={width:e.outerWidth(!0),height:e.outerHeight(!0),"float":e.css("float")},n=$("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),r=document.activeElement;return e.wrap(n),(e[0]===r||$.contains(e[0],r))&&$(r).focus(),n=e.parent(),e.css("position")=="static"?(n.css({position:"relative"}),e.css({position:"relative"})):($.extend(t,{position:e.css("position"),zIndex:e.css("z-index")}),$.each(["top","left","bottom","right"],function(n,r){t[r]=e.css(r),isNaN(parseInt(t[r],10))&&(t[r]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),n.css(t).show()},$.removeWrapper=function(e){if($.effects)return $.effects.removeWrapper(e);var t,n=document.activeElement;return e.parent().is(".ui-effects-wrapper")?(t=e.parent().replaceWith(e),(e[0]===n||$.contains(e[0],n))&&$(n).focus(),t):e},$.setMode=function(e,t){return $.effects?$.effects.setMode(e,t):(t==="toggle"&&(t=e.is(":hidden")?"show":"hide"),t)};var n=function(){};$.extend(n.prototype,{_UTFPunctuationsString:" ! \" # % & ' ( ) * , - . / : ; ? @ [ \\ ] { } ¡ « ­ · » ¿ ; · ՚ ՛ ՜ ՝ ՞ ՟ ։ ֊ ־ ׀ ׃ ׳ ״ ، ؛ ؟ ٪ ٫ ٬ ٭ ۔ ܀ ܁ ܂ ܃ ܄ ܅ ܆ ܇ ܈ ܉ ܊ ܋ ܌ ܍ । ॥ ॰ ෴ ๏ ๚ ๛ ༄ ༅ ༆ ༇ ༈ ༉ ༊ ་ ༌ ། ༎ ༏ ༐ ༑ ༒ ༺ ༻ ༼ ༽ ྅ ၊ ။ ၌ ၍ ၎ ၏ ჻ ፡ ። ፣ ፤ ፥ ፦ ፧ ፨ ᙭ ᙮ ᚛ ᚜ ᛫ ᛬ ᛭ ។ ៕ ៖ ៗ ៘ ៙ ៚ ៜ ᠀ ᠁ ᠂ ᠃ ᠄ ᠅ ᠆ ᠇ ᠈ ᠉ ᠊ ‐ ‑ ‒ – — ― ‖ ‗ ‘ ’ ‚ ‛ “ ” „ ‟ † ‡ • ‣ ․ ‥ … ‧ ‰ ‱ ′ ″ ‴ ‵ ‶ ‷ ‸ ‹ › ※ ‼ ‽ ‾ ⁁ ⁂ ⁃ ⁅ ⁆ ⁈ ⁉ ⁊ ⁋ ⁌ ⁍ ⁽ ⁾ ₍ ₎ 〈 〉 、 。 〃 〈 〉 《 》 「 」 『 』 【 】 〔 〕 〖 〗 〘 〙 〚 〛 〜 〝 〞 〟 〰 ﴾ ﴿ ︰ ︱ ︲ ︵ ︶ ︷ ︸ ︹ ︺ ︻ ︼ ︽ ︾ ︿ ﹀ ﹁ ﹂ ﹃ ﹄ ﹉ ﹊ ﹋ ﹌ ﹐ ﹑ ﹒ ﹔ ﹕ ﹖ ﹗ ﹘ ﹙ ﹚ ﹛ ﹜ ﹝ ﹞ ﹟ ﹠ ﹡ ﹣ ﹨ ﹪ ﹫ ！ ＂ ＃ ％ ＆ ＇ （ ） ＊ ， － ． ／ ： ； ？ ＠ ［ ＼ ］ ｛ ｝ ｡ ｢ ｣ ､';this.UTFWhitespacesString_='	  \f                              ​ \u2028   　",isDigit:function(e){var t=e.charCodeAt(0);return t>=48&&t<58},isLetter:function(e){return!!(e+"").match(new RegExp("[A-Za-zªµºÀ-ÖØ-öø-ȟȢ-ȳɐ-ʭʰ-ʸʻ-ˁːˑˠ-ˤˮͺΆΈ-ΊΌΎ-ΡΣ-ώϐ-ϗϚ-ϳЀ-ҁҌ-ӄӇӈӋӌӐ-ӵӸӹԱ-Ֆՙա-ևא-תװ-ײء-غـ-يٱ-ۓەۥۦۺ-ۼܐܒ-ܬހ-ޥअ-हऽॐक़-ॡঅ-ঌএঐও-নপ-রলশ-হড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઋઍએ-ઑઓ-નપ-રલળવ-હઽૐૠଅ-ଌଏଐଓ-ନପ-ରଲଳଶ-ହଽଡ଼ଢ଼ୟ-ୡஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-வஷ-ஹఅ-ఌఎ-ఐఒ-నప-ళవ-హౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹೞೠೡഅ-ഌഎ-ഐഒ-നപ-ഹൠൡඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜໝༀཀ-ཇཉ-ཪྈ-ྋက-အဣ-ဧဩဪၐ-ၕႠ-Ⴥა-ჶᄀ-ᅙᅟ-ᆢᆨ-ᇹሀ-ሆለ-ቆቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኆኈኊ-ኍነ-ኮኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዎዐ-ዖዘ-ዮደ-ጎጐጒ-ጕጘ-ጞጠ-ፆፈ-ፚᎠ-Ᏼᐁ-ᙬᙯ-ᙶᚁ-ᚚᚠ-ᛪក-ឳᠠ-ᡷᢀ-ᢨḀ-ẛẠ-ỹἀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁿℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℱℳ-ℹ々〆〱-〵ぁ-ゔゝゞァ-ヺー-ヾㄅ-ㄬㄱ-ㆎㆠ-ㆷ㐀-䶵一-龥ꀀ-ꒌ가-힣豈-鶴ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹲﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"))},isLetterOrDigit:function(e){return this.isLetter(e)||this.isDigit(e)},isDoubleByteNumber:function(e){var t=e.charCodeAt(0);return t>=65296&&t<65306},isSymbol:function(e){var t=new RegExp("[$+<->^`|~¢-©¬®-±´¶¸×÷ʹʺ˂-ˏ˒-˟˥-˭ʹ͵΄΅҂۩۽۾৲৳৺୰฿༁-༃༓-༗༚-༟༴༶༸྾-࿅࿇-࿌࿏៛᾽᾿-῁῍-῏῝-῟῭-`´῾⁄⁺-⁼₊-₌₠-₯℀℁℃-℆℈℉℔№-℘℞-℣℥℧℩℮Ⅎ℺←-⇳∀-⋱⌀-⌨⌫-⍻⍽-⎚␀-␦⑀-⑊⒜-ⓩ─-▕■-◷☀-☓☙-♱✁-✄✆-✉✌-✧✩-❋❍❏-❒❖❘-❞❡-❧➔➘-➯➱-➾⠀-⣿⺀-⺙⺛-⻳⼀-⿕⿰-⿻〄〒〓〠〶〷〾〿゛゜㆐㆑㆖-㆟㈀-㈜㈪-㉃㉠-㉻㉿㊊-㊰㋀-㋋㋐-㋾㌀-㍶㍻-㏝㏠-㏾꒐-꒡꒤-꒳꒵-꓀꓂-꓄꓆﬩﹢﹤-﹦﹩＄＋＜-＞＾｀｜～￠-￦￨-￮￼�]");return t.test(e+"")},isPunctuation:function(e){return this._UTFPunctuationsString.indexOf(e)>=0},isPrintableChar:function(e){return!this.isLetterOrDigit(e)&&!this.isPunctuation(e)&&!this.isSymbol(e)&&!this.isDoubleByteNumber(e)?e===" ":!0},isAscii:function(e){return e>="!"&&e<="~"},isAsciiLetter:function(e){return e>="A"&&e<="Z"||e>="a"&&e<="z"},isUpper:function(e){return e.toUpperCase()===e},isLower:function(e){return e.toLowerCase()===e},isAlphanumeric:function(e){return this.isLetter(e)?!0:this.isDigit(e)},isAciiAlphanumeric:function(e){return(e<"0"||e>"9")&&(e<"A"||e>"Z")?e>="a"?e<="z":!1:!0},setChar:function(e,t,n){return n>=e.length||n<0?e:e.substr(0,n)+t+e.substr(n+1)}});var r=["\n","\r",'"',"@","+","'","<",">","%","{","}"],i=["!ESC!NN!","!ESC!RR!","!ESC!01!","!ESC!02!","!ESC!03!","!ESC!04!","!ESC!05!","!ESC!06!","!ESC!07!","!ESC!08!","!ESC!09!"],s=["(\n)","(\r)",'(")',"(@)","(\\+)","(')","(\\<)","(\\>)","(%)","(\\{)","(\\})"];$.wij||$.extend({wij:{charValidator:new n,encodeString:function(e){for(var t=0;t<r.length;t++){var n=/c__escapeArr3[i]/g;e=e.replace(n,i[t])}return e},decodeString:function(e){if(e==="")return;for(var t=0;t<i.length;t++){var n=/c__escapeArr2[i]/g;e=e.replace(n,r[t])}return e}}}),jQuery.uaMatch||(jQuery.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}});if(!jQuery.browser){var o=jQuery.uaMatch(navigator.userAgent),u={version:"0",msie:!1,opera:!1,safari:!1,mozilla:!1,webkit:!1,chrome:!1};o.browser&&(u[o.browser]=!0,u.version=o.version),u.chrome?u.webkit=!0:u.webkit&&(u.safari=!0),jQuery.browser=u}})(wijmo||(wijmo={}));;
(function(e){"use strict";e.fn.extend({wijtextselection:function(){var t,n,r=this[0],i=this.val();if(arguments.length===0){var s,o,u,a;if(e.browser.msie&&e.browser.version<9)try{var f=document.selection;r.tagName.toLowerCase()!="textarea"?(s=f.createRange().duplicate(),s.moveEnd("character",i.length),u=s.text===""?i.length:i.lastIndexOf(s.text),s=f.createRange().duplicate(),s.moveStart("character",-i.length),a=s.text.length):(s=f.createRange(),o=s.duplicate(),o.moveToElementText(r),o.setEndPoint("EndToEnd",s),u=o.text.length-s.text.length,a=u+s.text.length)}catch(a){}else u=r.selectionStart,a=r.selectionEnd;var l=i.substring(u,a);return{start:u,end:a,text:l,replace:function(e){return i.substring(0,u)+e+i.substring(a,i.length)}}}if(arguments.length===1){if(typeof arguments[0]=="object"&&typeof arguments[0].start=="number"&&typeof arguments[0].end=="number")t=arguments[0].start,n=arguments[0].end;else if(typeof arguments[0]=="string")(t=i.indexOf(arguments[0]))>-1&&(n=t+arguments[0].length);else if(Object.prototype.toString.call(arguments[0])==="[object RegExp]"){var c=arguments[0].exec(i);c!=null&&(t=c.index,n=t+c[0].length)}}else arguments.length===2&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"&&(t=arguments[0],n=arguments[1]);typeof t=="undefined"&&(t=0,n=i.length);if(e.browser.msie){var h=r.createTextRange();h.collapse(!0),h.moveStart("character",t),h.moveEnd("character",n-t),h.select()}else r.selectionStart=t,r.selectionEnd=n}})})(jQuery);;
var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){"use strict";var t=jQuery,n=(t.ui||t.mobile).keyCode,r=function(e){function r(){e.apply(this,arguments),this._boundMouseWheel=!1,this._wasPopupShowing=!1}return __extends(r,e),r.prototype._elemWithClasses=function(e,n){return typeof n=="undefined"&&(n=[]),t(e).addClass(n.join(" "))},r.prototype._divWithClasses=function(){var e=[];for(var t=0;t<arguments.length-0;t++)e[t]=arguments[t+0];return this._elemWithClasses("<div/>",e)},r.prototype._spanWithClasses=function(){var e=[];for(var t=0;t<arguments.length-0;t++)e[t]=arguments[t+0];return this._elemWithClasses("<span/>",e)},r.prototype._horizontalBorderWidth=function(e){return e.leftBorderWidth()+e.rightBorderWidth()},r.prototype._verticalBorderWidth=function(e){return e.topBorderWidth()+e.bottomBorderWidth()},r.prototype._create=function(){var e=this,n=document.activeElement==this.element[0],r=this._horizontalBorderWidth(this.element),i=this._verticalBorderWidth(this.element);if(this.element[0].tagName.toLowerCase()!=="input")throw"Target element is not a INPUT";this._creationDate=new Date,window.wijmoApplyWijTouchUtilEvents&&(t=window.wijmoApplyWijTouchUtilEvents(t)),this.element.is(":hidden")&&this.element.wijAddVisibilityObserver&&this.element.wijAddVisibilityObserver(function(){e._destroy(),e._create(),e.element.wijRemoveVisibilityObserver&&e.element.wijRemoveVisibilityObserver()},"wijinput"),this.element.data("widgetName",this.widgetName),t.effects&&t.effects.save?t.effects.save(this.element,["width","height"]):t.save&&t.save(this.element,["width","height"]);var s=this.options.wijCSS;this.element.wrap("<div><span/></div"),this.wrapper=this.element.parent(),this.outerDiv=this.wrapper.parent(),this.outerDiv.addClass([s.wijinput,s.widget,s.helperClearFix,s.stateDefault,s.cornerAll].join(" ")),this.wrapper.addClass(s.wijinputWrapper),this.element.addClass(s.wijinputInput).addClass(s.cornerAll).attr("role","textbox");if(!(t.browser.msie&&parseFloat(t.browser.version)<=7))try{this.element.attr("aria-multiline",!1)}catch(o){this.element[0].setAttribute("aria-multiline","false")}var u=this.options.buttonAlign==="left";this.options.showTrigger&&(this.triggerBtn=this._divWithClasses(s.wijinputTrigger,s.stateDefault,u?s.cornerLeft:s.cornerRight).append(this._spanWithClasses(s.icon,s.iconArrowDown)).attr("role","button").appendTo(this.outerDiv),this.element.attr({role:"combobox","aria-expanded":!1})),this.options.showSpinner&&(this.spinner=this._divWithClasses(s.wijinputSpinner,s.wijinputButton),this.spinUp=this._divWithClasses(s.stateDefault,s.wijinputSpinUp).append(this._spanWithClasses(s.icon,s.iconArrowUp)).attr("role","button"),this.spinDown=this._divWithClasses(s.stateDefault,s.wijinputSpinDown).append(this._spanWithClasses(s.icon,s.iconArrowDown)).attr("role","button"),this.options.showTrigger||(this.spinUp.addClass(u?s.cornerTL:s.cornerTR),this.spinDown.addClass(u?s.cornerBL:s.cornerBR)),this.spinner.append(this.spinUp).append(this.spinDown).appendTo(this.outerDiv),this.element.attr("role","spinner")),this.options.showTrigger&&this.options.showSpinner?this.outerDiv.addClass(u?s.inputSpinnerTriggerLeft:s.inputSpinnerTriggerRight):(this.options.showTrigger&&this.outerDiv.addClass(u?s.inputTriggerLeft:s.inputTriggerRight),this.options.showSpinner&&this.outerDiv.addClass(u?s.inputSpinnerLeft:s.inputSpinnerRight)),this._initialize(),n&&t(function(){return e.element.focus().wijtextselection(0,e.element.val().length)});var a=this.element[0].style;a.width&&(this._isInPercents(a.width)?this.outerDiv.width(a.width):this.outerDiv.width(this.element.width()+r-this._horizontalBorderWidth(this.outerDiv)),this.element.width("")),a.height&&(this._isInPercents(a.height)?this.outerDiv.height(a.height):this.outerDiv.height(this.element.height()+i-this._verticalBorderWidth(this.outerDiv)),this.element.height(""))},r.prototype._isInPercents=function(e){return e.match(/%$/)},r.prototype._createTextProvider=function(){return undefined},r.prototype._beginUpdate=function(){},r.prototype._endUpdate=function(){var e=this;this.element.mousewheel&&!this._boundMouseWheel&&(this.element.mousewheel(function(t,n){e.isFocused()&&e._doSpin(n>0,!1)&&t.preventDefault()}),this._boundMouseWheel=!0)},r.prototype._isPopupShowing=function(){return!!this._comboDiv&&this._comboDiv.wijpopup("isVisible")},r.prototype._onTriggerMouseUp=function(){this._wasPopupShowing=this._isPopupShowing()},r.prototype._onTriggerClicked=function(){this._wasPopupShowing?this._hidePopup():(this._showPopup(),this._wasPopupShowing=!0)},r.prototype._showPopup=function(){this._popupComboList()},r.prototype._hidePopup=function(){this._comboDiv.wijpopup("hide")},r.prototype._initialize=function(){var e=this;this.element.data("initializing",!0),this._trigger("initializing"),this.element.data("preText",this.element.val()),this.element.data("elementValue",this.element.val()),this.element.data("errorstate",!1),this.element.data("breakSpinner",!0),this.element.data("prevCursorPos",-1),this.element.data("simulating",!1),this._createTextProvider(),this._beginUpdate();var n=this.options,r=function(e){return(e.which?e.which:e.button)===1},i=function(i){if(e.options.disabled)return;if(!r(i))return;e._trySetFocus(),e.element.data("breakSpinner",!1),e._addState("active",t(e)),e._doSpin(t(i.currentTarget).hasClass(n.wijCSS.wijinputSpinUp),!0)},s=function(n){if(e.options.disabled)return;if(!r(n))return;e._stopSpin(),e._removeState("active",t(e))},o;this.triggerBtn&&!n.disabledState&&this.triggerBtn.bind({mouseover:function(){if(e.options.disabled)return;e._addState("hover",t(e))},mouseout:function(){if(e.options.disabled)return;e._removeState("hover",t(e))},mousedown:function(n){if(e.options.disabled)return;if(!r(n))return;e._stopEvent(n),e._addState("active",t(e)),e._trigger("triggerMouseDown")},mouseup:function(t){e._onTriggerMouseUp()},click:function(n){if(e.options.disabled)return;e._stopEvent(n),e._stopSpin(),e._removeState("active",t(e)),e._trigger("triggerMouseUp"),e._onTriggerClicked(),e._trySetFocus()}}),this.spinUp&&!n.disabledState&&this.spinUp.bind({mouseover:function(){if(e.options.disabled)return;e._addState("hover",t(e))},mouseout:function(){if(e.options.disabled)return;e._removeState("hover",t(e)),e._removeState("active",t(e)),e._stopSpin()},mousedown:i,mouseup:s}),this.spinDown&&!n.disabledState&&this.spinDown.bind({mouseover:function(){if(e.options.disabled)return;e._addState("hover",t(e))},mouseout:function(){if(e.options.disabled)return;e._removeState("hover",t(e)),e._removeState("active",t(e)),e._stopSpin()},mousedown:i,mouseup:s}),this.element.bind({"focus.wijinput":t.proxy(this._onFocus,this),"blur.wijinput":t.proxy(this._onBlur,this),"mouseup.wijinput":t.proxy(this._onMouseUp,this),"keypress.wijinput":t.proxy(this._onKeyPress,this),"keydown.wijinput":t.proxy(this._onKeyDown,this),"keyup.wijinput":t.proxy(this._onKeyUp,this),"compositionstart.wijinput":t.proxy(this._onCompositionStart,this),"compositionend.wijinput":t.proxy(this._onCompositionEnd,this),"change.wijinput":t.proxy(this._onChange,this),"paste.wijinput":t.proxy(this._onPaste,this),"drop.wijinput":t.proxy(this._onDrop,this)}),this.element.bind("propertychange.wijinput input.wijinput",t.proxy(this._onInput,this)),this.element.data("initializing",!1),this._resetData(),this._endUpdate(),this._updateText(),this.options.disabledState&&(o=n.disabled,this.disable(),n.disabled=o),this.options.disabled&&this.disable(),this.element.data("initialized",!0),this._trigger("initialized")},r.prototype._init=function(){},r.prototype._setOption=function(e,t){this._super(e,t);switch(e){case"buttonAlign":case"showTrigger":case"showSpinner":this._destroy(),this._create();break;case"showNullText":this._updateText();break;case"disabled":this.element.attr("disabled",t);var n=t?"addClass":"removeClass",r=this.options.wijCSS.stateDisabled;this.element[n](r),this.triggerBtn&&this.triggerBtn[n](r),this.spinUp&&this.spinUp[n](r),this.spinDown&&this.spinDown[n](r)}},r.prototype.destroy=function(){this._super(),this._destroy()},r.prototype.isDestroyed=function(){return!this.outerDiv},r.prototype._destroy=function(){if(this.isDestroyed())return;this.wrapper=undefined,this.outerDiv=undefined,this.element.unbind(".wijinput"),this.element.removeData("errorstate").removeData("breakSpinner").removeData("prevCursorPos").removeData("simulating").removeData("isPassword").removeClass(this.options.wijCSS.wijinputInput).removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow").removeAttr("aria-expanded"),this.element.parent().replaceWith(this.element),this.element.parent().replaceWith(this.element),t.effects&&t.effects.restore?t.effects.restore(this.element,["width","height"]):t.restore&&t.restore(this.element,["width","height"])},r.prototype.widget=function(){return this.outerDiv||this._super()},r.prototype._getCulture=function(e){return typeof e=="undefined"&&(e=this.options.culture),Globalize.findClosestCulture(e||this.options.culture)},r.prototype._addState=function(e,t){t.is(":not(.ui-state-disabled)")&&t.addClass(this.options.wijCSS.getState(e))},r.prototype._removeState=function(e,t){t.removeClass(this.options.wijCSS.getState(e))},r.prototype._isInitialized=function(){return!this.element.data("initializing")},r.prototype._setData=function(e){this.setText(e)},r.prototype._resetData=function(){},r.prototype._validateData=function(){},r.prototype.getText=function(){return this._isInitialized()?this._textProvider.toString(!0,!1,!1):this.element.val()},r.prototype.setText=function(e){this._isInitialized()?(this._textProvider.set(e),this._updateText()):this.element.val(e)},r.prototype.getPostValue=function(){return this._isInitialized()?this._textProvider.toString(!0,!1,!0):this.element.val()},r.prototype.selectText=function(e,t){typeof e=="undefined"&&(e=0),typeof t=="undefined"&&(t=this.getText().length);if(this.element.is(":disabled"))return;this.element.wijtextselection(e,t)},r.prototype.focus=function(){if(this.element.is(":disabled"))return;this.element.get(0).focus()},r.prototype.isFocused=function(){return this.outerDiv.hasClass(this.options.wijCSS.stateFocus)},r.prototype._raiseTextChanged=function(){var e=this.element.val(),t=this.element.data("preText");!!this.element.data("initialized")&&t!==e&&(this._trigger("textChanged",null,{text:e}),this.element.data("changed",!0)),this.element.data("preText",e)},r.prototype._raiseDataChanged=function(){},r.prototype._allowEdit=function(){return!this.element.attr("readOnly")&&!this.element.is(":disabled")},r.prototype._updateText=function(e){typeof e=="undefined"&&(e=!1);if(!this._isInitialized())return;e=!!e;var t=this.element.wijtextselection(),n=this.options;this.isDeleteAll&&n.showNullText?(this.isDeleteAll=!1,n.date=null,this.element.val(n.nullText)):(this.element.val(this._textProvider.toString()),this.options.text=this._textProvider.toString(!0,!1,!1));if(this.element.is(":disabled"))return;e&&this.selectText(t.start,t.end),this.element.data("prevCursorPos",t.start),this._raiseTextChanged(),this._raiseDataChanged()},r.prototype._trySetFocus=function(){if(!this.isFocused())try{this.options.disableUserInput||this.element.focus()}catch(e){}},r.prototype._deleteSelText=function(e){typeof e=="undefined"&&(e=!1);if(!this._allowEdit())return;var t=this.element.wijtextselection(),n;if(e){if(t.end<1)return;t.end===t.start&&t.start--}t.end--,t.end<t.start&&(t.end=t.start),n=new u,this._textProvider.removeAt(t.start,t.end,n),this._updateText(),this.selectText(n.testPosition,n.testPosition)},r.prototype._fireIvalidInputEvent=function(e){var n=this,r;if(t.isFunction(this.options.invalidInput)&&this._trigger("invalidInput",null,{widget:this,"char":e})===!0)return;this.element.data("errorstate")||(r=this.options.invalidClass||this.options.wijCSS.stateError,this.element.data("errorstate",!0),window.setTimeout(function(){n.outerDiv&&n.outerDiv.removeClass(r),n.element.data("errorstate",!1)},200),this.outerDiv.addClass(r))},r.prototype._onInput=function(e){if(!this._isSimulating()||!this.element.data("ime")||this.element.data("isComposingIME")){this.element.data("isComposingIME")&&this.element.data("simulationPending",!0);return}this._simulate()},r.prototype._keyDownPreview=function(e){return!1},r.prototype._onDoubleByteCharacter=function(){var e=this.element.data("lastDbsState"),t=this.element.wijtextselection(),n=this.element.val();this.element.data("isComposingIME")&&e&&e.selection.start===t.start&&e.Text===n?(this.element.removeData("lastDbsState"),this._onCompositionEnd()):(this.element.data("lastDbsState",{selection:t,text:n}),this._onCompositionStart())},r.prototype._onCompositionStart=function(){if(this.element.data("isComposingIME"))return;this.element.data("isComposingIME",!0),this._beforeSimulate(!0)},r.prototype._onCompositionEnd=function(){if(!this.element.data("isComposingIME"))return;this.element.data("isComposingIME",!1),this._isInitialized()&&(!this._textProvider||!this._textProvider.noMask)&&this._simulateIfPending()},r.prototype._simulateIfPending=function(){this.element.data("simulationPending")&&this.element.data("lastSelection")&&this._simulate()},r.prototype._beforeSimulate=function(e){typeof e=="undefined"&&(e=!1),this.element.data("lastSelection")||(this.element.data("lastSelection",this.element.wijtextselection()),this.element.data("lastValue",this.element.val())),this.element.data("ime",e),this.element.data("simulating",!0)},r.prototype._isSimulating=function(){return this.element.data("simulating")},r.prototype._simulate=function(e){var t=this,n=null,r,i,s;this.element.data("simulationPending",!1),typeof e=="string"?n=e:(r=this.element.wijtextselection(),i=this.element.data("lastSelection").start,s=r.end,s>=i&&(n=this.element.val().substring(i,s))),n&&window.setTimeout(function(){if(!t.element.data("lastValue"))return;t.element.val(t.element.data("lastValue"));var e=t.element.data("lastSelection"),r,i;t.element.wijtextselection(e),t.element.data("batchKeyPress",!0),t.element.data("simulating",!1),r=jQuery.Event("keypress"),r.ctrlKey=r.altKey=!1;for(i=0;i<n.length;i++)r.which=r.charCode=r.keyCode=n.charCodeAt(i),t._onKeyPress(r);t.element.data("batchKeyPress",!1),t._endSimulate()},1)},r.prototype._endSimulate=function(){this._simulateIfPending(),this.element.removeData("ime"),this.element.removeData("lastSelection"),this.element.removeData("lastValue")},r.prototype._onKeyDown=function(e){this.element.data("prevCursorPos",-1);if(!this._isInitialized()||this._textProvider&&!!this._textProvider.noMask)return;var r=this._getKeyCode(e);if(r===229){this._onDoubleByteCharacter();return}this._onCompositionEnd();if(this.options.disableUserInput){this._stopEvent(e);return}if(this._keyDownPreview(e)){this._stopEvent(e);return}switch(r){case n.UP:this._doSpin(!0,!1),this._stopEvent(e);return;case n.DOWN:this._doSpin(!1,!1),this._stopEvent(e);return}if(e.ctrlKey)switch(r){case n.INSERT:case 67:return;default:}if(e.ctrlKey||e.altKey)return;switch(r){case 112:case 113:case 114:case 115:case 116:case 117:case n.TAB:case n.CAPSLOCK:case n.END:case n.HOME:case n.CTRL:case n.SHIFT:return;case n.BACKSPACE:this._deleteSelText(!0),this._stopEvent(e);return;case n.DELETE:this._deleteSelText(!1),this._stopEvent(e);return;case n.ENTER:this._onEnterDown(e);break;case n.ESCAPE:this._stopEvent(e),window.setTimeout(t.proxy(this._resetData,this),1);return;case n.PAGE_UP:case n.PAGE_DOWN:case n.ALT:this._stopEvent(e);return}},r.prototype._onEnterDown=function(e){this.options.hideEnter&&this._stopEvent(e)},r.prototype._onKeyUp=function(e){if(this._textProvider&&!!this._textProvider.noMask)return;var t=this._getKeyCode(e);if(this._isSimulating()){t===n.ENTER&&this._onCompositionEnd();return}if(!this._isInitialized())return;if(t===n.ENTER||t===n.ESCAPE)return;if(this.options.disableUserInput){this._raiseTextChanged(),this._raiseDataChanged();return}this._stopEvent(e)},r.prototype._getKeyCode=function(e){var t=window.navigator.userAgent;return t.indexOf("iPod")===-1&&t.indexOf("iPhone")===-1||e.which!==127?e.keyCode||e.which:8},r.prototype._keyPressPreview=function(e){return!1},r.prototype._onKeyPress=function(e){if(this._isSimulating()||this._textProvider&&!!this._textProvider.noMask)return;this.element.data("prevCursorPos",-1);if(this.options.disableUserInput)return;if(!this._allowEdit())return;if(e.ctrlKey&&e.keyCode===119){this._onPaste(e);return}var t=e.keyCode||e.which,r,i;switch(t){case 0:case n.TAB:case n.UP:case n.DOWN:case n.LEFT:case n.RIGHT:return;case n.BACKSPACE:this._stopEvent(e);return;case n.ENTER:this.options.hideEnter&&this._stopEvent(e);return}if(e.ctrlKey||e.altKey)if(t!==n.SPACE)return;if(this._keyPressPreview(e))return;i=String.fromCharCode(t),r=this._textProvider.replaceWith(this.element.wijtextselection(),i),r?(this._updateText(),this.selectText(r.testPosition+1,r.testPosition+1)):this._fireIvalidInputEvent(i),this.element.data("batchKeyPress")||this._stopEvent(e)},r.prototype._isNullText=function(e){return e=e||this.element.val(),this.options.showNullText&&e===this.options.nullText},r.prototype._doFocus=function(){var e=this.element.wijtextselection(),n=e.start,r;this._updateText(),r=this.element.val(),r.length===n&&(n=0),t.browser.safari||this.selectText(n,n)},r.prototype._afterFocused=function(){this._isNullText()&&this._doFocus()},r.prototype._onFocus=function(e){if(this.options.disableUserInput)return;this._addState("focus",this.outerDiv);if(!this.element.data("breakSpinner"))return;if(!this._isInitialized())return;if(!this._allowEdit())return;this.element.data("focusNotCalledFirstTime")||this.element.data("focusNotCalledFirstTime",(new Date).getTime()),this._afterFocused()},r.prototype._onBlur=function(e){var t=this;if(this.options.disableUserInput)return;this._onCompositionEnd();if(this._isComboListVisible())return;var n=this.isFocused(),r;this._removeState("focus",this.outerDiv);if(!this.element.data("breakSpinner")){this.element.get(0).focus(),r=this.element.data("prevCursorPos"),r!==undefined&&r!==-1&&this.selectText(r,r);return}if(!this._isInitialized()||!n)return;this.element.data("value",this.element.val()),window.setTimeout(function(){t._updateText(),t._validateData(),t.element.data("changed")&&(t.element.data("changed",!1),t._popupVisible()||(t._trigger("change"),t.element.change()))},100)},r.prototype._popupVisible=function(){return this._isComboListVisible()},r.prototype._onMouseUp=function(e){if(!this._isInitialized())return;if(this.element.is(":disabled"))return;var t=this.element.wijtextselection();this.element.data("prevCursorPos",t.start)},r.prototype._onChange=function(){if(!this.element)return;var e=this.element.val(),t=this.getText();t!==e&&this.setText(e)},r.prototype._onPaste=function(e){if(this._textProvider&&!!this._textProvider.noMask)return;this._beforeSimulate();var t=this;window.setTimeout(function(){t._simulate()},1)},r.prototype._onDrop=function(e){this._beforeSimulate();if(e.originalEvent&&e.originalEvent.dataTransfer){var t=e.originalEvent.dataTransfer.getData("Text");t&&this._simulate(t)}},r.prototype._stopEvent=function(e){e.stopPropagation(),e.preventDefault()},r.prototype._calcSpinInterval=function(){return this._repeatingCount++,this._repeatingCount>10?50:this._repeatingCount>4?100:this._repeatingCount>2?200:400},r.prototype._doSpin=function(e,t){return!1},r.prototype._stopSpin=function(){this.element.data("breakSpinner",!0),this._repeatingCount=0},r.prototype._hasComboItems=function(){return!!this.options.comboItems&&this.options.comboItems.length},r.prototype._isComboListVisible=function(){return this._comboDiv?this._comboDiv.wijpopup("isVisible"):!1},r.prototype._popupComboList=function(){var e=this;if(!this._hasComboItems())return;if(!this._allowEdit())return;var n;this._comboDiv===undefined&&(this._comboDiv=t("<div></div>").appendTo(document.body).css("position","absolute"),n=this._normalize(this.options.comboItems),this._comboDiv.wijlist({maxItemsCount:5,selected:function(t,n){e._setData(n.item.value),e._comboDiv.wijpopup("hide"),e._trySetFocus()}}),this._comboDiv.wijlist("setItems",n),this._comboDiv.wijlist("renderList")),this._comboDiv.width(this.outerDiv.width()),this._comboDiv.wijlist("option","autoSize",!this.options.comboHeight),this.options.comboHeight&&this._comboDiv.height(this.options.comboHeight),this._comboDiv.wijlist("refreshSuperPanel"),this._comboDiv.wijpopup({autoHide:!0}),this.outerDiv.attr("aria-expanded",!0),this._comboDiv.wijpopup("show",{of:this.outerDiv,offset:"0 4",hidden:function(){e.outerDiv.attr("aria-expanded",!1)}})},r.prototype._normalize=function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,function(e){return typeof e=="string"?{label:e,value:e}:t.extend({label:e.label||e.value,value:e.value||e.label},e)})},r}(e.wijmoWidget);e.wijinputcore=r;var i="wijmo-wijinput",s=i+"-",o=function(){function e(){this.wijCSS={wijinput:i,wijinputInput:s+"input",wijinputWrapper:s+"wrapper",wijinputTrigger:s+"trigger",wijinputSpinner:s+"spinner",wijinputButton:s+"button",wijinputSpinUp:s+"spinup",wijinputSpinDown:s+"spindown"},this.culture="",this.invalidClass=t.wijmo.wijCSS.stateError,this.nullText="",this.showNullText=!1,this.hideEnter=!1,this.disableUserInput=!1,this.buttonAlign="right",this.showTrigger=!1,this.showSpinner=!1,this.comboItems=undefined,this.comboWidth=undefined,this.comboHeight=undefined,this.initializing=null,this.initialized=null,this.triggerMouseDown=null,this.triggerMouseUp=null,this.textChanged=null,this.invalidInput=null}return e}();r.prototype.options=t.extend(!0,{},e.wijmoWidget.prototype.options,new o);var u=function(){function e(){this.characterEscaped=1,this.noEffect=2,this.sideEffect=3,this.success=4,this.unknown=0,this.hint=0,this.alphanumericCharacterExpected=-2,this.asciiCharacterExpected=-1,this.digitExpected=-3,this.invalidInput=-51,this.letterExpected=-4,this.nonEditPosition=-54,this.positionOutOfRange=-55,this.promptCharNotAllowed=-52,this.signedDigitExpected=-5,this.unavailableEditPosition=-53,this.testPosition=-1}return e.prototype.clone=function(){var t=new e;return t.hint=this.hint,t.testPosition=this.testPosition,t},e}();e.wijInputResult=u;var a=function(){function e(){}return e.prototype.set=function(e,t){},e.prototype.toString=function(e,t,n,r,i){return""},e.prototype.insertAt=function(e,t,n){return!1},e.prototype.removeAt=function(e,t,n,r){},e.prototype.replaceWith=function(e,t){var n=e.start,r=new u;return e.start<e.end&&(this.removeAt(e.start,e.end-1,r,!0),n=r.testPosition),this.insertAt(t,n,r)?r:null},e}();e.wijTextProvider=a})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){"use strict";function r(e,t){typeof t=="undefined"&&(t=2);var n=""+e+"";if(n.length>t)n=n.substr(n.length-t);else while(n.length<t)n="0"+n;return n}var t=jQuery,n=(t.ui||t.mobile).keyCode,i=function(r){function i(){r.apply(this,arguments)}return __extends(i,r),i.prototype._createTextProvider=function(){this._textProvider=new o(this,this.options.dateFormat)},i.prototype._strToDate=function(e){return this._textProvider.parseDate(e)},i.prototype._beginUpdate=function(){var e=this.options,t,n=null;r.prototype._beginUpdate.call(this),e.minDate&&typeof e.minDate=="string"&&(e.minDate=this._strToDate(e.minDate)),e.maxDate&&typeof e.maxDate=="string"&&(e.maxDate=this._strToDate(e.maxDate)),e.date?typeof e.date=="string"?t=e.date:n=e.date:!this.element.data("elementValue")||(t=this.element.data("elementValue")),t&&(n=this._strToDate(t)),this._safeSetDate(n),this.element.data({defaultDate:n===null?n:new Date(e.date.getTime()),preDate:n===null?n:new Date(e.date.getTime())}),this._resetTimeStamp(),e.showTrigger&&!this._hasComboItems()&&this._initCalendar(),this.element.addClass(e.wijCSS.wijinputdate).attr({"aria-valuemin":new Date(1900,1,1),"aria-valuemax":new Date(2099,1,1),"aria-valuenow":e.date})},i.prototype._endUpdate=function(){var e=this;r.prototype._endUpdate.call(this),this.element.bind("click.wijinput",function(){e._highLightCursor()})},i.prototype._isValidDate=function(e,t){var n=this.options;if(e===undefined)return!1;if(isNaN(e))return!1;if(e.getFullYear()<1||e.getFullYear()>9999)return!1;if(t){if(n.minDate&&e<n.minDate)return!1;if(n.maxDate&&e>n.maxDate)return!1}return!0},i.prototype._checkRange=function(e){var t=this.options;return e&&(t.minDate&&e<t.minDate&&(e=new Date(Math.max(t.minDate,e))),t.maxDate&&e>t.maxDate&&(e=new Date(Math.min(t.maxDate,e)))),e},i.prototype._safeSetDate=function(e){var t=this.options,n=e;return e=this._checkRange(e),isNaN(e)&&(e=n),t.date=e,!0},i.prototype._safeGetDate=function(){var e=this.options.date||this._creationDate;return e=this._checkRange(e),e},i.prototype._setOption=function(e,t){r.prototype._setOption.call(this,e,t);switch(e){case"date":!t||(typeof t=="string"?t=this._strToDate(t):typeof t=="object"?t=new Date(t.getTime()):t=new Date(t),isNaN(t)&&(t=new Date)),this._safeSetDate(t),this._updateText(),this._highLightField();break;case"dateFormat":case"culture":this._textProvider._setFormat(this.options.dateFormat),this._updateText();var n=this.element.data("calendar");n&&n.wijcalendar("option",e,t);break;case"activeField":t=Math.min(t,this._textProvider.getFieldCount()-1),t=Math.max(t,0),this.options.activeField=t,this._highLightField(),this._resetTimeStamp();break;case"nextTooltip":case"prevTooltip":case"titleFormat":case"toolTipFormat":var n=this.element.data("calendar",n);n&&n.wijcalendar("option",e,t)}},i.prototype._setData=function(e){this.option("date",e)},i.prototype._resetData=function(){var e=this.element.data("defaultDate");e===undefined||e===null?(e=this.element.data("elementValue"),e!==undefined&&e!==null&&e!==""?this.setText(e):this._setData(null)):this._setData(e)},i.prototype._resetTimeStamp=function(){this.element.data("cursorPos",0),this.element.data("timeStamp",new Date("1900/1/1"))},i.prototype.getPostValue=function(){if(!this._isInitialized())return this.element.val();if(this.options.showNullText&&this.isDateNull())return"";var e=this._textProvider.toString();return e===this.options.nullText?"":e},i.prototype._highLightField=function(e){typeof e=="undefined"&&(e=this.options.activeField);if(this.isFocused()){var t=this._textProvider.getFieldRange(e);t&&this.element.wijtextselection(t)}},i.prototype._highLightCursor=function(e){if(this._isNullText())return;e===undefined&&(e=Math.max(0,this.element.wijtextselection().start));var t=this._textProvider.getCursorField(e);if(t<0)return;this._setOption("activeField",t)},i.prototype._toNextField=function(){this._setOption("activeField",this.options.activeField+1)},i.prototype._toPrevField=function(){this._setOption("activeField",this.options.activeField-1)},i.prototype._toFirstField=function(){this._setOption("activeField",0)},i.prototype._toLastField=function(){this._setOption("activeField",this._textProvider.getFieldCount())},i.prototype._clearField=function(t){typeof t=="undefined"&&(t=this.options.activeField);var n=this._textProvider.getFieldRange(t),r,i=this;n&&(r=new e.wijInputResult,this._textProvider.removeAt(n.start,n.end,r),this._updateText(),window.setTimeout(function(){i._highLightField()},1))},i.prototype._doSpin=function(e,t){var n=this;return this._allowEdit()?t&&this.element.data("breakSpinner")?!1:(this._textProvider[e?"incEnumPart":"decEnumPart"]()&&(this._updateText(),this._highLightField()),t&&!this.element.data("breakSpinner")&&window.setTimeout(function(){return n._doSpin(e,!0)},this._calcSpinInterval()),!0):!1},i.prototype._onChange=function(){},i.prototype._afterFocused=function(){this._isNullText()&&this._doFocus()},i.prototype._keyDownPreview=function(e){var t=e.keyCode||e.which,r;switch(t){case n.LEFT:return this._toPrevField(),!0;case n.RIGHT:return this._toNextField(),!0;case n.TAB:case n.SPACE:case 188:case 190:case 110:case 191:if(e.shiftKey){if(this.options.activeField>0)return this._toPrevField(),!0}else if(this.options.activeField<this._textProvider.getFieldCount()-1)return this._toNextField(),!0;break;case n.HOME:return e.ctrlKey?this._setOption("date",new Date):this._toFirstField(),!0;case n.END:return e.ctrlKey?this._setOption("date",new Date("1970/1/1")):this._toLastField(),!0;case n.DELETE:if(this._allowEdit())return r=this.element.wijtextselection(),r.end-r.start===this.element.val().length?(this.isDeleteAll=!0,this._setOption("date",new Date("1970/1/1"))):this._clearField(),!0}return!1},i.prototype._autoMoveToNextField=function(e,t){if(!this.options.autoNextField)return;this._textProvider.needToMove(this.options.activeField,e,t)&&this._toNextField()},i.prototype._keyPressPreview=function(e){var t=e.keyCode||e.which,r,i,s,o,u,a,f,l,c,h,p;if(t===n.ENTER)return this.isDateNull()&&(this.options.date=new Date),!1;r=this._textProvider.getFieldRange(this.options.activeField);if(r){if(t===n.TAB)return!0;if(t===n.SPACE)return this._stopEvent(e),!0;i=String.fromCharCode(t),s=this._textProvider.isFieldSep(i,this.options.activeField);if(s)return this._toNextField(),this._stopEvent(e),!0;o=this.element.data("cursorPos"),u=new Date,f=this.element.data("timeStamp"),p=this.element.data("lastInput"),a=u.getTime()-f.getTime()>this.options.keyDelay;var h=i;return a?o=0:p&&(h=p+h),this.element.data({timeStamp:u,lastInput:h}),l=r.start+o,this.element.data("cursorPos",++o),c=this._textProvider.addToField(h,this.options.activeField,l),c?(this._updateText(),this._autoMoveToNextField(o,i),this._highLightField()):(this._resetTimeStamp(),this._fireIvalidInputEvent()),this._stopEvent(e),!0}return!1},i.prototype._raiseDataChanged=function(){var e=this.options.date,t=this.element.data("preDate");this.element.data("preDate",e?new Date(e.getTime()):null);if(!t&&e||t&&!e||t&&e&&t.getTime()!==e.getTime())this._syncCalendar(),this.element.attr("aria-valuenow",e),this._trigger("dateChanged",null,{date:e})},i.prototype.isDateNull=function(){return this.options.date===null||this.options.date===undefined},i.prototype._isMinDate=function(e){return e.getFullYear()===1&&e.getMonth()===0&&e.getDate()===1},i.prototype._initCalendar=function(){var e=this,n=this.options,r=n.calendar,i;if(r===undefined||r===null)return;if(typeof r=="boolean"||r==="default")r=t("<div/>"),r.appendTo(document.body);i=t(r);if(i.length!==1)return;this.element.data("calendar",i),n.localization&&(n.nextTooltip=n.localization.nextTooltip,n.prevTooltip=n.localization.prevTooltip,n.titleFormat=n.localization.titleFormat,n.toolTipFormat=n.localization.toolTipFormat),i.wijcalendar({popupMode:!0,culture:n.culture,nextTooltip:n.nextTooltip||"Next",prevTooltip:n.prevTooltip||"Previous",titleFormat:n.titleFormat||"MMMM yyyy",toolTipFormat:n.toolTipFormat||"dddd, MMMM dd, yyyy",selectedDatesChanged:function(){var t=i.wijcalendar("getSelectedDate"),n=e.option("date");i.wijcalendar("close"),t&&(n&&(t.setHours(n.getHours()),t.setMinutes(n.getMinutes()),t.setSeconds(n.getSeconds()),t.setMilliseconds(n.getMilliseconds())),e.option("date",t),e.selectText()),e._trySetFocus()}}),this._syncCalendar()},i.prototype._syncCalendar=function(){var e=this.element.data("calendar"),t,n;if(!e)return;t=this.options,n=this._safeGetDate(),this._isMinDate(n)&&(n=new Date),e.wijcalendar("option","displayDate",n),t.minDate&&e.wijcalendar("option","minDate",t.minDate),t.maxDate&&e.wijcalendar("option","maxDate",t.maxDate),e.wijcalendar("unSelectAll"),e.wijcalendar("selectDate",n),e.wijcalendar("refresh")},i.prototype._isPopupShowing=function(){var e=this.element.data("calendar");return e?e.wijcalendar("isPopupShowing"):r.prototype._isPopupShowing.call(this)},i.prototype._showPopup=function(){var e=this.element.data("calendar");if(!e)return r.prototype._showPopup.call(this);if(!this._allowEdit())return;this._syncCalendar(),e.wijcalendar("popup",t.extend({},this.options.popupPosition,{of:this.outerDiv}))},i.prototype._hidePopup=function(){var e=this.element.data("calendar");if(!e)return r.prototype._hidePopup.call(this);e.wijcalendar("close")},i.prototype._isCalendarVisible=function(){if(!this._allowEdit())return!1;var e=this.element.data("calendar");return e?e.wijcalendar("isPopupShowing"):!1},i.prototype._popupVisible=function(){return this._hasComboItems()?this._isComboListVisible():this._isCalendarVisible()},i}(e.wijinputcore);e.wijinputdate=i;var s=function(){function t(){this.wijCSS={wijinputdate:e.wijinputcore.prototype.options.wijCSS.wijinput+"-date"},this.date=null,this.minDate=null,this.maxDate=null,this.dateFormat="d",this.startYear=1950,this.smartInputMode=!0,this.activeField=0,this.keyDelay=800,this.autoNextField=!0,this.calendar="default",this.popupPosition={offset:"0 4"},this.dateChanged=null}return t}();i.prototype.options=t.extend(!0,{},e.wijinputcore.prototype.options,new s),t.wijmo.registerWidget("wijinputdate",i.prototype);var o=function(n){function i(e,t){n.call(this),this.inputWidget=e,this.maskPartsCount=0,this.pattern="M/d/yyyy",this._disableSmartInputMode=!1,this.paddingZero=r,this.descriptors=new Array(0),this.desPostions=new Array(0),this.fields=new Array(0),this._setFormat(t)}return __extends(i,n),i.prototype.initialize=function(){},i.prototype.getFieldCount=function(){return this.fields.length},i.prototype.getFieldRange=function(e){var t=this.fields[e];return{start:t.startIndex,end:t.startIndex+t.getText().length}},i.prototype.getCursorField=function(e){e=Math.min(e,this.desPostions.length-1),e=Math.max(e,0);var n=this.desPostions[e].desc,r;if(n.type===-1){r=t.inArray(n,this.descriptors);if(!(r>0&&this.descriptors[r-1].type!==-1))return-1;n=this.descriptors[r-1]}return t.inArray(n,this.fields)},i.prototype.needToMove=function(e,t,n){if(!this.inputWidget._isValidDate(this.inputWidget._safeGetDate(),!0))return!1;var r=this.fields[e],i=parseInt(n,10);if(t===r.maxLen)return!0;if(isNaN(i))return!1;switch(r.type){case 20:case 25:case 45:case 46:return i>1;case 47:case 48:return i>2;case 30:case 31:return i>3;case 50:case 51:case 60:case 61:return i>6}return!1},i.prototype._getCulture=function(){return this.inputWidget._getCulture()},i.prototype._isDigitString=function(e){e=t.trim(e);if(e.length===0)return!0;var n=e.charAt(0),r,i;if(n==="+"||n==="-")e=e.substr(1),e=t.trim(e);if(e.length===0)return!0;try{return r=parseFloat(e),i=r.toString(),i===e}catch(s){return!1}},i.prototype._setFormat=function(e){this.descriptors=[];var n="",r="",i=!1,s=!1,o,u;this.pattern=this._parseFormatToPattern(e);for(o=0;o<this.pattern.length;o++){u=this.pattern.charAt(o);if(s){this.descriptors.push(this.createDescriptor(-1,u)),n="",s=!1;continue}if(u==="\\"){s=!0,n.length>0&&(this.handlePattern(n)||this.descriptors.push(this.createDescriptor(-1,r)),n="");continue}if(u==="'"){i?(i=!1,n=""):(i=!0,n.length>0&&(this.handlePattern(n)||this.descriptors.push(this.createDescriptor(-1,r)),n=""));continue}if(i){this.descriptors.push(this.createDescriptor(-1,u)),n="";continue}o||(r=u),r!==u&&n.length>0&&(this.handlePattern(n)||this.descriptors.push(this.createDescriptor(-1,r)),n=""),n+=u,r=u}n.length>0&&(this.handlePattern(n)||this.descriptors.push(this.createDescriptor(-1,r))),this.fields=t.grep(this.descriptors,function(e){return e.type!==-1})},i.prototype._parseFormatToPattern=function(e){var t=this.inputWidget._getCulture().calendars.standard,n=t.patterns.d;if(e.length<=1)switch(e){case"":case"d":n=t.patterns.d;break;case"D":n=t.patterns.D;break;case"f":n=t.patterns.D+" "+t.patterns.t;break;case"F":n=t.patterns.D+" "+t.patterns.T;break;case"g":n=t.patterns.d+" "+t.patterns.t;break;case"G":n=t.patterns.d+" "+t.patterns.T;break;case"m":n=t.patterns.M;break;case"M":n=t.patterns.M;break;case"s":n=t.patterns.S;break;case"t":n=t.patterns.t;break;case"T":n=t.patterns.T;break;case"u":n=t.patterns.S;break;case"U":n=t.patterns.D+" "+t.patterns.T;break;case"y":n=t.patterns.Y;break;case"Y":n=t.patterns.Y}else n=e;return n},i.prototype.getDate=function(){return this.inputWidget?new Date(this.inputWidget._safeGetDate().getTime()):undefined},i.prototype.setDate=function(e){this.inputWidget&&this.inputWidget._setData(e)},i.prototype._internalSetDate=function(e){if(this.inputWidget){var t=this,n=this.inputWidget.options,r=this.inputWidget.element,i=!!r.data("typing"),s;i?(n.date=e,s=function(){var e=new Date,i=r.data("timeStamp");e.getTime()-i.getTime()>n.keyDelay?(t.inputWidget._safeSetDate(n.date),t.inputWidget._updateText(),t.inputWidget._highLightField()):window.setTimeout(s,n.keyDelay)},window.setTimeout(s,n.keyDelay)):this.inputWidget._safeSetDate(e)}},i.prototype.daysInMonth=function(e,t){e-=1;var n=(new Date(t,++e,1,-1)).getDate();return n},i.prototype.setYear=function(e,t,n){try{t&&t.isfullreset&&(t.offset=1,e="1970");if(typeof e=="string"&&!this._isDigitString(e))return!1;e*=1;var r=this.inputWidget.options,i=1,s=9999,o,u,a;n&&(r.minDate&&(i=Math.max(i,r.minDate.getFullYear())),r.maxDate&&(s=Math.min(s,r.maxDate.getFullYear()))),t&&t.isreset&&(e=i),e<i&&(e=i),e>s&&(e=s),o=this.getDate(),u=new Date(o.getTime()),u.setFullYear(e);if(this._isValidDate(u))return a=this.daysInMonth(this.getMonth(),this.getYear()),a===o.getDate()?(u=new Date(o.getTime()),u.setDate(1),u.setFullYear(e),a=this.daysInMonth(u.getMonth()+1,u.getFullYear()),u.setDate(a),this._isValidDate(u)?(this._internalSetDate(u),!0):!1):(o.setFullYear(e),this._internalSetDate(o),!0);return t&&t.isreset?(o.setFullYear(1),this._internalSetDate(o),!0):!1}catch(f){return!1}},i.prototype.getYear=function(){return this.getDate().getFullYear()},i.prototype.setMonth=function(e,t,n){try{n&&n.isfullreset&&(e="1"),e*=1;var r=this.getDate(),i,s;if(typeof t!="undefined"&&!t)if(e>12||e<1){if(!n||!n.isreset)return!1;e=1}return i=this.daysInMonth(this.getMonth(),this.getYear()),i===this.getDate().getDate()?(s=new Date(r.getTime()),s.setDate(1),s.setMonth(e-1),i=this.daysInMonth(s.getMonth()+1,s.getFullYear()),s.setDate(i),this._isValidDate(s)?(this._internalSetDate(s),!0):!1):(s=new Date(r.getTime()),s.setMonth(e-1),this._isValidDate(s)?(this._internalSetDate(s),!0):!1)}catch(o){return!1}},i.prototype.getMonth=function(){return this.getDate().getMonth()+1},i.prototype.setDayOfMonth=function(e,t,n){try{if(n&&n.isfullreset)return this.setDayOfMonth(1,t);var r=this.getDate(),i,s;e*=1;if(typeof t!="undefined"&&!t){i=this.daysInMonth(this.getMonth(),this.getYear());if(e>i||e<1)return n&&n.isreset?this.setDayOfMonth(1,t,n):!1}return s=new Date(r.getTime()),s.setDate(e),this._isValidDate(s)?(this._internalSetDate(s),!0):!1}catch(o){return!1}},i.prototype.getDayOfMonth=function(){return this.getDate().getDate()},i.prototype.setHours=function(e,t){try{e*=1;if(typeof t!="undefined"&&!t&&e>24)return!1;var n=new Date(this.getDate().getTime());return n.setHours(e),this._isValidDate(n)?(this._internalSetDate(n),!0):!1}catch(r){return!1}},i.prototype.getHours=function(){return this.getDate().getHours()},i.prototype.setMinutes=function(e,t){try{e*=1;if(typeof t!="undefined"&&!t&&e>60)return!1;var n=new Date(this.getDate().getTime());return n.setMinutes(e),this._isValidDate(n)?(this._internalSetDate(n),!0):!1}catch(r){return!1}},i.prototype.getMinutes=function(){return this.getDate().getMinutes()},i.prototype.setSeconds=function(e,t){try{e*=1;if(typeof t!="undefined"&&!t&&e>60)return!1;var n=new Date(this.getDate().getTime());return n.setSeconds(e),this._isValidDate(n)?(this._internalSetDate(n),!0):!1}catch(r){return!1}},i.prototype.getSeconds=function(){return this.getDate().getSeconds()},i.prototype.setDayOfWeek=function(e){try{e*=1;var t=e-this.getDayOfWeek();return this.setDayOfMonth(this.getDayOfMonth()+t,!0)}catch(n){return!1}},i.prototype.getDayOfWeek=function(){return this.getDate().getDay()+1},i.prototype.handlePattern=function(e){var t=new RegExp("y{3,4}"),n=t.test(e);return n?(this.descriptors.push(this.createDescriptor(10)),!0):(t=new RegExp("y{2,2}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(2)),!0):(t=new RegExp("y{1,1}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(1)),!0):(t=new RegExp("d{4,4}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(101)),!0):(t=new RegExp("d{3,3}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(100)),!0):(t=new RegExp("d{2,2}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(30)),!0):(t=new RegExp("d{1,1}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(31)),!0):(t=new RegExp("M{4,4}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(27)),!0):(t=new RegExp("M{3,3}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(26)),!0):(t=new RegExp("M{2,2}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(20)),!0):(t=new RegExp("M{1,1}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(25)),!0):(t=new RegExp("h{2,2}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(46)),!0):(t=new RegExp("h{1,1}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(45)),!0):(t=new RegExp("H{2,2}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(48)),!0):(t=new RegExp("H{1,1}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(47)),!0):(t=new RegExp("m{2,2}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(50)),!0):(t=new RegExp("m{1,1}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(51)),!0):(t=new RegExp("s{2,2}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(60)),!0):(t=new RegExp("s{1,1}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(61)),!0):(t=new RegExp("t{2,2}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(251)),!0):(t=new RegExp("t{1,1}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(250)),!0):!1))))))))))))))))))))},i.prototype.createDescriptor=function(e,t){var n=null,r=this.maskPartsCount++;switch(e){case-1:n=new f(this,r),n.liternal=t;break;case 20:n=new c(this,r);break;case 25:n=new h(this,r);break;case 26:n=new p(this,r);break;case 27:n=new d(this,r);break;case 30:n=new m(this,r);break;case 31:n=new g(this,r);break;case 100:n=new y(this,r);break;case 101:n=new b(this,r);break;case 10:n=new E(this,r);break;case 1:n=new x(this,r);break;case 2:n=new T(this,r);break;case 45:n=new k(this,r);break;case 46:n=new L(this,r);break;case 47:n=new O(this,r);break;case 48:n=new M(this,r);break;case 250:n=new D(this,r);break;case 251:n=new P(this,r);break;case 50:n=new B(this,r);break;case 51:n=new j(this,r);break;case 60:n=new I(this,r);break;case 61:n=new q(this,r);break;default:}return n},i.prototype.toString=function(){if(this.inputWidget.options.showNullText&&!this.inputWidget.isFocused()&&this.inputWidget.isDateNull())return this.inputWidget.options.nullText;var e="",t=0,n,r,i;this.desPostions=new Array(0);for(n=0;n<this.descriptors.length;n++){this.descriptors[n].startIndex=e.length,r=this.descriptors[n].getText(),e+=r;for(i=0;i<r.length;i++){this.desPostions.push({desc:this.descriptors[n],pos:i,text:r,length:r.length}),t++;if(this.desPostions.length!==t)throw"Fatal Error !!!!!!!!!!!!!!!"}}return e},i.prototype.parseDate=function(e){var t;if(this.pattern==="dddd"||this.pattern==="ddd"||typeof e=="object")try{t=new Date(e),isNaN(t)&&(t=new Date)}catch(n){t=new Date}else t=Globalize.parseDate(e,this.pattern,this._getCulture()),t||(t=this._tryParseDate(e,this.pattern)),t||(t=new Date);return t},i.prototype.set=function(e){return this._internalSetDate(new Date(this.parseDate(e))),!0},i.prototype.haveEnumParts=function(){return!1},i.prototype.removeLiterals=function(e){return e=""+e+"",e=e.replace(new RegExp("[+]","g"),""),e=e.replace(new RegExp("[.]","g"),""),e=e.replace(new RegExp("[:]","g"),""),e=e.replace(new RegExp("[-]","g"),""),e=e.replace(new RegExp("[()=]","g"),""),e},i.prototype.getFirstDelimiterPos=function(e,t){var n=0,r=0,i,s;while(n<t.length&&r<e.length){i=t.charAt(n),s=e.charAt(r);if(i!==s)return r-1;r++,n++}return e.length-1},i.prototype.findAlikeArrayItemIndex=function(e,t){var n=-1,r=99999,i,s;for(i=0;i<e.length;i++)s=e[i].toLowerCase().indexOf(t.toLowerCase()),s!==-1&&s<r&&(r=s,n=i);return n},i.prototype._isValidDate=function(e){return this.inputWidget._isValidDate(e)},i.prototype.isFieldSep=function(e,t){var n=t++,r;return n<this.descriptors.length?(r=this.descriptors[n],r.type!==-1?!1:e===r.text):!1},i.prototype.getPositionType=function(e){var t=this.desPostions[e];return t.desc.type},i.prototype.addToField=function(e,t,n){var r=this.fields[t],i,s,o;return i=e,s={val:e,pos:0,offset:0,isreset:!1},this.inputWidget.element.data("typing",!0),o=r.setText(i,e.length===1?!1:!0,s),this.inputWidget.element.data("typing",!1),o},i.prototype.insertAt=function(t,n,r){typeof r=="undefined"&&(r=new e.wijInputResult),r.testPosition=-1;var i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w;if(t.length===1){i=this.desPostions[n];if(i&&i.desc.type===-1&&i.text===t)return r.testPosition=n,r.hint=r.characterEscaped,!0}s=t,o=n,t=this.removeLiterals(t),u=t,a=!1,l=!1,o>0&&u.length===1&&(o--,n=o,i=this.desPostions[o],a=!0,i&&(i.desc.type===-1||i.desc.getText().length!==1)&&(n++,o++,a=!1)),f=!1;while(u.length>0&&o<this.desPostions.length){i=this.desPostions[o];if(i.desc.type===-1){o+=i.length;continue}if(i.desc.needAdjustInsertPos()){c=u.substr(0,i.length-i.pos),c=i.text.slice(0,i.pos)+c+i.text.slice(i.pos+c.length,i.length),a&&(c=i.text+c),l&&(c+=i.text),p=i.desc.getText().length,v="";try{t.length===1&&(i.pos?i.pos>0&&(v=c.substring(0,i.pos+1)):v=t)}catch(E){}p===1&&c.length>1&&t.length===1&&(i.desc.type===31||i.desc.type===25)&&(this._disableSmartInputMode=!0),h={val:t,pos:i.pos,offset:0,isreset:!1},f=i.desc.setText(c,t.length===1?!1:!0,h),this._disableSmartInputMode=!1,!f&&typeof v!="undefined"&&v.length>0&&(i.desc.type===26||i.desc.type===27||i.desc.type===100||i.desc.type===101||i.desc.type===250||i.desc.type===251)&&(f=i.desc.setText(v,t.length===1?!1:!0,h));if(f)r.hint=r.success,r.testPosition=o+h.offset,t.length===1&&(m=i.desc.getText().length,d=i.pos,i.pos>m-1&&(d=m),g=m-p,g>0&&i.pos===p-1&&(d=m-1),y=this.toString(),r.testPosition=i.desc.startIndex+d+h.offset),u=u.slice(i.length-i.pos,u.length);else{r.hint=r.invalidInput,r.testPosition!==-1&&(r.testPosition=n);if(i.desc.type!==-1&&t.length===1)return!1}o+=i.length}else b=this.getFirstDelimiterPos(u,s),b<0&&(b=0),c=u.substring(0,b+1),h={val:t,pos:i.pos,offset:0,isreset:!1},f=i.desc.setText(c,t.length===1?!1:!0,h),f?(r.hint=r.success,r.testPosition=o+h.offset,u=u.slice(b+1,u.length)):(r.hint=r.invalidInput,r.testPosition!==-1&&(r.testPosition=n)),b<0&&(b=0),w=b+1,o+=w}return f},i.prototype.removeAt=function(e,t,n){try{var r=this.desPostions[e],i,s,o,u,a=this.inputWidget,f=a.element,l=f.val().length;return l===t+1&&e===0&&(a.isDeleteAll=!0),r.desc.needAdjustInsertPos()&&(i="0",s=e,r.text=r.desc.getText(),i=r.text.slice(0,r.pos)+i+r.text.slice(r.pos+i.length,r.length),o={val:i,pos:r.pos,offset:0,isreset:!0,isfullreset:!1},t-e+1>=r.length&&(o.isfullreset=!0,e+=r.length,s=e),u=r.desc.setText(i,!1,o),u?(n.hint=n.success,n.testPosition=s):(n.hint=n.invalidInput,n.testPosition===-1&&(n.testPosition=e))),e<t&&this.removeAt(e+1,t,n),!0}catch(c){return!1}},i.prototype.incEnumPart=function(){var e=this.fields[this.inputWidget.options.activeField];return e&&e.inc(),!0},i.prototype.decEnumPart=function(e){var t=this.fields[this.inputWidget.options.activeField];return t&&t.dec(),!0},i.prototype.setValue=function(e){return this.setDate(new Date(e instanceof Date?e.getTime():e)),!0},i.prototype.getValue=function(){return this.getDate()},i.prototype._isSmartInputMode=function(){return this._disableSmartInputMode?!1:this.inputWidget?this.inputWidget.options.smartInputMode:!0},i.prototype._getInt=function(e,n,r,i){var s,o;for(s=i;s>=r;s--){o=e.substring(n,n+s);if(o.length<r)return null;if(t.wij.charValidator.isDigit(o))return o}return null},i.prototype._tryParseDate=function(e,t){var n=this._getCulture().calendars,r,i,s,o;return t=t||n.standard.patterns.d,t&&(t.indexOf("MMM")===-1&&t.indexOf("MMMM")===-1&&(t=t.replace("MM","M")),t=t.replace("dd","d"),t=t.replace("tt","a")),r=t.replace("yyyy","yy"),i=n.standard["/"],s=[t,r,t.replace(new RegExp(i,"g"),"-"),r.replace(new RegExp(i,"g"),"-"),t.replace(new RegExp(i,"g"),"."),r.replace(new RegExp(i,"g"),".")],o=Globalize.parseDate(e,s,this._getCulture()),o?o:(o=new Date(e),o.toString()!=="Invalid Date"&&e&&e!==""?o:0)},i.prototype._formatDate=function(e,t,n){var i=this;if(!e.valueOf())return"&nbsp;";var s=this.inputWidget._getCulture().calendars.standard,o=t.replace(new RegExp("yyyy|MMMM|MMM|MM|M|mm|m|dddd|ddd|dd|d|hh|h|HH|H|ss|s|tt|t|a/p","gi"),function(t){var o;switch(t){case"yyyy":return r(e.getFullYear(),4);case"MMMM":return n.dateTimeFormat.monthNames[e.getMonth()];case"MMM":return n.dateTimeFormat.abbreviatedMonthNames[e.getMonth()];case"MM":return i.paddingZero(e.getMonth()+1,2);case"M":return i.paddingZero(e.getMonth()+1,1);case"mm":return i.paddingZero(e.getMinutes(),2);case"m":return i.paddingZero(e.getMinutes(),1);case"dddd":return n.dateTimeFormat.dayNames[e.getDay()];case"ddd":return n.dateTimeFormat.abbreviatedDayNames[e.getDay()];case"dd":return i.paddingZero(e.getDate(),2);case"d":return i.paddingZero(e.getDate(),1);case"hh":return o=e.getHours()%12,i.paddingZero(o?o:12,2);case"h":return o=e.getHours()%12,i.paddingZero(o?o:12,1);case"HH":return i.paddingZero(e.getHours(),2);case"H":return i.paddingZero(e.getHours(),1);case"ss":return i.paddingZero(e.getSeconds(),2);case"s":return i.paddingZero(e.getSeconds(),1);case"tt":return e.getHours()<12?s.AM[0]:s.PM[0];case"t":return e.getHours()<12?s.AM[0].length>0?s.AM[0].charAt(0):"":s.PM[0].length>0?s.PM[0].charAt(0):"";case"a/p":return e.getHours()<12?"a":"p"}return"N"});return o},i}(e.wijTextProvider);e.wijDateTextProvider=o,function(e){e._map=[],e.liternal=-1,e.OneDigitYear=1,e.TwoDigitYear=2,e.FourDigitYear=10,e.TwoDigitMonth=20,e.Month=25,e.AbbreviatedMonthNames=26,e.MonthNames=27,e.TwoDigityDayOfMonth=30,e.DayOfMonth=31,e.AbbreviatedDayNames=100,e.DayNames=101,e.h=45,e.hh=46,e.H=47,e.HH=48,e.ShortAmPm=250,e.AmPm=251,e.mm=50,e.m=51,e.ss=60,e.s=61}(e.DescriptorType||(e.DescriptorType={}));var u=e.DescriptorType,a=function(){function e(e,t){this.id=t,this.startIndex=0,this.name=null,this.type=u.liternal,this.maxLen=2,this._txtProvider=e,this.startIndex=0}return e.prototype.getText=function(){return null},e.prototype.setText=function(e,t,n){return!1},e.prototype.inc=function(){},e.prototype.dec=function(){},e.prototype.needAdjustInsertPos=function(){return!0},e.prototype.reachMaxLen=function(){var e=this.getText();do{if(e.charAt(0)!=="0")break;e=e.slice(1)}while(e.length>0);return e.length>=this.maxLen},e}();e._iDateDescriptor=a;var f=function(e){function t(t,n){e.call(this,t,n),this.liternal="",this.maxLen=100}return __extends(t,e),t.prototype.getText=function(){return this.liternal},t}(a),l=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.inc=function(){this._txtProvider.setMonth(this._txtProvider.getMonth()+1,!0)},t.prototype.dec=function(){this._txtProvider.setMonth(this._txtProvider.getMonth()-1,!0)},t.prototype.setText=function(e,t,n){return this._txtProvider.setMonth(e,t,n)},t}(a),c=function(e){function t(t,n){e.call(this,t,n),this.name="Two-digit month",this.type=u.TwoDigitMonth}return __extends(t,e),t.prototype.getText=function(){var e=""+this._txtProvider.getMonth()+"";return e.length===1?"0"+e:e},t}(l),h=function(e){function t(t,n){e.call(this,t,n),this.name="month",this.type=u.Month}return __extends(t,e),t.prototype.getText=function(){var e=""+this._txtProvider.getMonth()+"";return e},t}(l),p=function(e){function t(t,n){e.call(this,t,n),this.name="AbbreviatedMonthNames",this.type=u.AbbreviatedMonthNames,this.maxLen=u.AbbreviatedMonthNames}return __extends(t,e),t.prototype.getText=function(){var e=this._txtProvider.getMonth(),t=this._txtProvider._getCulture();return t.calendars.standard.months.namesAbbr[e-1]},t.prototype.setText=function(e,t,n){var r=-1,i=this._txtProvider.inputWidget._getCulture().calendars.standard;return r=this._txtProvider.findAlikeArrayItemIndex(i.months.namesAbbr,e),r===-1?!1:this._txtProvider.setMonth(r+1,t,n)},t}(l),d=function(e){function t(t,n){e.call(this,t,n),this.name="MonthNames",this.type=u.MonthNames,this.maxLen=100}return __extends(t,e),t.prototype.getText=function(){var e=this._txtProvider.getMonth(),t=this._txtProvider._getCulture();return t.calendars.standard.months.names[e-1]},t.prototype.setText=function(e,t,n){var r=-1,i;if(n&&n.isfullreset)r=1;else{i=this._txtProvider._getCulture(),r=this._txtProvider.findAlikeArrayItemIndex(i.calendars.standard.months.names,e);if(r===-1)return!1}return this._txtProvider.setMonth(r+1,t,n)},t}(l),v=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.inc=function(){this._txtProvider.setDayOfMonth(this._txtProvider.getDayOfMonth()+1,!0)},t.prototype.dec=function(){this._txtProvider.setDayOfMonth(this._txtProvider.getDayOfMonth()-1,!0)},t.prototype.setText=function(e,t,n){return this._txtProvider.setDayOfMonth(e,t,n)},t}(a),m=function(e){function t(t,n){e.call(this,t,n),this.name="Two-digit day of month",this.type=u.TwoDigityDayOfMonth}return __extends(t,e),t.prototype.getText=function(){return r(this._txtProvider.getDayOfMonth())},t}(v),g=function(e){function t(t,n){e.call(this,t,n),this.name="Day of month",this.type=u.DayOfMonth}return __extends(t,e),t.prototype.getText=function(){var e=this._txtProvider.getDayOfMonth();return""+e+""},t}(v),y=function(e){function t(t,n){e.call(this,t,n),this.name="AbbreviatedDayNames",this.type=u.AbbreviatedDayNames,this.maxLen=100}return __extends(t,e),t.prototype.getText=function(){var e=this._txtProvider.getDayOfWeek(),t=this._txtProvider._getCulture();return t.calendars.standard.days.namesShort[e-1]},t.prototype.setText=function(e,t,n){var r=-1,i=this._txtProvider._getCulture();return r=this._txtProvider.findAlikeArrayItemIndex(i.calendars.standard.days.namesShort,e),r===-1?!1:this._txtProvider.setDayOfWeek(r+1)},t.prototype.needAdjustInsertPos=function(){return!1},t}(v),b=function(e){function t(t,n){e.call(this,t,n),this.name="DayNames",this.type=u.DayNames,this.maxLen=100}return __extends(t,e),t.prototype.getText=function(){var e=this._txtProvider.getDayOfWeek(),t=this._txtProvider._getCulture();return t.calendars.standard.days.names[e-1]},t.prototype.setText=function(e,t,n){var r=-1,i=this._txtProvider._getCulture();return r=this._txtProvider.findAlikeArrayItemIndex(i.calendars.standard.days.names,e),r===-1?!1:this._txtProvider.setDayOfWeek(r+1)},t.prototype.needAdjustInsertPos=function(){return!1},t}(v),w=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.inc=function(){this._txtProvider.setYear(this._txtProvider.getYear()+1,null,!0)},t.prototype.dec=function(){this._txtProvider.setYear(this._txtProvider.getYear()-1,null,!0)},t}(a),E=function(e){function t(t,n){e.call(this,t,n),this.name="Four-digit year",this.type=u.FourDigitYear,this.maxLen=4}return __extends(t,e),t.prototype.getText=function(){return r(this._txtProvider.getYear(),4)},t.prototype.setText=function(e,t,n){if(this._txtProvider._isSmartInputMode()&&n){var r=2e3,i,s,o,u,a,f,l,c;this._txtProvider.inputWidget.options.startYear&&(r=this._txtProvider.inputWidget.options.startYear),s=r+100-1,i=this._txtProvider.paddingZero(r,4),s=this._txtProvider.paddingZero(s,4);if(n.pos===0||n.pos===1){o=new Date,u=this._txtProvider.paddingZero(this._txtProvider.getYear(),4);if(u.charAt(0)==="0"&&u.charAt(1)==="0"&&n.pos<=1)return a=n.val,f="00",a>=5?f=i.slice(0,2):f=s.slice(0,2),l=n.val+u.slice(3,4),c=f+l,n.offset=2-n.pos,this._txtProvider.setYear(c,n),!0}}return this._txtProvider.setYear(e,n)},t}(w),S=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.setText=function(e,t,n){e=r(e);var i=r(this._txtProvider.getYear(),4),s,o,u,a,f;return e==="00"&&(s=this._txtProvider.getMonth(),o=this._txtProvider.getDayOfMonth(),u=this._txtProvider.getHours(),a=this._txtProvider.getMinutes(),f=this._txtProvider.getSeconds(),s===1&&o===1&&!u&&!a&&!f&&(i="0001",e="01")),i.length>=2&&(i=i.substr(0,2)+e.substr(0,2)),this._txtProvider.setYear(i,n)},t}(w),x=function(e){function t(t,n){e.call(this,t,n),this.name="One-digit year",this.type=u.OneDigitYear}return __extends(t,e),t.prototype.getText=function(){var e=r(this._txtProvider.getYear());return e[0]==="0"&&(e=e[1]),e},t}(S),T=function(e){function t(t,n){e.call(this,t,n),this.name="Two-digit year",this.type=u.TwoDigitYear}return __extends(t,e),t.prototype.getText=function(){return r(this._txtProvider.getYear(),2)},t}(S),N=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.inc=function(){this._txtProvider.setHours(this._txtProvider.getHours()+1,!0)},t.prototype.dec=function(){this._txtProvider.setHours(this._txtProvider.getHours()-1,!0)},t}(a),C=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.setText=function(e,t,n){var r=this._txtProvider.getHours();return r>12&&(e=e*1+12),this._txtProvider.setHours(e,t)},t}(N),k=function(e){function t(t,n){e.call(this,t,n),this.name="h",this.type=u.h}return __extends(t,e),t.prototype.getText=function(){var e=this._txtProvider.getHours();return e>12?e-=12:e===0&&(e=12),""+e+""},t}(C),L=function(e){function t(t,n){e.call(this,t,n),this.name="hh",this.type=u.hh}return __extends(t,e),t.prototype.getText=function(){var e=this._txtProvider.getHours();if(e>12)e-=12;else if(e===0)return"12";return r(e)},t}(C),A=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.setText=function(e,t,n){return this._txtProvider.setHours(e,t)},t}(N),O=function(e){function t(t,n){e.call(this,t,n),this.name="H",this.type=u.H}return __extends(t,e),t.prototype.getText=function(){var e=this._txtProvider.getHours();return""+e+""},t}(A),M=function(e){function t(t,n){e.call(this,t,n),this.name="HH",this.type=u.HH}return __extends(t,e),t.prototype.getText=function(){return r(this._txtProvider.getHours())},t}(A),_=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.inc=function(){var e=(this._txtProvider.getHours()+12)%24;this._txtProvider.setHours(e,!0)},t.prototype.dec=function(){var e=(this._txtProvider.getHours()+12)%24;this._txtProvider.setHours(e,!0)},t.prototype.setText=function(e,t,n){var r;return e.toLowerCase().indexOf("a")>=0?(r=this._txtProvider.getHours()%12,this._txtProvider.setHours(r,!0)):e.toLowerCase().indexOf("p")>=0&&(r=this._txtProvider.getHours()%12+12,this._txtProvider.setHours(r,!0)),!0},t}(a),D=function(e){function t(t,n){e.call(this,t,n),this.name="t",this.type=u.ShortAmPm}return __extends(t,e),t.prototype.getText=function(){var e=this._txtProvider.getHours(),t=this._txtProvider._getCulture(),n=t.calendars.standard[e<12?"AM":"PM"][0];return n.charAt(0)||" "},t}(_),P=function(e){function t(t,n){e.call(this,t,n),this.name="tt",this.type=u.AmPm}return __extends(t,e),t.prototype.getText=function(){var e=this._txtProvider.getHours(),t="",n=this._txtProvider._getCulture();return e<12?t=n.calendars.standard.AM[0]:t=n.calendars.standard.PM[0],t.length<=0&&(t=" "),t},t}(_),H=function(e){function t(t,n){e.call(this,t,n),this.delta=1}return __extends(t,e),t.prototype.inc=function(){this._txtProvider.setMinutes(this._txtProvider.getMinutes()+this.delta,!0)},t.prototype.dec=function(){this._txtProvider.setMinutes(this._txtProvider.getMinutes()-this.delta,!0)},t.prototype.setText=function(e,t,n){return n&&n.isfullreset&&(e="0"),this._txtProvider.setMinutes(e,t)},t}(a),B=function(e){function t(t,n){e.call(this,t,n),this.name="mm",this.type=u.mm}return __extends(t,e),t.prototype.getText=function(){return r(this._txtProvider.getMinutes())},t}(H),j=function(e){function t(t,n){e.call(this,t,n),this.name="m",this.type=u.m,this.delta=12}return __extends(t,e),t.prototype.getText=function(){return this._txtProvider.getMinutes().toString()},t}(H),F=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.inc=function(){this._txtProvider.setSeconds(this._txtProvider.getSeconds()+12,!0)},t.prototype.dec=function(){this._txtProvider.setSeconds(this._txtProvider.getSeconds()-12,!0)},t.prototype.setText=function(e,t,n){return n&&n.isfullreset&&(e="0"),this._txtProvider.setSeconds(e,t)},t}(a),I=function(e){function t(t,n){e.call(this,t,n),this.name="ss",this.type=u.ss}return __extends(t,e),t.prototype.getText=function(){return r(this._txtProvider.getSeconds())},t}(F),q=function(e){function t(t,n){e.call(this,t,n),this.name="s",this.type=u.s}return __extends(t,e),t.prototype.getText=function(){return this._txtProvider.getSeconds().toString()},t}(F)})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){"use strict";var t=jQuery;(function(e){e._map=[],e.editOptional=1,e.editRequired=2,e.separator=4,e.literal=8})(e.wijchartype||(e.wijchartype={}));var n=e.wijchartype,r=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._createTextProvider=function(){this._textProvider=new s(this,this.options.mask,!1)},t.prototype._checkMaskAndPassword=function(){var e=!this.options.mask||this.options.mask.length<0;if(e&&this._isPassword())throw'Option "passwordChar" requires a mask'},t.prototype._updateIsPassword=function(){var e=this.options.passwordChar.length>0&&this.element.attr("type")!=="password";this.element.data("isPassword",e),this._checkMaskAndPassword()},t.prototype._beginUpdate=function(){this.element.addClass(this.options.wijCSS.wijinputmask),this._updateIsPassword(),this.element.data("defaultText",this.options.text)},t.prototype._setOption=function(t,n){e.prototype._setOption.call(this,t,n);switch(t){case"text":this.setText(n);break;case"mask":case"culture":if(typeof n=="undefined"||n.length<=0)return;this._checkMaskAndPassword();var r=this.getText();t==="mask"&&(this._textProvider.mask=n,this._textProvider.initialMask=n),this._textProvider.initialize(),this._textProvider.set(r),this._updateText();break;case"promptChar":this._textProvider&&(this._textProvider.updatePromptChar(),this._updateText());break;case"hidePromptOnLeave":case"resetOnPrompt":this._updateText();break;case"passwordChar":this._updateIsPassword(),this._updateText()}},t.prototype._resetData=function(){var e=this.element.data("defaultText");if(e===undefined||e===null)e=this.element.data("elementValue");if(e===undefined||e===null)e="";this.setText(e)},t.prototype._isPassword=function(){return!!this.element.data("isPassword")},t.prototype._getTextWithPrompts=function(){return this._isInitialized()?this._textProvider.toString(!0,!0,!1):this.element.val()},t.prototype._getTextWithLiterals=function(){return this._isInitialized()?this._textProvider.toString(!0,!1,!0):this.element.val()},t.prototype._getTextWithPromptAndLiterals=function(){return this._isInitialized()?this._textProvider.toString(!0,!0,!0):this.element.val()},t.prototype._getTextWithPromptAndLiteralsAndPassword=function(){return this._isInitialized()?this._textProvider.toString(!1,!0,!0):this.element.val()},t.prototype._onChange=function(){if(!this.element)return;var e=this.element.val(),t=this.getText();this.getText()!==e&&this._getTextWithPrompts()!==e&&this._getTextWithPromptAndLiterals()!==e&&this._getTextWithPromptAndLiteralsAndPassword()!==e&&this.setText(e)},t.prototype._afterFocused=function(){(this._isNullText()||!!this.options.hidePromptOnLeave)&&this._doFocus()},t}(e.wijinputcore);e.wijinputmask=r;var i=function(){function t(){this.wijCSS={wijinputmask:e.wijinputcore.prototype.options.wijCSS.wijinput+"-mask"},this.text=null,this.mask="",this.promptChar="_",this.hidePromptOnLeave=!1,this.resetOnPrompt=!0,this.allowPromptAsInput=!1,this.passwordChar="",this.resetOnSpace=!0,this.skipLiterals=!0}return t}();r.prototype.options=t.extend(!0,{},e.wijinputcore.prototype.options,new i),t.wijmo.registerWidget("wijinputmask",r.prototype);var s=function(r){function i(e,t,n){r.call(this),this.inputWidget=e,this.mask=t,this.asciiOnly=n,this.testString="",this.assignedCharCount=0,this.requiredCharCount=0,this.noMask=!1,this.descriptors=[],this.initialize()}return __extends(i,r),i.prototype.initialize=function(){this.noMask=!this.mask||this.mask.length<=0;if(this.noMask)return;this.testString="",this.assignedCharCount=0,this.requiredCharCount=0,this.descriptors=new Array(0);var e="none",t=!1,r=0,i,s,u,a=n.literal,f="",l,c,h,p,d=this.inputWidget._getCulture();for(i=0;i<this.mask.length;i++){u=!1,l=this.mask.charAt(i),t&&(t=!1,u=!0);if(!u){h=l;if(h<="C"){switch(h){case"#":case"9":case"?":case"C":l=this.getPromtChar(),a=n.editOptional,u=!0;break;case"$":f=d.numberFormat.currency.symbol,a=n.separator,u=!0;break;case"%":case"-":case";":case"=":case"@":case"B":a=n.literal,u=!0;break;case"&":case"0":case"A":l=this.getPromtChar(),a=n.editRequired,u=!0;break;case",":f=d.numberFormat[","],a=n.separator,u=!0;break;case".":f=d.numberFormat["."],a=n.separator,u=!0;break;case"/":f=d.calendars.standard["/"],a=n.separator,u=!0;break;case":":f=d.calendars.standard[":"],a=n.separator,u=!0;break;case"<":e="lower";continue;case">":e="upper";continue}u||(a=n.literal,u=!0)}if(!u){if(h<="\\"){switch(h){case"L":l=this.getPromtChar(),a=n.editRequired,u=!0;break;case"\\":t=!0,a=n.literal;continue}u||(a=n.literal,u=!0)}if(!u){h==="a"&&(l=this.getPromtChar(),a=n.editOptional,u=!0);if(!u){h!=="|"&&(a=n.literal,u=!0);if(!u){e="none";continue}}}}}if(u){p=new o(i,a),this.isEditDesc(p)&&(p.caseConversion=e),a!==n.separator&&(f=l);for(s=0;s<f.length;s++)c=f.charAt(s),this.testString=this.testString+c,this.descriptors[this.descriptors.length]=p,r++}}this.testString.Capacity=this.testString.length},i.prototype.getAllowPromptAsInput=function(){return this.inputWidget?this.inputWidget.options.allowPromptAsInput:!1},i.prototype.getPasswordChar=function(){return this.inputWidget?this.inputWidget.options.passwordChar:"*"},i.prototype.isPassword=function(){return this.inputWidget?this.inputWidget._isPassword():!1},i.prototype.getResetOnPrompt=function(){return this.inputWidget?this.inputWidget.options.resetOnPrompt:!0},i.prototype.getResetOnSpace=function(){return this.inputWidget?this.inputWidget.options.resetOnSpace:!0},i.prototype.getSkipLiterals=function(){return this.inputWidget?this.inputWidget.options.skipLiterals:!0},i.prototype.getHidePromptOnLeave=function(){return this.inputWidget?this.inputWidget.options.hidePromptOnLeave:!1},i.prototype._trueOR=function(e,t){return(e>>>1|t>>>1)*2+(e&1|t&1)},i.prototype.setValue=function(e){return!1},i.prototype.getValue=function(){return null},i.prototype.getPromtChar=function(){return this.inputWidget?this.inputWidget.options.promptChar:"_"},i.prototype.updatePromptChar=function(){if(this.noMask)return;var e,r;for(e=0;e<this.descriptors.length;e++){r=this.descriptors[e];if(r.charType===n.editOptional||r.charType===n.editRequired)r.isAssigned||(this.testString=t.wij.charValidator.setChar(this.testString,this.getPromtChar(),e))}},i.prototype.resetChar=function(e){var r=this.descriptors[e];this.isEditPos(e)&&r.isAssigned&&(r.isAssigned=!1,this.testString=t.wij.charValidator.setChar(this.testString,this.getPromtChar(),e),this.assignedCharCount--,r.charType===n.editRequired&&this.requiredCharCount--)},i.prototype.getAdjustedPos=function(e){return this.noMask?e>=this.testString.length&&(e=this.testString.length-1):e>=this.descriptors.length&&(e-=1),Math.max(0,e)},i.prototype.incEnumPart=function(e,t,n){return!this.noMask},i.prototype.decEnumPart=function(e,t,n){return!this.noMask},i.prototype.findNonEditPositionInRange=function(e,t,r){return this.findPositionInRange(e,t,r,this._trueOR(n.literal,n.separator))},i.prototype.findPositionInRange=function(e,t,n,r){e=Math.max(0,e),t=Math.min(t,this.testString.length-1);if(e<=t)while(e<=t){var i=n?e++:t--,s=this.descriptors[i];if((s.charType&4294967295&(r&4294967295))===s.charType)return i}return-1},i.prototype.findAssignedEditPositionInRange=function(e,t,r){return this.assignedCharCount===0?-1:this.findEditPositionInRange(e,t,r,n.editRequired)},i.prototype.findEditPositionInRange=function(e,t,r,i){do{var s,o;s=this.findPositionInRange(e,t,r,this._trueOR(n.editRequired,n.editOptional));if(s===-1)break;o=this.descriptors[s];switch(i){case n.editOptional:if(!o.isAssigned)return s;break;case n.editRequired:if(o.isAssigned)return s;break;default:return s}r?e++:t--}while(e<=t);return-1},i.prototype.findAssignedEditPositionFrom=function(e,t){if(!this.assignedCharCount)return-1;var n,r;return t?(n=e,r=this.testString.length-1):(n=0,r=e),this.findAssignedEditPositionInRange(n,r,t)},i.prototype.findEditPositionFrom=function(e,t){var n,r;return t?(n=e,r=this.testString.length-1):(n=0,r=e),this.findEditPositionInRange(n,r,t,0)},i.prototype.setChar=function(e,r,i){r=r<0?0:r,i||(i=this.descriptors[r]),this.testEscapeChar(e,r,i)?this.resetChar(r):(t.wij.charValidator.isLetter(e)&&(t.wij.charValidator.isUpper(e)?i.caseConversion==="lower"&&(e=e.toLowerCase()):i.caseConversion==="upper"&&(e=e.toUpperCase())),this.testString=t.wij.charValidator.setChar(this.testString,e,r),i.isAssigned||(i.isAssigned=!0,this.assignedCharCount++,i.charType===n.editRequired&&this.requiredCharCount++))},i.prototype.internalInsertAt=function(t,n,r,i){if(t.length===0)return r.testPosition=n,r.hint=r.noEffect,!0;if(!this._testString(t,n,r))return!1;var s=this.findEditPositionFrom(n,!0),o=this.findAssignedEditPositionInRange(s,r.testPosition,!0)!==-1,u=this.findAssignedEditPositionFrom(this.testString.length-1,!1),a,f,l,c,h;if(o&&r.testPosition===this.testString.length-1)return r.hint=r.unavailableEditPosition,r.testPosition=this.testString.length,!1;a=this.findEditPositionFrom(r.testPosition+1,!0);if(o){f=new e.wijInputResult,f.hint=f.unknown,l=!0;while(l){l=!1;if(a===-1)return r.hint=r.unavailableEditPosition,r.testPosition=this.testString.length,!1;c=this.descriptors[s];if(c.isAssigned&&!this.testChar(this.testString.charAt(s),a,f))return r.hint=f.hint,r.testPosition=a,!1;if(s!==u){s=this.findEditPositionFrom(s+1,!0),a=this.findEditPositionFrom(a+1,!0),l=!0;continue}}f.hint>r.hint&&(r.hint=f.hint)}if(!i){if(o)while(s>=n)h=this.descriptors[s],h.isAssigned?this.setChar(this.testString.charAt(s),a):this.resetChar(a),a=this.findEditPositionFrom(a-1,!1),s=this.findEditPositionFrom(s-1,!1);this.setString(t,n)}return!0},i.prototype.insertAt=function(t,n,r){typeof r=="undefined"&&(r=new e.wijInputResult);if(t===undefined)throw"InsertAt: input";return this.noMask?(this.testString=this.testString.substring(0,n)+t+this.testString.substring(n,this.testString.length),r.testPosition=n+t.length-1,!0):n>=0&&n<this.testString.length?this.internalInsertAt(t,n,r,!1):(r.testPosition=n,r.hint=r.positionOutOfRange,!1)},i.prototype.clear=function(e){if(this.noMask){this.testString="",e.hint=e.success;return}if(!this.assignedCharCount)e.hint=e.noEffect;else{e.hint=e.success;for(var t=0;t<this.testString.length;t++)this.resetChar(t)}},i.prototype.isLiteral=function(e){return e?e.charType!==n.literal?e.charType===n.separator:!0:!1},i.prototype.testEscapeChar=function(e,t,n){return t=t<0?0:t,n||(n=this.descriptors[t]),this.isLiteral(n)?this.getSkipLiterals()?e===this.testString.charAt(t):!1:!!this.getResetOnPrompt()&&e===this.getPromtChar()||!!this.getResetOnSpace()&&e===" "?!0:!1},i.prototype.testChar=function(e,n,r){if(!t.wij.charValidator.isPrintableChar(e))return r.hint=r.invalidInput,!1;var i=this.descriptors[n];if(!i)return!1;if(this.isLiteral(i))return this.getSkipLiterals()&&e===this.testString.charAt(n)?(r.hint=r.characterEscaped,!0):(r.hint=r.nonEditPosition,!1);if(e===this.getPromtChar()){if(this.getResetOnPrompt())return this.isEditDesc(i)&&i.isAssigned?r.hint=r.sideEffect:r.hint=r.characterEscaped,!0;if(!this.getAllowPromptAsInput())return r.hint=r.promptCharNotAllowed,!1}if(e===" "&&this.getResetOnSpace())return this.isEditDesc(i)&&i.isAssigned?r.hint=r.sideEffect:r.hint=r.characterEscaped,!0;switch(this.mask.charAt(i.maskPosition)){case"L":if(!t.wij.charValidator.isLetter(e))return r.hint=r.letterExpected,!1;if(!t.wij.charValidator.isAsciiLetter(e)&&this.asciiOnly)return r.hint=r.asciiCharacterExpected,!1;break;case"a":if(!t.wij.charValidator.isAlphanumeric(e)&&e!==" ")return r.hint=r.alphanumericCharacterExpected,!1;if(!t.wij.charValidator.isAciiAlphanumeric(e)&&this.asciiOnly)return r.hint=r.asciiCharacterExpected,!1;break;case"?":if(!t.wij.charValidator.isLetter(e)&&e!==" ")return r.hint=r.letterExpected,!1;if(t.wij.charValidator.isAsciiLetter(e)||!this.asciiOnly)break;return r.hint=r.asciiCharacterExpected,!1;case"A":if(!t.wij.charValidator.isAlphanumeric(e))return r.hint=r.alphanumericCharacterExpected,!1;if(t.wij.charValidator.isAciiAlphanumeric(e)||!this.asciiOnly)break;return r.hint=r.asciiCharacterExpected,!1;case"C":if(!t.wij.charValidator.isAscii(e)&&this.asciiOnly&&e!==" ")return r.hint=r.asciiCharacterExpected,!1;break;case"9":if(!t.wij.charValidator.isDigit(e)&&e!==" ")return r.hint=r.digitExpected,!1;break;case"#":if(!t.wij.charValidator.isDigit(e)&&e!=="-"&&e!=="+"&&e!==" ")return r.hint=r.digitExpected,!1;break;case"&":if(!t.wij.charValidator.isAscii(e)&&this.asciiOnly)return r.hint=r.asciiCharacterExpected,!1;break;case"0":if(!t.wij.charValidator.isDigit(e))return r.hint=r.digitExpected,!1}return e===this.testString.charAt(n)&&i.isAssigned?r.hint=r.noEffect:r.hint=r.success,!0},i.prototype._testString=function(t,n,r){r.hint=r.unknown,r.testPosition=n;if(t.length){var i=new e.wijInputResult,s,o;i.testPosition=r.testPosition,i.hint=r.hint;for(s=0;s<t.length;s++){o=t.charAt(s);if(r.testPosition>this.testString.length)return r.hint=r.unavailableEditPosition,!1;if(!this.testEscapeChar(o,r.testPosition)){r.testPosition=this.findEditPositionFrom(r.testPosition,!0);if(r.testPosition===-1)return r.testPosition=this.testString.length,r.hint=r.unavailableEditPosition,!1}if(!this.testChar(o,r.testPosition,i))return r.hint=i.hint,!1;i.hint>r.hint&&(r.hint=i.hint),r.testPosition+=1;if(r.testPosition===this.testString.length)break}r.testPosition-=1}return!0},i.prototype.set=function(t,n){typeof n=="undefined"&&(n=new e.wijInputResult);if(t===undefined)throw"SetFromPos: input parameter is null or undefined.";n.hint=n.unknown,n.testPosition=0;if(!t.length)return this.clear(n),!0;if(this.noMask)return this.testString=t,!0;if(!this.testSetString(t,n.testPosition,n))return!1;var r=this.findAssignedEditPositionFrom(n.testPosition+1,!0);return r!==-1&&this.resetString(r,this.testString.length-1),!0},i.prototype.resetString=function(e,t){if(this.noMask){this.testString="";return}e=this.findAssignedEditPositionFrom(e,!0);if(e!==-1){t=this.findAssignedEditPositionFrom(t,!1);while(e<=t)e=this.findAssignedEditPositionFrom(e,!0),this.resetChar(e),e++}},i.prototype.setString=function(e,t){var n,r;for(n=0;n<e.length;n++){r=e.charAt(n),this.testEscapeChar(r,t)||(t=this.findEditPositionFrom(t,!0));if(t<0||t>=this.testString.length)return;this.setChar(r,t),t++}},i.prototype.testSetString=function(e,t,n){return e.length>this.testString.length&&(e=e.substring(0,this.testString.length)),this._testString(e,t,n)?(this.setString(e,t),!0):!1},i.prototype.toString=function(e,r,i,s,o){var u=this.inputWidget.options.text||"",a,f,l,c,h,p,d,v,m;u=t.trim(u);if(this.inputWidget.options.showNullText&&!this.inputWidget.isFocused()&&(u===""||u===this.inputWidget.options.nullText))return this.inputWidget.options.nullText;e=e===undefined?!this.isPassword():e,r=r===undefined?this.getHidePromptOnLeave()?this.inputWidget.isFocused():!0:r,i=i===undefined?!0:i;if(this.noMask){if(!e){a="";for(f=0;f<this.testString.length;f++)a+=this.getPasswordChar();return a}return this.testString}s=s===undefined?0:s,o=o===undefined?this.testString.length:o;if(o<=0)return"";s<0&&(s=0);if(s>=this.testString.length)return"";l=this.testString.length-s,o>l&&(o=l);if((!this.isPassword()||e)&&r&&i)return c=this.testString.substring(s,o-s),c;h="",p=s+o-1;for(d=s;d<=p;d++){v=this.testString.charAt(d),m=this.descriptors[d];switch(m.charType){case n.editOptional:case n.editRequired:if(!m.isAssigned)break;if(!this.isPassword()||e){h+=v;continue}h+=this.getPasswordChar();continue;case n.editRequired|n.editOptional:h+=v;continue;case n.separator:case n.literal:if(!i)continue;h+=v;continue;default:h+=v;continue}if(r){h+=v;continue}h+=" ";continue}return h},i.prototype.isEditDesc=function(e){return this.noMask?!0:e.charType!==n.editRequired?e.charType===n.editOptional:!0},i.prototype.isEditPos=function(e){if(this.noMask)return!0;if(e<0||e>=this.testString.length)return!1;var t=this.descriptors[e];return this.isEditDesc(t)},i.prototype.internalRemoveAt=function(t,n,r,i){typeof i=="undefined"&&(i=!1);if(this.noMask){try{this.testString=this.testString.substring(0,t)+this.testString.substring(n+1,this.testString.length),r.testPosition=t}catch(s){}return!0}var o=new e.wijInputResult,u,a,f,l,c,h,p,d,v,m,g=this.findAssignedEditPositionFrom(this.testString.length-1,!1);f=this.findEditPositionInRange(t,n,!0,0),r.hint=r.noEffect;if(f===-1||f>g)return r.testPosition=t,!0;r.testPosition=t,l=n<g,this.findAssignedEditPositionInRange(t,n,!0)!==-1&&(r.hint=r.success);if(l){c=this.findEditPositionFrom(n+1,!0),h=c,t=f,p=!0;while(p){p=!1,u=this.testString.charAt(c),d=this.descriptors[c];if((u!==this.getPromtChar()||d.isAssigned)&&!this.testChar(u,f,o))return r.hint=o.hint,r.testPosition=f,!1;if(c!==g){c=this.findEditPositionFrom(c+1,!0),f=this.findEditPositionFrom(f+1,!0),p=!0;continue}}r.sideEffect>r.hint&&(r.hint=r.sideEffect);if(i)return!0;c=h,f=t,v=!0;while(v){v=!1,a=this.testString.charAt(c),m=this.descriptors[c],a===this.getPromtChar()&&!m.isAssigned?this.resetChar(f):(this.setChar(a,f),this.resetChar(c));if(c!==g){c=this.findEditPositionFrom(c+1,!0),f=this.findEditPositionFrom(f+1,!0),v=!0;continue}}t=f+1}return t<=n&&this.resetString(t,n),!0},i.prototype.removeAt=function(t,n,r){typeof n=="undefined"&&(n=t),typeof r=="undefined"&&(r=new e.wijInputResult);if(n>=this.testString.length)return r.testPosition=n,r.hint=r.positionOutOfRange,!1;if(t>=0&&t<=n){var i=this.internalRemoveAt(t,n,r,!1);return i}return r.testPosition=t,r.hint=r.positionOutOfRange,!1},i}(e.wijTextProvider);e.wijMaskedTextProvider=s;var o=function(){function e(e,t){this.maskPos=e,this.charType=t,this.caseConversion="none",this.isAssigned=!1,this.maskPosition=0,this.maskPosition=e,this.charType=t}return e}();e.wijCharDescriptor=o})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){"use strict";var t=jQuery,n=function(n){function r(){n.apply(this,arguments)}return __extends(r,n),r.prototype._createTextProvider=function(){this._textProvider=new i(this,this.options.type),this._textProvider._nullvalue=this.element.val()===""&&this.options.value===null},r.prototype._beginUpdate=function(){var e=this.options;this.element.addClass(e.wijCSS.wijinputnumber),this.element.data({defaultValue:e.value,preValue:e.value}).attr({"aria-valuemin":e.minValue,"aria-valuemax":e.maxValue,"aria-valuenow":e.value||0})},r.prototype._setOption=function(e,t){n.prototype._setOption.call(this,e,t);switch(e){case"minValue":this.element.attr("aria-valuemin",t),this._updateText();break;case"maxValue":this.element.attr("aria-valuemax",t),this._updateText();break;case"value":this.setValue(t),this._updateText();break;case"showGroup":case"decimalPlaces":case"culture":this._textProvider.updateStringFormat(),this._updateText()}},r.prototype._setData=function(e){this.setValue(e)},r.prototype._resetData=function(){var e=this.element.data("defaultValue");if(e===undefined||e===null){e=this.element.data("elementValue");if(e===undefined||e===null&&e==="")e=0}this.setValue(e)},r.prototype._validateData=function(){this._textProvider.checkAndRepairBounds(!0,!1)||this._updateText()},r.prototype._raiseDataChanged=function(){var e=this.options.value,t=this.element.data("preValue");this.element.data("preValue",e),t!==e&&(this.element.attr("aria-valuenow",e),this._trigger("valueChanged",null,{value:e}))},r.prototype.getValue=function(){var e=this._textProvider.getValue();if(e===undefined||e===null)e=this.getText();return e},r.prototype.setValue=function(e,t){typeof t=="undefined"&&(t=!1);try{t=!!t,typeof e=="boolean"?e=e?"1":"0":typeof e=="string"&&(e=this._textProvider.tryParseValue(e));if(this._textProvider.setValue(e))this._updateText();else if(t){var n="",r;n=this.getText(),this.setText(e),e=e.trim(),r=this.getText().trim(),r!==e&&this.setText(n)}else this.setText(e);return!0}catch(i){return!1}},r.prototype.isValueNull=function(){try{return this._textProvider.isValueNull()}catch(e){return!0}},r.prototype.getPostValue=function(){if(!this._isInitialized())return this.element.val();if(this.options.showNullText&&this.isValueNull())return"0";var e=this.options.value?this.options.value:0;return this.options.type==="percent"&&(e=(e/100).toFixed(10)),e.toString()},r.prototype._updateText=function(e){typeof e=="undefined"&&(e=!1);if(!this._isInitialized())return;this.options.value=this._textProvider.getValue(),n.prototype._updateText.call(this,e),this._textProvider.checkAndRepairBounds(!1,!1)||this._trigger("valueBoundsExceeded")},r.prototype._doSpin=function(n,r){if(!this._allowEdit())return!1;if(r&&this.element.data("breakSpinner"))return!1;var i=this.element.wijtextselection(),s=new e.wijInputResult;return this.element.data("focusNotCalledFirstTime")!==-9&&(new Date).getTime()-this.element.data("focusNotCalledFirstTime")<600&&(this.element.data("focusNotCalledFirstTime",-9),this.element.data("prevCursorPos",0)),this.element.data("prevCursorPos")===-1?this.element.data("prevCursorPos",i.start):i.start=this.element.data("prevCursorPos"),s.testPosition=i.start,this._textProvider[n?"incEnumPart":"decEnumPart"](i.start,s,this.options.increment),this._updateText(),this.element.data("prevCursorPos",s.testPosition),this.selectText(s.testPosition,s.testPosition),r&&!this.element.data("breakSpinner")&&window.setTimeout(t.proxy(function(){this._doSpin(n,!0)},this),this._calcSpinInterval()),!0},r.prototype._deleteSelText=function(e){typeof e=="undefined"&&(e=!1);var t=this.element.wijtextselection(),r=t.start===0&&t.end===this.element.val().length,i;if(t.start===t.end&&!e){i=this._textProvider._stringFormat._currentText;if(i.charAt(t.end)===this._textProvider.getGroupSeparator()||i.charAt(t.end)===this._textProvider.getDecimalSeparator()){t.start++,t.end++,this.element.wijtextselection(t);return}}n.prototype._deleteSelText.call(this,e),r&&(this._textProvider._nullvalue=!0,this._updateText(!0))},r}(e.wijinputcore);e.wijinputnumber=n;var r=function(){function t(){this.wijCSS={wijinputnumber:e.wijinputcore.prototype.options.wijCSS.wijinput+"-numeric"},this.type="numeric",this.value=null,this.minValue=-1e9,this.maxValue=1e9,this.showGroup=!1,this.decimalPlaces=2,this.increment=1,this.valueChanged=null,this.valueBoundsExceeded=null}return t}();n.prototype.options=t.extend(!0,{},e.wijinputcore.prototype.options,new r),t.wijmo.registerWidget("wijinputnumber",n.prototype);var i=function(n){function r(e,t){n.call(this),this._type="numeric",this._stringFormat=null,this._nullvalue=!1,this.inputWidget=e,this._type=t,this._stringFormat=new s(this._type,this.inputWidget.options.decimalPlaces,this.inputWidget.options.showGroup,this._getCulture()),this._stringFormat._setValueFromJSFloat(this.getValue())}return __extends(r,n),r.prototype._getCulture=function(){return this.inputWidget._getCulture()},r.prototype.getDecimalSeparator=function(){return this._getCulture().numberFormat["."]},r.prototype.getGroupSeparator=function(){return this._getCulture().numberFormat[","]},r.prototype.tryParseValue=function(e){return this._stringFormat.tryParseValue(e)},r.prototype.toString=function(){return this.inputWidget.options.showNullText&&!this.inputWidget.isFocused()&&this.isValueNull()?this.inputWidget.options.nullText:this._stringFormat.getFormattedValue()},r.prototype.isValueNull=function(){var e=this.inputWidget.options,t=e.minValue;return null===e.value||undefined===e.value||t===e.value||this._nullvalue},r.prototype.set=function(e,t){return this.clear(),this.insertAt(e,0,t),!0},r.prototype.clear=function(){this._stringFormat.clear()},r.prototype.checkAndRepairBounds=function(e,t){var n=!0,r,i;return typeof e=="undefined"&&(e=!1),r=this.inputWidget.options.minValue,i=this.inputWidget.options.maxValue,typeof t!="undefined"&&t?this._stringFormat.checkMinValue(r,!1,!0):(this._stringFormat.checkMinValue(r,e,!1)||(n=!1),this._stringFormat.checkMaxValue(i,e)||(n=!1),this.inputWidget.options.decimalPlaces>=0&&this._stringFormat.checkDigitsLimits(this.inputWidget.options.decimalPlaces),n)},r.prototype.countSubstring=function(e,t){var n=0,r=e.indexOf(t);while(r!==-1)n++,r=e.indexOf(t,r+1);return n},r.prototype.getAdjustedPositionFromLeft=function(e){var n=this._stringFormat._currentText,r,i;for(r=0;r<n.length;r++){i=n.charAt(r);if(!(!t.wij.charValidator.isDigit(i)&&i!==this.getGroupSeparator()&&i!==this.getDecimalSeparator()||i==="0"))break;this._stringFormat.isZero()?e<r&&e++:e<=r&&e++}return e},r.prototype.getDecimalSeparatorPos=function(){var e=this._stringFormat._currentText;return e.indexOf(this.getDecimalSeparator())},r.prototype.removeLeadingZero=function(e){var t=0;(e.charAt(t)===" "||e.charAt(t)===this._getCulture().numberFormat.currency.symbol)&&t++;while(e.charAt(t)==="0")e=e.substr(0,t)+e.substr(t+1);return e},r.prototype.insertAt=function(n,r,i){var s=this._getCulture().numberFormat,o,u,a,f,l,c,h,p,d,v;i?this._nullvalue=!1:i=new e.wijInputResult;if(n.length===1){if(n==="+")return this._stringFormat.setPositiveSign(),this.checkAndRepairBounds(!0,!1),!0;if(n==="-"||n===")"||n==="(")return this._stringFormat.invertSign(),this.checkAndRepairBounds(!0,!1),i.testPosition=r,this._stringFormat.isNegative()?i.testPosition=r:i.testPosition=r-2,!0;if(!t.wij.charValidator.isDigit(n)){if(n===this.getDecimalSeparator()){o=this.getDecimalSeparatorPos();if(o>=0)return i.testPosition=o,!0}if(n!==this.getGroupSeparator()&&n!==this.getDecimalSeparator()&&n!==")"&&n!=="+"&&n!=="-"&&n!=="("&&n!==this.getDecimalSeparator())return this._type==="percent"&&n===s.percent.symbol?(i.testPosition=r,!0):this._type==="currency"&&n===s.currency.symbol?(i.testPosition=r,!0):!1}}r=this.getAdjustedPositionFromLeft(r),u=r,a=this._stringFormat._currentText,u>a.length&&(u=a.length-1),f=this.removeLeadingZero(a.substring(0,u)),l=a.substring(u,a.length),this._stringFormat.isZero()&&(l=l.replace(/0/,"")),i.testPosition=f.length+n.length-1,this._stringFormat.deFormatValue(f+n+l),c=this._stringFormat._currentText;try{this.inputWidget.options.showGroup?(h=this.countSubstring(f,this._stringFormat._groupSeparator),p=this.countSubstring(c.substring(0,f.length+n.length),this._stringFormat._groupSeparator),i.testPosition+=p-h):n.length===1&&(d=f.charAt(f.length-1),v=c.charAt(i.testPosition-1),v!==d&&i.testPosition--)}catch(m){}return!0},r.prototype.removeAt=function(t,n,r,i){typeof r=="undefined"&&(r=new e.wijInputResult),typeof i=="undefined"&&(i=!1);var s=this._getCulture().numberFormat,o,u,a,f,l,c;r.testPosition=t;try{o=this._stringFormat._currentText;if(t===n&&o.substring(t,n+1)===this.getDecimalSeparator())return!1;u=o.slice(0,t),a=u,f=o.slice(t,n+1).indexOf(this.getDecimalSeparator())>=0,f&&(a+=this.getDecimalSeparator()),a+=o.slice(n+1),a=a||"0",this._stringFormat.deFormatValue(a),a=this._stringFormat._currentText,this._nullvalue=!1;if(this.inputWidget.options.showGroup)if(f)r.testPosition=a.indexOf(this.getDecimalSeparator());else try{l=this.countSubstring(u,this._stringFormat._groupSeparator),c=this.countSubstring(a.substring(0,Math.max(0,t-1)),this._stringFormat._groupSeparator),r.testPosition-=l-c,(o.indexOf(s.currency.symbol)===r.testPosition||o.indexOf(s.percent.symbol)===r.testPosition)&&r.testPosition++}catch(h){}return!0}catch(p){}return!0},r.prototype.incEnumPart=function(t,n,r){return n||(n=new e.wijInputResult),this._stringFormat.increment(r),this._nullvalue=!1,this.checkAndRepairBounds(!0,!1)},r.prototype.decEnumPart=function(t,n,r){return n||(n=new e.wijInputResult),this._stringFormat.decrement(r),this._nullvalue=!1,this.checkAndRepairBounds(!0,!1)},r.prototype.getValue=function(){return this._stringFormat.getJSFloatValue()},r.prototype.setValue=function(e){try{return this._stringFormat._setValueFromJSFloat(e),this.checkAndRepairBounds(!0,!1),!0}catch(t){return!1}},r.prototype.updateStringFormat=function(){var e="0";typeof this._stringFormat!="undefined"&&(e=this._stringFormat._currentValueInString),this._stringFormat=new s(this._type,this.inputWidget.options.decimalPlaces,this.inputWidget.options.showGroup,this._getCulture()),this._stringFormat._currentValueInString=e},r}(e.wijTextProvider);e.wijNumberTextProvider=i;var s=function(){function e(e,t,n,r){this.type=e,this.digitsPlaces=t,this.showGroup=n,this.culture=r,this._currentValueInString="0",this._currentText="0",this._groupSeparator=" "}return e.prototype.decimalSeparator=function(){return this.culture.numberFormat["."]},e.prototype.isNegtive=function(e){return e.indexOf("-")!==-1||e.indexOf("(")!==-1},e.prototype.stripValue=function(e){var t=this.culture.numberFormat,n=t[this.type]||t,r=this.isNegtive(e),i=n[","],s=n["."],o=new RegExp("["+i+t.percent.symbol+t.currency.symbol+" ]","g"),u;return this._groupSeparator=i,e=this._removeNegativeSign(e),e=e.replace(o,""),e=e.replace(s,"."),u=/([\d\.])+/.exec(e),u&&(e=u[0]),r&&(e="-"+e),e},e.prototype.tryParseValue=function(e){try{var t=parseFloat(this.stripValue(e));return isNaN(t)&&(t=0),t}catch(n){return 0}},e.prototype.deFormatValue=function(e){e=this.stripValue(e),this._currentValueInString=e,this._currentText=this.formatValue(e)},e.prototype.formatValue=function(e){var t=this.culture.numberFormat,n=t[this.type]||t,r=this.digitsPlaces,i=this.isNegtive(e),s=n.pattern[i?0:1]||"n",o=n[","],u=n["."],a=r!==-2?r:n.decimals,f=this.showGroup?n.groupSizes:[0],l;return e=this._removeLeadingZero(e),l=this.formatDigit(e,o,u,a,f),l=this._removeLeadingZero(l),l.indexOf(u)===0&&(l="0"+l),l===""&&(l="0"),this._currentValueInString=e,this._currentText=this.applyFormatPattern(s,l,t.percent.symbol,t.currency.symbol),this._currentText},e.prototype.getFormattedValue=function(){return this.formatValue(this._currentValueInString)},e.prototype.getJSFloatValue=function(){try{return this._currentValueInString===""?0:parseFloat(this._currentValueInString)}catch(e){return Number.NaN}},e.prototype.clear=function(){this._currentValueInString="0",this._currentText="0"},e.prototype._setValueFromJSFloat=function(e){var t=""+e;try{return this._currentValueInString=t,this.formatValue(t),!0}catch(n){return!1}},e.prototype.isZero=function(e){typeof e=="undefined"&&(e=this._currentValueInString);var t=this._removeNegativeSign(e),n;return t?(n=parseFloat(t),!isNaN(n)&&!n):!0},e.prototype.setPositiveSign=function(){this._currentValueInString=this._removeNegativeSign(this._currentValueInString)},e.prototype._removeNegativeSign=function(e){return e.replace(/[()\-]/g,"")},e.prototype._removeLeadingZero=function(e){return e.replace(/^0+/,"")},e.prototype.isNegative=function(){return this._currentValueInString.indexOf("-")!==-1||this._currentValueInString.indexOf("(")!==-1},e.prototype.invertSign=function(){var e=this.isNegative();e?this.setPositiveSign():this._currentValueInString=this._currentValueInString.length?"-"+this._currentValueInString:"0",this.isZero()&&(this._currentValueInString=e?"0":"-0"),this.formatValue(this._currentValueInString)},e.prototype.parseNumber=function(e){typeof e=="undefined"&&(e=this._currentValueInString);var t=e.split(".",2);return{decimal:parseInt(t[0],10)||0,fraction:(t.length>1?parseInt(t[1],10):0)||0}},e.prototype._change=function(e){var t=this.parseNumber();this._currentValueInString=""+(t.decimal+e)+"."+t.fraction},e.prototype.increment=function(e){typeof e=="undefined"&&(e=1),this._change(e)},e.prototype.decrement=function(e){typeof e=="undefined"&&(e=1),this._change(-e)},e.prototype.checkDigitsLimits=function(e){var t=this._currentValueInString.split("."),n="";if(!t.length||t.length===1&&t[0]==="")return;t.length>1&&(n=t[1]),n=n.substring(0,e);while(n.length<e)n+="0";this._currentValueInString=t[0],n&&(this._currentValueInString+="."+n)},e.prototype.checkMinValue=function(e,t,n){typeof n=="undefined"&&(n=!1);var r=!0,i,s,o,u,a;try{i=this._currentValueInString.split("."),s=parseFloat(i[0]===""||i[0]==="-"?"0":i[0]),o=0,i.length>1&&parseFloat(i[1])>0&&(o=parseFloat("1."+i[1]));if(s<0||i[0]==="-")o*=-1;e=""+e+"",i=e.split("."),u=parseFloat(i[0]),a=0,i.length>1&&parseFloat(i[1])>0&&(a=parseFloat("1."+i[1]));if(s>u)return!0;s<u||n&&s===u&&o<=a?r=!1:s===u&&s<0&&o>a?r=!1:s===u&&s>=0&&o<a&&(r=!1),!r&&t&&(this._currentValueInString=""+e+"")}catch(f){}return r},e.prototype.checkMaxValue=function(e,t){var n=!0,r,i,s,o,u;try{r=this._currentValueInString.split("."),i=parseFloat(r[0]===""||r[0]==="-"?"0":r[0]),s=0,r.length>1&&parseFloat(r[1])>0&&(s=parseFloat("1."+r[1]));if(i<0||r[0]==="-")s*=-1;e=""+e+"",r=e.split("."),o=parseFloat(r[0]),u=0,r.length>1&&parseFloat(r[1])>0&&(u=parseFloat("1."+r[1]));if(i<o)return!0;i>o&&(n=!1),i===o&&i>=0&&s>u&&(n=!1),i===o&&i<0&&s<u&&(n=!1),!n&&t&&(this._currentValueInString=""+e+"")}catch(a){}return n},e.prototype.applyFormatPattern=function(e,t,n,r){return e.replace(/n/g,t).replace(/%/g,n).replace(/\$/g,r)},e.prototype.formatDigit=function(e,t,n,r,i){var s=this._removeNegativeSign(e),o,u,a,f,l,c;o=s.indexOf("."),o===-1&&(o=s.length),u="",a=0,f=0;for(c=s.length-1;c>=0;c--)l=s.charAt(c),c<o&&(u=l+u,f++,f===i[a]*1&&i[a]*1&&c&&(u=t+u,f=0,i.length-1>a&&a++));if(r>0){u+=n;for(c=0;c<r;c++)l="0",c+o+1<s.length&&(l=s.charAt(c+o+1)),u+=l}return r===-1&&o<s.length-1&&(u+=n,u+=s.substr(o+1)),u},e}();e.wijNumberFormat=s})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){"use strict";var t=jQuery,n="wijlist",r="wijmo-wijlist-item",i=r+"-alternate",s=r+"-selected",o=r+"-first",u=r+"-last",a="wijmo-wijlistitem-active",f="item.wijlist",l=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n.prototype.removeAll=function(){var e=this;e.items=[],e._refresh()},n.prototype.addItem=function(e,t){var n=this;n._checkData(),t===null||t===undefined?n.items.push(e):n.items&&n.items.splice(t,0,e),n._refresh()},n.prototype.removeItem=function(e){var t=this,n;t._checkData(),n=t.indexOf(e),n>=0&&t.removeItemAt(n)},n.prototype.indexOf=function(e){var t=this,n=-1,r=0,i;t._checkData();for(r=0;r<t.items.length;r++){i=t.items[r];if(i.label===e.label&&i.value===e.value){n=r;break}}return n},n.prototype.findIndexByLabel=function(e){var t=this,n=-1,r=0,i;if(e===null||e===undefined)return n;t._checkData();for(r=0;r<t.items.length;r++){i=t.items[r];if(i.label===e){n=r;break}}return n},n.prototype.removeItemAt=function(e){var t=this;t._checkData(),t.items.splice(e,1),t._refresh()},n.prototype._checkData=function(){var e=this;e.items||(e.items=[])},n.prototype._refresh=function(){var e=this;e.renderList(),e.refreshSuperPanel()},n.prototype._setOption=function(n,r){var i=this,o,u=s+" "+i.options.wijCSS.stateActive,a,f,l;e.prototype._setOption.call(this,n,r);if(n==="disabled")i._handleDisabledOption(r,i.element);else if(n==="selectionMode")o=i.selectedItem,o&&(o.selected=!1,o.element&&o.element.removeClass(u),i.selectedItem=undefined),i.selectedItems&&t.each(i.selectedItems,function(e,t){t.selected=!1,t.element.removeClass(u)}),i.selectedItem=[];else if(n==="listItems")f=i._isBind(),f?(l=i._getRenderItems(),i.setItems(l)):i.setItems(r),i.renderList(),i.refreshSuperPanel();else if(n==="dataSource")f=i._isBind(),f&&(l=i._getRenderItems(),i.setItems(l),i.renderList(),i.refreshSuperPanel());else if(n==="autoSize"||n==="maxItemsCount")!i.options.autoSize&&i.element.is(":visible")&&(i._oriHeight!==0?i.element.height(i._oriHeight):(a=i.ul.outerHeight(),i.element.height(a),t(".wijmo-wijsuperpanel-statecontainer",i.element).height(a),t(".wijmo-wijsuperpanel-contentwrapper",i.element).height(a))),i.refreshSuperPanel()},n.prototype._create=function(){var e=this,n=this.element,r=this.options,i=r.wijCSS,s=i.widget+" "+i.content+" "+i.cornerAll+" wijmo-wijlist",o;window.wijmoApplyWijTouchUtilEvents&&(t=window.wijmoApplyWijTouchUtilEvents(t)),e._oriHeight=parseInt(n.css("height"),10),n.addClass(s).attr({role:"listbox","aria-activedescendant":a,"aria-multiselectable":r.selectionMode==="multiple"}).bind("click."+e.widgetName,e,e._onListClick),n.is("div")&&n.children().is("ul")&&(e._isInnerData=!0,e._templates=[],t.each(t("ul > li",n),function(t,n){e._templates.push({templateHtml:n.innerHTML})}),e._oriChildren=n.children().hide()),e.ul=t("<ul class='wijmo-wijlist-ul'></ul>").appendTo(n),r.listItems!==null&&(o=e._getRenderItems(),o&&(e.setItems(o),e.renderList(),e.refreshSuperPanel())),e.element.is(":hidden")&&e.element.wijAddVisibilityObserver&&e.element.wijAddVisibilityObserver(function(){e.refreshSuperPanel(),e.element.wijRemoveVisibilityObserver&&e.element.wijRemoveVisibilityObserver()},"wijlist"),r.disabled&&(e.disable(),e._handleDisabledOption(!0,e.element))},n.prototype._isBind=function(){var e=this.options,t=e.listItems;return t!==null&&t.label&&t.label.bind?!0:!1},n.prototype._getRenderItems=function(){var e=this.options,n=e.listItems;return n!==null?t.isArray(n)&&n.length>0&&typeof n[0].label=="string"?n:n.label&&n.label.bind?this._getMappingItems():null:null},n.prototype._getMappingItems=function(){var e=this.options,n=e.dataSource,r=e.listItems,i,s,o;return!n||!r?null:!r.label||!r.label.bind||!r.value||!r.value.bind?null:(s=r.label.bind,o=r.value.bind,n&&n.length!==0?(i=[],t.each(n,function(e,t){i.push({label:t[s],value:t[o]})}),i):null)},n.prototype._handleDisabledOption=function(e,t){var n=this;e?(n.disabledDiv||(n.disabledDiv=n._createDisabledDiv(t)),n.disabledDiv.appendTo("body")):n.disabledDiv&&(n.disabledDiv.remove(),n.disabledDiv=null)},n.prototype._createDisabledDiv=function(e){var n=this,r=e||n.element,i=r.offset(),s=r.outerWidth(),o=r.outerHeight();return t("<div></div>").addClass("ui-disabled").css({"z-index":"99999",position:"absolute",width:s,height:o,left:i.left,top:i.top,"pointer-events":"auto"})},n.prototype.setTemplateItems=function(e){this._setItemsByExtend(e,!0)},n.prototype.setItems=function(e){this._setItemsByExtend(e,!1)},n.prototype._setItemsByExtend=function(e,n){var r=this,i;if(n){if(r._templates&&e&&e.length!==r._templates.length)return;r.items=e,r.items||(r.items=[]),t.each(r._templates,function(t){r.items[t]?r.items[t].templateHtml=r._templates[t].templateHtml:r.items.push({templateHtml:r._templates[t].templateHtml,label:e[t].label,value:e[t].value})})}else r.items=e;if(!e)return null;i=t.grep(e,function(e){return e.selected},undefined),r.options.selectionMode==="single"?(r.selectedItems=[],r.selectedItem=i.length>0?i[0]:undefined):r.selectedItems=i},n.prototype.filterItems=function(e,n,r,i){var o=this,u=o._escapeRegex(e),a,f=s+" "+o.options.wijCSS.stateActive,l=o.options.wijCSS.priorityPrimary,c,h="",p=!1,d=null;if(!this.items)return null;t("li[wijhidden].wijmo-wijlist-item",o.element)&&t("li[wijhidden].wijmo-wijlist-item",o.element).length>0&&(p=!0),t("span."+l,o.element)&&t("span."+l,o.element).length>0&&(p=!0);if(!p&&(!e||e.length===0)){t.each(this.items,function(e,t){t.selected?(o.activate(null,t,!1),t.element&&t.element.addClass(f),o.selectedItem=t):t.element&&t.element.hasClass(f)&&t.element.removeClass(f)});return}return a=new RegExp(u,"i"),t.each(this.items,function(e,i){c=i.label,i.templateHtml?c=i.templateHtml:i.text!==undefined&&(c=i.text),t("span."+l,i.element).length>0&&i.element.empty().append(c);var s=a.exec(i.label);s===null&&n?i.element&&(i.element.hide(),i.element.attr("wijhidden","wijhidden")):(i.selected?(o.activate(null,i,!1),i.element&&i.element.addClass(f),o.selectedItem=i):i.element&&i.element.hasClass(f)&&i.element.removeClass(f),r&&(h=c.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+u+")(?![^<>]*>)(?![^&;]+;)","gi"),"<span class='"+l+"'>$1</span>"),i.element&&i.element.html(h)),i.element&&!i.element.is(":visible")&&(i.element.show(),i.element.removeAttr("wijhidden")),u!==undefined&&u.length!==0&&d===null&&s&&s.index===0&&(d=i))}),d},n.prototype.popItem=function(){var e=this;e._checkData(),e.items.pop(),e._refresh()},n.prototype.getList=function(){return this.ul},n.prototype._onListClick=function(e){var n=e.data;if(n.options.disabled)return;if(!t(e.target).closest(".wijmo-wijlist-item").length)return;n.select(e)},n.prototype.destroy=function(){var t=this,n=this.element,r=this.options,i=r.wijCSS,s=i.widget+" "+i.content+" "+i.cornerAll+" wijmo-wijlist";t.superPanel!==undefined&&t.superPanel.destroy(),n.removeClass("wijmo-wijobserver-visibility").removeClass(s).removeAttr("role").removeAttr("aria-activedescendant").unbind("."+t.widgetName),t.ul.remove(),t.disabledDiv&&(t.disabledDiv.remove(),t.disabledDiv=null),t._isInnerData&&t._oriChildren.show(),e.prototype.destroy.call(this)},n.prototype.activate=function(e,t,n){var r=this,i,s;r.deactivate();if(t===null||t===undefined)return;if(r._trigger("focusing",e,t)===!1)return;i=r.active=t,s=t.element,s&&(r.options.addHoverItemClass&&s.addClass(r.options.wijCSS.stateHover),s.attr("id",a)),n&&r.superPanel!==undefined&&r.superPanel.scrollChildIntoView(s),r.element.is(":visible")&&r._trigger("focus",e,t)},n.prototype.deactivate=function(){var e=this,t=e.active,n;if(!t)return;n=t.element,e._trigger("blur",null,t),n&&n.removeClass(e.options.wijCSS.stateHover).removeAttr("id"),e.active=undefined},n.prototype.next=function(e){this.move("next","."+r+":first",e)},n.prototype.nextPage=function(){this.superPanel.doScrolling("bottom",!0)},n.prototype.previous=function(e){this.move("prev","."+r+":last",e)},n.prototype.previousPage=function(){this.superPanel.doScrolling("top",!0)},n.prototype.first=function(){return this.active&&!this.active.element.prev().length},n.prototype.last=function(){return this.active&&!this.active.element.next().length},n.prototype.move=function(e,t,n){var i=this,s,o;if(!i.active){s=i.ul.children(":visible"+t).data(f),i.activate(n,s,!0);return}o=i.active.element[e+"All"](":visible."+r).eq(0),o.length?i.activate(n,o.data(f),!0):i.activate(n,i.element.children(t).data(f),!0)},n.prototype.select=function(e,n){var r=this,i,o,u=s+" "+r.options.wijCSS.stateActive,a,l,c;if(r.active===undefined){r.active=t(t(e.target).closest(".wijmo-wijlist-item")).data(f);if(r.active===undefined)return}i=r.active.element;if(i===undefined||i.attr("wijhidden"))return;a=i.data(f);if(!a)return;l=r.options.selectionMode==="single",l?(c=r.selectedItem,i.addClass(u).attr("aria-selected","true"),a.selected=!0,c!==undefined&&a!==c&&(c.selected=!1,c.element&&c.element.removeClass(u).removeAttr("aria-selected")),r.selectedItem=a,o=t.inArray(a,r.items),r._trigger("selected",e,{item:a,previousItem:c,selectedIndex:o,data:n})):(a.selected=!a.selected,a.selected?i.addClass(u).attr("aria-selected","true"):i.removeClass(u).removeAttr("aria-selected","true"),o=[],r.selectedItems=t.grep(r.items,function(e,t){return e.selected&&o.push(t),e.selected},undefined),r._trigger("selected",e,{selectedIndex:o,item:a,selectedItems:r.selectedItems}))},n.prototype._findItemsByValues=function(e){var n,r=[];return r=t.grep(this.items,function(t,r){n=!1;for(var i=0;i<e.length;i++)t.value===e[i]&&(n=!0);return n},undefined),r},n.prototype._findItemsByIndices=function(e){var n=this,r=this.items.length,i=[];return t.each(e,function(e,t){t>=0&&t<r&&i.push(n.items[t])}),i},n.prototype.getItems=function(e,n){var r=this,i,s,o,u;s=t.isArray(e),i=!s&&typeof e=="number"||s&&typeof e[0]=="number",o=s?e:[e];if(!n)u=r._findItemsByValues(o);else{if(!i)return null;u=r._findItemsByIndices(o)}return u},n.prototype.selectItems=function(e,n,r){var i=this,o=this.options.selectionMode==="single",u=s+" "+i.options.wijCSS.stateActive,a,f,l;l=i.getItems(e,r),o?(l.length>0&&(a=l[0],a.selected=!0,a.element.addClass(u)),f=i.selectedItem,f&&(f.selected=!1,f.element.removeClass(u)),i.selectedItem=a,n&&i._trigger("selected",null,{item:a,previousItem:f})):(t.each(l,function(e,t){t.selected=!0,t.element.addClass(u)}),i.selectedItems=t.grep(i.items,function(e){return e.selected},undefined),n&&i._trigger("selected",null,{selectedItems:i.selectedItems}))},n.prototype.unselectItems=function(e){var n=this,r=this.options.selectionMode,i=s+" "+n.options.wijCSS.stateActive,o,u;if(r==="single")o=n.selectedItem,o&&(o.selected=!1,o.element.removeClass(i),n.selectedItem=undefined);else{u=n.getItems(e,!0);if(!u||u.length===0)return;t.each(u,function(e,t){t.selected=!1,t.element.removeClass(i)}),n.selectedItems=t.grep(n.items,function(e){return e.selected},undefined)}},n.prototype.renderList=function(){var e=this,t=this.ul,n=this.options,r,i,s,a,f;t.empty(),r=e.items;if(r===undefined||r===null)return;i=r.length;if(i===0)return;s=n.selectionMode==="single";for(a=0;a<i;a++)f=r[a],e._renderItem(t,f,a,s);i>0&&(r[0].element&&r[0].element.addClass(o),r[i-1].element&&r[i-1].element.addClass(u)),e._trigger("listRendered",null,e)},n.prototype._renderItem=function(e,n,r,o){var u=this,a=t("<li role='option' class='wijmo-wijlist-item "+u.options.wijCSS.cornerAll+"'></li>"),l=s+" "+u.options.wijCSS.stateActive,c,h;n.element=a,n.list=u;if(u._trigger("itemRendering",null,n)===!1)return;return c=n.label,n.title&&a.attr("title",n.title),n.templateHtml?c=n.templateHtml:n.text!==undefined&&(c=n.text),a.bind("mouseover",function(e){if(u.options.disabled)return;u.activate(e,n,!1)}).bind("mouseout",function(){if(u.options.disabled)return;u.options.keepHightlightOnMouseLeave||u.deactivate()}).data(f,n).append(c).appendTo(e),u._isInnerData||(h=n.imageUrl,h!==undefined&&h.length>0&&a.prepend("<img src='"+n.imageUrl+"'>")),n.selected&&(u.activate(null,n,!1),a.addClass(l)),r%2===1&&a.addClass(i),u._trigger("itemRendered",null,n),a},n.prototype._escapeRegex=function(e){return e===undefined?e:e.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")},n.prototype.adjustOptions=function(){var e=this.options,t;if(e.data!==null)for(t=0;t<e.listItems.length;t++)delete e.listItems[t].element,delete e.listItems[t].list;return e},n.prototype.refreshSuperPanel=function(){var e=this,n=this.element,r=this.options,i=this.ul,s=i.children(".wijmo-wijlist-item:first"),o,u,a,f=null,l,c,h,p,d,v,m;if(!n.is(":visible"))return!1;u=i.outerHeight(),a=n.innerWidth(),r.autoSize&&(f=s.outerHeight(!0)*r.maxItemsCount),f!==null&&n.height(Math.min(f,u)),l=n.innerHeight(),c=l/(u-l),d=101*c/(1+c),h=s.outerHeight()/(u-l)*(101-d),e.superPanel===undefined?(v={allowResize:!1,keyboardSupport:!1,bubbleScrollingEvent:!0,hScroller:{scrollBarVisibility:"hidden"},vScroller:{scrollSmallChange:h,scrollLargeChange:d}},t.extend(v,r.superPanelOptions),e.superPanel=n.wijsuperpanel(v).data("wijmoWijsuperpanel"),e.superPanel&&e.superPanel.vNeedScrollBar&&(i.setOutWidth(a-18),e.superPanel.refresh())):(p=e.superPanel.options.vScroller,p.scrollLargeChange=d,p.scrollSmallChange=h,e.superPanel.paintPanel(),e.superPanel.vNeedScrollBar?(i.setOutWidth(a-18),e.superPanel.refresh()):(i.setOutWidth(n.outerWidth()),o=n.children(".wijmo-wijsuperpanel-header").outerHeight(),o!==null&&o!==undefined&&n.height(u+o),e.superPanel.refresh())),m=i.css("padding-top"),m.length>0?(p=e.superPanel.options.vScroller,p.firstStepChangeFix=e.superPanel.scrollPxToValue(parseFloat(m),"v")):p.firstStepChangeFix=0,i.setOutWidth(i.parent().parent().innerWidth()),r.disabled&&e.disabledDiv&&e.disabledDiv.css("left",n.offset().left).css("top",n.offset().top).css("width",n.outerWidth()).css("height",n.outerHeight())},n}(e.wijmoWidget);e.wijlist=l,l.prototype.options=t.extend(!0,{},e.wijmoWidget.prototype.options,{wijMobileCSS:{header:"ui-header ui-bar-a",content:"ui-body-c",stateDefault:"ui-btn-up-c",stateHover:"ui-btn-up-b",stateActive:"ui-btn-down-b"},initSelector:":jqmData(role='wijlist')",dataSource:null,listItems:[],selected:null,selectionMode:"single",autoSize:!1,maxItemsCount:5,addHoverItemClass:!0,superPanelOptions:null,disabled:!1,focusing:null,focus:null,blur:null,itemRendering:null,itemRendered:null,listRendered:null,keepHightlightOnMouseLeave:!1}),t.wijmo.registerWidget("wijlist",l.prototype)})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};$.fn.extend({getBounds:function(){return $.extend({},$(this).offset(),{width:$(this).outerWidth(!0),height:$(this).outerHeight(!0)})},setBounds:function(e){return $(this).css({left:e.left,top:e.top}).width(e.width).height(e.height),this},getMaxZIndex:function(){var e=($(this).css("z-index")=="auto"?0:$(this).css("z-index"))*1;return $(this).siblings().each(function(t,n){e=Math.max(e,($(n).css("z-index")=="auto"?0:$(n).css("z-index"))*1)}),e}});var wijmo;(function(e){var t=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._init=function(){if(!!this.options.ensureOutermost){var e=$("form");e.length===0&&(e=$(document.body)),this.element.appendTo(e)}this.element.data("visible.wijpopup",!1),this.element.css("position","absolute"),this.element.position({of:$(document.body)}),this.element.hide()},t.prototype._setOption=function(t,n){e.prototype._setOption.call(this,t,n);if(t==="autoHide"){var r=this.isVisible();this.hide(),r&&this.show()}},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.isVisible()&&this.hide();if($.browser.msie&&parseInt($.browser.version)<7){var t=this.element.data("backframe.wijpopup");t||t.remove()}var n=this;this.element.unbind(".wijpopup"),$.each(["visible","backframe","animating","width"],function(e,t){n.element.removeData(t+".wijpopup")})},t.prototype.isVisible=function(){return!!this.element.data("visible.wijpopup")&&this.element.is(":visible")},t.prototype.isAnimating=function(){return!!this.element.data("animating.wijpopup")},t.prototype.show=function(e){var t=this;this._setPosition(e);if(this.isVisible())return;if(this._trigger("showing")===!1)return;this.options.autoHide&&window.setTimeout(function(){$(document.body).bind("mouseup.wijpopup",$.proxy(t._onDocMouseUp,t))},0);var n=this.options.showEffect||"show",r=this.options.showDuration||300,i=this.options.showOptions||{};this.element.data("animating.wijpopup",!0),$.effects&&$.effects.effect[n]?this.element.show(n,i,r,$.proxy(this._showCompleted,this)):this.element[n](n==="show"?null:r,$.proxy(this._showCompleted,this)),(!n||!r||n==="show"||r<=0)&&this._showCompleted()},t.prototype._showCompleted=function(){this.element.removeData("animating.wijpopup"),this.element.data("visible.wijpopup",!0),this._trigger("shown")},t.prototype.showAt=function(e,t){this.show({my:"left+"+e+" top+"+t,at:"left top",of:document.body})},t.prototype.hide=function(){if(!this.isVisible())return;if(this._trigger("hiding")===!1)return;$(document.body).unbind("mouseup.wijpopup");var e=this.options.hideEffect||"hide",t=this.options.hideDuration||300,n=this.options.hideOptions||{};this.element.data("animating.wijpopup",!0),$.effects&&$.effects.effect[e]?this.element.hide(e,n,t,$.proxy(this._hideCompleted,this)):this.element[e](e==="hide"?null:t,$.proxy(this._hideCompleted,this)),(!e||!t||e==="hide"||t<=0)&&this._hideCompleted()},t.prototype._hideCompleted=function(){this.element.data("width.wijpopup")!==undefined&&(this.element.width(this.element.data("width.wijpopup")),this.element.removeData("width.wijpopup")),this.element.unbind("move.wijpopup"),this.element.removeData("animating.wijpopup");if($.browser.msie&&parseInt($.browser.version)<7){var e=this.element.data("backframe.wijpopup");e&&e.hide()}this._trigger("hidden")},t.prototype._onDocMouseUp=function(e){var t=e.target?e.target:e.srcElement;this.isVisible()&&!!this.options.autoHide&&t!=this.element.get(0)&&$(t).parents().index(this.element)<0&&this.hide()},t.prototype._onMove=function(e){var t=this.element.data("backframe.wijpopup");t&&(this.element.before(t),t.css({top:this.element.css("top"),left:this.element.css("left")}))},t.prototype._addBackgroundIFrame=function(){if($.browser.msie&&parseInt($.browser.version)<7){var e=this.element.data("backframe.wijpopup");e||(e=jQuery("<iframe/>").css({position:"absolute",display:"none",filter:"progid:DXImageTransform.Microsoft.Alpha(style=0,opacity=0)"}).attr({src:"javascript:'<html></html>';",scrolling:"no",frameborder:"0","tabIndex ":-1}),this.element.before(e),this.element.data("backframe.wijpopup",e),this.element.bind("move.wijpopup",$.proxy(this._onMove,this))),e.setBounds(this.element.getBounds()),e.css({display:"block",left:this.element.css("left"),top:this.element.css("top"),"z-index":this.element.css("z-index")-1})}},t.prototype._setZIndex=function(e){this.element.css("z-index",e);var t=this.element.data("backframe.wijpopup");t&&t.css("z-index",this.element.css("z-index")-1)},t.prototype._setPosition=function(e){var t=this.element.is(":visible");this.element.show(),this.element.position($.extend({},this.options.position,e?e:{})),t||this.element.hide(),this._addBackgroundIFrame();var n=1e3;this.options.position.of&&(n=Math.max(n,$(this.options.position.of).getMaxZIndex())),this._setZIndex(n+10),this._trigger("posChanged")},t}(e.JQueryUIWidget);e.WijPopUp=t,t.prototype.options=$.extend(!0,{},e.JQueryUIWidget.prototype.options,{ensureOutermost:!1,showEffect:"show",showOptions:{},showDuration:300,hideEffect:"hide",hideOptions:{},hideDuration:100,autoHide:!1,position:{at:"left bottom",my:"left top"},showing:null,shown:null,hiding:null,hidden:null,posChanged:null}),$.wijmo.registerWidget("wijpopup",t.prototype)})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){"use strict";var t=jQuery,n="wijcalendar",r={general:0,weekEnd:1,otherMonth:2,outOfRange:4,today:8,custom:16,disabled:32,selected:64,gap:128},i=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n.prototype._create=function(){var e=this,n=e.options.wijCSS;window.wijmoApplyWijTouchUtilEvents&&(t=window.wijmoApplyWijTouchUtilEvents(t)),t.isFunction(window.wijmoASPNetParseOptions)&&wijmoASPNetParseOptions(this.options),this.element.addClass("wijmo-wijcalendar  "+n.datepickerInline+" "+n.datepicker+" "+n.widget+" "+n.content+" "+n.helperClearFix+" "+n.cornerAll).attr("role","grid"),this._previewWrapper(this.options.allowPreview),this.element.data("preview.wijcalendar",!1),e.element.is(":hidden")&&e.element.wijAddVisibilityObserver&&e.element.wijAddVisibilityObserver(function(){e.refresh(),e.element.wijRemoveVisibilityObserver&&e.element.wijRemoveVisibilityObserver()},"wijcalendar")},n.prototype._init=function(){if(this.options.popupMode){var e={autoHide:!!this.options.autoHide,showing:undefined,shown:undefined,hiding:undefined,hidden:undefined},t=this;this.options.beforePopup&&(e.showing=this.options.beforePopup),this.options.afterPopup&&(e.shown=this.options.afterPopup),this.options.beforeClose&&(e.hiding=this.options.beforeClose),e.hidden=function(e){t.element.removeData("lastdate.wijcalendar"),t.options.afterClose&&t.options.afterClose.call(e)},this.element.wijpopup(e)}this._getSelectedDates(),this._getDisabledDates(),this._resetWidth(),this.refresh()},n.prototype.destroy=function(){var n=this.options.wijCSS;e.prototype.destroy.call(this),this.close(),this.element.html(""),this.element.removeClass("wijmo-wijcalendar "+n.datepickerInline+" "+n.datepicker+" "+n.widget+" "+n.content+" "+n.helperClearFix+" "+n.cornerAll+" "+n.datepickerMulti).removeAttr("role");var r=this;t.each(["preview","disableddates","selecteddates","dragging","lastdate","animating"],function(e,t){r.element.removeData(t+".wijcalendar")}),this._previewWrapper(!1)},n.prototype._setOption=function(t,n){e.prototype._setOption.call(this,t,n);switch(t){case"showWeekDays":case"showWeekNumbers":case"showTitle":case"showOtherMonthDays":case"selectionMode":this.unSelectAll(),this._resetWidth(),this.refresh();break;case"culture":this.refresh();break;case"allowPreview":this._previewWrapper(n),this.refresh();break;case"monthCols":this._myGrid&&(this._myGrid=undefined),this._resetWidth(),this.refresh();break;case"monthRows":this._myGrid&&(this._myGrid=undefined);break;case"autoHide":this.element.wijpopup({autoHide:this.options.autoHide});break;case"selectedDates":this._getSelectedDates().setDates(n),this.refresh();break;case"disabledDates":this._getDisabledDates().setDates(n),this.refresh();break;case"displayDate":this.refresh()}},n.prototype._previewWrapper=function(e){e?this.element.parent().hasClass("wijmo-wijcalendar-preview-wrapper")||this.element.wrap("<div class='wijmo-wijcalendar-preview-wrapper "+this.options.wijCSS.helperClearFix+"'></div>"):this.element.parent().hasClass("wijmo-wijcalendar-preview-wrapper")&&this.element.unwrap()},n.prototype._isRTL=function(){return!!this._getCulture(null).isRTL},n.prototype.refresh=function(){this.element.empty().append(this._createCalendar()),this.element[(this._isRTL()?"add":"remove")+"Class"](this.options.wijCSS.datepickerRtl),this.options.showTitle?this.element.removeClass("wijmo-wijcalendar-notitle"):this.element.addClass("wijmo-wijcalendar-notitle"),this._bindEvents()},n.prototype.refreshDate=function(e){if(!this._monthViews)return;if(e<this._groupStartDate||e>this._groupEndDate)return;t.each(this._monthViews,function(){this._refreshDate(e)})},n.prototype.getDisplayDate=function(){var e=this.options.displayDate?this.options.displayDate:new Date;return o.isSameDate(e,new Date(1900,0,1))&&(e=new Date),e},n.prototype.getSelectedDate=function(){var e=this.options.selectedDates;return!e||e.length===0?null:e[0]},n.prototype.selectDate=function(e){return e=new Date(e),this._getDisabledDates().contains(e)?!1:e<this.options.minDate||e>this.options.maxDate?!1:(this._getSelectedDates().add(e),this.refreshDate(e),!0)},n.prototype.unSelectDate=function(e){return e=new Date(e),this._getDisabledDates().contains(e)?!1:e<this.options.minDate||e>this.options.maxDate?!1:(this._getSelectedDates().remove(e),this.refreshDate(e),!0)},n.prototype.unSelectAll=function(){var e=this.options.selectedDates,t;if(e&&e.length>0){this._getSelectedDates().clear();for(t=0;t<e.length;t++)this.refreshDate(e[t])}},n.prototype._slideToDate=function(e){if(o.isSameMonth(this.getDisplayDate(),e))return;var t=this.element.is(":visible");if(!t)this.options.displayDate=e;else{if(this._trigger("beforeSlide")===!1)return;this._isSingleMonth()?this._playSlideAnimation(e):this._playMmSlideAnimation(e)}},n.prototype.isPopupShowing=function(){return this.options.popupMode?this.element.wijpopup("isVisible"):!1},n.prototype.popup=function(e){this._myGrid=undefined,this.refresh(),this.element.data("dragging.wijcalendar",!1),this.element.data("wijmoWijpopup")&&this.element.wijpopup("show",e)},n.prototype.popupAt=function(e,t){this._myGrid=undefined,this.refresh(),this.element.data("dragging.wijcalendar",!1),this.element.data("wijmoWijpopup")&&this.element.wijpopup("showAt",e,t)},n.prototype.close=function(){this.isPopupShowing()&&this.element.wijpopup("hide")},n.prototype._getCulture=function(e){return Globalize.findClosestCulture(e||this.options.culture)},n.prototype._getDates=function(e){var t=e.toLowerCase()+".wijcalendar",n=this.element.data(t);return n===undefined&&(n=new a(this,e),this.element.data(t,n)),n},n.prototype._getDisabledDates=function(){return this._getDates("disabledDates")},n.prototype._getSelectedDates=function(){return this._getDates("selectedDates")},n.prototype._onDayDragStart=function(e){return e.preventDefault(),e.stopPropagation(),!1},n.prototype._onDayMouseDown=function(e){e.preventDefault(),e.stopPropagation();var n=this.options,r=this,i,s,o=!1,u=n.selectedDates,a=!1,f=[];return e.which!==1?!1:(i=this._getCellDate(e.currentTarget),i===undefined?!1:n.selectionMode.day?(s={date:i},this._trigger("beforeSelect",null,s)===!1?!1:((!n.selectionMode.days||!e.metaKey&&!e.shiftKey&&!e.ctrlKey)&&this.unSelectAll(),!n.selectionMode.days||(e.shiftKey&&this.element.data("lastdate.wijcalendar")?(this._selectRange(this.element.data("lastdate.wijcalendar"),i,null),o=!0):e.ctrlKey&&(this.element.data("lastdate.wijcalendar",i),t.each(u,function(e,t){if(i.getFullYear()===t.getFullYear()&&i.getMonth()===t.getMonth()&&i.getDate()===t.getDate())return a=!0,!1}),a?this.unSelectDate(i):this.selectDate(i),u=n.selectedDates,t.each(u,function(e,t){f.push(new Date(t))}),this._trigger("selectedDatesChanged",null,{dates:f}),o=!0)),o||(this.element.data("lastdate.wijcalendar",i),o=this.selectDate(i),this._trigger("selectedDatesChanged",null,{dates:[i]})),o&&(this._trigger("afterSelect",null,s),!n.selectionMode.days||(this.element.data("dragging.wijcalendar",!0),t(document.body).bind("mouseup."+this.widgetName,function(){t(document.body).unbind("mouseup."+r.widgetName),r.element.data("dragging.wijcalendar",!1)}))),!1)):!1)},n.prototype._onMouseUp=function(e){return e.preventDefault(),e.stopPropagation(),this.element.data("dragging.wijcalendar",!1),!1},n.prototype._onDayClicked=function(e){var n=this._getCellDate(e.currentTarget);return n===undefined?!1:this.options.selectionMode.day?(this.isPopupShowing()?this.close():t(e.currentTarget).hasClass(this.options.wijCSS.datepickerOtherMonth)&&this._slideToDate(n),!1):!1},n.prototype._onDayMouseEnter=function(e){t(e.currentTarget).attr("state","hover"),this._refreshDayCell(e.currentTarget);if(!!this.element.data("dragging.wijcalendar")){var n=this._getCellDate(e.currentTarget);if(n===undefined)return;this.unSelectAll(),this._selectRange(this.element.data("lastdate.wijcalendar"),n,!0)}},n.prototype._onDayMouseLeave=function(e){t(e.currentTarget).attr("state","normal"),this._refreshDayCell(e.currentTarget)},n.prototype._selectRange=function(e,t,n){if(e!==undefined&&e!==new Date(1900,1,1)){var r=e,i=t,s=[];e>t&&(i=e,r=t);for(;;){if(r>i)break;this.selectDate(r),s[s.length]=r,r=o.addDays(r,1)}n||this.element.removeData("lastdate.wijcalendar"),this._trigger("selectedDatesChanged",null,{dates:s})}else this.selectDate(e),this._trigger("selectedDatesChanged",null,{dates:[e]});return!0},n.prototype._getCellDate=function(e){var n=t(e).attr("date");return n===undefined?n:new Date(n)},n.prototype._getParentTable=function(e){var n=t(e).parents("table");return n.length===0?undefined:n.get(0)},n.prototype._initMonthSelector=function(e){if(t(e).data("cells")!==undefined)return;var n=e.id.split("_"),r,i,s=[],o,u,a,f,l;if(n[n.length-1]!=="ms")throw Error.create("not a monthview");r=n.slice(0,n.length-1).join("_"),i=this._getParentTable(e);if(i){if(i.id!==r)throw Error.create("not a monthview");for(o=0;o<i.rows.length;o++){l=i.rows[o];for(u=0;u<l.cells.length;u++)a=l.cells[u],a&&(f=t(a).attr("daytype"),f!==undefined&&t(a).find("a").hasClass(this.options.wijCSS.prioritySecondary)===!1&&this._isSelectable(parseInt(f,10))&&(s[s.length]=a))}}t(e).data("cells",s)},n.prototype._onMonthSelectorClicked=function(e){this._initMonthSelector(e.currentTarget);var n=t(e.currentTarget).data("cells"),r=[],i,s,o,u;this.element.removeData("lastdate.wijcalendar"),this.unSelectAll();for(i=0;i<n.length;i++)s=n[i],o=t(s).attr("date"),o!==undefined&&(u=new Date(o),this.selectDate(u),r[r.length]=u);return this._trigger("selectedDatesChanged",null,{dates:r}),this.isPopupShowing()&&this.close(),!1},n.prototype._onMonthSelectorMouseEnter=function(e){this._initMonthSelector(e.currentTarget);var n=t(e.currentTarget).data("cells"),r;for(r=0;r<n.length;r++)e.currentTarget=n[r],this._onDayMouseEnter(e)},n.prototype._onMonthSelectorMouseLeave=function(e){this._initMonthSelector(e.currentTarget);var n=t(e.currentTarget).data("cells"),r;for(r=0;r<n.length;r++)e.currentTarget=n[r],this._onDayMouseLeave(e)},n.prototype._initWeekDaySelector=function(e){if(t(e).data("cells")!==undefined)return;var n=e.id.split("_"),r,i,s,o=[],u=0,a,f,l;if(n[n.length-2]!=="cs")throw Error.create("not a column");r=parseInt(n[n.length-1],10),i=n.slice(0,n.length-2).join("_"),s=this._getParentTable(e);if(s){if(s.id!==i)throw Error.create("not a column");this.options.showWeekDays&&u++;for(;u<s.rows.length;u++)a=s.rows[u],r<a.cells.length&&(f=a.cells[r],f&&(l=t(f).attr("daytype"),l!==undefined&&t(f).find("a").hasClass(this.options.wijCSS.prioritySecondary)===!1&&this._isSelectable(parseInt(l,10))&&(o[o.length]=f)))}t(e).data("cells",o)},n.prototype._onWeekDayClicked=function(e){this._initWeekDaySelector(e.currentTarget);var n=t(e.currentTarget).data("cells"),r=[],i,s,o,u;this.unSelectAll();for(i=0;i<n.length;i++)s=t(n[i]),o=s.attr("date"),o!==undefined&&(u=new Date(o),this.selectDate(u),r[r.length]=u);return this._trigger("selectedDatesChanged",null,{dates:r}),this.isPopupShowing()&&this.close(),!1},n.prototype._onWeekDayMouseEnter=function(e){this._initWeekDaySelector(e.currentTarget);var n=t(e.currentTarget).data("cells"),r;for(r=0;r<n.length;r++)e.currentTarget=n[r],this._onDayMouseEnter(e)},n.prototype._onWeekDayMouseLeave=function(e){this._initWeekDaySelector(e.currentTarget);var n=t(e.currentTarget).data("cells"),r;for(r=0;r<n.length;r++)e.currentTarget=n[r],this._onDayMouseLeave(e)},n.prototype._initWeekNumberSelector=function(e){if(t(e).data("cells")!==undefined)return;var n=e.id.split("_"),r,i,s,o=[],u,a,f,l;if(n[n.length-2]!=="rs")throw Error.create("not a row");r=parseInt(n[n.length-1],10),i=n.slice(0,n.length-2).join("_"),s=this._getParentTable(e);if(s){if(s.id!==i)throw Error.create("not a row");u=s.rows[r];if(u){a=0,this.options.showWeekNumbers&&a++;for(;a<u.cells.length;a++)f=u.cells[a],f&&(l=t(f).attr("daytype"),l!==undefined&&t(f).find("a").hasClass(this.options.wijCSS.prioritySecondary)===!1&&this._isSelectable(parseInt(l,10))&&(o[o.length]=f))}}t(e).data("cells",o)},n.prototype._onWeekNumberClicked=function(e){this._initWeekNumberSelector(e.currentTarget);var n=t(e.currentTarget).data("cells"),r=[],i,s,o,u;this.unSelectAll();for(i=0;i<n.length;i++)s=t(n[i]),o=s.attr("date"),o!==undefined&&(u=new Date(o),this.selectDate(u),r[r.length]=u);return this._trigger("selectedDatesChanged",null,{dates:r}),this.isPopupShowing()&&this.close(),!1},n.prototype._onWeekNumberMouseEnter=function(e){this._initWeekNumberSelector(e.currentTarget);var n=t(e.currentTarget).data("cells"),r;for(r=0;r<n.length;r++)e.currentTarget=n[r],this._onDayMouseEnter(e)},n.prototype._onWeekNumberMouseLeave=function(e){this._initWeekNumberSelector(e.currentTarget);var n=t(e.currentTarget).data("cells"),r;for(r=0;r<n.length;r++)e.currentTarget=n[r],this._onDayMouseLeave(e)},n.prototype._isAnimating=function(){return!!this.element.data("animating.wijcalendar")},n.prototype._onPreviewMouseEnter=function(e){if(!!this.element.data("previewContainer"))return;if(this._isAnimating())return;var n=t(e.currentTarget),r=n.attr("id"),i=this.getDisplayDate(),s=this.options.wijCSS,u=this.options.monthCols*this.options.monthRows,a=t("<div/>");if(r===undefined)return;r==="prevPreview"&&(u=-u),this.options.displayDate=o.addMonths(i,u),this.element.data("preview.wijcalendar",!0),a.appendTo(document.body),a.hide(),a.addClass("wijmo-wijcalendar "+s.datepickerInline+" "+s.datepicker+" "+s.widget+" "+s.content+" "+s.helperClearFix+" "+s.cornerAll),a.append(this._createCalendar()),this.options.displayDate=i,this.element.data("preview.wijcalendar",!1),this._createMonthViews(),a.wijpopup({showEffect:"slide",showOptions:{direction:r==="prevPreview"?"right":"left"},hideEffect:"slide",hideOptions:{direction:r==="prevPreview"?"right":"left"}}),a.wijpopup("show",{my:r==="prevPreview"?"right top":"left top",at:r==="prevPreview"?"left top":"right top",of:n}),this.element.data("previewContainer",a)},n.prototype._onPreviewMouseLeave=function(e){var n=t(e.currentTarget),r=n.attr("id"),i=this.element.data("previewContainer"),s=this;if(r===undefined)return;i&&(i.wijpopup("isAnimating")?window.setTimeout(function(){s._onPreviewMouseLeave(e)},200):(i.wijpopup("hide"),this.element.removeData("previewContainer")))},n.prototype._resetWidth=function(){this._myGrid||(this.element.css("height",""),this.options.monthCols>1?(this.element.css("width",17*this.options.monthCols+"em"),this.element.addClass(this.options.wijCSS.datepickerMulti)):(this.element.css("width",""),this.element.removeClass(this.options.wijCSS.datepickerMulti)))},n.prototype._playMmSlideAnimation=function(e){var n=this.element.width(),r=this.element.height(),i=this.getDisplayDate(),s,o,u,a=this.options.direction||"horizontal",f=this,l,c;this.element.height(r),this.element.wrapInner("<div class='wijmo-wijcalendar-multi-aniwrapper'></div>"),s=this.element.find(">:first-child").width(n).height(r),o=s.clone(!1),o.hide(),this.options.displayDate=e,this._createMonthViews(),o.empty().append(this._createMonthGroup()),o.appendTo(this.element),u=e>i,this.element.data("animating.wijcalendar",!0),t.effects?(s.effect("slide",{mode:"hide",direction:a==="horizontal"?u?"left":"right":u?"up":"down",easing:this.options.easing||"easeOutBack",duration:this.options.duration},function(){s.remove()}),o.effect("slide",{direction:a==="horizontal"?u?"right":"left":u?"down":"up",easing:this.options.easing||"easeOutBack",duration:this.options.duration},function(){while(o.parent().is(".wijmo-wijcalendar-multi-aniwrapper"))o.parent().replaceWith(o);o.replaceWith(o.contents()),f.element.height(""),f._bindEvents(),f.element.data("animating.wijcalendar",!1),f._trigger("afterSlide")})):(a==="horizontal"?(l={width:0},c={width:"100%"}):(l={height:0},c={height:"100%"}),s.animate(l,this.options.duration,null,function(){s.remove()}),o.animate(c,this.options.duration,null,function(){while(o.parent().is(".wijmo-wijcalendar-multi-aniwrapper"))o.parent().replaceWith(o);o.replaceWith(o.contents()),f.element.height(""),f._bindEvents(),f.element.data("animating.wijcalendar",!1),f._trigger("afterSlide")}))},n.prototype._playSlideAnimation=function(e){if(!this._isSingleMonth())return;var n=this,r=this.getDisplayDate(),i=n.options.wijCSS,s=this.element.find("."+i.datepickerCalendar),o,a,f=1,l=this.options.direction||"horizontal",c=e>r,h=[],p,d,v;s.parent().is(".wijmo-wijcalendar-aniwrapper")?o=s.parent():(o=t.createWrapper(s).css({overflow:"hidden"}),o.removeClass(i.effectsWrapper),o.addClass("wijmo-wijcalendar-aniwrapper")),o.parent().is(".wijmo-wijcalendar-aniwrapper")?a=o.parent():(a=t.createWrapper(o).css({overflow:"hidden"}),a.removeClass(i.effectsWrapper),a.addClass("wijmo-wijcalendar-aniwrapper"));if(this._myGrid)switch(this._myGrid.gridType){case"month":f=1;break;case"year":f=10;break;case"decade":f=100}h[h.length]=e,p=s.outerWidth(),d=s.outerHeight(),l==="horizontal"?(s.width(p).css("float",c?"left":"right"),o.width((h.length+1)*p),o.css("left",c?0:-h.length*p).css("position","absolute")):(o.width(p),o.css("top",c?0:-h.length*d).css("position","absolute"),o.height((h.length+1)*d)),t.each(h,function(e,r){if(n._myGrid===undefined){var i=new u(n,r),s=n._customize(i.getHtml(!0));l==="horizontal"?s.width(p).css("float",c?"left":"right").appendTo(o):s.appendTo(o)}else l==="horizontal"?t(n._myGrid.getHtml(r,!0)).width(p).height(d).css("float",c?"left":"right").appendTo(o):t(n._myGrid.getHtml(r,!0)).height(d).appendTo(o)}),this.options.displayDate=e,this._myGrid===undefined&&this._createMonthViews(),this._refreshTitle(),this.element.data("animating.wijcalendar",!0),t.effects?o.effect("slide",{mode:"hide",direction:l==="horizontal"?c?"left":"right":c?"up":"down",easing:this.options.easing||"easeOutBack",distance:(l==="horizontal"?p:d)*h.length,duration:this.options.duration},function(){s=o.children(":last");while(s.parent().is(".wijmo-wijcalendar-aniwrapper"))s.parent().replaceWith(s);s.css({"float":"",width:""}),n._bindEvents(),n.element.data("animating.wijcalendar",!1),n._trigger("afterSlide")}):(l==="horizontal"?v={width:0}:v={height:0},o.animate(v,this.options.duration,null,function(){s=o.children(":last");while(s.parent().is(".wijmo-wijcalendar-aniwrapper"))s.parent().replaceWith(s);s.css({"float":"",width:""}),n._bindEvents(),n.element.data("animating.wijcalendar",!1),n._trigger("afterSlide")}))},n.prototype._onTitleClicked=function(){if(!this.options.allowQuickPick||!this._isSingleMonth())return;if(this._isAnimating())return;if(this._myGrid===undefined)this._myGrid=new f(this);else switch(this._myGrid.gridType){case"month":this._myGrid.gridType="year";break;case"year":this._myGrid.gridType="decade";break;case"decade":return}this._refreshTitle(),this.element.width(this.element.width()).height(this.element.height());var e=this.options.wijCSS,n=this.element.find("."+e.datepickerCalendar),r,i,s,o=n.outerWidth(),u=n.outerHeight(),a,l,c,h,p,d,v=this;n.parent().is(".wijmo-wijcalendar-aniwrapper")?r=n.parent():r=t.createWrapper(n).css({overflow:"hidden"}).removeClass(e.effectsWrapper).addClass("wijmo-wijcalendar-aniwrapper"),r.parent().is(".wijmo-wijcalendar-aniwrapper")?i=r.parent():i=t.createWrapper(r).css({overflow:"hidden"}).removeClass(e.effectsWrapper).addClass("wijmo-wijcalendar-aniwrapper").width(o).height(u),s=t(this._myGrid.getHtml(!0)).css({position:"absolute",top:0,left:0,opacity:0}).appendTo(i).height(u),a=this._myGrid.getSelectedIndex(),l=Math.floor(a/4),c=a-l*4,h=o/4,p=u/3,d={left:h*c,top:p*l,width:h,height:p},n.width("100%").height("100%"),r.css({border:"solid 1px #cccccc"}),this.element.data("animating.wijcalendar",!0),t.effects?r.effect("size",{to:d,duration:this.options.duration||500},function(){r.remove()}):r.animate(d,this.options.duration||500,null,function(){r.remove()}),s.animate({opacity:1},this.options.duration||500,null,function(){s.css({position:"",top:"",left:"",filter:""});while(s.parent().is(".wijmo-wijcalendar-aniwrapper"))s.parent().replaceWith(s);v._bindEvents(),v.element.data("animating.wijcalendar",!1)})},n.prototype._onMyGridClicked=function(e){if(this._myGrid===undefined)return!1;if(this._isAnimating())return!1;var n=t(e.currentTarget),r=parseInt(n.attr("index"),10),i=parseInt(n.attr("value"),10),s=this.options.wijCSS,o=this.element.find("."+s.datepickerCalendar),u,a,f,l,c,h,p,d,v,m=this;if(this._myGrid.gridType!=="month")if(!r||r===11)return!1;return n.hasClass(s.stateActive)||this._myGrid.select(r,i),this._myGrid.gridType==="decade"?this._myGrid.gridType="year":this._myGrid.gridType==="year"?this._myGrid.gridType="month":this._myGrid=undefined,this._refreshTitle(),f=o.outerWidth(),l=o.outerHeight(),o.parent().is(".wijmo-wijcalendar-aniwrapper")?a=o.parent():a=t.createWrapper(o).css({overflow:"hidden"}).removeClass(s.effectsWrapper).addClass("wijmo-wijcalendar-aniwrapper").width(f).height(l),c=t.extend({},n.position(),{width:n.width(),height:n.height()}),this._myGrid===undefined?(this._createMonthViews(),p=this.getDisplayDate(),d=this._getMonthView(p),h=this._customize(d.getHtml(!0))):h=t(this._myGrid.getHtml(!0)),v=h.height(l).appendTo(a),u=t.createWrapper(v).css({overflow:"hidden"}).removeClass(s.effectsWrapper).addClass("wijmo-wijcalendar-aniwrapper").css(t.extend(c,{border:"solid 1px #cccccc",position:"absolute"})),this.element.data("animating.wijcalendar",!0),u.animate({left:0,top:0,width:f,height:l},this.options.duration||500,null,function(){v.css("width","")}),o.animate({opacity:0},this.options.duration||500,null,function(){o.remove();while(v.parent().is(".wijmo-wijcalendar-aniwrapper"))v.parent().replaceWith(v);m._myGrid===undefined&&m.element.width("").height(""),m._bindEvents(),m.element.data("animating.wijcalendar",!1)}),!1},n.prototype._onMyGridMouseEnter=function(e){if(this._myGrid===undefined)return;var n=t(e.currentTarget),r=parseInt(n.attr("index"),10);if(this._myGrid.gridType!=="month"&&(r<0||r>11))return;n.addClass(this.options.wijCSS.stateHover)},n.prototype._onMyGridMouseLeave=function(e){if(this._myGrid===undefined)return;var n=t(e.currentTarget),r=parseInt(n.attr("index"),10);if(this._myGrid.gridType!=="month"&&(r<0||r>11))return;n.removeClass(this.options.wijCSS.stateHover)},n.prototype._bindEvents=function(){var e=this.options.wijCSS;!this.element.data("preview.wijcalendar")&&!this.options.disabledState&&!this.options.disabled&&(this.element.find("div .wijmo-wijcalendar-navbutton").unbind().bind("mouseout.wijcalendar",function(){var n=t(this);n.removeClass(e.stateHover),n.hasClass(e.datepickerNextHover)?n.removeClass(e.datepickerNextHover):n.hasClass(e.datepickerPrevHover)&&n.removeClass(e.datepickerPrevHover)}).bind("mouseover.wijcalendar",function(){var n=t(this);n.addClass(e.stateHover),n.hasClass(e.datepickerNext)?n.addClass(e.datepickerNextHover):n.hasClass(e.datepickerPrev)&&n.addClass(e.datepickerPrevHover)}).bind("click.wijcalendar",t.proxy(this._onNavButtonClicked,this)),this.element.unbind(".wijcalendar").bind({"mouseup.wijcalendar":t.proxy(this._onMouseUp,this)}),this.element.find("."+e.datepickerTitle).unbind().bind("mouseout.wijcalendar",function(){t(this).removeClass(e.stateHover)}).bind("mouseover.wijcalendar",function(){t(this).addClass(e.stateHover)}).bind("click.wijcalendar",t.proxy(this._onTitleClicked,this)),this.element.find(".wijmo-wijcalendar-prevpreview-button, .wijmo-wijcalendar-nextpreview-button").unbind("mouseenter.wijcalendar").unbind("mouseleave.wijcalendar").bind({"mouseenter.wijcalendar":t.proxy(this._onPreviewMouseEnter,this),"mouseleave.wijcalendar":t.proxy(this._onPreviewMouseLeave,this)}),this._myGrid===undefined?(this.element.find(".wijmo-wijcalendar-day-selectable").unbind().bind({"click.wijcalendar":t.proxy(this._onDayClicked,this),"mouseenter.wijcalendar":t.proxy(this._onDayMouseEnter,this),"mouseleave.wijcalendar":t.proxy(this._onDayMouseLeave,this),"mousedown.wijcalendar":t.proxy(this._onDayMouseDown,this),"dragstart.wijcalendar":t.proxy(this._onDayDragStart,this)}),!this.options.selectionMode.month||this.element.find(".wijmo-wijcalendar-monthselector").unbind().bind({"click.wijcalendar":t.proxy(this._onMonthSelectorClicked,this),"mouseenter.wijcalendar":t.proxy(this._onMonthSelectorMouseEnter,this),"mouseleave.wijcalendar":t.proxy(this._onMonthSelectorMouseLeave,this)}),!this.options.selectionMode.weekDay||this.element.find("."+e.datepickerWeekDay).unbind().bind({"click.wijcalendar":t.proxy(this._onWeekDayClicked,this),"mouseenter.wijcalendar":t.proxy(this._onWeekDayMouseEnter,this),"mouseleave.wijcalendar":t.proxy(this._onWeekDayMouseLeave,this)}),!this.options.selectionMode.weekNumber||this.element.find(".wijmo-wijcalendar-week-num").unbind().bind({"click.wijcalendar":t.proxy(this._onWeekNumberClicked,this),"mouseenter.wijcalendar":t.proxy(this._onWeekNumberMouseEnter,this),"mouseleave.wijcalendar":t.proxy(this._onWeekNumberMouseLeave,this)})):this.element.find(".wijmo-wijcalendar-day-selectable").unbind().bind({"click.wijcalendar":t.proxy(this._onMyGridClicked,this),"mouseenter.wijcalendar":t.proxy(this._onMyGridMouseEnter,this),"mouseleave.wijcalendar":t.proxy(this._onMyGridMouseLeave,this)}))},n.prototype._isSelectable=function(e){var t=this.options;return t.showOtherMonthDays&&e&r.otherMonth||!(e&(r.outOfRange|r.disabled|r.otherMonth))},n.prototype._getCellClassName=function(e,t,n){var i=this.options,s="",o=i.wijCSS.stateDefault,u=!!i.selectionMode.day||!!i.selectionMode.days;return n=n||!1,!n&&!i.disabledState&&!i.disabled&&u&&this._isSelectable(e)&&(s+=" wijmo-wijcalendar-day-selectable"),e&r.weekEnd&&(s+=" "+i.wijCSS.datepickerWeekEnd),e&r.otherMonth&&(s+=" "+i.wijCSS.datepickerOtherMonth,o+=" "+i.wijCSS.prioritySecondary),e&r.outOfRange&&(s+=" wijmo-wijcalendar-outofrangeday",o+=" "+i.wijCSS.prioritySecondary),e&r.gap?s+=" wijmo-wijcalendar-gap":(e&r.disabled&&(s+=" "+i.wijCSS.datepickerUnselectable,o+=" "+i.wijCSS.stateDisabled),e&r.today&&(s+=" "+i.wijCSS.datepickerDaysCellOver+" "+i.wijCSS.datepickerToday,o+=" "+i.wijCSS.stateHighlight),e&r.selected&&(e&(r.outOfRange|r.disabled))===0&&(s+=" "+i.wijCSS.datepickerCurrentDay,o+=" "+i.wijCSS.stateActive),e&r.gap&&(s+=" wijmo-wijcalendar-gap"),e&r.custom&&(s+=" wijmo-wijcalendar-customday")),{cssCell:s,cssText:o}},n.prototype._onNavButtonClicked=function(e){if(this._isAnimating())return!1;var n=1,r=t(e.currentTarget).attr("id"),i=this.getDisplayDate(),s=i;if(this._myGrid===undefined)n=r.indexOf("quick")>=0?this.options.quickNavStep:1,n=r.indexOf("next")>=0?n:-n,n=n*this.options.monthRows*this.options.monthCols,s=o.addMonths(i,n);else{n=r.indexOf("next")>=0?1:-1;switch(this._myGrid.gridType){case"month":s=o.addYears(i,n);break;case"year":s=o.addYears(i,n*10);break;case"decade":s=o.addYears(i,n*100)}}return this._slideToDate(s),!1},n.prototype._getMonthGroupHtml=function(){var e=this.getDisplayDate(),t,n,r,i=this.options.wijCSS,u,a;if(this._isSingleMonth())return t=this._getMonthView(e),t.showPreview=this.options.allowPreview&&!this.element.data("preview.wijcalendar"),t.getHtml();n=100/this.options.monthCols+"%",r=new s;for(u=0;u<this.options.monthRows;u++){for(a=0;a<this.options.monthCols;a++)r.writeBeginTag("div"),r.writeAttribute("class",i.datepickerGroup+(a===0?" "+i.datepickerGroupFirst:"")+(a===this.options.monthCols-1?" "+i.datepickerGroupLast:"")),r.writeAttribute("style","width:"+n),r.writeTagRightChar(),t=this._getMonthView(e),t.showPreview=!1,r.write(t.getHtml()),r.writeEndTag("div"),e=o.addMonths(e,1);r.writeBeginTag("div"),r.writeAttribute("class",i.datepickerRowBreak),r.writeTagRightChar(),r.writeEndTag("div")}return r.toString()},n.prototype._getCalendarHtml=function(){this._createMonthViews();var e=new s;return e.write(this._getMonthGroupHtml()),e.toString()},n.prototype._customizeDayCell=function(e){e.attr("state")===undefined&&e.attr("state","normal");if(e.attr("daytype")===undefined)return;if(e.attr("date")===undefined)return;var t=parseInt(e.attr("daytype"),10),n=new Date(e.attr("date")),r=e.attr("state")==="hover";this.options.customizeDate(e,n,t,r)},n.prototype._customize=function(e){var n=this.options,r=this,i=t(e);return t.isFunction(n.customizeDate)?(t.each(i.find(".wijmo-wijcalendar-day-selectable"),function(e,n){r._customizeDayCell(t(n))}),i):i},n.prototype._createCalendar=function(){return this._customize(t(t.parseHTML(this._getCalendarHtml())))},n.prototype._createMonthGroup=function(){return this._customize(t(this._getMonthGroupHtml()))},n.prototype._getMonthID=function(e){return e.getFullYear()+"_"+(e.getMonth()+1)},n.prototype._createMonthViews=function(){this._monthViews={};var e="",t=this.getDisplayDate(),n,r,i,s;for(n=0;n<this.options.monthRows;n++)for(r=0;r<this.options.monthCols;r++)e=this._getMonthID(t),this._monthViews[e]=new u(this,t),n===0&&(r===0&&(this._monthViews[e].isFirst=!0),r===this.options.monthCols-1&&(this._monthViews[e].isLast=!0)),t=o.addMonths(t,1);t=this.getDisplayDate(),e=this._getMonthID(t),i=this._monthViews[e],i&&(this._groupStartDate=i.getStartDate()),s=this.options.monthRows*this.options.monthCols,s>1&&(t=o.addMonths(t,s-1),e=this._getMonthID(t),i=this._monthViews[e]),i&&(this._groupEndDate=i.getEndDate())},n.prototype._getMonthView=function(e){var t=this._getMonthID(e);return this._monthViews[t]},n.prototype._getId=function(){return this.element.attr("id")},n.prototype._getChildElement=function(e){var t=this.element.find("[id*='"+e+"']");return t.length===0?undefined:t},n.prototype._refreshDayCell=function(e){var n=t(e),i=this.options,s,o,u,a;n.attr("state")===undefined&&n.attr("state","normal");if(n.attr("daytype")===undefined)return;if(n.attr("date")===undefined)return;s=parseInt(n.attr("daytype"),10),o=new Date(n.attr("date")),u=n.attr("state")==="hover",n.attr("class",this._getCellClassName(s,o,undefined).cssCell),n.removeAttr("aria-selected"),s&r.selected&&n.attr("aria-selected",!0);if(t.isFunction(i.customizeDate)&&this._customizeDayCell(n))return;a=n.find("a"),a.length>0&&(a.toggleClass(this.options.wijCSS.stateHover,u),a.toggleClass(this.options.wijCSS.stateActive,(s&r.selected)!==0))},n.prototype._isSingleMonth=function(){return this.options.monthCols*this.options.monthRows===1},n.prototype._splitString=function(e,t,n){if(n===undefined)return e.split(t);var r=[],i=e.split(t),s;for(s=0;s<i.length;s++)s>=n?r[n-1]=r[n-1]+t+i[s]:r.push(i[s]);return r},n.prototype._getNavButtonHtml=function(e,t,n,r){var i=new s;return i.writeBeginTag("a"),i.writeAttribute("id",e),i.writeAttribute("class",t),i.writeAttribute("role","button"),i.writeAttribute("href","#"),r&&(i.writeAttribute("title",r),i.writeAttribute("aria-label",r)),i.writeTagRightChar(),i.writeBeginTag("span"),i.writeAttribute("class",n),i.writeTagRightChar(),r&&i.write(r),i.writeEndTag("span"),i.writeEndTag("a"),i.toString()},n.prototype._getTitleText=function(e){if(this._myGrid!==undefined)return this._myGrid.getTitle();var n=e||this.getDisplayDate(),r=this.options.titleFormat||"MMMM yyyy";return t.isFunction(this.options.title)?this.options.title(n,r)||this._formatDate(r,n):this._formatDate(r,n)},n.prototype._refreshTitle=function(){this.element.find("."+this.options.wijCSS.datepickerTitle).html(this._getTitleText(undefined))},n.prototype._fillTitle=function(e,t){var n=this.options.wijCSS;e.writeBeginTag("div"),e.writeAttribute("class",n.datepickerTitle+" wijmo-wijcalendar-title"+" "+n.stateDefault+" "+n.cornerAll),e.writeTagRightChar(),e.write(this._getTitleText(t)),e.writeEndTag("div")},n.prototype._getHeaderHtml=function(e,t,n){var r=!!this.element.data("preview.wijcalendar"),i=this.options.wijCSS,o=r?"none":this._isSingleMonth()?this.options.navButtons:"default",u=this.element.is("."+i.datepickerRtl),a=new s;return o==="quick"?(a.writeBeginTag("div"),a.writeAttribute("class",i.header+" wijmo-wijcalendar-header "+i.helperClearFix+" "+i.cornerAll),a.writeAttribute("role","heading"),a.writeTagRightChar(),!t||a.write(this._getNavButtonHtml("quickprev","wijmo-wijcalendar-navbutton "+i.datepickerPrev+" "+i.cornerAll,i.icon+" ui-icon-seek-"+(u?"next":"prev")+" "+(u?this.options.wijCSS.iconArrowRight:this.options.wijCSS.iconArrowLeft),this.options.quickPrevTooltip.replace("#",this.options.quickNavStep))),a.writeBeginTag("div"),a.writeAttribute("class",i.datepickerHeader+" wijmo-wijcalendar-header-inner"),a.writeTagRightChar(),!t||a.write(this._getNavButtonHtml("prev","wijmo-wijcalendar-navbutton "+i.datepickerPrev+" "+i.cornerAll,i.icon+" ui-icon-circle-triangle-"+(u?"e":"w")+" "+(u?this.options.wijCSS.iconArrowRight:this.options.wijCSS.iconArrowLeft),this.options.prevTooltip)),this._fillTitle(a,e),!n||a.write(this._getNavButtonHtml("next","wijmo-wijcalendar-navbutton "+i.datepickerNext+" "+i.cornerAll,i.icon+" ui-icon-circle-triangle-"+(u?"w":"e")+" "+(u?this.options.wijCSS.iconArrowLeft:this.options.wijCSS.iconArrowRight),this.options.nextTooltip)),a.writeEndTag("div"),!n||a.write(this._getNavButtonHtml("quicknext","wijmo-wijcalendar-navbutton "+i.datepickerNext+" "+i.cornerAll,i.icon+" ui-icon-seek-"+(u?"prev":"next")+" "+(u?this.options.wijCSS.iconArrowLeft:this.options.wijCSS.iconArrowRight),this.options.quickNextTooltip.replace("#",this.options.quickNavStep))),a.writeEndTag("div")):(a.writeBeginTag("div"),a.writeAttribute("class",i.datepickerHeader+" "+i.header+" "+i.datepickerHeader+" "+i.helperClearFix+" "+i.cornerAll),a.writeAttribute("role","heading"),a.writeTagRightChar(),o!=="none"&&!!t&&a.write(this._getNavButtonHtml("prev","wijmo-wijcalendar-navbutton "+i.datepickerPrev+" "+i.cornerAll,i.icon+" ui-icon-circle-triangle-"+(u?"e":"w")+" "+(u?this.options.wijCSS.iconArrowRight:this.options.wijCSS.iconArrowLeft),this.options.prevTooltip)),this._fillTitle(a,e),o!=="none"&&!!n&&a.write(this._getNavButtonHtml("next","wijmo-wijcalendar-navbutton "+i.datepickerNext+" "+i.cornerAll,i.icon+" ui-icon-circle-triangle-"+(u?"w":"e")+" "+(u?this.options.wijCSS.iconArrowLeft:this.options.wijCSS.iconArrowRight),this.options.nextTooltip)),a.writeEndTag("div")),a.toString()},n.prototype._formatDate=function(e,t){return o.getTicks(t)?Globalize.format(t,e,this._getCulture(null)):"&nbsp;"},n}(e.wijmoWidget);e.wijcalendar=i,i.prototype.options=t.extend(!0,{},e.wijmoWidget.prototype.options,{initSelector:":jqmData(role='wijcalendar')",wijCSS:{datepickerInline:"ui-datepicker-inline",datepicker:"ui-datepicker",datepickerCalendar:"ui-datepicker-calendar",datepickerMulti:"ui-datepicker-multi",datepickerRtl:"datepicker-rtl",datepickerOtherMonth:"ui-datepicker-other-month",prioritySecondary:"ui-priority-secondary",effectsWrapper:"ui-effects-wrapper",datepickerNextHover:"ui-datepicker-next-hover",datepickerPrevHover:"ui-datepicker-prev-hover",datepickerNext:"ui-datepicker-next",datepickerPrev:"ui-datepicker-prev",datepickerTitle:"ui-datepicker-title",datepickerWeekDay:"ui-datepicker-week-day",datepickerWeekEnd:"ui-datepicker-week-end",datepickerUnselectable:"ui-datepicker-unselectable",datepickerDaysCellOver:"ui-datepicker-days-cell-over",datepickerToday:"ui-datepicker-today",stateHighlight:"ui-state-highlight",datepickerCurrentDay:"ui-datepicker-current-day",datepickerGroup:"ui-datepicker-group",datepickerGroupFirst:"ui-datepicker-group-first",datepickerGroupLast:"ui-datepicker-group-last",datepickerRowBreak:"ui-datepicker-row-break",datepickerHeader:"ui-datepicker-header",uiIconGripDottedVertical:"ui-icon-grip-dotted-vertical",uiDatepickerWeekCol:"ui-datepicker-week-col"},wijMobileCSS:{header:"ui-header ui-bar-a",content:"ui-body ui-body-c",stateDefault:"ui-btn-up-c"},culture:"",monthCols:1,monthRows:1,titleFormat:"MMMM yyyy",showTitle:!0,displayDate:undefined,dayRows:6,dayCols:7,weekDayFormat:"short",showWeekDays:!0,showWeekNumbers:!1,calendarWeekRule:"firstDay",minDate:new Date(1900,0,1),maxDate:new Date(2099,11,31),showOtherMonthDays:!0,showDayPadding:!1,selectionMode:{day:!0,days:!0},allowPreview:!1,allowQuickPick:!0,toolTipFormat:"dddd, MMMM dd, yyyy",prevTooltip:"Previous",nextTooltip:"Next",quickPrevTooltip:"Quick Previous",quickNextTooltip:"Quick Next",prevPreviewTooltip:"",nextPreviewTooltip:"",navButtons:"default",quickNavStep:12,direction:"horizontal",duration:250,easing:"easeInQuad",popupMode:!1,autoHide:!0,customizeDate:null,title:null,beforeSlide:null,afterSlide:null,beforeSelect:null,afterSelect:null,selectedDatesChanged:null}),t.wijmo.registerWidget("wijcalendar",i.prototype);var s=function(){function e(){this._html=[]}return e.prototype.writeTagLeftChar=function(){this._html[this._html.length]="<"},e.prototype.writeTagRightChar=function(){this._html[this._html.length]=">"},e.prototype.write=function(e){this._html[this._html.length]=" "+e+" "},e.prototype.writeBeginTag=function(e){this._html[this._html.length]="<"+e},e.prototype.writeEndTag=function(e){this._html[this._html.length]="</"+e+">"},e.prototype.writeFullBeginTag=function(e){this._html[this._html.length]="<"+e+">"},e.prototype.writeSelfClosingTagEnd=function(){this._html[this._html.length]="/>"},e.prototype.writeAttribute=function(e,t){if(t===undefined||t===null)return;this._html[this._html.length]=" "+e+'="',this._html[this._html.length]=t,this._html[this._html.length]='"'},e.prototype.clean=function(){this._html=[]},e.prototype.toString=function(){return this._html.join("")},e}();e.htmlTextWriter=s;var o={addDays:function(e,t){var n=new Date(e.getFullYear(),e.getMonth(),e.getDate()+t);return t&&n.getDate()===e.getDate()&&(n=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n.setTime(n.getTime()+t*24*3600*1e3)),n},addMonths:function(e,t){return new Date(e.getFullYear(),e.getMonth()+t,1)},addYears:function(e,t){return this.addMonths(e,t*12)},getDate:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},getTicks:function(e){return e.valueOf()},isSameDate:function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},isSameMonth:function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()},getDaysInMonth:function(e){return(new Date(e.getFullYear(),e.getMonth()+1,0)).getDate()},getWeekStartDate:function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate()-(e.getDay()-t+7)%7)},getDayOfYear:function(e){var t=new Date(e.getFullYear(),0,1),n=this.getTicks(e)-this.getTicks(t),r=n/864e5;return Math.floor(r)+1},getFirstDayWeekOfYear:function(e,t){var n=this.getDayOfYear(e)-1,r=e.getDay()-n%7,i;return r=(r-t+14)%7,i=(n+r)/7,Math.floor(i)+1},getDayOfWeek:function(e,t){return(e.getDay()-t+7)%7},getWeekOfYearFullDays:function(e,t,n,r){var i=this.getDayOfYear(e)-1,s=this.getDayOfWeek(e,n)-i%7;return s=(n-s+14)%7,s&&s>=r&&(s-=7),s=i-s,s>=0?Math.floor(s/7)+1:this.getWeekOfYearFullDays(this.addDays(e,-(i+1)),t,n,r)},getWeekOfYear:function(e,t,n){switch(t){case"firstDay":return this.getFirstDayWeekOfYear(e,n);case"firstFullWeek":return this.getWeekOfYearFullDays(e,t,n,7);case"firstFourDayWeek":return this.getWeekOfYearFullDays(e,t,n,4)}return this.getFirstDayWeekOfYear(e,n)},getDateToken:function(e){return e.getFullYear()+"_"+e.getMonth()+"_"+e.getDate()}},u=function(){function e(e,t){this.calendar=e;if(t===undefined||o.isSameDate(t,new Date(1900,0,1)))t=new Date;this.displayDate=t,this.id=this.calendar._getId()+"_"+this.calendar._getMonthID(t),this.isFirst=!1,this.isLast=!1,this.showPreview=!1,this.culture=this.calendar._getCulture(),this._calcDates(this.displayDate)}return e.prototype._calcDates=function(e){var t=o.getDaysInMonth(e);this._startDateInMonth=new Date(e.getFullYear(),e.getMonth(),1),this._endDateInMonth=o.addDays(this._startDateInMonth,t-1),this._startDate=o.getWeekStartDate(this._startDateInMonth,this.culture.calendar.firstDay),this._endDate=o.addDays(this._startDate,this.calendar.options.dayRows*this.calendar.options.dayCols-1)},e.prototype._isFirstMonth=function(){var e=this.calendar.getDisplayDate();return o.isSameMonth(this._startDateInMonth,e)},e.prototype._isLastMonth=function(){var e=this.calendar.getDisplayDate();return e=new Date(e.getFullYear(),e.getMonth(),1),e=o.addMonths(e,this.calendar.options.monthCols*this.calendar.options.monthRows-1),o.isSameMonth(this._startDateInMonth,e)},e.prototype.getStartDate=function(){return this._startDate},e.prototype.getEndDate=function(){return this._endDate},e.prototype._getMonthDate=function(){return this._startDateInMonth===undefined,this._startDateInMonth},e.prototype._setMonthDate=function(e){this._calcDates(e)},e.prototype._getWeekDayText=function(e,t){t=t||"short";var n=this.culture.calendar.days,r="";switch(t){case"full":r=n.names[e];break;case"firstLetter":r=n.names[e].substring(0,1);break;case"abbreviated":r=n.namesAbbr[e];break;default:r=n.namesShort[e]}return r},e.prototype._getRowCount=function(){var e=this.calendar.options;return e.showWeekDays?e.dayRows+1:e.dayRows},e.prototype._getColCount=function(){var e=this.calendar.options;return e.showWeekNumbers?e.dayCols+1:e.dayCols},e.prototype._getDayType=function(e){var t=this.calendar.options,n=r.general,i=e.getDay(),s=i===6||i===0,u=e<t.minDate||e>t.maxDate,a=e<this._startDateInMonth||e>this._endDateInMonth,f=u||this.calendar._getDisabledDates().contains(e),l=this.calendar._getSelectedDates().contains(e),c=new Date,h=o.isSameDate(e,c),p=!1;return s&&(n|=r.weekEnd),h&&(n|=r.today),f&&(n|=r.disabled),a&&(n|=r.otherMonth),u&&(n|=r.outOfRange),l&&(n|=r.selected),p&&(n|=r.custom),a&&!t.showOtherMonthDays&&(n|=r.gap),n},e.prototype._refreshDate=function(e){if(e<this._startDate||e>this._endDate)return;var n=this.calendar.options,r=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),i=Date.UTC(this._startDate.getFullYear(),this._startDate.getMonth(),this._startDate.getDate()),s=Math.floor(Math.abs(r-i)/864e5),o=Math.floor(s/this.calendar.options.dayCols),u=Math.floor(s%this.calendar.options.dayCols),a,f,l,c;n.showWeekNumbers&&u++,n.showWeekDays&&o++,a=t("#"+this.id,this.calendar.element).get(0),a&&o<a.rows.length&&(f=a.rows[o],u<f.cells.length&&(l=f.cells[u],c=this._getDayType(e),t(l).attr("daytype",c.toString()),this.calendar._refreshDayCell(l)))},e.prototype._fillDayCell=function(e,t,n){var i=this.calendar.options,s=null,o=t.getDate().toString(),u=this.calendar._formatDate(i.toolTipFormat||"dddd, MMMM dd, yyyy",t),a=this._getDayType(t),f=this.calendar._isSelectable(a),l=this.calendar._getCellClassName(a,t,n);o=i.showDayPadding&&o.length===1?"0"+o:o,e.writeBeginTag("td"),e.writeAttribute("daytype",a.toString()),f&&(e.writeAttribute("title",u),e.writeAttribute("aria-label",u)),e.writeAttribute("date",t.toDateString()),e.writeAttribute("class",l.cssCell),e.writeAttribute("role","gridcell"),f||e.writeAttribute("aria-disabled","true"),e.writeTagRightChar(),a&r.gap?e.write("&#160;"):s&&s.content?e.write(s.content):(e.writeBeginTag("a"),e.writeAttribute("class",l.cssText),e.writeAttribute("href","#"),e.writeAttribute("onclick","return false;"),e.writeTagRightChar(),e.write(o),e.writeEndTag("a")),e.writeEndTag("td")},e.prototype.getHtml=function(e){e=!!e;var t=this.calendar.options,n=t.wijCSS,r=!!this.calendar.element.data("preview.wijcalendar"),i=new s,u,a,f,l,c,h,p,d,v,m,g,y;!e&&t.showTitle&&i.write(this.calendar._getHeaderHtml(this._startDateInMonth,this.isFirst,this.isLast)),!e&&!r&&this.showPreview&&(i.writeBeginTag("div"),i.writeAttribute("class","wijmo-wijcalendar-prevpreview-button"),i.writeAttribute("role","button"),i.writeAttribute("aria-haspopup","true"),i.writeAttribute("id","prevPreview"),i.writeTagRightChar(),i.writeBeginTag("a"),i.writeAttribute("class",n.icon+" "+n.uiIconGripDottedVertical),i.writeAttribute("href","#"),i.writeAttribute("title",t.prevPreviewTooltip),i.writeAttribute("aria-label",t.prevPreviewTooltip),i.writeAttribute("onclick","return false;"),i.writeTagRightChar(),i.write("&#160;"),i.writeEndTag("a"),i.writeEndTag("div")),i.writeBeginTag("table"),i.writeAttribute("id",this.id),i.writeAttribute("class",n.datepickerCalendar+" wijmo-wijcalendar-table"),i.writeAttribute("role","grid"),i.writeAttribute("summary",this.calendar._getTitleText(this._startDateInMonth)),i.writeAttribute("onselectstart","return false;"),i.writeTagRightChar();if(t.showWeekDays){i.writeFullBeginTag("thead"),i.writeBeginTag("tr"),i.writeTagRightChar(),t.showWeekNumbers&&(i.writeBeginTag("th"),i.writeAttribute("id",this.id+"_ms"),i.writeAttribute("class",n.uiDatepickerWeekCol+" wijmo-wijcalendar-monthselector"+(t.selectionMode.month?" wijmo-wijcalendar-selectable":"")),i.writeAttribute("role","columnheader"),i.writeTagRightChar(),!!t.selectionMode.month&&!r?(i.writeBeginTag("a"),i.writeAttribute("class",n.icon+" "+n.uiIconTriangle1Se),i.writeAttribute("style","display: block;"),i.writeSelfClosingTagEnd()):i.write("Wk"),i.writeEndTag("th")),f=this._startDate.getDay(),l=this._startDate;for(u=0;u<t.dayCols;u++)c=f===6||f===0,h=u+(t.showWeekNumbers?1:0),p=this._getWeekDayText(f,t.weekDayFormat),d=this._getWeekDayText(f,"full"),i.writeBeginTag("th"),i.writeAttribute("id",this.id+"_cs_"+h),i.writeAttribute("class",n.datepickerWeekDay+(c?" "+n.datepickerWeekEnd:"")+(t.selectionMode.weekDay?" wijmo-wijcalendar-selectable":"")),i.writeAttribute("role","columnheader"),i.writeTagRightChar(),i.writeBeginTag("span"),i.writeAttribute("title",d),i.writeAttribute("aria-label",d),i.writeTagRightChar(),i.write(p),i.writeEndTag("span"),i.writeEndTag("th"),f=(f+1)%7,l=o.addDays(l,1);i.writeEndTag("tr"),i.writeEndTag("thead")}i.writeFullBeginTag("tbody"),v=this._startDate,m=this._startDateInMonth;for(u=0;u<t.dayRows;u++){i.writeBeginTag("tr"),i.writeTagRightChar(),t.showWeekNumbers&&(g=u+(t.showWeekDays?1:0),i.writeBeginTag("td"),i.writeAttribute("id",this.id+"_rs_"+g),i.writeAttribute("class",n.uiDatepickerWeekCol+" wijmo-wijcalendar-week-num"+(t.selectionMode.weekNumber?" wijmo-wijcalendar-selectable":"")),i.writeAttribute("role","rowheader"),i.writeTagRightChar(),y=o.getWeekOfYear(m,t.calendarWeekRule,this.culture.calendar.firstDay),i.write(y),i.writeEndTag("td"),m=o.addDays(m,t.dayCols));for(a=0;a<t.dayCols;a++)this._fillDayCell(i,v,r),v=o.addDays(v,1);i.writeEndTag("tr")}return i.writeEndTag("tbody"),i.writeEndTag("table"),!e&&!r&&this.showPreview&&(i.writeBeginTag("div"),i.writeAttribute("class","wijmo-wijcalendar-nextpreview-button"),i.writeAttribute("role","button"),i.writeAttribute("aria-haspopup","true"),i.writeAttribute("id","nextPreview"),i.writeTagRightChar(),i.writeBeginTag("a"),i.writeAttribute("class",n.icon+" "+n.uiIconGripDottedVertical),i.writeAttribute("href","#"),i.writeAttribute("title",t.nextPreviewTooltip),i.writeAttribute("aria-label",t.nextPreviewTooltip),i.writeAttribute("onclick","return false;"),i.writeTagRightChar(),i.write("&#160;"),i.writeEndTag("a"),i.writeEndTag("div")),i.toString()},e}();e.wijMonthView=u;var a=function(){function e(e,t){this._calendar=e,this._optionName=t?t:"selectedDates",this._normalize()}return e.prototype.getDates=function(){return this._calendar.options[this._optionName]===undefined&&(this._calendar.options[this._optionName]=[]),this._calendar.options[this._optionName]},e.prototype.setDates=function(e){this._calendar.options[this._optionName]=e,this._normalize()},e.prototype.getCount=function(){return this.getDates().length},e.prototype.clear=function(){this.setDates([])},e.prototype.add=function(e){this.addRange(e,e)},e.prototype.remove=function(e){this.removeRange(e,e)},e.prototype.indexOf=function(e){return this.getCount()?this._findRangeBound(e,!0,!1):-1},e.prototype.contains=function(e){return this.indexOf(e)!==-1},e.prototype.removeRange=function(e,t){if(!this.getCount())return;var n=this._findRangeBound(e,!1,!0),r=this._findRangeBound(t,!1,!1),i,s,o;if(n<0||r<0)return;if(n>r)return;i=this.getDates();if(i[r]>t)return;s=n?i.slice(0,n):[],o=r>=i.length-1?[]:i.slice(r+1),this.setDates(s.concat(o))},e.prototype.addRange=function(e,t){this.removeRange(e,t);var n=this.getDates(),r=this._findRangeBound(e,!1,!0),i=r?n.slice(0,r):[],s=n.slice(r),u=[],a;e=o.getDate(e),t=o.getDate(t);for(a=e;a<=t;a=o.addDays(a,1))u[u.length]=a;this.setDates(i.concat(u.concat(s)))},e.prototype._findRangeBound=function(e,t,n){var r=this.getDates(),i=0,s=r.length,u;while(i<s){u=i+s>>1;if(o.isSameDate(e,r[u]))return u;e<r[u]?s=u:i=u+1}return t?-1:n?i:s},e.prototype._parseDate=function(e){var t;e?typeof e=="string"&&(t=e):e=new Date;if(t){t=t.replace(/-/g,"/");try{e=new Date(t),isNaN(e)&&(e=new Date)}catch(n){e=new Date}}return e},e.prototype._normalize=function(){var e=this._calendar.options[this._optionName],n=this,r;t.isArray(e)&&(r=t.map(e,function(e,t){return n._parseDate(e)}),this._calendar.options[this._optionName]=r.sort(function(e,t){return e.getTime()-t.getTime()}))},e}();e.wijDateCollection=a;var f=function(){function e(e){this.gridType="month",this.calendar=e,e&&(this.culture=e._getCulture())}return e.prototype.select=function(e,t){var n=this.calendar.getDisplayDate();switch(this.gridType){case"month":n.setMonth(t);break;case"year":n.setFullYear(t);break;case"decade":n.setFullYear(t)}this.calendar.options.displayDate=n},e.prototype.getSelectedIndex=function(){var e=this.calendar.getDisplayDate(),t=e.getFullYear(),n=Math.floor(t/10)*10-1,r=Math.floor(t/100)*100-10;switch(this.gridType){case"month":return e.getMonth();case"year":return t-n;case"decade":return Math.floor((t-r)/10)}return 0},e.prototype.getTitle=function(){var e=this.calendar.getDisplayDate(),t=e.getFullYear(),n=Math.floor(t/10)*10-1,r=Math.floor(t/100)*100-10;switch(this.gridType){case"month":return t.toString();case"year":return n+1+" - "+(n+10);case"decade":return r+10+" - "+(r+109)}return""},e.prototype.getHtml=function(e,t){e===undefined?e=this.calendar.getDisplayDate():typeof e=="boolean"&&(t=e,e=this.calendar.getDisplayDate()),t=!!t;var n=this.calendar.options,r=3,i=4,o=new s,u=n.wijCSS,a,f,l,c,h,p,d,v,m,g,y,b,w,E;n.showTitle&&!t&&o.write(this.calendar._getHeaderHtml(null,!0,!0)),a=100/r+"%",a="30%",o.writeBeginTag("table"),o.writeAttribute("class",u.datepickerCalendar+" wijmo-wijcalendar-mygrid"),o.writeAttribute("role","grid"),o.writeAttribute("onselectstart","return false;"),o.writeTagRightChar(),f=e.getFullYear(),l=e.getFullYear()*12,c=Math.floor(f/10)*10-1,h=Math.floor(f/100)*100-10,p=this.culture.calendar.months;for(d=0;d<r;d++){o.writeBeginTag("tr"),o.writeAttribute("height",a),o.writeTagRightChar();for(v=0;v<i;v++){m=d*4+v,g=!1,y=!1,b="",w=null;switch(this.gridType){case"month":e.getMonth()===m&&(g=!0),w=m,b=p.namesAbbr[m],y=l+m<n.minDate.getFullYear()*12+n.minDate.getMonth()||l+m>n.maxDate.getFullYear()*12+n.maxDate.getMonth();break;case"year":if(m===0||m===11)y=!0;w=c+m,w<n.minDate.getFullYear()||w>n.maxDate.getFullYear()?y=!0:g=f===w,b=w.toString();break;case"decade":if(m===0||m===11)y=!0;w=h+m*10,w+10<n.minDate.getFullYear()||w>n.maxDate.getFullYear()?y=!0:g=f>=w&&f<w+10,b=w.toString()+"-<br/>"+(w+9).toString()}E=u.datepickerWeekDay,y?E=E+" "+u.datepickerOtherMonth+" "+u.prioritySecondary+" "+u.datepickerUnselectable:!n.disabledState&&!n.disabled&&(E+=" wijmo-wijcalendar-day-selectable"),E+=" "+u.stateDefault+(y?" "+u.stateDisabled:"")+(g?" "+u.stateActive+" "+u.stateHighlight:""),o.writeBeginTag("td"),o.writeAttribute("class",E),o.writeAttribute("role","gridcell"),o.writeAttribute("index",m.toString()),o.writeAttribute("value",w.toString()),o.writeAttribute("other",y.toString()),o.writeTagRightChar(),o.writeBeginTag("a"),o.writeAttribute("href","#"),o.writeTagRightChar(),o.write(b),o.writeEndTag("a"),o.writeEndTag("td")}o.writeEndTag("tr")}return o.writeEndTag("table"),o.toString()},e}();e.wijMyGrid=f})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){"use strict";var t=jQuery,n=0,r=0,i=t.effects?t.effects:t,s=i.save,o=i.restore,u=i.createWrapper,a=i.removeWrapper,f=function(){return++n},l=function(){return++r},c=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n.prototype._setOption=function(t,n){e.prototype._setOption.call(this,t,n);switch(t){case"selected":if(this.options.collapsible&&n===this.options.selected)return;this.select(n);break;case"alignment":this._innerDestroy(),this._tabify(!0);break;default:this._tabify(!1)}},n.prototype._create=function(){var t=this,n=this.options;this.element.is(":hidden")&&this.element.wijAddVisibilityObserver&&this.element.wijAddVisibilityObserver(function(){t.element.wijRemoveVisibilityObserver&&t.element.wijRemoveVisibilityObserver();var e=t.element.data("wijtabs"),n=t.element.data("wijmoWijtabs");t.destroy(),t.element.data("wijtabs",e),t.element.data("wijmoWijtabs",n),t._tabify(!0)},"wijtabs"),this._tabify(!0),(n.disabledstate||n.disabled)&&this.disable(),e.prototype._create.call(this)},n.prototype.destroy=function(){this._innerDestroy(),e.prototype.destroy.call(this)},n.prototype._tabify=function(e){this.list=this.element.children("ol,ul").eq(0),this.lis=t("li:has(a)",this.list),this.anchors=this.lis.map(function(){return t("a",this)[0]}),this.panels=t([]);var n=this,r=n.options,i=/^#.+/,s,o,u,a,f,l,c,h,p;t.each(n.anchors,function(e,s){var o=t(s).attr("href")||"",u=o.split("#")[0],a,f,l;u&&(u===location.toString().split("#")[0]||(a=t("base")[0])&&u===a.href)&&(o=s.hash,s.href=o),i.test(o)?n.panels=n.panels.add(n._sanitizeSelector(o),n.element):o!=="#"?(t.data(s,"href.tabs",o),t.data(s,"load.tabs",o.replace(/#.*$/,"")),f=n._tabId(s),s.href="#"+f,l=t("#"+f),l.length||(l=t(r.panelTemplate||n._defaults.panelTemplate).attr("id",f).addClass(r.wijCSS.tabsPanel).addClass(r.wijCSS.content).addClass(r.wijCSS.cornerBottom).insertAfter(n.panels[e-1]||n.list),l.data("destroy.tabs",!0)),n.panels=n.panels.add(l)):r.disabledIndexes.push(e)}),s=this._getAlignment(!0),o=this._getAlignment(!1);if(e){this.list.attr("role","tablist"),this.lis.attr("role","tab"),this.panels.attr("role","tabpanel"),this.element.addClass(r.wijCSS.tabs).addClass(r.wijCSS.wijtabs).addClass(r.wijCSS.widget).addClass(r.wijCSS.content).addClass(r.wijCSS.cornerAll).addClass(r.wijCSS.helperClearFix).addClass(r.wijCSS.tabsPanel).addClass(r.wijCSS.tabsPanel).addClass(r.wijCSS["tabs"+s]),this.list.addClass(r.wijCSS.tabsNav).addClass(r.wijCSS.helperReset).addClass(r.wijCSS.helperClearFix).addClass(r.wijCSS.header).addClass(r.wijCSS.cornerAll),this.lis.addClass(r.wijCSS.stateDefault).addClass(r.wijCSS["corner"+s]),this.panels.addClass(r.wijCSS.tabsPanel).addClass(r.wijCSS.content).addClass(r.wijCSS["corner"+o]);switch(s){case"Bottom":this.list.appendTo(this.element);break;case"Left":u=t("<div/>").addClass(r.wijCSS.wijtabsContent).appendTo(this.element),this.panels.appendTo(u);break;case"Right":u=t("<div/>").addClass(r.wijCSS.wijtabsContent).insertBefore(this.list),this.panels.appendTo(u);break;case"Top":this.list.prependTo(this.element)}r.sortable&&this.list.sortable&&this.list.sortable({axis:s==="Top"||s==="Bottom"?"x":"y"}),r.selected===undefined?(location.hash&&t.each(this.anchors,function(e,t){if(t.hash===location.hash)return r.selected=e,!1}),typeof r.selected!="number"&&r.cookie&&(r.selected=parseInt(n._cookie(undefined,undefined),10)),typeof r.selected!="number"&&this.lis.filter("."+r.wijCSS.tabsActive).length&&(r.selected=this.lis.index(this.lis.filter("."+r.wijCSS.tabsActive))),r.selected=r.selected||(this.lis.length?0:-1)):r.selected===null&&(r.selected=-1),r.selected=r.selected>=0&&this.anchors[r.selected]||r.selected<0?r.selected:0,r.disabledIndexes=t.unique(r.disabledIndexes.concat(t.map(this.lis.filter("."+r.wijCSS.stateDisabled),function(e,t){return n.lis.index(e)}))).sort(),t.inArray(r.selected,r.disabledIndexes)!==-1&&r.disabledIndexes.splice(t.inArray(r.selected,r.disabledIndexes),1),this.panels.addClass(r.wijCSS.wijtabsHide).attr("aria-hidden",!0),this.lis.removeClass(r.wijCSS.tabsActive).removeClass(r.wijCSS.stateActive).attr("aria-selected",!1),r.selected>=0&&this.anchors.length&&(this.panels.eq(r.selected).removeClass(r.wijCSS.wijtabsHide).attr("aria-hidden",!1),this.lis.eq(r.selected).addClass(r.wijCSS.tabsActive).addClass(r.wijCSS.stateActive).attr("aria-selected",!0),n.element.queue("tabs",function(){n.element.wijTriggerVisibility&&t(n.panels[r.selected]).wijTriggerVisibility(),n._trigger("show",null,n._ui(n.anchors[r.selected],n.panels[r.selected]))}),this.load(r.selected)),t(window).bind("unload",function(){n.lis&&n.lis.add(n.anchors).unbind(".tabs"),n.lis=n.anchors=n.panels=null})}else r.selected=this.lis.index(this.lis.filter("."+r.wijCSS.tabsActive));this.element[r.collapsible?"addClass":"removeClass"](r.wijCSS.tabsCollapsible),r.cookie&&this._cookie(r.selected,r.cookie);for(a=0;a<this.lis.length;a++)f=this.lis[a],t(f)[t.inArray(a,r.disabledIndexes)!==-1&&!t(f).hasClass(r.wijCSS.tabsActive)?"addClass":"removeClass"](r.wijCSS.stateDisabled),t(f).hasClass(r.wijCSS.stateDisabled)&&t(f).attr("aria-disabled",!0);r.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs"),!r.disabledState&&!r.disabled&&r.event!=="mouseover"&&(l=function(e,t){t.is(":not(."+r.wijCSS.stateDisabled+")")&&t.addClass(e)},c=function(e,t){t.removeClass(e)},this.lis.bind("mouseover.tabs",function(){l(r.wijCSS.stateHover,t(this))}),this.lis.bind("mouseout.tabs",function(){c(r.wijCSS.stateHover,t(this))}),this.anchors.bind("focus.tabs",function(){l(r.wijCSS.stateFocus,t(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){c(r.wijCSS.stateFocus,t(this).closest("li"))}));if(r.showOption===undefined||r.showOption===null)r.showOption={};this._normalizeBlindOption(r.showOption);if(r.hideOption===undefined||r.hideOption===null)r.hideOption={};this._normalizeBlindOption(r.hideOption),h=(r.showOption.blind||r.showOption.fade)&&r.showOption.duration>0?function(e,i){t(e).closest("li").addClass(r.wijCSS.tabsActive).addClass(r.wijCSS.stateActive).attr("aria-selected",!0),n._showContent(),i.removeClass(r.wijCSS.wijtabsHide).attr("aria-hidden",!1);if(s==="Top"||s==="Bottom"){var o={duration:r.showOption.duration,height:"toggle",opacity:"toggle"};r.showOption.blind||delete o.height,r.showOption.fade||delete o.opacity,i.hide().removeClass(r.wijCSS.wijtabsHide).attr("aria-hidden",!1).animate(o,r.showOption.duration||"normal",function(){n._resetStyle(i),i.wijTriggerVisibility&&i.wijTriggerVisibility(),n._trigger("show",null,n._ui(e,i[0]))})}else n._showContent(),n._blindPanel(i,"show")}:function(e,i){t(e).closest("li").addClass(r.wijCSS.tabsActive).addClass(r.wijCSS.stateActive).attr("aria-selected",!0),n._showContent(),i.removeClass(r.wijCSS.wijtabsHide).attr("aria-hidden",!1),i.wijTriggerVisibility&&i.wijTriggerVisibility(),n._trigger("show",null,n._ui(e,i[0]))},p=(r.hideOption.blind||r.hideOption.fade)&&r.hideOption.duration>0?function(e,t){if(s==="Top"||s==="Bottom"){var i={duration:r.hideOption.duration,height:"toggle",opacity:"toggle"};r.hideOption.blind||delete i.height,r.hideOption.fade||delete i.opacity,t.animate(i,r.hideOption.duration||"normal",function(){n.lis.removeClass(r.wijCSS.tabsActive).removeClass(r.wijCSS.stateActive).attr("aria-selected",!1),t.addClass(r.wijCSS.wijtabsHide).attr("aria-hidden",!0),n._resetStyle(t),n.element.dequeue("tabs")})}else n._saveLayout(),n._blindPanel(t,"hide")}:function(e,t,i){n.lis.removeClass(r.wijCSS.tabsActive).removeClass(r.wijCSS.stateActive).attr("aria-selected",!1),n._hideContent(),t.addClass(r.wijCSS.wijtabsHide).attr("aria-hidden",!0),n.element.dequeue("tabs")},!r.disabledState&&!r.disabled&&this.anchors.bind(r.event+".tabs",function(){var e=this,i=t(this).closest("li"),s=n.panels.filter(":not(."+r.wijCSS.wijtabsHide+")"),o=t(n._sanitizeSelector(this.hash),n.element);if(i.hasClass(r.wijCSS.tabsActive)&&!r.collapsible||i.hasClass(r.wijCSS.stateDisabled)||i.hasClass(r.wijCSS.tabsLoading)||n._trigger("select",null,n._ui(this,o[0]))===!1)return this.blur(),!1;r.selected=n.anchors.index(this),n.abort();if(r.collapsible){if(i.hasClass(r.wijCSS.tabsActive))return r.selected=-1,r.cookie&&n._cookie(r.selected,r.cookie),n.element.queue("tabs",function(){p(e,s)}).dequeue("tabs"),this.blur(),!1;if(!s.length)return r.cookie&&n._cookie(r.selected,r.cookie),n.element.queue("tabs",function(){h(e,o)}),n.load(n.anchors.index(this)),this.blur(),!1}r.cookie&&n._cookie(r.selected,r.cookie);if(!o.length)throw"jQuery UI Tabs: Mismatching fragment identifier.";s.length&&n.element.queue("tabs",function(){p(e,s)}),n.element.queue("tabs",function(){h(e,o)}),n.load(n.anchors.index(this)),t.browser.msie&&this.blur()}),this._initScroller(),this.anchors.bind("click.tabs",function(){return!1})},n.prototype._blindPanel=function(e,n){var r=this,i=r.options,o=e.parent("."+i.wijCSS.wijtabsContent),f=["position","top","left","width"],l=n==="show"?i.showOption:i.hideOption,c,h,p;if(!o.length)return;r.list.width(r.list.width()),s&&s(e,f),e.show(),n==="show"?(e.removeClass(i.wijCSS.wijtabsHide).attr("aria-hidden",!1),e.width(r.element.data("panel.width"))):e.width(e.width()),u?c=u(e).css({overflow:"hidden"}):c=t("<div></div>"),n==="show"&&c.css(t.extend({width:0},l.fade?{opacity:0}:{})),h=t.extend({width:n==="show"?r.element.data("panel.outerWidth"):0},l.fade?{opacity:n==="show"?1:0}:{}),p=r.list.outerWidth(!0),c.animate(h,{duration:l.duration,step:function(){var e=c.outerWidth(!0);r.element.width(p+e),o.width(Math.max(0,r.element.innerWidth()-p-6))},complete:function(){n==="hide"?(r.lis.removeClass(i.wijCSS.tabsActive).removeClass(i.wijCSS.stateActive).attr("aria-selected",!1),e.addClass(i.wijCSS.wijtabsHide).attr("aria-hidden",!0)):e.css("width",""),a&&a(e),n==="show"&&r._restoreLayout(),r._resetStyle(e),e.dequeue(),r.element.dequeue("tabs")}})},n.prototype._hideContent=function(){var e=this.options.wijCSS,t=this.element.find("."+e.wijtabsContent);t.length&&(this._saveLayout(),t.addClass(e.wijtabsHide).attr("aria-hidden",!0),this.element.width(this.list.outerWidth(!0)))},n.prototype._showContent=function(){var e=this.options.wijCSS,t=this.element.find("."+e.wijtabsContent);t.length&&(this._restoreLayout(),t.removeClass(e.wijtabsHide).attr("aria-hidden",!1))},n.prototype._saveLayout=function(){var e=this.options.wijCSS,t=["width","height","overflow"],n=this.panels.filter(":not(."+e.wijtabsHide+")");s&&(s(this.element,t),s(this.list,t),s(this.element.find("."+e.wijtabsContent),t)),this.list.width(this.list.width()),this.element.data("panel.width",n.width()),this.element.data("panel.outerWidth",n.outerWidth(!0))},n.prototype._restoreLayout=function(){var e=this.options.wijCSS,t=["width","height","overflow"];o&&(o(this.element,t),o(this.list,t),o(this.element.find("."+e.wijtabsContent),t))},n.prototype._resetStyle=function(e){e.css({display:""}),t.support.opacity||e[0].style.removeAttribute("filter")},n.prototype._normalizeBlindOption=function(e){e.blind===undefined&&(e.blind=!1),e.fade===undefined&&(e.fade=!1),e.duration===undefined&&(e.duration=200);if(typeof e.duration=="string")try{e.duration=parseInt(e.duration,10)}catch(t){e.duration=200}},n.prototype._initScroller=function(){var e=t.inArray(this._getAlignment(!0),["Top","Bottom"])!==-1,n=0;if(!e)return;t.each(this.lis,function(){n+=t(this).outerWidth(!0)}),!!this.options.scrollable&&this.element.innerWidth()<n?(this.scrollWrap===undefined&&(this.list.wrap("<div class='scrollWrap'></div>"),this.scrollWrap=this.list.parent(),s&&s(this.list,["width","height","overflow"])),this.list.width(n+2),this.scrollWrap.height(this.list.outerHeight(!0)),this.scrollWrap.wijsuperpanel({allowResize:!1,hScroller:{scrollMode:"edge"},vScroller:{scrollBarVisibility:"hidden"}})):this._removeScroller()},n.prototype._ui=function(e,t){return{tab:e,panel:t,index:this.anchors.index(e)}},n.prototype._tabId=function(e){var n=t(e),r,i;if(n.data&&n.data("tabid"))return n.data("tabid");if(e.href&&e.href.length){i=this._getURLParameters(e.href);if(i.tabId)return r=i.tabId,n.data("tabid",r),r}return r=e.title&&e.title.replace(/\s/g,"_").replace(/[^A-Za-z0-9\-_:\.]/g,"")||this.options.idPrefix+f(),n.data("tabid",r),r},n.prototype._getURLParameters=function(e){var n={},r,i;return e.indexOf("?")>-1&&(r=e.split("?")[1],i=r.split("&"),t.each(i,function(e,t){var r=t.split("=");r.length>1&&(n[r[0]]=r[1])})),n},n.prototype._getAlignment=function(e){var t=this.options.alignment||"top";if(e)return t.charAt(0).toUpperCase()+t.substr(1);switch(t){case"top":t="Bottom";break;case"bottom":t="Top";break;case"left":t="Right";break;case"right":t="Left"}return t},n.prototype._sanitizeSelector=function(e){return e.replace(/:/g,"\\:")},n.prototype._innerDestroy=function(){var e=this.options,n=t("."+e.wijCSS.wijtabsContent);return this.abort(),this._removeScroller(),this.element.unbind(".tabs").removeClass(e.wijCSS.wijtabs).removeClass(e.wijCSS.tabsTop).removeClass(e.wijCSS.tabsBottom).removeClass(e.wijCSS.tabsLeft).removeClass(e.wijCSS.tabsRight).removeClass(e.wijCSS.tabs).removeClass(e.wijCSS.widget).removeClass(e.wijCSS.content).removeClass(e.wijCSS.cornerAll).removeClass(e.wijCSS.tabsCollapsible).removeClass(e.wijCSS.helperClearFix).removeData("tabs").removeAttr("role"),this.list.removeClass(e.wijCSS.tabsNav).removeClass(e.wijCSS.helperReset).removeClass(e.wijCSS.helperClearFix).removeClass(e.wijCSS.header).removeClass(e.wijCSS.cornerAll).removeAttr("role"),t.each(this.anchors,function(e,n){var r=t(n),i=r.data("href.tabs");i&&(n.href=i),r.unbind(".tabs"),t.each(["href","load","cache"],function(e,t){r.removeData(t+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(n,r){var i=t(r);i.data("destroy.tabs")?i.remove():i.removeClass(e.wijCSS.stateDefault).removeClass(e.wijCSS.cornerTop).removeClass(e.wijCSS.cornerBottom).removeClass(e.wijCSS.cornerLeft).removeClass(e.wijCSS.cornerRight).removeClass(e.wijCSS.tabsActive).removeClass(e.wijCSS.stateActive).removeClass(e.wijCSS.stateHover).removeClass(e.wijCSS.stateFocus).removeClass(e.wijCSS.stateDisabled).removeClass(e.wijCSS.tabsPanel).removeClass(e.wijCSS.content).removeClass(e.wijCSS.wijtabsHide).css({position:"",left:"",top:""}).removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-selected").removeAttr("aria-disabled")}),n.length&&n.replaceWith(n.contents()),e.cookie&&this._cookie(null,e.cookie),this},n.prototype._cleanup=function(){var e=this.options.wijCSS;this.lis.filter("."+e.tabsLoading).removeClass(e.tabsLoading).find("span:data(label.tabs)").each(function(){var e=t(this);e.html(e.data("label.tabs")).removeData("label.tabs")})},n.prototype._removeScroller=function(){if(!this.scrollWrap)return;this.scrollWrap.wijsuperpanel("destroy").replaceWith(this.scrollWrap.contents()),this.scrollWrap=undefined,o&&o(this.list,["width","height","overflow"])},n.prototype._cookie=function(e,n){var r=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+l());return t.cookie.apply(null,[r].concat(t.makeArray(arguments)))},n.prototype.abort=function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},n.prototype.select=function(e){return typeof e=="string"?e=this.anchors.index(this.anchors.filter("[href$="+e+"]")):e===null&&(e=-1),e===-1&&this.options.collapsible&&(e=this.options.selected),this.anchors.eq(e).trigger(this.options.event+".tabs"),this},n.prototype.load=function(e){var n=this,r=n.options,i=n.anchors.eq(e)[0],s=t.data(i,"load.tabs"),o=t("span",i);n.abort();if(!1===n._trigger("beforeShow",null,n._ui(n.anchors[e],n.panels[e]))){n.element.dequeue("tabs");return}if(!s||n.element.queue("tabs").length!==0&&t.data(i,"cache.tabs")){n.element.dequeue("tabs");return}return n.lis.eq(e).addClass(r.wijCSS.tabsLoading),(r.spinner||n._defaults.spinner)&&o.data("label.tabs",o.html()).html(r.spinner||n._defaults.spinner),n.xhr=t.ajax(t.extend({},r.ajaxOptions,{url:s,success:function(s,o){t(n._sanitizeSelector(i.hash),n.element).html(s),n._cleanup(),r.cache&&t.data(i,"cache.tabs",!0),n._trigger("load",null,n._ui(n.anchors[e],n.panels[e]));try{r.ajaxOptions.success(s,o)}catch(u){}},error:function(t,s,o){n._cleanup(),n._trigger("load",null,n._ui(n.anchors[e],n.panels[e]));try{r.ajaxOptions.error(t,s,e,i)}catch(u){}}})),n.element.dequeue("tabs"),n},n.prototype.add=function(e,n,r){r===undefined&&(r=this.anchors.length);var i=this,s=i.options,o=t((s.tabTemplate||i._defaults.tabTemplate).replace(/#\{href\}/g,e).replace(/#\{label\}/g,n)),u=e.indexOf("#")?i._tabId(t("a",o)[0]):e.replace("#",""),a=i._getAlignment(!0),f=i._getAlignment(!1),l=t("#"+u),c;return o.addClass(s.wijCSS.stateDefault).addClass(s.wijCSS["corner"+a]).data("destroy.tabs",!0).attr("role","tab").attr("aria-selected",!1),l.length||(l=t(s.panelTemplate||i._defaults.panelTemplate).attr("id",u).data("destroy.tabs",!0).attr("role","tabpanel")),l.addClass(s.wijCSS.tabsPanel).addClass(s.wijCSS.content).addClass(s.wijCSS["corner"+f]+" "+s.wijCSS.wijtabsHide).attr("aria-hidden",!0),r>=i.lis.length?(o.appendTo(i.list),i.panels.length>0?l.insertAfter(i.panels[i.panels.length-1]):(c=i.element.find("."+s.wijCSS.wijtabsContent),c.length===0&&(c=i.element),l.appendTo(c))):(o.insertBefore(i.lis[r]),l.insertBefore(i.panels[r])),s.disabledIndexes=t.map(s.disabledIndexes,function(e,t){return e>=r?++e:e}),i._removeScroller(),i._tabify(!1),i.anchors.length===1&&(s.selected=0,o.addClass(s.wijCSS.tabsActive).addClass(s.wijCSS.stateActive).attr("aria-selected",!0),l.removeClass(s.wijCSS.wijtabsHide).attr("aria-hidden",!1),i.element.queue("tabs",function(){i.element.wijTriggerVisibility&&t(i.panels[0]).wijTriggerVisibility(),i._trigger("show",null,i._ui(i.anchors[0],i.panels[0]))}),i.load(0)),i._trigger("add",null,i._ui(i.anchors[r],i.panels[r])),i},n.prototype.remove=function(e){var n=this.options,r=this.lis.eq(e).remove(),i=this.panels.eq(e).remove();return r.hasClass(n.wijCSS.tabsActive)&&this.anchors.length>1&&this.select(e+(e+1<this.anchors.length?1:-1)),n.disabledIndexes=t.map(t.grep(n.disabledIndexes,function(t,n){return t!==e},!1),function(t,n){return t>=e?--t:t}),this._removeScroller(),this._tabify(!1),this._trigger("remove",null,this._ui(r.find("a")[0],i[0])),this},n.prototype.enableTab=function(e){var n=this.options;if(t.inArray(e,n.disabledIndexes)===-1)return;return this.lis.eq(e).removeClass(n.wijCSS.stateDisabled).removeAttr("aria-disabled"),n.disabledIndexes=t.grep(n.disabledIndexes,function(t,n){return t!==e},!1),this._trigger("enable",null,this._ui(this.anchors[e],this.panels[e])),this},n.prototype.disableTab=function(e){var t=this.options;return e!==t.selected&&(this.lis.eq(e).addClass(t.wijCSS.stateDisabled).attr("aria-disabled",!0),t.disabledIndexes.push(e),t.disabledIndexes.sort(),this._trigger("disable",null,this._ui(this.anchors[e],this.panels[e]))),this},n.prototype.url=function(e,t){return this.anchors.eq(e).removeData("cache.tabs").data("load.tabs",t),this},n.prototype.length=function(){return this.anchors.length},n}(e.wijmoWidget);e.wijtabs=c,c.prototype._defaults={panelTemplate:"<div></div>",spinner:"<em>Loading&#8230;</em>",tabTemplate:'<li><a href="#{href}"><span>#{label}</span></a></li>'},c.prototype.options=t.extend(!0,{},e.wijmoWidget.prototype.options,{wijCSS:{wijtabs:"wijmo-wijtabs",wijtabsContent:"wijmo-wijtabs-content",wijtabsHide:"wijmo-wijtabs-hide"},wijMobileCSS:{header:"ui-header ui-bar-c",content:"ui-content ui-body ui-body-c",stateDefault:"ui-btn-up-a",stateActive:"ui-btn-down-b"},alignment:"top",sortable:!1,scrollable:!1,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,hideOption:null,showOption:null,disabledIndexes:[],event:"click",idPrefix:"ui-tabs-",panelTemplate:"",spinner:"",tabTemplate:"",add:null,remove:null,select:null,beforeShow:null,show:null,load:null,disable:null,enable:null}),t.wijmo.registerWidget("wijtabs",c.prototype)})(wijmo||(wijmo={}));;
(function(e){"use strict";var t,n,r;t=function(e){var t=this;t.data={},t.reader=null,t.proxy=null,t.items=[],t.loading=null,t.loaded=null,t._constructor(e)},window.wijdatasource=t,e.extend(t.prototype,{_constructor:function(t){e.extend(this,t)},load:function(t,n){var r=this,i=r.proxy;if(e.isFunction(r.loading)&&r.loading(r,t)===!1)return;i?i.request(r,r.loaded,t):((r.items.length===0||n)&&this.read(),e.isFunction(r.loaded)&&r.loaded(r,t))},read:function(){var e=this,t=e.data;t&&e.reader?e.reader.read(e):e.items=e.data}}),n=function(t){e.isFunction(window.wijmoASPNetParseOptions)&&wijmoASPNetParseOptions(t),e.isArray(t)&&(this.fields=t)},window.wijarrayreader=n,e.extend(n.prototype,{read:function(t){e.isArray(t.data)?t.items=this._map(t.data):t.items=[]},_map:function(t){var n=this,r=[];return n.fields===undefined||n.fields.length===0?(e.extend(!0,r,t),r):(e.each(t,function(t,i){var s={};e.each(n.fields,function(t,n){n.mapping&&typeof n.mapping&&window[n.mapping]&&(n.mapping=window[n.mapping]);if(e.isFunction(n.mapping))return s[n.name]=n.mapping(i),!0;var r=n.mapping!==undefined?n.mapping:n.name,o=i[r];o===undefined&&(n.defaultValue!==undefined?o=n.defaultValue:o=i),s[n.name]=o}),r.push(s)}),r)}}),r=function(t){this.options=t,e.isFunction(window.wijmoASPNetParseOptions)&&wijmoASPNetParseOptions(t)},window.wijhttpproxy=r,e.extend(r.prototype,{request:function(t,n,r){var i=this,s=e.extend({},this.options),o=s.success;s.success=function(u){e.isFunction(o)&&o(u),i._complete(u,t,n,s,r)},e.ajax(s)},_complete:function(t,n,r,i,s){n.data=i.key!==undefined?t[i.key]:t,n.read(),e.isFunction(r)&&r(n,s)}})})(jQuery);;
var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){"use strict";var t=jQuery,n="wijsplitter",r=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n.prototype._setFullSplit=function(e){var t=this,n=t._fields,r=e?"100%":n.width,i=e?"100%":n.height;t.element.css("width",r).css("height",i)},n.prototype._setOption=function(e,n){var r=this,i=r.options,s,o=t.extend({},i[e]);if(e==="fullSplit")r._setFullSplit(n);else if(t.isPlainObject(i[e])){e==="panel1"&&n.collapsed!==undefined?r._setPanel1Collapsed(n.collapsed):e==="panel2"&&n.collapsed!==undefined&&r._setPanel2Collapsed(n.collapsed),i[e]=t.extend(!0,i[e],n);return}t.Widget.prototype._setOption.apply(r,arguments),o!==n&&(e==="orientation"?r.refresh():e==="collapsingPanel"?r.refresh():e==="fullSplit"?r.refresh(!0,!1):e==="splitterDistance"?(r.refresh(!1,!1),r._trigger("sized")):e==="showExpander"&&(s=r._fields.expander,s&&s.length&&s.css("display",n?"":"none"))),e==="disabled"&&r._handleDisabledOption(n,r.element)},n.prototype._create=function(){var e=this,n=e.element,r=e.options,i;window.wijmoApplyWijTouchUtilEvents&&(t=window.wijmoApplyWijTouchUtilEvents(t)),r.splitterDistance==100&&(i=this.element.width()-r.panel2.minSize,r.panel1.minSize>r.splitterDistance?r.splitterDistance=r.panel1.minSize:i<r.splitterDistance&&(r.splitterDistance=i)),e._fields={width:n.width(),height:n.height()},r.fullSplit&&e._setFullSplit(!0),e._splitterify(),e._updateElementsCss(),e._updateElements(),e._bindEvents(),e._initResizer(),r.disabled&&e.disable(),e.element.wijAddVisibilityObserver&&e.element.wijAddVisibilityObserver(function(){r.fullSplit&&(e.refresh(),e._updateElements(),e._initResizer())},"wijsplitter"),e._trigger("load",null,e)},n.prototype._handleDisabledOption=function(e,t){var n=this;e?(n.disabledDiv||(n.disabledDiv=n._createDisabledDiv(t)),n.disabledDiv.appendTo("body")):n.disabledDiv&&(n.disabledDiv.remove(),n.disabledDiv=null)},n.prototype.destroy=function(){var e=this,n=e.options,r=e.element,i=e._fields,s=i.wrapper,o=i.expander,u=i.bar,a=i.panel1,f=i.panel2,l=i.originalStyle,c=e.widgetName,h=i.oriPnl1Content,p=i.oriPnl2Content,d=i.oriPnl1ContentStyle,v=i.oriPnl2ContentStyle,m=n.wijCSS,g=m.vSplitterCss,y=m.vSplitterCssPrefix,b=m.hSplitterCss,w=m.hSplitterCssPrefix,E=m.panelCss;t.fn.resizable&&a&&a.n.is(":ui-resizable")&&a.n.resizable("destroy"),h&&(h.removeClass(y+a.contentCss+" "+n.wijCSS.hSplitterCssPrefix+a.contentCss+" "+n.wijCSS.content),d===undefined?h.removeAttr("style"):h.attr("style",d),h.appendTo(r)),p&&(p.removeClass(y+f.contentCss+" "+n.wijCSS.hSplitterCssPrefix+f.contentCss+" "+n.wijCSS.content),v===undefined?p.removeAttr("style"):p.attr("style",v),p.appendTo(r)),a.n.unbind("."+c),o.unbind("."+c),u.unbind("."+c),t(window).unbind("."+c),s.remove(),r.removeClass(g+" "+b),l===undefined?r.removeAttr("style"):r.attr("style",l),e.disabledDiv&&(e.disabledDiv.remove(),e.disabledDiv=null),e._fields=null},n.prototype.refresh=function(e,n){var r=this,i=r._fields,s=i.panel1;if(i._isResizing)return;(n||n===undefined)&&r._updateElementsCss(),r._updateElements();if(e||e===undefined){if(!t.fn.resizable)return;s&&s.n.is(":ui-resizable")&&s.n.resizable("destroy"),r._initResizer()}},n.prototype._createDisabledDiv=function(e){var n=this,r=e?e:n.element,i=r.offset(),s=r.outerWidth(),o=r.outerHeight(),u={"z-index":"99999",position:"absolute",width:s,height:o,left:i.left,top:i.top};return t.browser.msie&&t.extend(u,{"background-color":"#fff",opacity:.1}),t("<div></div>").addClass("ui-disabled").css(u)},n.prototype._splitterify=function(){var e=this,n=e.element,r=e.options,i=e._fields,s,o,u,a,f={n:undefined,content:n.find(">div:eq(0)")},l={n:undefined,content:n.find(">div:eq(1)")};i.originalStyle=n.attr("style"),s=t("<div></div>").appendTo(n),f.n=t("<div></div>").appendTo(s),f.content.length===0?f.content=t("<div></div>"):(i.oriPnl1Content=f.content,i.oriPnl1ContentStyle=f.content.attr("style")),f.content.appendTo(f.n),o=t("<div></div>").appendTo(s),r.barZIndex!==-1&&o.css("z-index",r.barZIndex),u=t("<div></div>").appendTo(o).attr("role","button"),a=t("<span></span>").appendTo(u),l.n=t("<div></div>").appendTo(s),l.content.length===0?l.content=t("<div></div>"):(i.oriPnl2Content=l.content,i.oriPnl2ContentStyle=l.content.attr("style")),l.content.appendTo(l.n),i.wrapper=s,i.panel1=f,i.panel2=l,i.bar=o,i.expander=u,i.icon=a},n.prototype._updateElementsCss=function(){var e=this,t=e.element,n=e.options,r=n.orientation==="vertical",i=e._fields,s=i.wrapper,o=n.collapsingPanel,u=n.collapsingPanel==="panel1"?"panel2":"panel1",a=i.bar,f=i.expander,l=i.icon,c=n.wijCSS,h=c.vSplitterCss,p=c.vSplitterCssPrefix,d=c.hSplitterCss,v=c.hSplitterCssPrefix,m=c.panelCss;t.removeClass(h+" "+d).addClass(r?h:d),s.attr("class",c.wrapperCss),i[o].n.removeClass(p+m[o].n+" "+v+m[o].n).addClass((r?p:v)+m[o].n),i[o].content.removeClass(p+m[o].content+" "+v+m[o].content+" "+c.content).addClass((r?p:v)+m[o].content+" "+c.content),a.attr("class",(r?p:v)+c.barCss+" "+c.header).css("width","").css("height",""),f.attr("class",c.cornerCssPrefix+(r?"bl "+p:"tr "+v)+c.expanderCss+" "+c.stateDefault).css("left","").css("top",""),l.attr("class",c.icon+" "+(r?c.iconArrowLeft:c.iconArrowUp)),i[u].n.removeClass(p+m[u].n+" "+v+m[u].n).addClass((r?p:v)+m[u].n),i[u].content.removeClass(p+m[u].content+" "+v+m[u].content+" "+c.content).addClass((r?p:v)+m[u].content+" "+c.content),e._updateExpanderCss()},n.prototype._updateExpanderCss=function(){var e=this,t=e.options,n=e._fields,r=n.expander,i=n.icon,s=t.wijCSS,o=s.cornerCssPrefix,u=t.orientation==="vertical",a=t.collapsingPanel!=="panel1",f=u?s.vSplitterCssPrefix:s.hSplitterCssPrefix,l=(u?1:0)*2+(a?1:0),c=["bl","tr","tr","bl"][l],h=["br","tl"][+a],p=[s.iconArrowDown,s.iconArrowUp,s.iconArrowRight,s.iconArrowLeft][l],d=["tr","bl","bl","tr"][l],v=["tl","br"][+a],m=[s.iconArrowUp,s.iconArrowDown,s.iconArrowLeft,s.iconArrowRight][l];r.removeClass(f+t.collapsingPanel+"-"+s.expandedCss+" "+f+t.collapsingPanel+"-"+s.collapsedCss+" "+o+c+" "+o+h+" "+o+d+" "+o+v),i.removeClass(p+" "+m),t.panel1.collapsed||t.panel2.collapsed?(r.addClass(o+c+" "+o+h+" "+f+t.collapsingPanel+"-"+s.collapsedCss),i.addClass(p)):(r.addClass(o+d+" "+o+v+" "+f+t.collapsingPanel+"-"+s.expandedCss),i.addClass(m))},n.prototype._updateElements=function(){var e=this,t=e.element,n=e.options,r=n.splitterDistance,i=n.collapsingPanel,s=n.collapsingPanel==="panel1"?"panel2":"panel1",o=e._fields,u=o.wrapper,a=o.panel1,f=o.panel2,l=o.bar,c=o.expander,h=t.width(),p=t.height(),d,v;u.height(p),e._setPanelsScrollMode(),n.orientation==="vertical"?(d=l.outerWidth(!0),r>h-d&&(r=h-d),u.width(h*2),n.panel1.collapsed?(i==="panel1"&&c.addClass(n.wijCSS.vSplitterCssPrefix+"panel1"+"-"+n.wijCSS.collapsedCss),o.panel1.n.css("display","none"),o.panel2.n.css("display",""),r=0):(i==="panel1"&&c.addClass(n.wijCSS.vSplitterCssPrefix+"panel1"+"-"+n.wijCSS.expandedCss),o.panel1.n.css("display",""),o.panel2.n.css("display",n.panel2.collapsed?"none":"")),n.panel2.collapsed?(i==="panel2"&&c.addClass(n.wijCSS.vSplitterCssPrefix+"panel2"+"-"+n.wijCSS.collapsedCss),o.panel2.n.css("display","none"),r=i==="panel1"?h-d:h):(i==="panel2"&&c.addClass(n.wijCSS.vSplitterCssPrefix+"panel2"+"-"+n.wijCSS.expandedCss),o.panel2.n.css("display","")),!n.panel1.collapsed&&!n.panel2.collapsed&&c.addClass(n.wijCSS.vSplitterCssPrefix+n.collapsingPanel+"-"+n.wijCSS.expandedCss),i==="panel1"?(o.panel1.n.height(p).width(r),o.panel2.n.height(p).width(h-r-d)):(o.panel1.n.height(p).width(r-d),o.panel2.n.height(p).width(h-r)),o.panel1.content.outerHeight(p,!0),l.outerHeight(p,!0),o.panel2.content.outerHeight(p,!0),c.css("cursor","pointer").css("top",p/2-c.outerHeight(!0)/2)):(v=l.outerHeight(!0),r>p-v&&(r=p-v),n.panel1.collapsed?(i==="panel1"&&c.addClass(n.wijCSS.hSplitterCssPrefix+"panel1"+"-"+n.wijCSS.collapsedCss),o.panel1.n.css("display","none"),o.panel2.n.css("display",""),r=0):(i==="panel1"&&c.addClass(n.wijCSS.hSplitterCssPrefix+"panel1"+"-"+n.wijCSS.expandedCss),o.panel1.n.css("display",""),o.panel2.n.css("display",n.panel2.collapsed?"none":"")),n.panel2.collapsed?(i==="panel2"&&c.addClass(n.wijCSS.hSplitterCssPrefix+"panel2"+"-"+n.wijCSS.collapsedCss),o.panel2.n.css("display","none"),r=i==="panel1"?p-v:p):(i==="panel2"&&c.addClass(n.wijCSS.hSplitterCssPrefix+"panel2"+"-"+n.wijCSS.expandedCss),o.panel2.n.css("display","")),i==="panel1"?(o.panel1.n.width(h).height(r),o.panel2.n.width(h).height(p-r-v),o.panel1.content.outerHeight(r,!0),o.panel2.content.outerHeight(p-r-v,!0)):(o.panel1.n.width(h).height(r-v),o.panel2.n.width(h).height(p-r),o.panel1.content.outerHeight(r-v,!0),o.panel2.content.outerHeight(p-r,!0)),c.css("cursor","pointer").css("left",h/2-c.outerWidth(!0)/2)),c.css("display",n.showExpander?"":"none")},n.prototype._bindEvents=function(){var e=this,n=e.options,r=e._fields,i=r.bar,s=r.expander,o=e.widgetName;s.bind("mouseover."+o,function(e){if(n.disabled)return;s.addClass(n.wijCSS.stateHover)}).bind("mouseout."+o,function(e){if(n.disabled)return;s.removeClass(n.wijCSS.stateHover).removeClass(n.wijCSS.stateActive)}).bind("mousedown."+o,function(e){if(n.disabled)return;s.addClass(n.wijCSS.stateActive)}).bind("mouseup."+o,function(t){if(n.disabled)return;s.removeClass(n.wijCSS.stateActive),n.collapsingPanel==="panel1"?e._setPanel1Collapsed(!n.panel1.collapsed,t):e._setPanel2Collapsed(!n.panel2.collapsed,t)}),i.bind("mouseover."+o,function(e){if(n.disabled)return;i.addClass(n.wijCSS.stateHover)}).bind("mouseout."+o,function(e){if(n.disabled)return;i.removeClass(n.wijCSS.stateHover)}),r.panel1.n.bind("animating."+o,function(t){if(n.disabled)return;e._adjustLayout(e),e._trigger("sizing",t,null)}).bind("animated."+o,function(t){if(n.disabled)return;e._adjustLayout(e),e._trigger("sized",t,null)}),e.element.on("mouseover."+o,".ui-resizable-handle",function(e){if(n.disabled)return;i.addClass(n.wijCSS.stateHover)}).on("mouseout."+o,".ui-resizable-handle",function(e){if(n.disabled)return;i.removeClass(n.wijCSS.stateHover)}),t(window).bind("resize."+o,function(t){if(n.disabled)return;n.fullSplit&&e.element.is(":visible")&&(e._updateElements(),e._initResizer())})},n.prototype._setPanel1Collapsed=function(e,n){var r=this,i=r.options,s=i.panel1.collapsed,o=t(".ui-resizable-handle",r.element);if(s===e)return;if(i.collapsingPanel==="panel1"&&!r._trigger(s?"expand":"collapse",n,null))return;i.panel1.collapsed=e,e?(i.panel2.collapsed=!1,i.collapsingPanel==="panel2"&&o.hide()):o.show(),r._updateElements(),r._updateExpanderCss(),i.collapsingPanel==="panel1"&&r._trigger(e?"collapsed":"expanded",n,null)},n.prototype._setPanel2Collapsed=function(e,n){var r=this,i=r.options,s=i.panel2.collapsed,o=t(".ui-resizable-handle",r.element);if(s===e)return;if(i.collapsingPanel==="panel2"&&!r._trigger(s?"expand":"collapse",n,null))return;i.panel2.collapsed=e,e?(i.panel1.collapsed=!1,i.collapsingPanel==="panel1"&&o.hide()):o.show(),r._updateElements(),r._updateExpanderCss(),i.collapsingPanel==="panel2"&&r._trigger(e?"collapsed":"expanded",n,null)},n.prototype._initResizer=function(){var e=this,n=e.element,r=e.options,i=e._fields,s=i.bar,o=r.collapsingPanel,u=r.collapsingPanel==="panel1"?"panel2":"panel1",a=r.resizeSettings,f=a.animationOptions,l=f.disabled?0:f.duration,c=n.width(),h=n.height(),p,d,v,m,g,y,b;if(!t.fn.resizable)return;r.orientation==="vertical"?(p=s.outerWidth(!0),d=c-p-r[u].minSize,v=r[o].minSize,v<2&&(v=2),i.panel1.n.resizable({wijanimate:!0,minWidth:v,maxWidth:d,handles:"e",helper:r.wijCSS.vSplitterCssPrefix+r.wijCSS.resizeHelperCss,animateDuration:l,animateEasing:f.easing,ghost:a.ghost,start:function(){i._isResizing=!0},stop:function(){i._isResizing=!1}})):(m=s.outerHeight(!0),g=h-m-r[u].minSize,y=r[o].minSize,y<2&&(y=2),i.panel1.n.resizable({wijanimate:!0,minHeight:y,maxHeight:g,handles:"s",helper:r.wijCSS.hSplitterCssPrefix+r.wijCSS.resizeHelperCss,animateDuration:l,animateEasing:f.easing,ghost:a.ghost,start:function(){i._isResizing=!0},stop:function(){i._isResizing=!1}})),b=t(".ui-resizable-handle",n),r[u].collapsed?b.hide():b.show(),t.browser.msie&&parseInt(t.browser.version)<7&&r.orientation==="vertical"&&b.height(n.height())},n.prototype._adjustLayout=function(e){var t=e.options,n=e._fields,r=n.panel1,i=t.orientation==="vertical"?r.n.width():r.n.height();if(t.splitterDistance===i)return;t.splitterDistance=i,e._updateElements()},n.prototype._setPanelsScrollMode=function(){var e=this,n=e._fields,r=e.options,i=[r.panel1.scrollBars,r.panel2.scrollBars];t.each([n.panel1,n.panel2],function(e,t){i[e]==="auto"?t.content.css("overflow","auto"):i[e]==="both"?t.content.css("overflow","scroll"):i[e]==="none"?t.content.css("overflow","hidden"):i[e]==="horizontal"?t.content.css("overflow-x","scroll").css("overflow-y","hidden"):i[e]==="vertical"&&t.content.css("overflow-x","hidden").css("overflow-y","scroll")})},n}(e.wijmoWidget);e.WijSplitter=r,r.prototype.options=t.extend(!0,{},e.wijmoWidget.prototype.options,{initSelector:":jqmData(role='wijsplitter')",sizing:null,sized:null,expand:null,collapse:null,expanded:null,collapsed:null,barZIndex:-1,showExpander:!0,splitterDistance:100,orientation:"vertical",fullSplit:!1,resizeSettings:{animationOptions:{duration:100,easing:"swing",disabled:!1},ghost:!1},panel1:{minSize:1,collapsed:!1,scrollBars:"auto"},panel2:{minSize:1,collapsed:!1,scrollBars:"auto"},collapsingPanel:"panel1",wijCSS:{cornerCssPrefix:"ui-corner-",arrowCssPrefix:"ui-icon-triangle-1-",panelCss:{panel1:{n:"panel1",content:"panel1-content"},panel2:{n:"panel2",content:"panel2-content"}},wrapperCss:"wijmo-wijsplitter-wrapper",hSplitterCss:"wijmo-wijsplitter-horizontal",vSplitterCss:"wijmo-wijsplitter-vertical",hSplitterCssPrefix:"wijmo-wijsplitter-h-",vSplitterCssPrefix:"wijmo-wijsplitter-v-",collapsedCss:"collapsed",expandedCss:"expanded",resizeHelperCss:"resize-helper",barCss:"bar",expanderCss:"expander"},wijMobileCSS:{header:"ui-header ui-bar-a",content:"ui-body ui-body-c",stateDefault:"ui-btn-up-c"}}),t.wijmo.registerWidget("wijsplitter",r.prototype),t.ui!=null&&t.ui.plugin!=null&&t.ui.plugin.add("resizable","wijanimate",{stop:function(e,n){var r=t(this).data("uiResizable"),i=r.options,s=r.element,o=r._proportionallyResizeElements,u=o.length&&/textarea/i.test(o[0].nodeName),a=u&&t.ui.hasScroll(o[0],"left")?0:r.sizeDiff.height,f=u?0:r.sizeDiff.width,l,c,h;s.css("width",r.originalSize.width).css("height",r.originalSize.height),l={width:r.size.width-f,height:r.size.height-a},c=parseInt(s.css("left"),10)+(r.position.left-r.originalPosition.left)||null,h=parseInt(s.css("top"),10)+(r.position.top-r.originalPosition.top)||null,s.animate(t.extend(l,h&&c?{top:h,left:c}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var n={width:parseInt(s.css("width"),10),height:parseInt(s.css("height"),10),top:parseInt(s.css("top"),10),left:parseInt(s.css("left"),10)};o&&o.length&&t(o[0]).css({width:n.width,height:n.height}),r._updateCache(n),r._propagate("resize",e),s.trigger("animating")},complete:function(){s.trigger("animated")}})}})})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(g){var e=jQuery;var f=(function(n){__extends(m,n);function m(){n.apply(this,arguments)}return m})(g.wijmoWidget);g.wijsuperpanel=f;if(!e.support.isTouchEnabled||!e.support.isTouchEnabled()){var a="wijmo-wijsuperpanel-handle",j="wijmo-wijsuperpanel-hbarcontainer",l="wijmo-wijsuperpanel-vbarcontainer",d="",b="<div class='wijmo-wijsuperpanel-statecontainer'><div class='wijmo-wijsuperpanel-contentwrapper'><div class='wijmo-wijsuperpanel-templateouterwrapper'></div></div></div>",c="<div class='wijmo-wijsuperpanel-hbarcontainer {header}'><div class='wijmo-wijsuperpanel-handle {stateDefault} {cornerAll}'><span class='{icon} {iconVGripSolid}'></span></div><div class='wijmo-wijsuperpanel-hbar-buttonleft {stateDefault} {cornerBL}'><span class='{icon} {iconArrowLeft}'></span></div><div class='wijmo-wijsuperpanel-hbar-buttonright {stateDefault} {cornerBR}'><span class='{icon} {iconArrowRight}'></span></div></div>",i="<div class='wijmo-wijsuperpanel-vbarcontainer {header}'><div class='wijmo-wijsuperpanel-handle {stateDefault} {cornerAll}'><span class='{icon} {iconHGripSolid}'></span></div><div class='wijmo-wijsuperpanel-vbar-buttontop {stateDefault} {cornerTR}'><span class='{icon} {iconArrowUp}'></span></div><div class='wijmo-wijsuperpanel-vbar-buttonbottom {stateDefault} {cornerBR}'><span class='{icon} {iconArrowDown}'></span></div></div>",h="<div class='{stateDefault} wijmo-wijsuperpanel-button wijmo-wijsuperpanel-buttonleft'><span class='{icon} {iconCaratLeft}'></span></div><div class='{stateDefault} wijmo-wijsuperpanel-button wijmo-wijsuperpanel-buttonright'><span class='{icon} {iconCaratRight}'></span></div>",k="<div class='{stateDefault} wijmo-wijsuperpanel-button wijmo-wijsuperpanel-buttontop'><span class='{icon} {iconCaratUp}'></span></div><div class='{stateDefault} wijmo-wijsuperpanel-button wijmo-wijsuperpanel-buttonbottom'><span class='{icon} {iconCaratDown}'> </span></div>";f.prototype=e.extend(true,{},e.Widget.prototype,{widgetEventPrefix:"wijsuperpanel",_setOption:function(p,t){var m=this,v=m.options,s=m._fields(),u=s.hbarDrag,n=s.vbarDrag,q=s.resizer;if(p==="animationOptions"){t=e.extend(v.animationOptions,t)}else{if(p==="hScroller"){if(t.scrollLargeChange!==undefined&&t.scrollLargeChange!==null){m._autoHLarge=false}t=e.extend(v.hScroller,t);m.refresh()}else{if(p==="vScroller"){if(t.scrollLargeChange!==undefined&&t.scrollLargeChange!==null){m._autoVLarge=false}t=e.extend(v.vScroller,t);m.refresh()}else{if(p==="resizableOptions"){t=e.extend(m.resizableOptions,t)}}}}e.Widget.prototype._setOption.apply(m,arguments);if(e.isPlainObject(t)){m.options[p]=t}switch(p){case"allowResize":m._initResizer();break;case"disabled":if(t){if(u!==undefined){u.draggable("disable")}if(n!==undefined){n.draggable("disable")}if(q!==undefined){q.resizable("disable")}}else{if(u!==undefined){u.draggable("enable")}if(n!==undefined){n.draggable("enable")}if(q!==undefined){q.resizable("enable")}}break;case"mouseWheelSupport":case"keyboardSupport":m._bindElementEvents(m,s,m.element,v);break}return m},_create:function(){var m=this,n=m.options;n.vScroller.dir="v";n.hScroller.dir="h";m._initMarkup();if(window.wijmoApplyWijTouchUtilEvents){e=window.wijmoApplyWijTouchUtilEvents(e)}m.paintPanel();m._initResizer();if(m.options.disabled){m.disable()}m._detectAutoRefresh();if(n.listenContentScroll){m._listenContentScroll()}if(m.element.is(":hidden")&&m.element.wijAddVisibilityObserver){m.element.wijAddVisibilityObserver(function(){if(m.element.wijRemoveVisibilityObserver){m.element.wijRemoveVisibilityObserver()}m.refresh()},"wijsuperpanel")}},_initMarkup:function(){var m=this.options.wijCSS,n=/\{(\w+?)\}/ig,o=function(q,p){return m[p]};d=m.stateActive;c=c.replace(n,o);i=i.replace(n,o);h=h.replace(n,o);k=k.replace(n,o)},_detectAutoRefresh:function(){var m=this,n=e.wijmo.wijsuperpanel.panels;if(n===undefined){n=[];e.wijmo.wijsuperpanel.panels=n}n.push(m);if(m.options.autoRefresh){if(!e.wijmo.wijsuperpanel.setAutoRefreshInterval){e.wijmo.wijsuperpanel.setAutoRefreshInterval=m._setAutoRefreshInterval;e.wijmo.wijsuperpanel.setAutoRefreshInterval()}}},_setAutoRefreshInterval:function(){var m=e.wijmo.wijsuperpanel.autoRereshInterval,n=e.wijmo.wijsuperpanel.panels,o=window.setInterval(function(){window.clearInterval(o);var s=n.length,u=false,r,p,w,q,t,v;for(r=0;r<s;r++){p=n[r];w=p.element[0];q=p.options.autoRefresh;if(q){u=true}t=p.getContentElement();v=p._paintedMark;if(p.options.autoRefresh&&t.is(":visible")&&(v===undefined||v.width!==t[0].offsetWidth||v.height!==t[0].offsetHeight||v.mainWidth!==w.offsetWidth||v.mainHeight!==w.offsetHeight)){p.paintPanel()}}if(u){window.setTimeout(e.wijmo.wijsuperpanel.setAutoRefreshInterval,0)}},m===undefined?500:m)},destroy:function(){var m=this,q=m._fields(),p=m.element,o,n,r=m.options.wijCSS;e.wijmo.wijsuperpanel.panels=e.grep(e.wijmo.wijsuperpanel.panels,function(s){return s!==m},false);if(!q.initialized){return}if(m._radiusKey){m.element.css(m._radiusKey,"")}if(q.intervalID!==undefined){window.clearInterval(q.intervalID);q.intervalID=undefined}if(q.resizer!==undefined){q.resizer.resizable("destroy")}if(q.hbarContainer!==undefined){q.hbarDrag.remove();q.hbarContainer.unbind("."+m.widgetName)}if(q.vbarContainer!==undefined){q.vbarDrag.remove();q.vbarContainer.unbind("."+m.widgetName)}p.unbind("."+m.widgetName);q.contentWrapper.unbind("."+m.widgetName);o=q.stateContainer.find(">.wijmo-wijsuperpanel-button");o.unbind("."+m.widgetName);n=q.templateWrapper;n.contents().each(function(s,t){p.append(t)});q.stateContainer.remove();if(q.tabindex){p.removeAttr("tabindex")}p.removeClass(["wijmo-wijsuperpanel",r.widget,r.content,r.cornerAll].join(" "));e.Widget.prototype.destroy.apply(m,arguments)},_fields:function(){var m=this,o=m.element,n=m.widgetName+"-fields",p=m._fieldsStore;if(p===undefined){p={};o.data(n,p);m._fieldsStore=p}return p},_hasMode:function(m,o){var n=m.scrollMode.split(",");n=e.map(n,function(p){return e.trim(p).toLowerCase()});return e.inArray(o.toLowerCase(),n)>-1},_bindElementEvents:function(n,s,r,t){var m=n._hasMode(t.hScroller,"edge"),q=n._hasMode(t.vScroller,"edge"),p=n.widgetName;if(m||q){if(n._mousemoveBind===undefined){n._mousemoveBind=true;r.bind("mousemove."+p,n,n._contentMouseMove);r.bind("mouseleave."+p,null,function(){n._clearInterval()})}}else{r.unbind("mousemove",n._contentMouseMove);n._mousemoveBind=undefined}if(t.mouseWheelSupport){if(n._mouseWheelBind===undefined){n._mouseWheelBind=true;r.bind("mousewheel."+p,n,n._panelMouseWheel)}}else{n.element.unbind("mousewheel",n._panelMouseWheel);n._mouseWheelBind=undefined}if(t.keyboardSupport){if(n._keyboardBind===undefined){n._keyboardBind=true;r.bind("keydown."+p,n,n._panelKeyDown)}}else{r.unbind("keydown",n._panelKeyDown);n._keyboardBind=undefined}},_dragStop:function(p,m,n){var o={dragHandle:n};m._trigger("dragStop",p,o)},_contentMouseMove:function(B){var u=B.data,w=u.options,q,m,r,A,C,t,E,D,n,s,y,p,z,x,v;if(w.disabled){return}q=w.hScroller;m=w.vScroller;r=e(B.currentTarget);A=u._fields();C=u._hasMode(q,"edge");t=u._hasMode(m,"edge");u._clearInterval();E={X:B.pageX,Y:B.pageY};D=r.offset();n=D.left;s=D.top;n=E.X-n;s=E.Y-s;y=q.hoverEdgeSpan;p=m.hoverEdgeSpan;z=r.innerHeight();x=r.innerWidth();v="";if(C){if(n<y){v="left"}if(n>(x-y)){v="right"}}if(t){if(s<p){v="top"}if(s>(z-p)){v="bottom"}}u._setScrollingInterval(A,v,u,false)},_setScrollingInterval:function(q,n,m,p){var r=m.options;if(n.length>0){q.internalFuncID=window.setInterval(function(){m._doScrolling(n,m,p)},r.keyDownInterval)}},_scrollButtonMouseOver:function(p){var m=p.data,q=m.options,n;if(q.disabled){return}n=e(p.currentTarget);if(!n.hasClass(q.wijCSS.stateDisabled)){n.bind("mouseout."+m.widgetName,m,m._buttonMouseOut).bind("mousedown."+m.widgetName,m,m._buttonMouseDown).bind("mouseup."+m.widgetName,m,m._buttonMouseUp).addClass(q.wijCSS.stateHover);m._buttonScroll(n,m,"buttonshover")}},_buttonScroll:function(q,m,t){var p="",s=m.options,r=m._fields(),n=m._hasMode(s.hScroller,t),u=m._hasMode(s.vScroller,t);if(q.hasClass("wijmo-wijsuperpanel-buttonleft")&&n){p="left"}else{if(q.hasClass("wijmo-wijsuperpanel-buttonright")&&n){p="right"}else{if(q.hasClass("wijmo-wijsuperpanel-buttontop")&&u){p="top"}else{if(q.hasClass("wijmo-wijsuperpanel-buttonbottom")&&u){p="bottom"}}}}if(p.length>0){m._clearInterval();m._doScrolling(p,m,true);m._setScrollingInterval(r,p,m,true)}},_listenContentScroll:function(){var D=this,q=D.options,y=D._fields(),x=y.hbarContainer,s=y.hbarDrag,A=y.vbarContainer,z=y.vbarDrag,r=y.templateWrapper,v=y.contentWrapper,C=v.width(),u=v.height(),t=r&&r.offset(),p=t&&t.left,n=t&&t.top,m=y.contentWidth,B=y.contentHeight;v.bind("scroll",function(w){var F=r.position(),o=F.left,E=F.top;v.scrollTop(0).scrollLeft(0);r.css({left:o,top:E});if(o<=0&&o>C-m){q.hScroller.scrollValue=D.scrollPxToValue(-o,"h");D._scrollDrag("h",x,s,true)}if(E<=0&&E>u-B){q.vScroller.scrollValue=D.scrollPxToValue(-E,"v");D._scrollDrag("v",A,z,true)}})},_buttonMouseDown:function(o){var m=o.data,n,p=m.options.wijCSS;if(m.options.disabled){return}n=e(o.currentTarget);if(!n.hasClass(p.stateDisabled)){n.addClass(p.stateActive);m._buttonScroll(n,m,"buttons")}},_buttonMouseUp:function(o){var m=o.data,n=e(o.currentTarget);n.removeClass(m.options.wijCSS.stateActive);m._clearInterval()},_buttonMouseOut:function(o){var m=o.data,p=m.options.wijCSS,n=e(o.currentTarget);n.unbind("mouseout",m._buttonMouseOut).unbind("mousedown",m._buttonMouseDown).unbind("mouseup",m._buttonMouseUp).removeClass(p.stateHover).removeClass(p.stateActive);m._clearInterval()},getKeyCodeEnum:function(){if(e.ui&&e.ui.keyCode){return e.ui.keyCode}if(e.mobile&&e.mobile.keyCode){return e.mobile.keyCode}throw"keyCode object is not found"},_panelKeyDown:function(r){var p=r.data,s=p.options,n,m,q=p.getKeyCodeEnum();if(!s.keyboardSupport||s.disabled){return}n=r.shiftKey;m=r.keyCode;if(m===q.LEFT){p._doScrolling("left",p,n)}else{if(m===q.RIGHT){p._doScrolling("right",p,n)}else{if(m===q.UP){p._doScrolling("top",p,n)}else{if(m===q.DOWN){p._doScrolling("bottom",p,n)}}}}r.stopPropagation();r.preventDefault()},_draggingInternal:function(t,B,w,z){var q=w.dir,u=q==="h",y=u?"left":"top",p=t.position[y]-B._getScrollContainerPadding(y),n=B._getTrackLen(q)-z[u?"outerWidth":"outerHeight"](true),s=p/n,r=(w.scrollMax-w.scrollLargeChange+1),x=s*r,A,m,o;if(x<w.scrollMin){x=w.scrollMin}if(x>r){x=r}A={oldValue:w.scrollValue,newValue:x,dir:q};if(!B._scrolling(true,B,A)){return}if(B.customScroll){o=Math.abs(B.customScroll);m=B.scrollPxToValue(o,w.dir)}w.scrollValue=m||x;B.customScroll=undefined;B._setDragAndContentPosition(true,false,q,"dragging")},_dragging:function(s,q,n){var t=n.options,m=e(s.target),r=m.parent();if(r.hasClass(j)){n._draggingInternal(q,n,t.hScroller,m)}else{n._draggingInternal(q,n,t.vScroller,m)}},_panelMouseWheel:function(s,u){var w=s.data,m=w.options,v,n,p,r,q,t;if(!m.mouseWheelSupport||m.disabled){return}v=e(s.srcElement||s.originalEvent.target);n="";p=v.closest("."+j,w.element).size()>0;r=m.hScroller;q=m.vScroller;if(u>0){n=p?"left":"top"}else{n=p?"right":"bottom"}if(n.length>0){w._doScrolling(n,w)}t=false;if(n==="left"){t=!w.hNeedScrollBar||Math.abs(r.scrollValue-r.scrollMin)<0.001}if(n==="right"){t=!w.hNeedScrollBar||Math.abs(r.scrollValue-(r.scrollMax-w._getHScrollBarLargeChange()+1))<0.001}if(n==="top"){t=!w.vNeedScrollBar||Math.abs(q.scrollValue-q.scrollMin)<0.001}if(n==="bottom"){t=!w.vNeedScrollBar||Math.abs(q.scrollValue-(q.scrollMax-w._getVScrollBarLargeChange()+1))<0.001}if(!t||!m.bubbleScrollingEvent||n==="left"||n==="right"){s.stopPropagation();s.preventDefault()}},_documentMouseUp:function(p){var m=p.data.self,q=m.options,n=p.data.ele;n.removeClass(q.wijCSS.stateActive);m._clearInterval();e(document).unbind("mouseup",m._documentMouseUp)},_scrollerMouseOver:function(q){var n=q.data,r=n.options,m,p,s;if(r.disabled){return}m=e(q.srcElement||q.originalEvent.target);p=null;s=false;if(m.hasClass(r.wijCSS.stateDefault)){p=m;s=true}else{if(m.parent().hasClass(r.wijCSS.stateDefault)){p=m.parent();s=true}else{if(m.hasClass(l)||m.hasClass(j)){p=m}}}if(p){if(s){p.addClass(r.wijCSS.stateHover)}p.bind("mouseout."+n.widgetName,n,n._elementMouseOut);p.bind("mousedown."+n.widgetName,n,n._elementMouseDown);p.bind("mouseup."+n.widgetName,n,n._elementMouseUp)}},_elementMouseUp:function(n){var m=e(n.currentTarget);m.removeClass(d)},_elementMouseDown:function(r){var w=e(r.currentTarget),v=r.data,m,u,o,n,t,q,s,p;if(v.options.disabled||r.which!==1){return}m="";u=false;o=false;if(w.hasClass("wijmo-wijsuperpanel-vbar-buttontop")){m="top";o=true}else{if(w.hasClass("wijmo-wijsuperpanel-vbar-buttonbottom")){m="bottom";o=true}else{if(w.hasClass("wijmo-wijsuperpanel-hbar-buttonleft")){m="left";o=true}else{if(w.hasClass("wijmo-wijsuperpanel-hbar-buttonright")){m="right";o=true}else{if(w.hasClass(a)){w.addClass(d);return}else{if(w.hasClass(j)){n=w.find("."+a);t=n.offset();if(r.pageX<t.left){m="left"}else{m="right"}u=true}else{if(w.hasClass(l)){q=w.find("."+a);s=q.offset();if(r.pageY<s.top){m="top"}else{m="bottom"}u=true}}}}}}}v._clearInterval();v._doScrolling(m,v,u);p=v._fields();v._setScrollingInterval(p,m,v,u);if(o){w.addClass(d)}e(document).bind("mouseup."+v.widgetName,{self:v,ele:w},v._documentMouseUp)},doScrolling:function(m,n){this._doScrolling(m,this,n)},_setScrollerValue:function(q,u,x,n,A,y,C){var v=u.scrollMin,w=y?n:x,z=u.scrollValue,B,p,r,s,m,o;if(!z){z=v}B=0;if(A){p=u.scrollMax-n+1;if(Math.abs(z-p)<0.001){C._clearInterval();return false}r=u.firstStepChangeFix;B=z+w;if(!y&&Math.abs(z-v)<0.0001&&!isNaN(r)){B+=r}if(B>p){B=p}}else{if(Math.abs(z-v)<0.001){C._clearInterval();return false}B=z-w;if(B<0){B=v}}s={oldValue:u.scrollValue,newValue:B,direction:q,dir:u.dir};if(!C._scrolling(true,C,s)){return false}if(C.customScroll){o=Math.abs(C.customScroll);m=C.scrollPxToValue(o,u.dir)}u.scrollValue=m||B;C.customScroll=undefined;return true},_doScrolling:function(p,w,v){var n=w.options,r=n.vScroller,s=n.hScroller,q=w._getVScrollBarSmallChange(),u=w._getVScrollBarLargeChange(),t=w._getHScrollBarLargeChange(),m=w._getHScrollBarSmallChange();if(p==="top"||p==="bottom"){if(!w._setScrollerValue(p,r,q,u,p==="bottom",v,w)){return}p="v"}else{if(p==="left"||p==="right"){if(!w._setScrollerValue(p,s,m,t,p==="right",v,w)){return}p="h"}}w._setDragAndContentPosition(true,true,p)},_disableButtonIfNeeded:function(z){var t=z._fields(),m,n,q,r,A,v,w,s,u,y,B,x,p;if(t.intervalID>0){window.clearInterval(t.intervalID)}m=z.options;n=t.buttonLeft;q=t.buttonRight;r=t.buttonTop;A=t.buttonBottom;if(n!==undefined){v=z._getHScrollBarLargeChange();w=m.hScroller.scrollMax-v+1;s=m.hScroller.scrollValue;u=m.hScroller.scrollMin;if(s===undefined){s=u}if(Math.abs(s-u)<0.001||!t.hScrolling){n.addClass(m.wijCSS.stateDisabled)}else{n.removeClass(m.wijCSS.stateDisabled)}if(Math.abs(s-w)<0.001||!t.hScrolling){q.addClass(m.wijCSS.stateDisabled)}else{q.removeClass(m.wijCSS.stateDisabled)}}if(r!==undefined){y=z._getVScrollBarLargeChange();B=m.vScroller.scrollMax-y+1;x=m.vScroller.scrollValue;p=m.vScroller.scrollMin;if(x===undefined){x=p}if(Math.abs(x-p)<0.001||!t.vScrolling){r.addClass(m.wijCSS.stateDisabled)}else{r.removeClass(m.wijCSS.stateDisabled)}if(Math.abs(x-B)<0.001||!t.vScrolling){A.addClass(m.wijCSS.stateDisabled)}else{A.removeClass(m.wijCSS.stateDisabled)}}},_clearInterval:function(){var n=this._fields(),m=n.internalFuncID;if(m>0){window.clearInterval(m);n.internalFuncID=-1}},_elementMouseOut:function(n){var o=e(n.currentTarget),m=n.data;o.unbind("mouseout",m._elementMouseOut);o.unbind("mousedown",m._elementMouseDown);o.unbind("mouseup",m._elementMouseUp);o.removeClass(m.options.wijCSS.stateHover)},_getScrollOffset:function(s){var o=e(s),t,w,y,u,q,p,v,m,r,n,x={left:null,top:null};if(o.length===0){return x}t=this._fields();w=t.contentWrapper;y=t.templateWrapper;u=o.offset();q=y.offset();u.leftWidth=u.left+o.outerWidth();u.topHeight=u.top+o.outerHeight();p=w.offset();p.leftWidth=p.left+w.outerWidth();p.topHeight=p.top+w.outerHeight();r=u.left-q.left;if(u.left<p.left){x.left=r}else{if(u.leftWidth>p.leftWidth){n=u.leftWidth-q.left-w.innerWidth();if(r<n){x.left=r}else{x.left=n}}}v=u.top-q.top;if(u.top<p.top){x.top=v}else{if(u.topHeight>p.topHeight){m=u.topHeight-q.top-w.innerHeight();if(v<m){x.top=v}else{x.top=m}}}return x},_scrollDrag:function(r,u,q,m){var E=this,p=E.options,C=r==="v",x=C?p.vScroller:p.hScroller,s=x.scrollMin,z=x.scrollMax,w=x.scrollValue===undefined?s:(x.scrollValue-s),y=E._getLargeChange(r),A=z-s-y+1,D=-1,n,t,B;if(w>A){w=A}if(u!==undefined){n=E._getTrackLen(r);t=q[C?"outerHeight":"outerWidth"]();B=E._getScrollContainerPadding(C?"top":"left");D=(w/A)*(n-t)+B}if(D>=0){q.css(C?"top":"left",D+"px")}E._scrollEnd(m,E,r)},needToScroll:function(m){var n=this._getScrollOffset(m);return n.top!==null||n.left!==null},scrollChildIntoView:function(m){var p=this._getScrollOffset(m),o=p.left,n=p.top;if(o!==null){this.hScrollTo(o)}if(n!==null){this.vScrollTo(n)}},hScrollTo:function(m){var n=this.options;n.hScroller.scrollValue=this.scrollPxToValue(m,"h");this._setDragAndContentPosition(true,true,"h","nonestop")},vScrollTo:function(n){var m=this.options;m.vScroller.scrollValue=this.scrollPxToValue(n,"v");this._setDragAndContentPosition(true,true,"v","nonestop")},scrollPxToValue:function(z,p){var n=this.options,q=(p==="h"?"outerWidth":"outerHeight"),B=(p==="h"?"contentWidth":"contentHeight"),s=(p==="h"?"hScroller":"vScroller"),t=this._fields(),A=t.contentWrapper,D=t[B],y=A[q](),v=n[s].scrollMin,C=n[s].scrollMax,r=C-v,x=(p==="h"?this._getHScrollBarLargeChange():this._getVScrollBarLargeChange()),w=r-x+1,u=w*(z/(D-y));if(u<v){u=v}if(u>w){u=w}return u},scrollTo:function(m,n){this.hScrollTo(m);this.vScrollTo(n)},refresh:function(){this.paintPanel()},paintPanel:function(n){var m=this,r=m.element,s,t,q,p;if(r.is(":visible")){s=typeof document.activeElement!="unknown"?document.activeElement:undefined;t=m.options;q=m._fields();if(!q.initialized){m._initialize(q,r,m)}m._resetLargeChange(m,q,t);m._bindElementEvents(m,q,r,t);p=q.templateWrapper;p.css({"float":"left",left:"0px",top:"0px",width:"auto",height:"auto"});p.hide();p.show();q.contentWidth=p.width();q.contentHeight=p.height();p.css("float","");m._setRounder(m,r);m._setInnerElementsSize(q,r);if(m._testScroll(m,q,t)===false){return false}m._initScrollBars(m,q,t);m._initScrollButtons(m,q,t);m._trigger("painted");m._paintedMark={date:new Date(),mainWidth:r[0].offsetWidth,mainHeight:r[0].offsetHeight,width:q.contentWidth,height:q.contentWidth};if(s!==undefined&&!n){e(s).focus()}return true}return false},_resetLargeChange:function(m,p,q){var n;if(m._autoVLarge){q.vScroller.scrollLargeChange=null}if(m._autoHLarge){q.hScroller.scrollLargeChange=null}p.vTrackLen=undefined;p.hTrackLen=undefined;if(p.vbarContainer){n=p.vbarContainer.children("."+a+":eq(0)");n.detach();p.vbarContainer.remove();p.vbarContainer=undefined}if(p.hbarContainer){n=p.hbarContainer.children("."+a+":eq(0)");n.detach();p.hbarContainer.remove();p.hbarContainer=undefined}},_initialize:function(p,o,n){var q=n.options.wijCSS;p.initialized=true;o.addClass(["wijmo-wijsuperpanel",q.widget,q.content].join(" "));p.oldHeight=o.css("height");var m=o.css("overflow");o.css("overflow","");o.height(o.height());o.css("overflow",m);n._createAdditionalDom(n,p,o)},getContentElement:function(){return this._fields().templateWrapper},_setButtonPosition:function(B,n,t,p,v,u,m){var s=p==="h",z="mouseover."+B.widgetName,C=s?"buttonLeft":"buttonTop",y=s?"buttonRight":"buttonBottom",q=u[C],A=u[y],r,w,x;if(B._hasMode(t,"buttons")||B._hasMode(t,"buttonshover")){r=s?h:k;if(q===undefined){w=e(r).appendTo(m);w.bind(z,B,B._scrollButtonMouseOver);u[C]=q=m.children(s?".wijmo-wijsuperpanel-buttonleft":".wijmo-wijsuperpanel-buttontop");u[y]=A=m.children(s?".wijmo-wijsuperpanel-buttonright":".wijmo-wijsuperpanel-buttonbottom")}x={my:s?"left":"top",of:v,at:s?"left":"top",collision:"none"};e.extend(x,t.decreaseButtonPosition);q.position(x);x={my:s?"right":"bottom",of:v,at:s?"right":"bottom",collision:"none"};e.extend(x,t.increaseButtonPosition);A.position(x)}else{if(q!==undefined){q.remove();A.remove();u[C]=u[y]=undefined}}},_initScrollButtons:function(n,q,r){var m=q.contentWrapper,p=q.stateContainer;n._setButtonPosition(n,r,r.hScroller,"h",m,q,p);n._setButtonPosition(n,r,r.vScroller,"v",m,q,p)},_getVScrollBarSmallChange:function(){var n=this.options,m;if(!n.vScroller.scrollSmallChange){m=this._getVScrollBarLargeChange();n.vScroller.scrollSmallChange=m/2}return n.vScroller.scrollSmallChange},_getVScrollBarLargeChange:function(){return this._getLargeChange("v")},_getLargeChange:function(q){var E=this,p=E.options,x=E._fields(),D=q==="v",w=D?p.vScroller:p.hScroller,y=D?"innerHeight":"innerWidth",t=D?"contentHeight":"contentWidth",u=D?"_autoVLarge":"_autoHLarge",B,s,n,A,m,r,z,C;if(w.scrollLargeChange){return w.scrollLargeChange}B=w.scrollMax;s=w.scrollMin;n=B-s;A=x.contentWrapper;m=A[y]();r=x[t];z=m/(r-m);C=((n+1)*z)/(1+z);if(isNaN(C)){C=0}w.scrollLargeChange=C;E[u]=true;return w.scrollLargeChange},_getHScrollBarSmallChange:function(){var n=this.options,m;if(!n.hScroller.scrollSmallChange){m=this._getHScrollBarLargeChange();n.hScroller.scrollSmallChange=m/2}return n.hScroller.scrollSmallChange},_getHScrollBarLargeChange:function(){return this._getLargeChange("h")},_initScrollBars:function(C,H,E){var v=E.hScroller,z=v.scrollMax,x=v.scrollMin,y=z-x,p=E.vScroller,D=p.scrollMax,B=p.scrollMin,s=D-B,r=H.hbarDrag,G=H.vbarDrag,n,F,u,J,I,w,q,A,m,t;if(C.hNeedScrollBar&&r.is(":visible")){n=C._getHScrollBarLargeChange();F=C._getTrackLen("h");u=C._getDragLength(y,n,F,E.hScroller.scrollMinDragLength);r.width(u);J=r.outerWidth(true)-r.width();r.width(u-J);I=r.children("span");I.css("margin-left",(r.width()-I[0].offsetWidth)/2);if(F<=r.outerWidth(true)){r.hide()}else{r.show()}if(C._isDragging==true){e(document).trigger("mouseup");C._isDragging=false}}if(C.vNeedScrollBar&&G.is(":visible")){w=C._getVScrollBarLargeChange();q=C._getTrackLen("v");A=C._getDragLength(s,w,q,E.vScroller.scrollMinDragLength);G.height(A);m=G.outerHeight(true)-G.height();G.height(A-m);t=G.children("span");t.css("margin-top",(G.height()-t[0].offsetHeight)/2);if(q<=G.outerHeight(true)){G.hide()}else{G.show()}if(C._isDragging==true){e(document).trigger("mouseup");C._isDragging=false}}C._setDragAndContentPosition(false,false,"both")},_getTrackLen:function(p){var o=this,r=o._fields(),q=p+"TrackLen",n,t,m,s;if(r[q]!==undefined){return r[q]}n=r.hbarContainer;t=r.vbarContainer;m=0;s=0;if(p==="h"){s=o._getScrollContainerPadding("h");m=n.innerWidth()}if(p==="v"){s=o._getScrollContainerPadding("v");m=t.innerHeight()}r[q]=(m-s);return r[q]},_getScrollContainerPadding:function(m){var o=this,q=o._fields(),r=0,n,p;if(m==="h"){r=o._getScrollContainerPadding("left")+o._getScrollContainerPadding("right")}else{if(m==="v"){r=o._getScrollContainerPadding("top")+o._getScrollContainerPadding("bottom")}else{if(m==="left"||m==="right"){n=q.hbarContainer}else{n=q.vbarContainer}p=m+"Padding";if(q[p]!==undefined){r=q[p];return r}if(n&&n.css){r=parseFloat(n.css("padding-"+m))}q[p]=r}}return r},_triggerScroll:function(m,n,p){var o={position:m,dir:n,animationOptions:p};this._trigger("scroll",null,o)},_contentDragAnimate:function(Y,L,R,A,G,t,u){var y=this,U=y.options,Q=Y==="v",E=Q?U.vScroller:U.hScroller,P=Q?"outerHeight":"outerWidth",M=Q?"innerHeight":"innerWidth",J=Q?"contentHeight":"contentWidth",w=Q?"top":"left",D=E.scrollMin,V=E.scrollMax,N=V-D,z=E.scrollValue===undefined?D:(E.scrollValue-D),S=y._getLargeChange(Y),I=N-S+1,X=y._fields(),n=X.contentWrapper,x=X.templateWrapper,K,s,H,q,T,W,p,m,B,O,C,F;if(z>I){z=I}K=(X[J]-n[M]())*(z/I);if(Math.abs(K)<0.001){K=0}K=Math.round(K);s=-1;if(R!==undefined){if(L&&A.is(":animated")&&G!=="nonestop"){A.stop(true,false)}H=y._getTrackLen(Y);q=A[P](true);T=H-q;W=y._getScrollContainerPadding(w);s=(z/I)*T+W}if(L&&U.animationOptions&&!U.animationOptions.disabled){if(s>=0&&u!=="dragging"){p=e.extend({},U.animationOptions);p.complete=undefined;if(Q){m={top:s}}else{m={left:s}}A.animate(m,p)}B=e.extend({},U.animationOptions);O=U.animationOptions.complete;B.complete=function(){y._scrollEnd(t,y,Y);if(e.isFunction(O)){O(arguments)}};if(L&&x.is(":animated")&&G!=="nonestop"){x.stop(true,false)}if(Q){C={top:-K}}else{C={left:-K}}if(!U.customScrolling){x.animate(C,B)}else{y._scrollEnd(t,y,Y,z)}y._triggerScroll(K,Y,B)}else{F=Q?"top":"left";if(s>=0&&u!=="dragging"){A[0].style[F]=s+"px"}if(!U.customScrolling){x[0].style[F]=-K+"px"}y._triggerScroll(K,Y);y._scrollEnd(t,y,Y,z)}},_setDragAndContentPosition:function(m,p,o,u,v){var w=this,r=w._fields(),q=r.hbarContainer,n=r.hbarDrag,t=r.vbarContainer,s=r.vbarDrag;if((o==="both"||o==="h")&&r.hScrolling){w._contentDragAnimate("h",p,q,n,u,m,v)}if((o==="both"||o==="v")&&r.vScrolling){w._contentDragAnimate("v",p,t,s,u,m,v)}if(r.intervalID>0){window.clearInterval(r.intervalID)}r.intervalID=window.setInterval(function(){w._disableButtonIfNeeded(w)},500)},_scrolling:function(n,m,p){var o=true;if(n){p.beforePosition=m.getContentElement().position();m._beforePosition=p.beforePosition;o=m._trigger("scrolling",null,p);m.customScroll=p.customScroll}return o},_scrollEnd:function(o,m,n,p){if(o){window.setTimeout(function(){var q=m.getContentElement(),s,r;if(!q.is(":visible")){return}s=m.getContentElement().position();r={dir:n,beforePosition:m._beforePosition,afterPosition:s};if(!isNaN(p)){r.newValue=p}m._trigger("scrolled",null,r)},0)}},_getDragLength:function(p,m,n,q){var s=p/m,r=n/s,o=q;if(r<o){r=o}else{if((r+1)>=n){r=n-1}}return Math.round(r)},_needScrollbar:function(n,o){var m=this._hasMode(n,"scrollbar"),p=n.scrollBarVisibility,q=m&&(p==="visible"||(p==="auto"&&o));return q},_bindBarEvent:function(o,p,n){var m=this;o.bind("mouseover."+m.widgetName,m,m._scrollerMouseOver);if(!e.fn.draggable){return}p.draggable({axis:n==="h"?"x":"y",start:function(r,q){m._isDragging=true},drag:function(r,q){m._dragging(r,q,m)},containment:"parent",stop:function(q){m._dragStop(q,m,n);e(q.target).removeClass(d);m._isDragging=false}})},_createBarIfNeeded:function(z,r,p,u,w){if(z){var A=this,s,v=A._fields(),o=p+"barContainer",q=p+"barDrag",t=p==="h",m=w[t?"innerHeight":"innerWidth"](),y=v[o]=e(u),n,x;r.append(y);n=y[0][t?"offsetHeight":"offsetWidth"];m=m-n;s={direction:t?"horizontal":"vertical",targetBarLen:n,contentLength:m};if(A._trigger(t?"hScrollerActivating":"vScrollerActivating",null,s)===false){return false}x=v[q]=y.find("."+a);A._bindBarEvent(y,x,p);w[t?"height":"width"](m)}},_setScrollbarPosition:function(o,y,B,n,z,t,m,F,H,A,x){var p=A==="h",v,G,r,w,E,u,D,C,s,q=y.options.wijCSS;if(t){v=n[0][p?"offsetHeight":"offsetWidth"];G=y._getScrollContainerPadding(A);r=p?"top":"left";w=p?{top:"0px",bottom:"auto",left:"auto",right:"auto"}:{left:"0px",right:"auto",top:"auto",bottom:"auto"};E=p?{top:v+"px",left:null}:{left:v+"px"};u=p?{top:"auto",right:"auto",left:"auto",bottom:"0px"}:{left:"auto",right:"0px",top:"auto",bottom:"auto"};D=p?{top:"",left:null}:{left:""};C=B[p?"innerWidth":"innerHeight"]();if(F===r){n.css(w);B.css(E);if(p){n.children(".wijmo-wijsuperpanel-hbar-buttonleft").removeClass(q.cornerBL).addClass(q.cornerTL);n.children(".wijmo-wijsuperpanel-hbar-buttonright").removeClass(q.cornerBR).addClass(q.cornerTR);n.removeClass(q.cornerBottom).addClass(q.cornerTop)}else{n.children(".wijmo-wijsuperpanel-vbar-buttontop").removeClass(q.cornerTR).addClass(q.cornerTL);n.children(".wijmo-wijsuperpanel-vbar-buttonbottom").removeClass(q.cornerBR).addClass(q.cornerBL);n.removeClass(q.cornerRight).addClass(q.cornerLeft)}}else{n.css(u);B.css(D);if(p){n.children(".wijmo-wijsuperpanel-hbar-buttonleft").removeClass(q.cornerTL).addClass(q.cornerBL);n.children(".wijmo-wijsuperpanel-hbar-buttonright").removeClass(q.cornerBL).addClass(q.cornerBR);n.removeClass(q.cornerTop).addClass(q.cornerBottom)}else{n.children(".wijmo-wijsuperpanel-vbar-buttontop").removeClass(q.cornerTL).addClass(q.cornerTR);n.children(".wijmo-wijsuperpanel-vbar-buttonbottom").removeClass(q.cornerBL).addClass(q.cornerBR);n.removeClass(q.cornerLeft).addClass(q.cornerRight)}}s=0;if(m){s=z[0][p?"offsetWidth":"offsetHeight"];if(H==="left"){n.css("right","0px")}else{if(H==="right"){n.css("left","0px")}else{if(H==="top"){n.css("bottom","0px")}else{if(H==="bottom"){n.css("top","0px")}}}}}if(!p&&m){s=0}n[p?"width":"height"](C-G);y._enableDisableScrollBar(A,n,!x)}else{o.css(p?"left":"top","")}},_testScroll:function(C,v,q){var n=v.templateWrapper,w=v.contentWrapper,t=v.stateContainer,m=w.innerWidth(),A=w.innerHeight(),s=v.contentWidth,r=v.contentHeight,z,B,u,x,y,p;v.hScrolling=s>m;v.vScrolling=r>A;z=C.hNeedScrollBar=C._needScrollbar(q.hScroller,v.hScrolling);if(C._createBarIfNeeded(z,t,"h",c,w)===false){return false}if(z&&!v.vScrolling){n.css("float","left");v.contentHeight=n.height();v.vScrolling=v.contentHeight>(A-v.hbarContainer[0].offsetHeight);n.css("float","")}B=C.vNeedScrollBar=C._needScrollbar(q.vScroller,v.vScrolling);if(C._createBarIfNeeded(B,t,"v",i,w)===false){return false}if(B&&!v.hScrolling){n.css("float","left");v.contentWidth=n.width();v.hScrolling=v.contentWidth>(m-v.vbarContainer[0].offsetWidth);n.css("float","");if(v.hScrolling&&!z){z=C.hNeedScrollBar=C._needScrollbar(q.hScroller,v.hScrolling);if(C._createBarIfNeeded(z,t,"h",c,w)===false){return false}}}u=v.hbarContainer;x=v.vbarContainer;y=q.hScroller.scrollBarPosition;p=q.vScroller.scrollBarPosition;C._setScrollbarPosition(n,C,w,u,x,z,B,y,p,"h",v.hScrolling);C._setScrollbarPosition(n,C,w,x,u,B,z,p,y,"v",v.vScrolling)},_enableDisableScrollBar:function(n,p,m){var q=this.options;if(n==="v"){p[m?"addClass":"removeClass"]("wijmo-wijsuperpanel-vbarcontainer-disabled");p.find("."+q.wijCSS.stateDefault)[m?"addClass":"removeClass"](q.wijCSS.stateDisabled)}else{if(n==="h"){p[m?"addClass":"removeClass"]("wijmo-wijsuperpanel-hbarcontainer-disabled");p.find("."+q.wijCSS.stateDefault)[m?"addClass":"removeClass"](q.wijCSS.stateDisabled)}}p.children("."+a)[m?"hide":"show"]()},_initResizer:function(){var n=this,r=n.options,p=n._fields(),s=p.resizer,m,q;if(!e.fn.resizable){return}if(!s&&r.allowResize){m=r.resizableOptions;q=m.stop;m.stop=function(o){n._resizeStop(o,n);if(e.isFunction(q)){q(o)}};p.resizer=s=n.element.resizable(m)}if(!r.allowResize&&p.resizer){s.resizable("destroy");p.resizer=null}},_resizeStop:function(n,m){if(!this.options.autoRefresh){m.paintPanel(true)}m._trigger("resized")},_createAdditionalDom:function(n,p,o){if(!o.attr("tabindex")){o.attr("tabindex","-1");p.tabindex=true}var m=p.stateContainer=e(b),q;p.contentWrapper=m.children();q=p.templateWrapper=p.contentWrapper.children();o.contents().each(function(r,s){var t=e(s);if(t.hasClass("wijmo-wijsuperpanel-header")){p.header=t;return}if(t.hasClass("wijmo-wijsuperpanel-footer")){p.footer=t;return}q[0].appendChild(s)});if(p.header!==undefined){o.prepend(p.header)}o[0].appendChild(m[0]);if(p.footer!==undefined){p.footer.insertAfter(m)}},_setRounder:function(m,r){if(this.options.showRounder){r.addClass(this.options.wijCSS.cornerAll);if(m._rounderAdded){return}if(e.browser.msie){return}var p,o,q,n;p=o="";if(e.browser.webkit){o="WebkitBorderTopLeftRadius";p="WebkitBorderRadius"}else{if(e.browser.mozilla){o="MozBorderRadiusBottomleft";p="MozBorderRadius"}else{o="border-top-left-radius";p="border-radius"}}q=r.css(o);n=parseInt(q,10);r.css(p,n+1);m._rounderAdded=true;m._radiusKey=p}else{r.removeClass(this.options.wijCSS.cornerAll)}},_setInnerElementsSize:function(p,u){var m=p.stateContainer,q=p.contentWrapper,t=0,n,o,s,r;if(p.header!==undefined){t+=p.header.outerHeight()}if(p.footer!==undefined){t+=p.footer.outerHeight()}n=m[0].style;o=u.innerHeight()-t;s=u.innerWidth();n.display="none";n.height=o+"px";n.width=s+"px";r=q[0].style;r.height=o+"px";r.width=s+"px";n.display=""}});f.prototype.options=e.extend(true,{},g.wijmoWidget.prototype.options,{wijMobileCSS:{header:"ui-header ui-bar-a",content:"ui-body-c",stateDefault:"ui-btn-up-c",stateHover:"ui-btn-down-c",stateActive:"ui-btn-down-c"},initSelector:":jqmData(role='wijsuperpanel')",allowResize:false,autoRefresh:false,animationOptions:{queue:false,disabled:false,duration:250,easing:undefined},hScrollerActivating:null,hScroller:{scrollBarPosition:"bottom",scrollBarVisibility:"auto",scrollMode:"scrollBar",scrollValue:null,scrollMax:100,scrollMin:0,scrollLargeChange:null,scrollSmallChange:null,scrollMinDragLength:6,increaseButtonPosition:null,decreaseButtonPosition:null,hoverEdgeSpan:20,firstStepChangeFix:0},keyboardSupport:false,keyDownInterval:100,mouseWheelSupport:true,bubbleScrollingEvent:true,resizableOptions:{handles:"all",helper:"ui-widget-content wijmo-wijsuperpanel-helper"},resized:null,dragStop:null,painted:null,scrolling:null,scroll:null,scrolled:null,showRounder:true,vScrollerActivating:null,vScroller:{scrollBarPosition:"right",scrollBarVisibility:"auto",scrollMode:"scrollBar",scrollValue:null,scrollMax:100,scrollMin:0,scrollLargeChange:null,scrollSmallChange:null,scrollMinDragLength:6,increaseButtonPosition:null,decreaseButtonPosition:null,hoverEdgeSpan:20,firstStepChangeFix:0},customScrolling:false,listenContentScroll:false});e.wijmo.registerWidget("wijsuperpanel",f.prototype)}else{var a="wijmo-wijsuperpanel-handle",b="<div class='wijmo-wijsuperpanel-statecontainer'><div class='wijmo-wijsuperpanel-contentwrapper-touch'></div></div>";f.prototype=e.extend(true,{},e.Widget.prototype,{widgetEventPrefix:"wijsuperpanel",_setOption:function(n,q){var m=this,r=m.options,p=m._fields();if(n==="animationOptions"||n==="resizableOptions"){q=e.extend(r[n],q)}else{if(n==="hScroller"||n==="vScroller"){q=e.extend(r[n],q);m.refresh()}}e.Widget.prototype._setOption.apply(m,arguments);switch(n){case"allowResize":m._initResizer();break;case"disabled":m._handleDisabledOption(q,m.element);break;case"mouseWheelSupport":case"keyboardSupport":m._bindElementEvents(m,p,m.element,r);break}},_create:function(){var m=this,n=m.options;n.vScroller.dir="v";n.hScroller.dir="h";m._createDom();if(m.options.disabled){m.disable()}if(m.element.is(":hidden")&&m.element.wijAddVisibilityObserver){m.element.wijAddVisibilityObserver(function(){m.refresh();if(m.element.wijRemoveVisibilityObserver){m.element.wijRemoveVisibilityObserver()}},"wijsuperpanel")}},_handleDisabledOption:function(n,o){var m=this;if(n){if(!m.disabledDiv){m.disabledDiv=m._createDisabledDiv(o)}m.disabledDiv.appendTo("body")}else{if(m.disabledDiv){m.disabledDiv.remove();m.disabledDiv=null}}},_createDisabledDiv:function(o){var n=this,r=o?o:n.element,q=r.offset(),p=r.outerWidth(),m=r.outerHeight();return e("<div></div>").addClass("ui-disabled").css({"z-index":"99999",position:"absolute",width:p,height:m,left:q.left,top:q.top})},_createDom:function(){var m=this,n=m.element;m.paintPanel();m._initResizer();m._bindElementEvents()},_applyOverflow:function(m){var p={},q=this.options,n=q.hScroller.scrollBarVisibility,r=q.vScroller.scrollBarVisibility;p["overflow-x"]=n;p["overflow-y"]=r;m.css(p)},_createAdditionalDom:function(n,p,o){if(!o.attr("tabindex")){o.attr("tabindex","-1");p.tabindex=true}var m=p.stateContainer=e(b),q;n._applyOverflow(p.stateContainer);p.contentWrapper=m.children();o.contents().each(function(r,s){var t=e(s);if(t.hasClass("wijmo-wijsuperpanel-header")){p.header=t;return}if(t.hasClass("wijmo-wijsuperpanel-footer")){p.footer=t;return}p.contentWrapper[0].appendChild(s)});if(p.header!==undefined){o.prepend(p.header)}o[0].appendChild(m[0]);if(p.footer!==undefined){p.footer.insertAfter(m)}n._resetDom()},_bindElementEvents:function(){var m=this,p=m.element,q=m.options,n=m.widgetName;p.bind("scroll",function(o){m._triggerScroll()});if(q.keyboardSupport){if(m._keyboardBind===undefined){m._keyboardBind=true;p.bind("keydown."+n,m,m._panelKeyDown)}}else{p.unbind("keydown."+n,m._panelKeyDown);m._keyboardBind=undefined}if(!q.mouseWheelSupport){p.bind("mousewheel",function(o){o.stopPropagation();return false})}},_setScrollingInterval:function(q,n,m,p){var r=m.options;if(n.length>0){q.internalFuncID=window.setInterval(function(){m._doScrolling(n,m,p)},r.keyDownInterval)}},_triggerScroll:function(m,n){var o={position:m,dir:n};this._trigger("scroll",null,o)},_panelKeyDown:function(r){var p=r.data,s=p.options,n,m,q=p.getKeyCodeEnum();if(!s.keyboardSupport||s.disabled){return}n=r.shiftKey;m=r.keyCode;if(m===q.LEFT){p._doScrolling("left",p,n)}else{if(m===q.RIGHT){p._doScrolling("right",p,n)}else{if(m===q.UP){p._doScrolling("top",p,n)}else{if(m===q.DOWN){p._doScrolling("bottom",p,n)}}}}r.stopPropagation();r.preventDefault()},_doScrolling:function(n,u,t){var s,p,m,q=u._fields(),v=q.stateContainer[0],o={},r;if(n==="top"||n==="bottom"){p="v";m="scrollTop"}else{if(n==="left"||n==="right"){p="h";m="scrollLeft"}}if(t){s=u._getLargeChange(p)}else{s=u._getSmallChange(p)}r=v[m];if(n==="top"||n==="left"){o[m]=r-s}else{o[m]=r+s}u._animateTo(o)},_getLargeChange:function(q){var n=this,p=n._fields(),m,o=q=="h"?p.clientWidth:p.clientHeight;if(o){m=o}else{m=p.stateContainer[q=="h"?"width":"height"]()}return m},_getSmallChange:function(){return this._getLargeChange()/2},_setRounder:function(m,s){var r=this.options.wijCSS.cornerAll;if(this.options.showRounder){s.addClass(r);if(m._rounderAdded){return}if(e.browser.msie){return}var p,o,q,n;p=o="";if(e.browser.webkit){o="WebkitBorderTopLeftRadius";p="WebkitBorderRadius"}else{if(e.browser.mozilla){o="MozBorderRadiusBottomleft";p="MozBorderRadius"}else{o="border-top-left-radius";p="border-radius"}}q=s.css(o);n=parseInt(q,10);s.css(p,n+1);m._rounderAdded=true;m._radiusKey=p}else{s.removeClass(r)}},_initResizer:function(){var n=this,r=n.options,p=n._fields(),s=p.resizer,m,q;if(!e.fn.resizable){return}if(!s&&r.allowResize){m=r.resizableOptions;q=m.stop;m.stop=function(o){n._resetDom();n._trigger("resized");if(e.isFunction(q)){q(o)}};p.resizer=s=n.element.resizable(m)}if(!r.allowResize&&p.resizer){s.resizable("destroy");p.resizer=null}},_resetDom:function(){var n=this,s=n.options,r=n.element,q=n._fields(),p=r.width(),m=r.height();if(q.stateContainer.length){q.stateContainer.css({width:p,height:m});q.clientWidth=q.stateContainer[0].clientWidth;q.clientHeight=q.stateContainer[0].clientHeight}},_fields:function(){var m=this,o=m.element,n=m.widgetName+"-fields",p=m._fieldsStore;if(p===undefined){p={};o.data(n,p);m._fieldsStore=p}return p},_getScrollOffset:function(s){var o=e(s),t,w,u,q,p,v,m,r,n,x={left:null,top:null};if(o.length===0){return x}t=this._fields();w=t.contentWrapper;u=o.offset();u.leftWidth=u.left+o.outerWidth();u.topHeight=u.top+o.outerHeight();p=w.offset();p.leftWidth=p.left+t.clientWidth;p.topHeight=p.top+t.clientHeight;r=u.left-p.left;if(u.left<p.left){x.left=r}else{if(u.leftWidth>p.leftWidth){n=u.leftWidth-p.left-t.clientWidth;if(r<n){x.left=r}else{x.left=n}}}v=u.top-p.top;if(u.top<p.top){x.top=v}else{if(u.topHeight>p.topHeight){m=u.topHeight-p.top-t.clientHeight;if(v<m){x.top=v}else{x.top=m}}}return x},_initialize:function(o,n,m){var p=m.options.wijCSS;o.initialized=true;n.addClass(["wijmo-wijsuperpanel",p.widget,p.content].join(" "));m._setRounder(m,n);m._createAdditionalDom(m,o,n);m._trigger("painted")},_animateTo:function(s){var m=this,q=m.element,r=m.options,n=r.animationOptions,p=m._fields();p.stateContainer.animate(s,n)},destroy:function(){var m=this,q=m.element,s=m.options,p=m._fields(),n,r=s.wijCSS;if(m.disabledDiv){m.disabledDiv.remove();m.disabledDiv=null}if(p.resizer!==undefined){p.resizer.resizable("destroy")}q.unbind("."+m.widgetName);q.removeClass(["wijmo-wijsuperpanel",r.widget,r.content,r.cornerAll].join(" "));n=p.contentWrapper;n.contents().each(function(o,t){q.append(t)});p.stateContainer.remove();e.Widget.prototype.destroy.apply(m,arguments)},doScrolling:function(m,n){this._doScrolling(m,n)},paintPanel:function(n){var m=this,p=m.element,o=m._fields();if(!o.initialized){this._initialize(o,p,m)}},needToScroll:function(m){var n=this._getScrollOffset(m);return n.top!==null||n.left!==null},scrollChildIntoView:function(m){var p=this._getScrollOffset(m),o=p.left,n=p.top;this.scrollTo(o,n)},getContentElement:function(){return this._fields().contentWrapper},hScrollTo:function(m){this._animateTo({scrollLeft:m})},vScrollTo:function(m){this._animateTo({scrollTop:m})},refresh:function(){var m=this,n=m._fields();m._applyOverflow(n.stateContainer);m._resetDom()},scrollTo:function(m,n){this._animateTo({scrollTop:n,scrollLeft:m})},scrollPxToValue:function(n,m){return n}});f.prototype.options=e.extend(true,{},g.wijmoWidget.prototype.options,{wijMobileCSS:{header:"ui-header ui-bar-a",content:"ui-body-c",stateDefault:"ui-btn-up-c",stateHover:"ui-btn-down-c",stateActive:"ui-btn-down-c"},initSelector:":jqmData(role='wijsuperpanel')",allowResize:false,animationOptions:{queue:false,disabled:false,duration:250,easing:undefined},hScroller:{scrollBarVisibility:"auto",scrollValue:null,scrollMax:100,firstStepChangeFix:0,scrollMin:0,hoverEdgeSpan:20},keyboardSupport:false,keyDownInterval:100,mouseWheelSupport:true,resizableOptions:{handles:"all",helper:"ui-widget-content wijmo-wijsuperpanel-helper"},resized:null,painted:null,scroll:null,showRounder:true,vScroller:{scrollBarVisibility:"auto",scrollValue:null,scrollMax:100,scrollMin:0,firstStepChangeFix:0,hoverEdgeSpan:20}});e.wijmo.registerWidget("wijsuperpanel",f.prototype)}})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){"use strict";var t=jQuery,n="wijmenu",r=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n._itemWidgetName="wijmenuitem",n.prototype._preventEvent=function(e){e.preventDefault(),e.stopImmediatePropagation()},n.prototype._initState=function(){var e=this;e.options.items||(e.options.items=[])},n.prototype._create=function(){var e=this,r=e.options,i=r.direction,s=r.mode,o,u=e.element,a,f,l=r.disabled;t.mobile!=null?f=t.mobile.keyCode:f=t.ui.keyCode,e._initState(),window.wijmoApplyWijTouchUtilEvents&&(t=window.wijmoApplyWijTouchUtilEvents(t)),u.is(":hidden")&&u.wijAddVisibilityObserver&&u.wijAddVisibilityObserver(function(){e.refresh(),u.wijRemoveVisibilityObserver&&u.wijRemoveVisibilityObserver()},"wijmenu"),u.data("wijmomenu",t.camelCase(e.widgetFullName)),e.clickNameSpace="click.wijmenudoc"+e._newId(),u.hide(),e.cssPre="wijmo-wijmenu",e.nowIndex=9999,e.activeItem=null,e.refresh(),u.attr("tabIndex",0),e._getDisabled()&&(e.disable(),r.disabledState===!0&&(r.disabled=l)),u.bind("keydown.wijmenuEvent",function(t){if(e._getDisabled())return;s==="sliding"&&e._getSublist().stop(!0,!0);var u=e.activeItem,l,c,h=r.orientation;u?(l=u._isRoot(),a=u._getSublist()):l=!0;switch(t.keyCode){case f.PAGE_UP:e.previousPage(t),e._preventEvent(t);break;case f.PAGE_DOWN:e.nextPage(t),e._preventEvent(t);break;case f.UP:if(h==="vertical"||s==="sliding"||!l)e.previous(t),e._preventEvent(t);break;case f.DOWN:h==="vertical"||s==="sliding"||!l?(e.next(t),e._preventEvent(t)):u&&s==="flyout"&&n._hasVisibleSubMenus(u)&&a.is(":hidden")&&u._showFlyoutSubmenu(t,function(){e.activate(t,u._getFirstSelectableSubItem())});break;case f.RIGHT:h==="horizontal"&&l&&s==="flyout"?(i==="rtl"?e.previous(t):e.next(t),e._preventEvent(t)):u&&(o=u.getParent(),i==="rtl"?e._keyDownToCloseSubmenu(s,t,o):e._keyDownToOpenSubmenu(u,s,t,a));break;case f.LEFT:h==="horizontal"&&l&&s==="flyout"?(i==="rtl"?e.next(t):e.previous(t),e._preventEvent(t)):(u&&(o=u.getParent()),i==="rtl"?e._keyDownToOpenSubmenu(u,s,t,a):e._keyDownToCloseSubmenu(s,t,o));break;case f.ENTER:if(!u)return;c=u._getLink();if(s==="flyout")break;e.select(),c.is("a")&&c.attr("href")==="#"&&e._preventEvent(t);break;case f.TAB:e.next(t),e._preventEvent(t)}})},n.prototype._keyDownToOpenSubmenu=function(e,t,r,i){var s=this;t==="flyout"&&n._hasVisibleSubMenus(e)?i.is(":hidden")&&e._showFlyoutSubmenu(r,function(){s.activate(r,e._getFirstSelectableSubItem())}):t==="sliding"&&i.length>0&&e._getLink().trigger("click",e._getFirstSelectableSubItem())},n.prototype._keyDownToCloseSubmenu=function(e,n,r){var i=this,s=i.options,o;e==="flyout"?r&&(r._hideCurrentSubmenu(n),i.activate(n,r)):(s.backLink&&i._backLink&&i._backLink.is(":visible")&&i._backLink.trigger("click",function(){r&&i.activate(n,r)}),o=t("."+s.wijCSS.wijmenuBreadcrumb,i.domObject.menucontainer).find("li a"),o.length>0&&o.eq(o.length-2).trigger("click",function(){r&&i.activate(n,r)}))},n.prototype._createMenuItems=function(){var e=this,r=[],i=e.options.items.length,s=e._getSublist().children("li").length,o,u;for(o=0;o<i-s;o++)e._getSublist().append("<li>");return t(">li",e._getSublist()).each(function(i,s){var o=t(this),a=n._getMenuItemOptions(e.options,i);return u=e._createItemWidget(o,a),r.push(u),e.options.items[i]=u.options,this}),r},n.prototype._createItemWidget=function(e,r){var i=n._itemWidgetName;return t.fn[i]&&e[i](r),n._getItemWidget(e)},n.prototype._handleDisabledOption=function(e,t){var n=this;e?(n.disabledDiv||(n.disabledDiv=n._createDisabledDiv(t)),n.disabledDiv.appendTo(n.domObject.menucontainer)):n.disabledDiv&&(n.disabledDiv.remove(),n.disabledDiv=null)},n.prototype._getDisabled=function(){var e=this,t=e.options;return t.disabledState===!0||t.disabled===!0},n.prototype._createDisabledDiv=function(e){return t("<div></div>").css({"z-index":"99999",position:"absolute",width:"100%",height:"100%",left:0,top:0})},n.prototype._innerDestroy=function(){var e=this,t=e.options;e.destroying=!0,e[t.mode==="flyout"?"_killFlyout":"_killDrilldown"](),e._killMenuItems(),e._killtrigger(),e._killElement(),e.destroying=!1},n.prototype.destroy=function(){var t=this;this._innerDestroy(),t.disabledDiv&&(t.disabledDiv.remove(),t.disabledDiv=null),e.prototype.destroy.call(this)},n.prototype.activate=function(e,t){if(!t)return;var r=this,i=r.options,s=r.domObject.scrollcontainer,o,u,a=!1,f=!0;o=(t.jquery?t:t.element).eq(0);if(r.activeItem&&r.activeItem.element.get(0)===o.get(0))return;r.deactivate(e),r.activeItem=n._getItemWidget(o),u=o.children(":first"),r._trigger("focus",e,{item:r.activeItem}),r.options.mode==="sliding"&&(f=o.parent().is("."+i.wijCSS.wijmenuCurrent),a=f&&r._hasScroll()&&s.wijsuperpanel("needToScroll",o),a&&(r._linkContainer.link=u,r._linkContainer.needToFocus=!0,s.wijsuperpanel("scrollChildIntoView",o))),u.addClass(i.wijCSS.stateFocus).end(),r.element.removeAttr("aria-activedescendant"),r.element.attr("aria-activedescendant",o.attr("id")),f&&!a&&u.is("a")&&u.focus()},n.prototype.deactivate=function(e){var t=this,n=t.options,r=t.activeItem;if(!r)return;setTimeout(function(){r._getLink().removeClass(n.wijCSS.stateFocus).removeAttr("id"),t._trigger("blur")},0),t.activeItem=null},n.prototype.next=function(e){this._move("next",function(e){return e._getFirstSelectableSubItem()},e)},n.prototype.previous=function(e){this._move("previous",function(e){return e._getLastSelectableSubItem()},e)},n.prototype.first=function(){var e=this,t,n,r;return e.activeItem?(t=e._getActiveItemElement(),n=e.activeItem._getParentOrMenu(),r=n._getFirstSelectableSubItem(),r&&t[0]===r.element[0]):!1},n.prototype.last=function(){var e=this,t,n,r;return e.activeItem?(t=e._getActiveItemElement(),n=e.activeItem._getParentOrMenu(),r=n._getLastSelectableSubItem(),r&&t[0]===r.element[0]):!1},n.prototype.nextPage=function(e){var r=this,i=r._getActiveItemElement(),s,o,u,a,f;i?a=r.activeItem._getParentOrMenu():(a=r,i=r._getFirstSelectableSubItem());if(r.options.mode==="sliding"&&r._hasScroll()){if(!i||r.last()){r.activate(e,a._getFirstSelectableSubItem());return}s=i.offset().top,o=r.options.maxHeight,u=n._getSelectableSubItems(a,function(e){var n=t(e.element),r=o-(n.offset().top-s+n.height()),i=n.height();return r<i&&r>-i}),u.length?u=u[u.length-1]:u=a._getLastSelectableSubItem(),r.activate(e,u)}else!i||r.last()?f=a._getFirstSelectableSubItem():f=a._getLastSelectableSubItem(),r.activate(e,f)},n.prototype.previousPage=function(e){var r=this,i=r._getActiveItemElement(),s,o,u,a,f;i?a=r.activeItem._getParentOrMenu():(a=r,i=r._getFirstSelectableSubItem());if(r.options.mode==="sliding"&&r._hasScroll()){if(!i||r.first()){r.activate(e,a._getLastSelectableSubItem());return}s=i.offset().top,o=r.options.maxHeight,u=n._getSelectableSubItems(a,function(e){var n=t(e.element),r=n.offset().top-s+o-n.height(),i=n.height();return r<i&&r>-i}),u.length?u=u[0]:u=a._getFirstSelectableSubItem(),r.activate(e,u)}else!i||r.first()?f=a._getLastSelectableSubItem():f=a._getFirstSelectableSubItem(),r.activate(e,f)},n.prototype.select=function(e){var t=this,n=t.activeItem,r;t._trigger("select",e,{item:n}),t.options.checkable&&(r=!n.options.selected,n._setOption("selected",r))},n.prototype._getActiveItemElement=function(){return this.activeItem?this.activeItem.element:null},n.prototype.setItemDisabled=function(e,n){var r=t(e,this.element),i=this.options;r.find("."+i.wijCSS.wijmenuItem+">a").attr("disabled",n),r.find(">a").toggleClass(i.wijCSS.stateDisabled,n)},n.prototype._setOption=function(e,t){var n=this;if(n.destroying)return;n["_set_"+e]&&n["_set_"+e](t),n.options[e]=t,e==="disabled"&&n._handleDisabledOption(t,n.domObject.menucontainer)},n.prototype._set_items=function(e){var t=this;t._getSublist().children().remove(),t.options.items=e,t.refresh()},n.prototype._set_mode=function(e){var t=this;t._innerDestroy(),t.options.mode=e,t.refresh()},n.prototype._set_backLink=function(e){var n=this,r=n.options,i;this.options.backLink=e,n.options.mode==="sliding"&&(n._killDrilldown(),n._drilldown(),i=t("."+r.wijCSS.wijmenuBreadcrumb,n.domObject.menucontainer),n._resetDrilldownMenu(i))},n.prototype._set_direction=function(e){var t=this;t._innerDestroy(),t.refresh()},n.prototype._set_orientation=function(e){var n=this,r=n.domObject.menucontainer,i=n.options.direction,s="ui-icon-triangle-1-",o=i==="rtl"?"w":"e",u=e==="horizontal"?o:"s",a=e==="horizontal"?"s":o;r.removeClass(n.cssPre+"-vertical "+n.cssPre+"-horizontal"),n.options.mode==="flyout"?(r.addClass(n.cssPre+"-"+e),t.each(n.getItems(),function(e,t){if(t.getItems().length===0)return;t._getLink().find("."+s+u).removeClass(s+u+" "+s+a).addClass(s+a)})):r.addClass(n.cssPre+"-vertical")},n.prototype._getTriggerEle=function(){return n._getOuterElement(this.options.trigger,"."+this.options.wijCSS.wijmenu)},n.prototype._set_triggerEvent=function(e){var t=this,n=t.options,r=t._getTriggerEle();t._killtrigger(),n.triggerEvent=e,r.length>0&&t._initTrigger(r),n.mode==="flyout"&&(t._killFlyout(),t._flyout())},n.prototype._set_trigger=function(e){var t=this,n=t.options,r;t._killtrigger(),n.trigger=e,r=t._getTriggerEle(),r.length>0&&t._initTrigger(r),n.mode==="flyout"&&(t._killFlyout(),t._flyout())},n.prototype._initTrigger=function(e){var n=this.options,r=n.triggerEvent,i=this,s=i.domObject.menucontainer,o=".wijmenuEvent";e.is("iframe")&&(e=t(e.get(0).contentWindow.document));switch(r){case"click":e.bind(r+o,function(e){n.mode!=="popup"&&i._displayMenu(e),e.stopPropagation()});break;case"mouseenter":e.bind(r+o,function(e){i._displayMenu(e),e.stopPropagation()});break;case"dblclick":e.bind(r+o,function(e){i._displayMenu(e),e.stopPropagation()});break;case"rtclick":e.bind("contextmenu"+o,function(e){s.hide(),i._displayMenu(e),e.preventDefault(),e.stopPropagation()})}},n.prototype._killtrigger=function(){var e=this.options,n;e.trigger!==""&&(n=t(e.trigger),n.is("iframe")&&(n=t(n.get(0).contentWindow.document)),n&&n.length>0&&n.unbind(".wijmenuEvent").unbind("wijmenuEvent"))},n.prototype._move=function(e,t,r){var i=this,s=i._getActiveItemElement(),o,u,a;if(!s||!s.length){i.activate(r,t(i));return}a=n._getItemWidget(s),o=a[e](),u=a._getParentOrMenu(),o?i.activate(r,o):i.activate(r,t(u))},n.prototype.refresh=function(){var e=this,n=e.element,r=e.options,i=r.direction,s,o,u,a,f;e.domObject&&e._innerDestroy();if(n.is("ul"))e._rootMenu=n,s=n.wrap("<div></div>").parent(),o=s.wrap("<div></div>").parent();else{if(!n.is("div"))return;e._rootMenu=t("ul:first",n),s=n,o=n.wrap("<div></div>").parent()}i==="rtl"&&e._rootMenu.addClass(r.wijCSS.wijmenuRtl),s.addClass("scrollcontainer checkablesupport"),o.addClass(r.wijCSS.widget).addClass(r.wijCSS.header).addClass(r.wijCSS.wijmenu).addClass(r.wijCSS.cornerAll).addClass(r.wijCSS.helperClearFix).attr("aria-activedescendant",r.wijCSS.activeMenuitem),r.orientation==="horizontal"&&r.mode==="flyout"&&o.addClass(r.wijCSS.wijmenuHorizontal),u={scrollcontainer:s,menucontainer:o},e.domObject=u,e._getSublist().data("topmenu",!0),e._getSublist().hasClass(r.wijCSS.wijmenuList)||e._getSublist().addClass(r.wijCSS.wijmenuList).addClass(r.wijCSS.helperReset),e._items=e._createMenuItems(),n.show(),n.delegate("li>."+r.wijCSS.wijmenuLink,"mouseenter.wijmenuEvent",function(){var n=t(this).hasClass(r.wijCSS.stateDisabled);if(e._getDisabled()||n)return;t(this).addClass(r.wijCSS.stateHover)}).delegate("li>."+r.wijCSS.wijmenuLink,"mouseleave.wijmenuEvent",function(){var n=t(this).hasClass(r.wijCSS.stateDisabled);if(e._getDisabled()||n)return;t(this).removeClass(r.wijCSS.stateHover),t(this).data("subMenuOpened")&&t(this).addClass(r.wijCSS.stateActive)}),this[r.mode==="flyout"?"_flyout":"_drilldown"](),r.trigger!==""&&(a=e._getTriggerEle(),a.length>0&&(o.hide(),e._initTrigger(a))),t(document).bind(e.clickNameSpace,function(n){var i=r.trigger;if(t(n.target).parent().is("."+r.wijCSS.wijmenuAllLists))return;if(t(n.target).closest(r.trigger).is(r.trigger))return;var s=t(n.target).closest("."+r.wijCSS.wijmenu);if(s.length===0){if(r.mode==="sliding"){f=t("."+r.wijCSS.wijmenuBreadcrumb,o);if(r.trigger==="")return;e._resetDrilldownMenu(f)}else if(r.mode==="flyout"&&r.triggerEvent!=="mouseenter"){e._hideAllMenus(n);return}a&&a.length>0&&e._hideMenu(n)}})},n.prototype._flyout=function(){var e=this.domObject.menucontainer,n=this.options,r=this.getItems();e.attr("role","menu"),n.orientation==="horizontal"&&e.attr("role","menubar"),t.each(r,function(e,t){t._flyout()})},n.prototype._hideAllMenus=function(e){var n=this,r,i,s=function(n){n.getItems().length>0&&(t.each(n.getItems(),function(e,t){s(t)}),n._hideSubmenu(!1,e))};t.each(n._items,function(e,t){s(t)});if(n.options.trigger!==""){r=n.domObject.menucontainer;if(r.data("isAnimated"))return;i=n._getTriggerEle();if(i.length===0)return;n._hideMenu(e)}},n.prototype.hideAllMenus=function(e){this._hideAllMenus(e)},n.prototype._killFlyout=function(){t.each(this.getItems(),function(){this._killFlyout()})},n.prototype._killElement=function(){var e=this,n=e.options,r=e._getSublist();r.removeClass(n.wijCSS.wijmenuList).removeClass(n.wijCSS.helperReset).removeClass(n.wijCSS.wijmenuContent).removeClass(n.wijCSS.helperClearFix),t(document).unbind(e.clickNameSpace),e.element.is("ul")?e.element.unwrap().unwrap():e.element.unwrap(),e.domObject=null,e.element.removeData("topmenu").removeData("firstLeftValue").removeData("domObject"),r.undelegate(".wijmenuEvent")},n.prototype._killMenuItems=function(){var e=this,t=e.getItems(),n;for(n=t.length-1;n>=0;n--)t[n].destroy(!0);e._items.length=0},n.prototype._sroll=function(){var e=this.domObject.scrollcontainer,n=t.extend({hScroller:{scrollBarVisibility:"hidden"}},this.options.superPanelOptions);e.height(this.options.maxHeight),e.wijsuperpanel(n)},n.prototype._initScrollCallback=function(){var e=this,t=e.domObject.scrollcontainer;e._linkContainer={link:null,needToFocus:!1},t.wijsuperpanel({scrolled:function(){var t=e._linkContainer.link;e._linkContainer.needToFocus&&t&&t.is("a")&&(t.focus(),e._linkContainer.needToFocus=!1)}})},n.prototype._resetScroll=function(e){var t=this,n=t._rootMenu.parent(),r=5,i=t.domObject.scrollcontainer,s=e._getSublist();n.height(s.height()),i.wijsuperpanel("option","hScroller",{scrollValue:0}),i.wijsuperpanel("option","vScroller",{scrollValue:0}),i.wijsuperpanel("paintPanel"),t._hasScroll()&&(s.prev().length>0&&(r=s.prev().css("padding-left").replace(/px/g,"")),s.width(i.find(".wijmo-wijsuperpanel-contentwrapper:first").width()-r),n.height(s.height()),i.wijsuperpanel("paintPanel"))},n.prototype._hasScroll=function(){var e=this.domObject.scrollcontainer;return e.data("wijmoWijsuperpanel").vNeedScrollBar},n.prototype._resetDrillChildMenu=function(e){var t=this.options;e.removeClass(t.wijCSS.wijmenuScroll).removeClass(t.wijCSS.wijmenuCurrent).height("auto")},n.prototype._resetDrilldownMenu=function(e,n){var r=this,i=r.options,s=r._getSublist(),o=r.domObject.menucontainer,u=t("<li>"+i.crumbDefaultText+"</li>").addClass(i.wijCSS.wijmenuBreadcrumbText),a=function(e){t.each(e,function(e,t){var n=t._getSublist(),i=t.getItems();n.hide(),r._resetDrillChildMenu(n),i.length>0&&a(i)})};t("."+i.wijCSS.wijmenuCurrent,o).removeClass(i.wijCSS.wijmenuCurrent),s.animate({left:0},i.showDuration,null,function(){a(r.getItems()),s.addClass(i.wijCSS.wijmenuCurrent),n&&n()}),t("."+i.wijCSS.wijmenuAllLists,o).find("span").remove(),e.empty().append(u),t("."+i.wijCSS.wijmenuFooter,o).empty().hide(),r._resetScroll(r)},n.prototype._drilldown=function(){var e=this,r=e._getSublist(),i=e.domObject.menucontainer.attr("role","menu"),s,o=e.options,u=o.direction,a=t("<ul></ul>").addClass(o.wijCSS.wijmenuBreadcrumb).addClass(o.wijCSS.stateDefault).addClass(o.wijCSS.cornerAll).addClass(o.wijCSS.helperClearFix),f=t("<li>"+o.crumbDefaultText+"</li>").addClass(o.wijCSS.wijmenuBreadcrumbText),l=t('<li><a href="#">'+o.topLinkText+"</a></li>").addClass(o.wijCSS.wijmenuAllLists);r.wrap("<div>").parent().css("position","relative"),i.addClass(o.wijCSS.wijmenuIpod).addClass(o.wijCSS.wijmenuContainer),o.backLink?a.addClass(o.wijCSS.wijmenuFooter).appendTo(i).hide():a.addClass(o.wijCSS.wijmenuHeader).prependTo(i),o.backLink||a.append(f),s=i.width(),r.addClass(o.wijCSS.wijmenuContent).addClass(o.wijCSS.wijmenuCurrent).addClass(o.wijCSS.content).addClass(o.wijCSS.helperClearFix).css({width:s}),t.each(e.getItems(),function(e,t){t._setDrilldownUlStyle()}),e._sroll(),e._initScrollCallback(),e._resetScroll(e),e.element.data("firstLeftValue",parseFloat(r.css("left"))),r.delegate("li>."+o.wijCSS.wijmenuLink,"click",function(s,f){var c=t(this).parent(),h=c.attr("disabled"),p,d,v,m,g,y,b,w,E,S=n._getItemWidget(c),x,T;if(e._getDisabled()||h)return;if(e._isSliding)return;r.stop(!0,!0),E=n._hasVisibleSubMenus(S);if(!E){e._leafNodeClick(s,S,a);return}p=S._getSublist();if(p.hasClass(o.wijCSS.wijmenuCurrent))return;if(!e._trigger("showing",s,S))return;e._isSliding=!0,d=S._getParentOrMenu()._getSublist(),v=d.data("topmenu")?0:parseFloat(r.css("left")),u==="rtl"?y=Math.round(v+parseFloat(i.width().toString())):y=Math.round(v-parseFloat(i.width().toString())),b=t("."+o.wijCSS.wijmenuFooter,i),w=function(r,s){var u=r,a=t("."+o.wijCSS.wijmenuCurrent,i),f,l;if(a.get(0)===e._getSublist().get(0))return;s?(f=s._getSublist(),l=s):(f=a.parents("ul:eq(0)"),l=n._getItemWidget(a.parent())._getParentOrMenu()),a.hide().attr("aria-expanded","false"),e._resetDrillChildMenu(a),e._resetScroll(l),f.addClass(o.wijCSS.wijmenuCurrent).attr("aria-expanded","true"),f.hasClass(o.wijCSS.wijmenuContent)&&(u.remove(),b.hide())},e._resetDrillChildMenu(d),e._resetScroll(S),e._slidingAnimation(r,y,function(){e._trigger("shown",s,S),e.activate(s,f||S),e.select(s),e._isSliding=!1}),p.show().addClass(o.wijCSS.wijmenuCurrent).attr("aria-expanded","true"),o.backLink?b.find("a").size()===0&&(b.show(),x=t("<span></span>").addClass(o.wijCSS.icon).addClass(o.wijCSS.iconArrowLeft),T=t("<span></span>").addClass(o.wijCSS.wijmenuBacklinktext),e._backLink=t('<a href="#"></a>').append(x).append(T).appendTo(b).click(function(n,s){if(e._getDisabled())return;var o=e._getCurrentItemInSliding(),a=t(this),f;if(!e._trigger("hidding",n,o))return;r.stop(!0,!0);if(u==="rtl")f=Math.round(r.css("left").replace("px",""))-Math.round(i.width());else{f=Math.round(r.css("left").replace("px",""))+Math.round(i.width());if(f>v)return}e._slidingAnimation(r,f,function(){e._trigger("hidden",n,o),w(a),s&&s()}),n.preventDefault()}),T.width(b.width()-x.width()),T.text(o.backLinkText)):(a.find("li").size()===1&&(a.empty().append(l),l.find("a").click(function(n,r){var i=t(this).parent(),s=e._getCurrentItemInSliding();e._slidingMenu(n,i,s,null,function(t){t?(w(null,t),r&&r()):e._resetDrilldownMenu(a,r)}),n.preventDefault()})),t("."+o.wijCSS.wijmenuCurrentCrumb,i).removeClass(o.wijCSS.wijmenuCurrentCrumb),m=S._getLink().text(),g=t("<li></li>").addClass(o.wijCSS.wijmenuCurrentCrumb).append(t('<a href="#">'+m+"</a>").addClass(o.wijCSS.wijmenuCrumb)),g.appendTo(a).find("a").click(function(n,r){if(e._getDisabled())return;var i=t(this).parent(),s;i.is("."+o.wijCSS.wijmenuCurrentCrumb)||(s=e._getCurrentItemInSliding(),e._slidingMenu(n,i,s,S,function(e){w(null,e),r&&r()})),n.preventDefault()}),g.prev().append(t("<span></span>").addClass(o.wijCSS.icon).addClass(o.wijCSS.iconCaratRight))),t(this).attr("href")==="#"&&s.preventDefault()})},n.prototype._slidingMenu=function(e,t,n,r,i){var s=this,o=s._getSublist(),u=s.options.direction,a=s.domObject.menucontainer,f=a.width(),l=t.parent().children().length-1,c,h,p,d,v=function(e,t,n){c=(u==="rtl"?1:-1)*t*f,s._slidingAnimation(o,c,function(){n&&n(e)})},m=function(t,n){var r;if(t!==n){r=s._trigger("hidding",e,t);if(r)return l--,d&&d(),d=function(){s._trigger("hidden",e,t)},m(t.getParent(),n)}return t};h=m(n,r),h!==n&&(v(h,l,function(){d&&d(),i&&i(h)}),p=t.parent().children().eq(l),p.addClass("wijmo-wijmenu-current-crumb").find("span").remove(),p.nextAll().remove())},n.prototype._getCurrentItemInSliding=function(){var e=this,r=e.domObject.menucontainer,i=t(".wijmo-wijmenu-current",r),s=n._getItemWidget(i.parent());return s},n.prototype._leafNodeClick=function(e,t,n){var r=this,i=r.options,s;r.activate(e,t),r.select(e),i.trigger&&(s=r._getTriggerEle(),s.length&&(r._hideMenu(e),r._resetDrilldownMenu(n))),t._getLink().attr("href")==="#"&&e.preventDefault()},n.prototype._slidingAnimation=function(e,t,n){var r=this.options.slidingAnimation;r&&!r.disabled?e.stop(!0,!0).animate({left:t},r.duration,r.easing,n):(e.css("left",t),n.call(this))},n.prototype._killDrilldown=function(){var e=this._getSublist(),n=this.options,r=this.domObject,i={width:"",height:""};e.css(i).removeClass(n.wijCSS.content),r.scrollcontainer&&r.scrollcontainer.parent().length>0&&(r.scrollcontainer.css(i),r.scrollcontainer.wijsuperpanel("destroy"),r.scrollcontainer.removeClass("wijmo-wijsuperpanel").append(e)),e.prevAll().remove(),r.menucontainer.removeClass(n.wijCSS.wijmenuIpod).removeClass(n.wijCSS.wijmenuContainer),t("."+n.wijCSS.wijmenuCurrent,r.menucontainer).removeClass(n.wijCSS.wijmenuCurrent),t("."+n.wijCSS.wijmenuBreadcrumb,r.menucontainer).remove(),e.undelegate("li>."+n.wijCSS.wijmenuLink,"click"),t("ul",e).css({left:"",width:""}),e.css("left",""),r.scrollcontainer=r.menucontainer.children(":first")},n.prototype._displayMenu=function(e){var r=this,i=r.options,s,o,u,a=r.domObject.menucontainer,f=t(e.target),l=!n._hasVisibleSubMenus(r);if(a.is(":visible")||l)return;if(!r._trigger("showing",e,r))return;a.show(),r._setPosition(f),r.nowIndex++,r._setZindex(a,r.nowIndex),a.hide(),s={context:a,show:!0},o=i.direction==="rtl"?"right":"left",u=t.extend({},{option:{direction:o}},i.animation,i.showAnimation),n._animateFlyoutMenu(u,s,function(){r._trigger("shown",e,r)}),r._isClickToOpen=i.triggerEvent==="click",this.element.data("shown",!0)},n.prototype._hideMenu=function(e){var r=this,i=r.options,s=this.domObject.menucontainer,o=n.animations,u,a;if(!this.element.data("shown"))return;if(!r._trigger("hidding",e,r))return;this.element.data("shown",!1),t.fn.wijhide?(u={context:s,show:!1},a=t.extend({},i.animation,i.hideAnimation),s.wijhide(a,o,u,null,function(){r._setZindex(s,null),s.attr("aria-hidden",!0),r._trigger("hidden",e,r)})):(s.hide().attr("aria-hidden",!0),r._setZindex(s,null),r._trigger("hidden",e,r))},n.prototype._setZindex=function(e,n){var r=this.domObject,i;if(!r)return;i=r.menucontainer;if(e.get(0)===i.get(0)){n?i.css("z-index",n):i.css("z-index","");return}n?(e.parent().css("z-index",999),e.css("z-index",n),t.browser.msie&&parseInt(t.browser.version)<8&&i.css("z-index")===0&&i.css("z-index",9950)):(e.css("z-index",""),e.parent().css("z-index",""),t.browser.msie&&parseInt(t.browser.version)<8&&t("ul:visible",this._getSublist()).length===0&&i.css("z-index")===9950&&i.css("z-index",""))},n.prototype._setPosition=function(e){var n=this._getPosition(),r={of:e},i=this.domObject.menucontainer;i.css({left:"0",top:"0",position:"absolute"}),i.position(t.extend(r,n))},n.prototype._getPosition=function(){var e=this.options,n=e.direction,r=n==="rtl"?{my:"right top",at:"right bottom"}:{my:"left top",at:"left bottom"};return r=t.extend(r,e.position),r},n.prototype._getFirstSelectableSubItem=function(){return n._getFirstSelectableSubItem(this)},n.prototype._getLastSelectableSubItem=function(){return n._getLastSelectableSubItem(this)},n.prototype.add=function(e,t){n._add(this,e,t)},n.prototype._getSublist=function(){return this._rootMenu},n.prototype.getItems=function(){return this._items},n.prototype.remove=function(e){n._remove(this,e)},n.prototype._newId=function(){var e=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t="",n;for(n=0;n<16;n++)t+=e[Math.round(Math.random()*25)];return t},n.animations={slide:function(e,n){e=t.extend({duration:400,easing:"swing"},e,n),e.show?e.context.stop(!0,!0).animate({height:"show"},e,function(){e.context.attr("aria-hidden",!1)}):e.context.stop(!0,!0).animate({height:"hide"},e,function(){e.context.attr("aria-hidden",!0)})}},n._animateFlyoutMenu=function(r,i,s){var o=i.context;t.fn.wijshow?(o.data("isAnimated",!0),o.wijshow(r,n.animations,i,null,function(){o.data("isAnimated",!1);var e=t.browser;e.msie&&e.version==="9.0"?(o.wrap("<div></div>"),o.unwrap()):e.msie&&e.version==="6.0"&&o.css("overflow",""),o.attr("aria-hidden",!1),s&&s()})):o.show().attr("aria-hidden",!1)},n._getMenuItemOptions=function(n,r){return n?!n.items||!t.isArray(n.items)?{}:r>=n.items.length?{}:n.items[r]:{}},n._getOuterElement=function(n,r){return t(n).filter(function(){return t(this).closest(r).length===0})},n._hasVisibleSubMenus=function(t){var n,r,i;t.jquery?t.data("wijmomenu")?n=t.data(t.data("wijmomenu")):t.data("wijmomenuitem")&&(n=t.data(t.data("wijmomenuitem"))):n=t;if(!n)throw"the arugment 'menuItem' must be an wijmenu or wijmenuitem";r=n.getItems();if(!r.length)return!1;for(i=0;i<r.length;i++)if(r[i].options.displayVisible)return!0;return!1},n._getFirstSelectableSubItem=function(t){var n,r=t.getItems(),i;for(n=0;n<r.length;n++){i=r[n].options;if(i.displayVisible!==!1&&!i.header&&!i.separator)return r[n]}return null},n._getLastSelectableSubItem=function(t){var n,r=t.getItems(),i;for(n=r.length-1;n>=0;n--){i=r[n].options;if(i.displayVisible!==!1&&!i.header&&!i.separator)return r[n]}return null},n._getSelectableSubItems=function(n,r){return t.grep(n.getItems(),function(e,t){var n=e.options;return n.header||n.separator||n.displayVisible===!1?!1:r(e,t)},!1)},n._add=function(r,i,s){var o=null,u=t("<li></li>"),a=r._getSublist(),f=r.getItems(),l,c,h=!1;typeof i=="string"?/<(h[1-5]|a)[\s\S]*>[\s\S]*<\/\1>/.test(i)&&u.append(i):t.isPlainObject(i)&&(c=jQuery.extend(!0,{},i));if(!a||a.length<=0)a=t("<ul></ul>"),r.element.append(a),h=!0;(!s||isNaN(s)||s>f.length)&&s!==0&&(s=f.length),f.length>0&&f.length!==s?(l=f[s].element,u.insertBefore(l)):a.append(u),o=r._createItemWidget(u,c);if(o===null||o===undefined)return;n._changeCollection(s,r.getItems(),r.options.items,o),r._bindModeEvents?r._bindModeEvents(o,h):o._bindModeEvents(o,h),h&&r._initUlCssClass()},n._changeCollection=function(t,n,r,i){if(!i){n.splice(t,1),r.splice(t,1);return}n.splice(t,0,i),r.splice(t,0,i.options)},n._remove=function(t,n){var r=t.getItems()[n];r&&r.element&&r.element.remove()},n._getItemWidget=function(t){return t.data(t.data("wijmomenuitem"))},n}(e.wijmoWidget);e.wijmenu=r,r.prototype.options=t.extend(!0,{},e.wijmoWidget.prototype.options,{initSelector:":jqmData(role='wijmenu')",wijCSS:{wijmenu:"wijmo-wijmenu",wijmenuHorizontal:"wijmo-wijmenu-horizontal",wijmenuCurrent:"wijmo-wijmenu-current",wijmenuCurrentCrumb:"wijmo-wijmenu-current-crumb",wijmenuBreadcrumb:"wijmo-wijmenu-breadcrumb",wijmenuBreadcrumbText:"wijmo-wijmenu-breadcrumb-text",wijmenuItem:"wijmo-wijmenu-item",wijmenuLink:"wijmo-wijmenu-link",wijmenuList:"wijmo-wijmenu-list",wijmenuScroll:"wijmo-wijmenu-scroll",wijmenuContent:"wijmo-wijmenu-content",wijmenuFooter:"wijmo-wijmenu-footer",wijmenuHeader:"wijmo-wijmenu-header",wijmenuContainer:"wijmo-wijmenu-container",wijmenuIpod:"wijmo-wijmenu-ipod",wijmenuCrumb:"wijmo-wijmenu-crumb",wijmenuAllLists:"wijmo-wijmenu-all-lists",wijmenuPrevList:"wijmo-wijmenu-prev-list",wijmenuRtl:"wijmo-wijmenu-rtl",wijmenuBacklinktext:"wijmo-wijmenu-backlinktext"},wijMobileCSS:{header:"ui-header ui-bar-c",content:"ui-body ui-body-c",stateDefault:"ui-btn-up-c",stateHover:"ui-btn-down-c",stateActive:"ui-btn-down-c"},trigger:"",triggerEvent:"click",position:{},animation:{animated:"slide",duration:400,easing:null},showAnimation:{},hideAnimation:{animated:"fade",duration:400,easing:null},showDelay:400,hideDelay:400,slidingAnimation:{duration:400,easing:null},mode:"flyout",superPanelOptions:null,checkable:!1,orientation:"horizontal",direction:"ltr",maxHeight:200,backLink:!0,backLinkText:"Back",topLinkText:"All",crumbDefaultText:"Choose an option",select:null,focus:null,blur:null,showing:null,shown:null,hidding:null,hidden:null,items:null}),function(e){e._map=[],e.link=0,e.separator=1,e.header=2,e.other=3}(e.MarkupType||(e.MarkupType={}));var i=e.MarkupType,s=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n.prototype._initState=function(){this._items=[],this._resetMarkupValue(),this.options.items||(this.options.items=[])},n.prototype._create=function(){var n=this;n._isMobile&&t.extend(!0,n.options.wijCSS,n.options.wijMobileCSS),n.element.data("wijmomenuitem",t.camelCase(n.widgetFullName)),n._initState(),n._getOrSetOptionsValues(),n._createChildMenuItems(),n._initCssClass(),e.prototype._create.call(this)},n.prototype._refresh=function(){var e=this,t=e.options;e._set_navigateUrl(t.navigateUrl),e._set_target(t.target),e._set_displayVisible(t.displayVisible),e._createChildMenuItems(),e._initCssClass()},n.prototype._setOption=function(n,r){var i=this,s=i.options,o;if(n==="items"){e.prototype._setOption.call(this,n,r),i._set_items(r);return}if(r===s[n])return;e.prototype._setOption.call(this,n,r);if(!t.isFunction(i["_set_"+n]))return;i["_set_"+n](r,!0);switch(n){case"header":case"separator":i._refresh();break;case"displayVisible":o=i.getParent(),o&&o._setSubmenuIcon();break;default:}},n.prototype.index=function(){return this.element.index()},n.prototype._set_selected=function(e){var t=this,n=t.options,r=t._getMenuItemType();r===i.link?t._getLink().toggleClass(n.wijCSS.stateActive,e):t.options.selected=!1},n.prototype._set_items=function(e){var t=this;t._getSublist().remove(),t._items=[],e.length>0&&(t._createChildMenuItems(),t._initUlCssClass()),t._setSubmenuIcon(e.length>0),t._bindModeEvents(t,!0),t._resetMarkupValue()},n.prototype._bindModeEvents=function(e,t){var n=this,r=e._getMenu(),i=r.options;t&&(n._initUlCssClass(),n._setSubmenuIcon(),n._resetMarkupValue()),i.mode==="flyout"?t?(n._killFlyout(),n._flyout()):e._flyout():(n._setDrilldownUlStyle(),e.element.parent().is(":visible")&&r._resetScroll(e._getParentOrMenu()))},n.prototype._set_value=function(e,t){this.options.value=e},n.prototype._set_text=function(e,t){var n=this,r=n.options;e||t?n._setText(e):r.text=n._getText()},n.prototype._set_navigateUrl=function(e,t){var n=this,r=n.options,i=n._getLink();i.is("a")&&(e||t?i.attr("href",e):r.navigateUrl=i.attr("href"))},n.prototype._set_target=function(e,t){var n=this,r=n.options,i=n._getLink();i.is("a")&&(r.target||t?i.attr("target",e):r.target=i.attr("target")||"")},n.prototype._set_iconClass=function(e,n){var r=this,s=r.options,o,u,a,f;if(s.header===!0||s.separator===!0)return;o=r._getLink(),u=o.find("span."+s.wijCSS.wijmenuitemIcon),e?(u.length===0&&(u=t("<span>"),a=o.children("."+s.wijCSS.wijmenuText).wrap("<span>").parent(),a.addClass(s.wijCSS.wijmenuText),a.prepend(u)),u.addClass(e).addClass(s.wijCSS.wijmenuIconLeft).addClass(s.wijCSS.wijmenuitemIcon),n&&r._set_imagePosition(s.imagePosition)):u.length!==0&&(u.remove(),a=o.children("."+s.wijCSS.wijmenuText),f=a.text(),a.html(""),a.text(f)),r._getMenuItemType()===i.other&&o.addClass(s.wijCSS.wijmenuLink).addClass(s.wijCSS.cornerAll)},n.prototype._set_imagePosition=function(e,t){var n=this,r=n.options,i=n._getLink(),s=i.find(">span>span."+r.wijCSS.wijmenuitemIcon),o=e==="right"?r.wijCSS.wijmenuIconRight:r.wijCSS.wijmenuIconLeft;if(s.length===0)return;s.removeClass(r.wijCSS.wijmenuIconRight).removeClass(r.wijCSS.wijmenuIconLeft).addClass(o)},n.prototype._set_separator=function(e,t){var n=this,r=n.element,s=n.options,o=n._getLink();t&&e===!1?(r.html("").removeClass(s.wijCSS.wijmenuSeparator).removeClass(s.wijCSS.widget).removeClass(s.wijCSS.wijmenuItem).removeClass(s.wijCSS.stateDefault).removeClass(s.wijCSS.cornerAll),n._createMenuItemMarkup(i.link).appendTo(r)):e===!0||o.length===0?(s.separator=!0,s.header=!1,n._createMenuItemMarkup(i.separator)):s.separator=!1,n._resetMarkupValue()},n.prototype._set_header=function(e,t){var n=this,r=n.element,s=n.options,o=n._getLink();t&&e===!1?(s.header=!1,r.html("").removeClass(s.wijCSS.header).removeClass(s.wijCSS.cornerAll).removeClass(s.wijCSS.widget).removeClass(s.wijCSS.wijmenuItem).removeClass(s.wijCSS.stateDefault),n._createMenuItemMarkup(i.link).appendTo(r)):e===!0||o.is("h1,h2,h3,h4,h5")?(s.header=!0,s.separator=!1,o.is("h1,h2,h3,h4,h5")||(o.remove(),o=n._createMenuItemMarkup(i.header),r.append(o))):s.header=!1,n._resetMarkupValue()},n.prototype._set_displayVisible=function(e){var t=this,n=t.element;e?n.show():n.hide()},n.prototype._createMenuItemMarkup=function(e){var n=this,r=n.options,s=n.element,o;return e===i.separator?(s.html('<span class="'+r.wijCSS.wijmenuSeparatorContent+'">&nbsp;</span>'),null):(e===i.header?o=t("<h3></h3>").text(r.text):o=t("<a>").text(r.text),o)},n.prototype._getMenuItemType=function(e){var n=this,r=n.options,s=n._getLink();return e&&(r=t.extend({},r,e)),r.separator===!0?i.separator:r.header===!0?i.header:s.length===0?r.text?i.link:i.separator:s.is("a")?i.link:s.is("h1,h2,h3,h4,h5")?i.header:i.other},n.prototype._getOrSetOptionsValues=function(){var e=this,t=e.element,n=e.options,r=e._getLink(),s=e._getMenuItemType();s===i.header?(e._set_header(n.header),e._set_text(n.text)):s===i.separator?e._set_separator(n.separator):(r.length===0?(r=e._createMenuItemMarkup(s),t.append(r)):e._set_text(n.text),e._resetMarkupValue(),e._set_navigateUrl(n.navigateUrl),e._set_target(n.target)),e._set_displayVisible(n.displayVisible),e._set_selected(n.selected)},n.prototype._getText=function(){return this._getLink().text()},n.prototype._setText=function(e){var t=this.element,n=this.options,r;r=t.find(":not(ul)a ."+n.wijCSS.wijmenuText+":first");if(r.length!==0){r.text(e);return}r=t.children("h1,h2,h3,h4,h5").filter(":first");if(r.length!==0){r.text(e);return}r=t.children("a:first");if(r.length!==0){r.text(e);return}},n.prototype._createChildMenuItems=function(){var e=this,n=e.element,i=e._items,s=e.options,o,u,a,f,l;if(s.header===!0||s.separator===!0)return;o=s.items.length,u=e._getSublist(),a=u.children("li").length;if(o>a){u.length===0&&(u=t("<ul>").appendTo(n),e._resetMarkupValue());for(f=0;f<o-a;f++)u.append("<li>")}t.each(e._getChildren(),function(n,s){var o=t(s),u;u=r._getMenuItemOptions(e.options,n),l=e._createItemWidget(o,u),i.push(l),e.options.items[n]=l.options})},n.prototype._createItemWidget=function(e,n){var r=this,i=r.widgetName;return e[i](n),e.data(t.camelCase(r.widgetFullName))},n.prototype._initCssClass=function(){var e=this,t=this.element,n=e.options,r=e._getLink(),s=e._getMenuItemType();s!==i.separator&&t.attr("role","menuitem"),s===i.separator?t.addClass(n.wijCSS.wijmenuSeparator).addClass(n.wijCSS.stateDefault).addClass(n.wijCSS.cornerAll):s===i.header?t.addClass(n.wijCSS.header).addClass(n.wijCSS.cornerAll):(s===i.link?t.hasClass(n.wijCSS.wijmenuItem)||(t.addClass(n.wijCSS.widget).addClass(n.wijCSS.wijmenuItem).addClass(n.wijCSS.stateDefault).addClass(n.wijCSS.cornerAll),r.addClass(n.wijCSS.wijmenuLink).addClass(n.wijCSS.cornerAll),r.wrapInner("<span>").children("span").addClass(n.wijCSS.wijmenuText)):t.addClass(n.wijCSS.widget).addClass(n.wijCSS.wijmenuItem).addClass(n.wijCSS.stateDefault).addClass(n.wijCSS.cornerAll),e._setSubmenuIcon()),e._set_iconClass(n.iconClass),e._set_imagePosition(n.imagePosition),e._initUlCssClass()},n.prototype._initUlCssClass=function(){var e=this.options;this._getSublist().addClass(e.wijCSS.wijmenuList).addClass(e.wijCSS.content).addClass(e.wijCSS.cornerAll).addClass(e.wijCSS.helperClearFix).addClass(e.wijCSS.wijmenuChild).addClass(e.wijCSS.helperReset).hide()},n.prototype._setSubmenuIcon=function(e){var n=this,i=this.options,s=n._getLink(),o=n._getMenu(),u=o.options.direction,a=u==="rtl"?s.children("span."+i.wijCSS.icon+":first"):s.children("span."+i.wijCSS.icon+":last");e===undefined&&(e=r._hasVisibleSubMenus(n)),e&&!s.is(":input")?(a.length===0&&(u==="rtl"?a=t("<span>").prependTo(s):a=t("<span>").appendTo(s)),n._isRoot()&&o.options.orientation==="horizontal"&&o.options.mode==="flyout"?a.addClass(i.wijCSS.icon).addClass(i.wijCSS.iconArrowDown):u==="rtl"?a.addClass(i.wijCSS.icon).addClass(i.wijCSS.iconArrowLeft):a.addClass(i.wijCSS.icon).addClass(i.wijCSS.iconArrowRight)):a.remove()},n.prototype._killFlyout=function(){var e=this.element.attr("role",""),n=this.options;e.removeClass(n.wijCSS.wijmenuParent).unbind(".wijmenuEvent").unbind(".wijmenuitem").children(":first").unbind(".wijmenuEvent").unbind(".wijmenuitem").attr("aria-haspopup",""),this._getSublist().unbind(".wijmenuEvent").unbind(".wijmenuitem"),t.each(this.getItems(),function(){this._killFlyout()})},n.prototype._getItemTriggerEvent=function(){var e=this,n=e.element,r=e._getMenu(),i=r.options,s="default";return i.trigger!==""&&(n.is(i.trigger)||r.element.is(i.trigger)?s=i.triggerEvent:(n.parents("."+i.wijCSS.wijmenuParent).each(function(e,n){if(t(n).is(i.trigger))return s=i.triggerEvent,!1}),s==="default"&&e._isOuterTirggerEle()&&(s=i.triggerEvent))),n.data("triggerEvent",s),s},n.prototype._isOuterTirggerEle=function(){var e=this._getMenu();return r._getOuterElement(e.options.trigger,"."+e.options.wijCSS.wijmenu).length>0},n.prototype._flyout=function(){var e=this,n=e._getMenu(),r=n.options,i=".wijmenuitem",s=t(e.element).attr("aria-haspopup",!0),o,u,a=e._getItemTriggerEvent(),f=s.children("a."+r.wijCSS.wijmenuLink),l=e._getSublist(),c;if(e.getItems().length>0){l.bind("mouseleave"+i,function(t){if(r.disabled)return;u=setTimeout(function(){e._hideCurrentSubmenu(t)},r.hideDelay)}),s.addClass(e.options.wijCSS.wijmenuParent);if(a!=="default"&&r.triggerEvent!=="mouseenter"){switch(r.triggerEvent){case"click":f.bind("click"+i,function(n){if(r.disabled||t(this).hasClass(r.wijCSS.stateDisabled))return;e._showFlyoutSubmenu(n)});break;case"dblclick":f.bind("dblclick"+i,function(n){if(r.disabled||t(this).hasClass(r.wijCSS.stateDisabled))return;e._showFlyoutSubmenu(n)});break;case"rtclick":f.bind("contextmenu"+i,function(n){if(r.disabled||t(this).hasClass(r.wijCSS.stateDisabled))return;e._showFlyoutSubmenu(n),n.preventDefault()})}l.data("notClose",!0)}else f.bind("mouseenter.wijmenuEvent",function(n){if(r.disabled||t(this).hasClass(r.wijCSS.stateDisabled))return;clearTimeout(u),o=setTimeout(function(){e._displaySubmenu(n,null)},r.showDelay)}).bind("mouseleave"+i,function(n){if(r.disabled||t(this).hasClass(r.wijCSS.stateDisabled))return;clearTimeout(o),l.is("ul")||(l=l.children("ul:first")),u=setTimeout(function(){e._hideSubmenu(!1,n)},r.hideDelay)}),e.getItems().length>0&&e._getSublist().bind("mouseenter"+i,function(e){if(r.disabled)return;clearTimeout(u)})}f.bind("click.wijmenuEvent",function(t){c=f.hasClass(r.wijCSS.stateDisabled);if(r.disabled||c)return;if(f.is("a")){if(e._getSublist().length===0)n._hideAllMenus(t);else if(r.trigger===""||s.data("triggerEvent")==="default"||r.triggerEvent==="mouseenter")n._hideAllMenus(t);else{var i=n._currentMenuList,o,u;if(i!==undefined){o=s;if(e._getSublist().length===0)for(u=i.length;u>0;u--){if(i[u-1]===e)break;i[u-1]._hideSubmenu(!1,t)}}}n.activate(t,e)}n.select(t),f.attr("href")==="#"&&t.preventDefault()}).bind("focusin.wijmenuEvent",function(t){c=f.hasClass(r.wijCSS.stateDisabled);if(r.disabled||c)return;f.is("a")&&n.activate(t,e)}),t.each(e.getItems(),function(){this._flyout()})},n.prototype._hideSubmenu=function(e,n){var i=this,s=i._getMenu(),o=s.options,u=r.animations,a,f,l,c=i._getSublist(),h=i._getLink();if(!h.data("subMenuOpened"))return;if(!s._trigger("hidding",n,i))return;h.is("."+o.wijCSS.wijmenuLink)&&(h.data("subMenuOpened",!1),h.removeClass(o.wijCSS.stateActive)),t.fn.wijhide&&e!==!0?(a={context:c,show:!1},f=t.extend({},o.animation,o.hideAnimation),c.wijhide(f,u,a,null,function(){s._setZindex(c,null),c.attr("aria-hidden",!0),s._trigger("hidden",n,i)})):(c.hide().attr("aria-hidden",!0),s._setZindex(c,null),s._trigger("hidden",n,i)),l=s._currentMenuList,l&&(l=t.makeArray(t.map(l,function(e){return e&&e===i?null:e})),s._currentMenuList=t.makeArray(l))},n.prototype._displaySubmenu=function(e,n){var i=this,s=i._getMenu(),o=s.options,u,a,f,l,c=i._getLink(),h=i._getSublist();l=!r._hasVisibleSubMenus(i);if(h.is(":visible")||l)return;if(!s._trigger("showing",e,i))return;c.is("a."+o.wijCSS.wijmenuLink)&&c.data("subMenuOpened",!0),h.show(),this._setMenuItemPosition(),s.nowIndex++,s._setZindex(h,s.nowIndex),h.hide(),u={context:h,show:!0},a=o.direction==="rtl"?"right":"left",o.orientation==="horizontal"&&i._isRoot()&&(a="up"),f=t.extend({},{option:{direction:a}},o.animation,o.showAnimation),r._animateFlyoutMenu(f,u,function(){h.is(":hidden")&&i._hideSubmenu(!0,e),s._trigger("shown",e,i),n&&n()}),s._isClickToOpen=o.triggerEvent==="click",s._currentMenuList===undefined&&(s._currentMenuList=[]),s._currentMenuList.push(i)},n.prototype._setMenuItemPosition=function(){var e=this,n=e._getSublist(),r=e._getMenuItemPosition(),i={of:this._getLink()};n.css({left:"0",top:"0",position:"absolute"}),n.position(t.extend(i,r))},n.prototype._getMenuItemPosition=function(){var e=this,n=this._getMenu(),r=n.options,i=r.direction,s=i==="rtl"?{my:"right top",at:"left top"}:{my:"left top",at:"right top"};return r.orientation==="horizontal"&&e._isRoot()&&(s=i==="rtl"?{my:"right top",at:"right bottom"}:{my:"left top",at:"left bottom"}),s=t.extend(s,r.position),s},n.prototype._getChildren=function(){return this._getSublist().children("li")},n.prototype._setDrilldownUlStyle=function(){var e=this,n=e.options,r=e._getSublist(),i=e._getMenu(),s=i.domObject.menucontainer.width();i.options.direction==="rtl"?r.css({width:s,left:-s}):r.css({width:s,left:s}),r.addClass(n.wijCSS.content),t.each(e.getItems(),function(e,t){t.getItems().length&&this._setDrilldownUlStyle()})},n.prototype._getMenu=function(){var e=this,t=e._menu,n,r;if(!t){n=e.element.parent();while(!n.is("body")&&n.length>0){r=n.data("wijmomenu");if(r)return t=n.data(r),e._menu=t,t;n=n.parent()}throw"An menuitem must be a child of menu"}return t},n.prototype.getParent=function(){var e=this,t=e.element,n,i,s;i=e._parent;if(i!==undefined)return i;s=t.parents("li:first");if(s.length>0){i=r._getItemWidget(s);if(i!==undefined)return e._parent=i,i}n=e._getMenu();if(n._getSublist().get(0)===t.parent().get(0))return e._parent=null,null;throw"An menuitem must be a child of menu or another menuitem"},n.prototype._getParentOrMenu=function(){return this.getParent()||this._getMenu()},n.prototype._getField=function(e){return this.element.data(e)},n.prototype._setField=function(e,t){return this.element.data(e,t)},n.prototype._innerDestroy=function(e){var t=this,n=t.options,r=t.element,i,s=t.getItems(),o=s.length-1;r.removeClass(n.wijCSS.widget).removeClass(n.wijCSS.wijmenuItem).removeClass(n.wijCSS.stateDefault).removeClass(n.wijCSS.cornerAll).removeClass(n.wijCSS.wijmenuParent).removeClass(n.wijCSS.header).removeClass(n.wijCSS.wijmenuSeparator),i=r.children("."+n.wijCSS.wijmenuLink),i.removeClass(n.wijCSS.wijmenuLink).removeClass(n.wijCSS.cornerAll).removeClass(n.wijCSS.stateFocus).removeClass(n.wijCSS.stateHover).removeClass(n.wijCSS.stateActive).html(i.children("."+n.wijCSS.wijmenuText).html()).unbind(".wijmenuitem").unbind(".wijmenuEvent"),r.children("ul").removeClass(n.wijCSS.wijmenuList).removeClass(n.wijCSS.content).removeClass(n.wijCSS.cornerAll).removeClass(n.wijCSS.helperClearFix).removeClass(n.wijCSS.wijmenuChild).removeClass(n.wijCSS.helperReset).attr("role","").attr("aria-activedescendant","").show().css({left:"",top:"",position:""}).attr("hidden",""),r.removeAttr("role"),i.removeAttr("aria-haspopup"),e||t._removeFromParentCollection(),r.removeData("menu").removeData("parent");for(;o>=0;o--)s[o].destroy(!0);t._items.length=0,t._resetMarkupValue()},n.prototype.destroy=function(t){var n=this;n._innerDestroy(t),e.prototype.destroy.call(this)},n.prototype._getFirstSelectableSubItem=function(){return r._getFirstSelectableSubItem(this)},n.prototype._getLastSelectableSubItem=function(){return r._getLastSelectableSubItem(this)},n.prototype.next=function(){var e=this,n=e._getParentOrMenu().getItems(),r,i,s=t.inArray(e,n);if(s===-1)throw"cannot find item from the parent collection";for(r=s+1;r<n.length;r++){i=n[r].options;if(i.displayVisible!==!1&&!i.header&&!i.separator)return n[r].element}return null},n.prototype.previous=function(){var e=this,n=e._getParentOrMenu().getItems(),r,i,s=t.inArray(e,n);if(s===-1)throw"cannot find item from the parent collection";for(r=s-1;r>=0;r--){i=n[r].options;if(i.displayVisible!==!1&&!i.header&&!i.separator)return n[r].element}return null},n.prototype._removeFromParentCollection=function(){var e=this,n,i=!1,s;n=e.getParent(),n===null&&(n=e._getMenu(),i=!0),s=t.inArray(e,n.getItems());if(s===-1)return;r._changeCollection(s,n.getItems(),n.options.items,null),n.getItems().length===0&&(i||(n._setSubmenuIcon(!1),n._resetMarkupValue()),n.element.children("ul").remove())},n.prototype._resetMarkupValue=function(){this._sublist=null,this._link=null},n.prototype._hideCurrentSubmenu=function(e){var n=this,r=n._getSublist();if(r.length===0)return;r.data("notClose")||n._hideSubmenu(!1,e),t.each(n.getItems(),function(){this._hideCurrentSubmenu(e)})},n.prototype._showFlyoutSubmenu=function(e,t){var n=this,r=this._getMenu(),i=r._currentMenuList,s;if(i!==undefined)for(s=i.length;s>0;s--){if(i[s-1]===n.getParent())break;i[s-1]._hideSubmenu(!1,e)}n._displaySubmenu(e,t)},n.prototype.getItems=function(){return this._items},n.prototype._getSublist=function(){var e=this;return e._sublist||(e._sublist=this.element.children("ul:first")),e._sublist},n.prototype._getLink=function(){var e=this;return e._link||(e._link=this.element.children(":first")),e._link},n.prototype._isRoot=function(){return this.getParent()===null},n.prototype.add=function(e,t){r._add(this,e,t)},n.prototype.remove=function(e){r._remove(this,e)},n}(e.wijmoWidget);e.wijmenuitem=s,s.prototype.options=t.extend(!0,{},e.wijmoWidget.prototype.options,{initSelector:":jqmData(role='wijmenuitem')",wijCSS:{wijmenuitemIcon:"wijmenuitem-icon",wijmenuParent:"wijmo-wijmenu-parent",wijmenuLink:"wijmo-wijmenu-link",wijmenuText:"wijmo-wijmenu-text",wijmenuList:"wijmo-wijmenu-list",wijmenuItem:"wijmo-wijmenu-item",wijmenuSeparator:"wijmo-wijmenu-separator",wijmenuIconLeft:"wijmo-wijmenu-icon-left",wijmenuIconRight:"wijmo-wijmenu-icon-right",wijmenuChild:"wijmo-wijmenu-child",wijmenuSeparatorContent:"wijmo-wijmenu-separator-content"},wijMobileCSS:{header:"ui-header ui-bar-c",content:"ui-body ui-body-c",stateDefault:"ui-btn-up-c",stateHover:"ui-btn-down-c",stateActive:"ui-btn-down-c"},header:!1,separator:!1,value:"",text:"",navigateUrl:"",target:"",iconClass:"",imagePosition:"",displayVisible:!0,selected:!1,items:null}),t.wijmo.registerWidget(n,r.prototype),t.widget("wijmo.wijmenuitem",t.wijmo.widget,s.prototype)})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){"use strict";var t=jQuery,n="wijexpander",r=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n.prototype._setOption=function(e,n){switch(e){case"contentUrl":n?this.element.find("> ."+this.options.wijCSS.content).wijContent(n):this.element.find("> ."+this.options.wijCSS.content).html("");break;case"disabled":n?(this.element.addClass(this.options.wijCSS.stateDisabled).find("> .ui-expander-header").addClass(this.options.wijCSS.stateDisabled),this.element.find("> ."+this.options.wijCSS.content).addClass(this.options.wijCSS.stateDisabled)):(this.element.removeClass(this.options.wijCSS.stateDisabled).find("> .ui-expander-header").removeClass(this.options.wijCSS.stateDisabled),this.element.find("> ."+this.options.wijCSS.content).removeClass(this.options.wijCSS.stateDisabled));break;case"expandDirection":this._onDirectionChange(n,!0,this.options.expandDirection);break;case"expanded":n?this.expand():this.collapse();return;default:}t.wijmo.widget.prototype._setOption.apply(this,arguments)},n.prototype._create=function(){var e=this.options,n=this.element.children(),r,i;window.wijmoApplyWijTouchUtilEvents&&(t=window.wijmoApplyWijTouchUtilEvents(t)),this.element.addClass("wijmo-wijexpander ui-expander "+e.wijCSS.widget+" ui-expander-icons"),r=t(n[0]),i=t(n[1]);if(e.expandDirection==="left"||e.expandDirection==="top")r.remove(),r.insertAfter(i);r.addClass("ui-expander-header"),r.attr("role","tab"),i.attr("role","tabpanel"),r.find("> a").length===0&&r.wrapInner('<a href="javascript:void(null)"></a>'),r.find("> .ui-icon").length===0&&t('<span class="ui-icon"></span>').insertBefore(t("> a",r)[0]),i.addClass("ui-expander-content "+e.wijCSS.content)},n.prototype._init=function(){var e=this.options;this._onDirectionChange(e.expandDirection,!1),e.contentUrl&&t("."+e.wijCSS.content,this.element).wijContent(this.options.contentUrl),e.expanded?(this.element.find("> .ui-expander-header").addClass(e.wijCSS.stateActive).attr({"aria-expanded":"true",tabIndex:0}).addClass(this._headerCornerOpened).find("> .ui-icon").addClass(this._triangleIconOpened),this.element.find("> .ui-expander-content").addClass("ui-expander-content-active").addClass(this._contentCornerOpened).wijTriggerVisibility()):(this.element.find("> .ui-expander-content").hide(),this.element.find("> .ui-expander-header").addClass(e.wijCSS.stateDefault+" "+e.wijCSS.cornerAll).attr({"aria-expanded":"false",tabIndex:-1}).find("> .ui-icon").addClass(this._triangleIconClosed)),e.disabled&&(this.element.addClass(e.wijCSS.stateDisabled).find("> .ui-expander-header").addClass(e.wijCSS.stateDisabled),this.element.find("> .ui-expander-content").addClass(e.wijCSS.stateDisabled)),this._bindLiveEvents()},n.prototype.destroy=function(){var e=this.options;this._unbindLiveEvents(),this.element.removeClass("wijmo-wijexpander ui-expander "+e.wijCSS.widget+" ui-helper-reset ui-expander-icons"),t.wijmo.widget.prototype.destroy.apply(this,arguments)},n.prototype._bindLiveEvents=function(){var e=this.options;this.element.on("click.wijexpander",">.ui-expander-header",jQuery.proxy(this._onHeaderClick,this)),this.element.on("mouseenter.wijexpander",".ui-expander-header",function(){t(this).addClass(e.wijCSS.stateHover)}),this.element.on("mouseleave.wijexpander",".ui-expander-header",function(){t(this).removeClass(e.wijCSS.stateHover)}),this.element.on("focus.wijexpander",".ui-expander-header",function(){t(this).addClass(e.wijCSS.stateFocus)}),this.element.on("blur.wijexpander",".ui-expander-header",function(){t(this).removeClass(e.wijCSS.stateFocus)})},n.prototype._unbindLiveEvents=function(){this.element.off(".wijexpander",".ui-expander-header")},n.prototype._onDirectionChange=function(e,n,r){typeof r=="undefined"&&(r=null);var i,s,o,u,a,f,l,c,h=this.options;r&&r!==e&&this.element.removeClass("ui-expander-"+r),n&&(s=this.element.find(".ui-expander-header."+this._headerCornerOpened),s.removeClass(this._headerCornerOpened),o=this.element.find(".ui-expander-content."+this._contentCornerOpened),o.removeClass(this._contentCornerOpened),u=this.element.find("."+this._triangleIconOpened),a=this.element.find("."+this._triangleIconClosed),u.removeClass(this._triangleIconOpened),a.removeClass(this._triangleIconClosed));switch(e){case"top":this._headerCornerOpened="ui-corner-bottom",this._contentCornerOpened="ui-corner-top",this._triangleIconOpened=h.wijCSS.iconArrowUp,this._triangleIconClosed=h.wijCSS.iconArrowRight,i=!0,this.element.removeClass("ui-helper-horizontal"),this.element.addClass("ui-expander-top");break;case"right":this._headerCornerOpened="ui-corner-left",this._contentCornerOpened="ui-corner-right",this._triangleIconOpened=h.wijCSS.iconArrowRight,this._triangleIconClosed=h.wijCSS.iconArrowDown,i=!1,this.element.addClass("ui-helper-horizontal"),this.element.addClass("ui-expander-right");break;case"left":this._headerCornerOpened="ui-corner-right",this._contentCornerOpened="ui-corner-left",this._triangleIconOpened=h.wijCSS.iconArrowLeft,this._triangleIconClosed=h.wijCSS.iconArrowDown,i=!0,this.element.addClass("ui-helper-horizontal"),this.element.addClass("ui-expander-left");break;default:this._headerCornerOpened="ui-corner-top",this._contentCornerOpened="ui-corner-bottom",this._triangleIconOpened=h.wijCSS.iconArrowDown,this._triangleIconClosed=h.wijCSS.iconArrowRight,i=!1,this.element.removeClass("ui-helper-horizontal"),this.element.addClass("ui-expander-bottom")}f=this.element.data("rightToLeft"),this.element.data("rightToLeft",i),n&&(u.addClass(this._triangleIconOpened),a.addClass(this._triangleIconClosed),s.addClass(this._headerCornerOpened),o.addClass(this._contentCornerOpened)),n&&i!==f&&this.element.children(".ui-expander-header").each(function(e,n){c=t(this),i?(l=c.next(".ui-expander-content"),c.remove(),c.insertAfter(l)):(l=c.prev(".ui-expander-content"),c.remove(),c.insertBefore(l))})},n.prototype.collapse=function(){var e=this.options,n,r,i,s;if(!e.allowExpand)return;return this.element.hasClass(e.wijCSS.stateDisabled)?!1:this._trigger("beforeCollapse")?(e.animated?(n={expand:!1,content:this.element.find("> .ui-expander-content"),complete:jQuery.proxy(function(){this.element.find("> .ui-expander-content").removeClass("ui-expander-content-active"),this._trigger("afterCollapse"),this.element.find("> .ui-expander-content").css("display","")},this),horizontal:this.element.hasClass("ui-helper-horizontal")},r=t.wijmo.wijexpander.animations,i=e.duration,s=e.animated,s&&!r[s]&&!t.easing[s]&&(s="slide"),r[s]||(r[s]=function(e){this.slide(e,{easing:s,duration:i||700})}),r[s](n)):(this.element.find("> .ui-expander-content").hide(),this._trigger("afterCollapse")),this.element.find("> .ui-expander-header").removeClass(e.wijCSS.stateActive).removeClass(this._headerCornerOpened).attr({"aria-expanded":"false",tabIndex:-1}).addClass(e.wijCSS.stateDefault+" "+e.wijCSS.cornerAll).find("> .ui-icon").removeClass(this._triangleIconOpened).addClass(this._triangleIconClosed),this.options.expanded=!1,!0):!1},n.prototype.expand=function(){var e=this.options,n,r,i,s;if(!e.allowExpand)return;return this.element.hasClass(e.wijCSS.stateDisabled)?!1:this._trigger("beforeExpand")?(e.animated?(n={expand:!0,content:this.element.find("> .ui-expander-content"),complete:jQuery.proxy(function(){this.element.find("> .ui-expander-content").addClass("ui-expander-content-active").addClass(this._contentCornerOpened).wijTriggerVisibility(),this._trigger("afterExpand"),this.element.find("> .ui-expander-content").css("display","")},this),horizontal:this.element.hasClass("ui-helper-horizontal")},r=t.wijmo.wijexpander.animations,i=e.duration,s=e.animated,s&&!r[s]&&!t.easing[s]&&(s="slide"),r[s]||(r[s]=function(e){this.slide(e,{easing:s,duration:i||700})}),r[s](n)):(this.element.find("> .ui-expander-content").show(),this._trigger("afterExpand")),this.element.find("> .ui-expander-header").removeClass(e.wijCSS.stateDefault+" "+e.wijCSS.cornerAll).addClass(e.wijCSS.stateActive).addClass(this._headerCornerOpened).attr({"aria-expanded":"true",tabIndex:0}).find("> .ui-icon").removeClass(this._triangleIconClosed).addClass(this._triangleIconOpened),this.options.expanded=!0,!0):!1},n.prototype._onHeaderClick=function(e){this.option("expanded",!this.options.expanded)},n}(e.wijmoWidget);e.wijexpander=r,r.prototype.options=t.extend(!0,{},e.wijmoWidget.prototype.options,{wijMobileCSS:{header:"ui-header ui-bar-a",content:"ui-content ui-body ui-body-c"},initSelector:":jqmData(role='wijexpander')",allowExpand:!0,animated:"slide",contentUrl:"",expanded:!0,expandDirection:"bottom"}),t.wijmo.registerWidget(n,r.prototype),t.extend(t.wijmo.wijexpander,{animations:{slide:function(e,n){var r;e=t.extend({easing:"swing",duration:300},e,n),e.expand?(e.horizontal?r={width:"show",opacity:"show"}:r={height:"show",opacity:"show"},e.content.stop(!0,!0).animate(r,e)):(e.horizontal?r={width:"hide",opacity:"hide"}:r={height:"hide",opacity:"hide"},e.content.stop(!0,!0).animate(r,e))}}})})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){"use strict";var t=jQuery,n="wijaccordion",r=function(e){function n(){e.apply(this,arguments),this.widgetEventPrefix="wijaccordion"}return __extends(n,e),n.prototype._setOption=function(e,n){var r=this.options;if(r[e]!==n)switch(e){case"selectedIndex":this.activate(n);break;case"disabled":n?this.element.addClass(r.wijCSS.stateDisabled):this.element.removeClass(r.wijCSS.stateDisabled);break;case"event":this._unbindLiveEvents(),this.options.event=n,this._bindLiveEvents();break;case"header":this._handleHeaderChange(n,r.header);break;case"animated":break;case"expandDirection":this._onDirectionChange(n,!0,r.expandDirection);break;default:}t.wijmo.widget.prototype._setOption.apply(this,arguments)},n.prototype._handleHeaderChange=function(e,t){var n=this.element.find(t);n.removeClass("wijmo-wijaccordion-header "+this.options.wijCSS.stateActive+" "+this._triangleIconOpened).siblings(".wijmo-wijaccordion-content").removeClass("wijmo-wijaccordion-content "+this.options.wijCSS.content+" wijmo-wijaccordion-content-active"),this._initHeaders(e)},n.prototype._initHeaders=function(e){typeof e=="undefined"&&(e=null);var t=this.options,e=e?e:t.header,n=this.element.find(e);n.each(jQuery.proxy(this._initHeader,this))},n.prototype._initHeader=function(e,n){var r=this.options,i=this.element.data("rightToLeft"),s=t(n),o=t(s.next()[0]);i&&(s.remove(),s.insertAfter(o)),s.addClass("wijmo-wijaccordion-header").attr("role","tab"),o.attr("role","tabpanel"),s.find("> a").length===0&&s.wrapInner('<a href="#"></a>'),s.find("> .ui-icon").length===0&&t('<span class="ui-icon"></span>').insertBefore(t("> a",s)[0]),e===r.selectedIndex?(s.addClass(this.options.wijCSS.stateActive).addClass(this._headerCornerOpened).attr({"aria-expanded":"true",tabIndex:0}).find("> .ui-icon").addClass(this._triangleIconOpened),o.addClass("wijmo-wijaccordion-content-active").addClass(this._contentCornerOpened).wijTriggerVisibility()):(s.addClass(r.wijCSS.stateDefault+" ui-corner-all").attr({"aria-expanded":"false",tabIndex:-1}).find("> .ui-icon").addClass(this._triangleIconClosed),o.hide()),o.addClass("wijmo-wijaccordion-content "+this.options.wijCSS.content)},n.prototype._create=function(){var e=this.options;window.wijmoApplyWijTouchUtilEvents&&(t=window.wijmoApplyWijTouchUtilEvents(t)),this.element.addClass("wijmo-wijaccordion "+e.wijCSS.widget+" wijmo-wijaccordion-icons "+"ui-helper-clearfix"),e.disabled&&this.element.addClass(e.wijCSS.stateDisabled),this._onDirectionChange(e.expandDirection,!1),this._initHeaders(),this.element.attr("role","tablist"),t.wijmo.widget.prototype._create.apply(this,arguments)},n.prototype._init=function(){this._bindLiveEvents()},n.prototype.destroy=function(){var e=this.options;this._unbindLiveEvents(),this.element.removeClass("wijmo-wijaccordion "+e.wijCSS.widget+" wijmo-wijaccordion-icons").removeAttr("role"),t.wijmo.widget.prototype.destroy.apply(this,arguments)},n.prototype._getHeaders=function(){var e=this.options,n=this.element.data("rightToLeft"),r=[],i,s,o=this.element.find(e.header);if(!(o.length>0&&!t(o[0]).hasClass("wijmo-wijaccordion-header")&&t(o[0]).hasClass("wijmo-wijaccordion-content")))return o;for(i=0;i<o.length;i+=1)s=n?t(o[i]).next(".wijmo-wijaccordion-header"):t(o[i]).prev(".wijmo-wijaccordion-header"),s.length>0&&r.push(s[0]);return t(r)},n.prototype.activate=function(e){var n,r=this.options,i=this._getHeaders(),s,o=this.element.data("rightToLeft"),u,a,f,l,c,h,p,d,v,m;s=t(jQuery.grep(i,function(e){return t(e).hasClass(r.wijCSS.stateActive)})),typeof e=="number"?n=t(i[e]):typeof e=="string"?(e=parseInt(e,0),n=t(i[e])):(n=t(e),e=i.index(e));if(n.hasClass(r.wijCSS.stateDisabled))return!1;if(n.hasClass(r.wijCSS.stateActive))if(r.requireOpenedPane){if(s.length===n.length&&s.index()===n.index())return!1}else s=n,n=t(null);else r.requireOpenedPane||(s=t(null));u=i.index(n),a=i.index(s),f=o?n.prev(".wijmo-wijaccordion-content"):n.next(".wijmo-wijaccordion-content"),l=o?s.prev(".wijmo-wijaccordion-content"):s.next(".wijmo-wijaccordion-content");if(s.length===0&&n.length===0)return!1;if(!this._trigger("beforeSelectedIndexChanged",null,{newIndex:u,prevIndex:a}))return!1;s.removeClass(r.wijCSS.stateActive).removeClass(this._headerCornerOpened).addClass(r.wijCSS.stateDefault+" ui-corner-all").attr({"aria-expanded":"false",tabIndex:-1}).find("> .ui-icon").removeClass(this._triangleIconOpened).addClass(this._triangleIconClosed),n.removeClass(r.wijCSS.stateDefault+" ui-corner-all").addClass(r.wijCSS.stateActive).addClass(this._headerCornerOpened).attr({"aria-expanded":"true",tabIndex:0}).find("> .ui-icon").removeClass(this._triangleIconClosed).addClass(this._triangleIconOpened),r.animated?(c={toShow:f,toHide:l,complete:jQuery.proxy(function(){l.removeClass("wijmo-wijaccordion-content-active"),f.addClass("wijmo-wijaccordion-content-active").wijTriggerVisibility(),l.css("display",""),f.css("display",""),t.fn.wijlinechart&&(l.find(".wijmo-wijlinechart").wijlinechart("redraw"),f.find(".wijmo-wijlinechart").wijlinechart("redraw")),this._trigger("selectedIndexChanged",null,{newIndex:u,prevIndex:a})},this),horizontal:this.element.hasClass("ui-helper-horizontal"),rightToLeft:this.element.data("rightToLeft"),down:u>a,autoHeight:r.autoHeight||r.fillSpace},h=r.animated,p=r.duration,t.isFunction(h)&&(r.animated=h(c)),t.isFunction(p)&&(r.duration=p(c)),d=t.wijmo.wijaccordion.animations,v=r.duration,m=r.animated,m&&!d[m]&&!t.easing[m]&&(m="slide"),d[m]||(d[m]=function(e){this.slide(e,{easing:m,duration:v||700})}),d[m](c)):(s.length>0&&l.hide().removeClass("wijmo-wijaccordion-content-active"),n.length>0&&f.show().addClass("wijmo-wijaccordion-content-active").addClass(this._contentCornerOpened).wijTriggerVisibility(),t.fn.wijlinechart&&(l.find(".wijmo-wijlinechart").wijlinechart("redraw"),f.find(".wijmo-wijlinechart").wijlinechart("redraw")),this._trigger("selectedIndexChanged",null,{newIndex:u,prevIndex:a})),this.options.selectedIndex=u},n.prototype._bindLiveEvents=function(){var e=this;this.element.on(this.options.event+".wijaccordion",".wijmo-wijaccordion-header",jQuery.proxy(this._onHeaderClick,this)).on("keydown.wijaccordion",".wijmo-wijaccordion-header",jQuery.proxy(this._onHeaderKeyDown,this)).on("mouseenter.wijaccordion",".wijmo-wijaccordion-header",function(){t(this).addClass("ui-state-hover")}).on("mouseleave.wijaccordion",".wijmo-wijaccordion-header",function(){t(this).removeClass("ui-state-hover")}).on("focus.wijaccordion",".wijmo-wijaccordion-header",function(){t(this).addClass(e.options.wijCSS.stateFocus)}).on("blur.wijaccordion",".wijmo-wijaccordion-header",function(){t(this).removeClass(e.options.wijCSS.stateFocus)})},n.prototype._unbindLiveEvents=function(){this.element.off(".wijaccordion",".wijmo-wijaccordion-header")},n.prototype._onHeaderClick=function(e){return this.options.disabled||this.activate(e.currentTarget),!1},n.prototype._onHeaderKeyDown=function(e){if(this.options.disabled||e.altKey||e.ctrlKey)return;if(!t.ui)return;var n=t.ui.keyCode,r=this.element.find(".wijmo-wijaccordion-header."+this.options.wijCSS.stateFocus),i,s=this._getHeaders();if(r.length>0){i=t(".wijmo-wijaccordion-header",this.element).index(r);switch(e.keyCode){case n.RIGHT:case n.DOWN:if(s[i+1])return s[i+1].focus(),!1;break;case n.LEFT:case n.UP:if(s[i-1])return s[i-1].focus(),!1;break;case n.SPACE:case n.ENTER:this.activate(e.currentTarget),e.preventDefault()}}return!0},n.prototype._onDirectionChange=function(e,n,r){typeof r=="undefined"&&(r=null);var i,s,o,u,a,f,l=this.options;n&&(s=this.element.find(".wijmo-wijaccordion-header."+this._headerCornerOpened),s.removeClass(this._headerCornerOpened),o=this.element.find(".wijmo-wijaccordion-content."+this._contentCornerOpened),o.removeClass(this._contentCornerOpened),u=this.element.find("."+this._triangleIconOpened),a=this.element.find("."+this._triangleIconClosed),u.removeClass(this._triangleIconOpened),a.removeClass(this._triangleIconClosed)),r!==null&&this.element.removeClass("wijmo-wijaccordion-"+r);switch(e){case"top":this._headerCornerOpened="ui-corner-bottom",this._contentCornerOpened="ui-corner-top",this._triangleIconOpened=l.wijCSS.iconArrowUp,this._triangleIconClosed=l.wijCSS.iconArrowRight,i=!0,this.element.removeClass("ui-helper-horizontal"),this.element.addClass("wijmo-wijaccordion-top");break;case"right":this._headerCornerOpened="ui-corner-left",this._contentCornerOpened="ui-corner-right",this._triangleIconOpened=l.wijCSS.iconArrowRight,this._triangleIconClosed=l.wijCSS.iconArrowDown,i=!1,this.element.addClass("ui-helper-horizontal"),this.element.addClass("wijmo-wijaccordion-right");break;case"left":this._headerCornerOpened="ui-corner-right",this._contentCornerOpened="ui-corner-left",this._triangleIconOpened=l.wijCSS.iconArrowLeft,this._triangleIconClosed=l.wijCSS.iconArrowDown,i=!0,this.element.addClass("ui-helper-horizontal"),this.element.addClass("wijmo-wijaccordion-left");break;default:this._headerCornerOpened="ui-corner-top",this._contentCornerOpened="ui-corner-bottom",this._triangleIconOpened=l.wijCSS.iconArrowDown,this._triangleIconClosed=l.wijCSS.iconArrowRight,i=!1,this.element.removeClass("ui-helper-horizontal"),this.element.addClass("wijmo-wijaccordion-bottom")}f=this.element.data("rightToLeft"),this.element.data("rightToLeft",i),n&&(u.addClass(this._triangleIconOpened),a.addClass(this._triangleIconClosed),s.addClass(this._headerCornerOpened),o.addClass(this._contentCornerOpened)),n&&i!==f&&this.element.children(".wijmo-wijaccordion-header").each(function(e,n){var r=t(this),s;i?(s=r.next(".wijmo-wijaccordion-content"),r.remove(),r.insertAfter(s)):(s=r.prev(".wijmo-wijaccordion-content"),r.remove(),r.insertBefore(s))})},n}(e.wijmoWidget);e.wijaccordion=r,r.prototype.options=t.extend(!0,{},e.wijmoWidget.prototype.options,{wijMobileCSS:{header:"ui-header ui-bar-a",content:"ui-body ui-body-c"},initSelector:":jqmData(role='wijaccordion')",animated:"slide",duration:null,event:"click",disabled:!1,expandDirection:"bottom",header:"> li > :first-child,> :not(li):even",requireOpenedPane:!0,selectedIndex:0}),t.wijmo.registerWidget(n,r.prototype),t.extend(t.wijmo.wijaccordion,{animations:{slide:function(e,n){e=t.extend({easing:"swing",duration:300},e,n);var r,i;e.horizontal?(r={width:"show"},i={width:"hide"}):(r={height:"show"},i={height:"hide"});if(!e.toHide.size()){e.toShow.stop(!0,!0).animate(r,e);return}if(!e.toShow.size()){e.toHide.stop(!0,!0).animate(i,e);return}var s=e.toShow.css("overflow"),o=0,u={},a={},f,l=e.horizontal?["width","paddingLeft","paddingRight"]:["height","paddingTop","paddingBottom"],c,h=e.toShow;e.horizontal?(c=h[0].style.height,h.height(parseInt(h.parent().height(),10)-parseInt(h.css("paddingTop"),10)-parseInt(h.css("paddingBottom"),10)-(parseInt(h.css("borderTopWidth"),10)||0)-(parseInt(h.css("borderBottomWidth"),10)||0))):(c=h[0].style.width,h.width(parseInt(h.parent().width(),10)-parseInt(h.css("paddingLeft"),10)-parseInt(h.css("paddingRight"),10)-(parseInt(h.css("borderLeftWidth"),10)||0)-(parseInt(h.css("borderRightWidth"),10)||0))),t.each(l,function(n,r){a[r]="hide";var i=(""+t.css(e.toShow[0],r)).match(/^([\d+-.]+)(.*)$/);u[r]={value:i?i[1]:"0",unit:i?i[2]||"px":"px"}}),e.horizontal?f={width:0,overflow:"hidden"}:f={height:0,overflow:"hidden"},e.toShow.css(f).stop(!0,!0).show(),e.toHide.filter(":hidden").each(e.complete).end().filter(":visible").stop(!0,!0).animate(a,{step:function(t,n){var r;if(n.prop===e.horizontal?"width":"height")o=n.end-n.start===0?0:(n.now-n.start)/(n.end-n.start);r=o*u[n.prop].value,r<0&&(r=0),e.toShow[0].style[n.prop]=r+u[n.prop].unit},duration:e.duration,easing:e.easing,complete:function(){e.autoHeight||e.toShow.css(e.horizontal?"width":"height",""),e.toShow.css(e.horizontal?"height":"width",c),e.toShow.css({overflow:s}),e.complete()}})},bounceslide:function(e){this.slide(e,{easing:e.down?"easeOutBounce":"swing",duration:e.down?1e3:200})}}})})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){"use strict";var t=jQuery,n="wijdialog",r="ui-state-hover",i="wijmo-wijdialog-defaultdockingzone",s=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n.prototype._create=function(){return t.ui.dialog.prototype._create.apply(this,arguments)},n.prototype._init=function(){return t.ui.dialog.prototype._init.apply(this,arguments)},n.prototype._destroy=function(){return t.ui.dialog.prototype._destroy.apply(this,arguments)},n.prototype._appendTo=function(){return t.ui.dialog.prototype._appendTo.apply(this,arguments)},n.prototype._setOptions=function(){return t.ui.dialog.prototype._setOptions.apply(this,arguments)},n.prototype._setOption=function(e,n){return t.ui.dialog.prototype._setOption.apply(this,arguments)},n.prototype.widget=function(){return t.ui.dialog.prototype.widget.apply(this,arguments)},n.prototype.close=function(){return t.ui.dialog.prototype.close.apply(this,arguments)},n.prototype.isOpen=function(){return t.ui.dialog.prototype.isOpen.apply(this,arguments)},n.prototype.moveToTop=function(){return t.ui.dialog.prototype.moveToTop.apply(this,arguments)},n.prototype._moveToTop=function(){return t.ui.dialog.prototype._moveToTop.apply(this,arguments)},n.prototype.open=function(){return t.ui.dialog.prototype.open.apply(this,arguments)},n.prototype._focusTabbable=function(){return t.ui.dialog.prototype._focusTabbable.apply(this,arguments)},n.prototype._keepFocus=function(){return t.ui.dialog.prototype._keepFocus.apply(this,arguments)},n.prototype._createWrapper=function(){return t.ui.dialog.prototype._createWrapper.apply(this,arguments)},n.prototype._createTitlebar=function(){return t.ui.dialog.prototype._createTitlebar.apply(this,arguments)},n.prototype._title=function(){return t.ui.dialog.prototype._title.apply(this,arguments)},n.prototype._createButtonPane=function(){return t.ui.dialog.prototype._createButtonPane.apply(this,arguments)},n.prototype._createButtons=function(){return t.ui.dialog.prototype._createButtons.apply(this,arguments)},n.prototype._makeDraggable=function(){return t.ui.dialog.prototype._makeDraggable.apply(this,arguments)},n.prototype._makeResizable=function(){return t.ui.dialog.prototype._makeResizable.apply(this,arguments)},n.prototype._minHeight=function(){return t.ui.dialog.prototype._minHeight.apply(this,arguments)},n.prototype._position=function(){return t.ui.dialog.prototype._position.apply(this,arguments)},n.prototype._size=function(){return t.ui.dialog.prototype._size.apply(this,arguments)},n.prototype._blockFrames=function(){return t.ui.dialog.prototype._blockFrames.apply(this,arguments)},n.prototype._unblockFrames=function(){return t.ui.dialog.prototype._unblockFrames.apply(this,arguments)},n.prototype._createOverlay=function(){if(!this.options.modal)return;var e=this;t.ui.dialog.overlayInstances||this._delay(function(){t.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(n){!t(n.target).closest(".ui-dialog").length&&!t(n.target).closest(".ui-datepicker").length&&(n.preventDefault(),t(".ui-dialog:visible:last .ui-dialog-content").data(e.widgetFullName)._focusTabbable())})}),this.overlay=t("<div>").addClass("ui-widget-overlay ui-front ui-dialog-overlay").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),t.ui.dialog.overlayInstances++},n.prototype._destroyOverlay=function(){return t.ui.dialog.prototype._destroyOverlay.apply(this,arguments)},n}(e.JQueryUIWidget);e.JQueryUIDialog=s;var o=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n.prototype._create=function(){var e=this,n=e.options;t.isArray(n.buttons)&&t.each(n.buttons,function(e,t){var n=t.click;n&&typeof n=="string"&&window[n]&&(t.click=window[n])}),e.form=e.element.closest("form[id]"),t.ui.dialog.prototype._create.apply(e,arguments),e.uiDialog.addClass("wijmo-wijdialog"),e._initWijWindow(),e._bindWindowResize(),e._attachDraggableResizableEvent(),e._originalPosition=n.position,e.uiDialog.css({zIndex:n.zIndex}),e.isPin=!1,e.form.length&&e.uiDialog.appendTo(e.form)},n.prototype._init=function(){t.ui.dialog.prototype._init.apply(this,arguments)},n.prototype._makeDraggable=function(){t.ui.dialog.prototype._makeDraggable.apply(this,arguments),this.uiDialog.draggable("option","cancel",".wijmo-wijdialog-captionbutton")},n.prototype._handleDisabledOption=function(e,n){var r=this;e?(r.disabledDiv||(r.disabledDiv=r._createDisabledDiv()),r.disabledDiv.appendTo("body"),t.browser.msie&&r.uiDialog.draggable("disable")):r.disabledDiv&&(r.disabledDiv.remove(),r.disabledDiv=null,t.browser.msie&&r.uiDialog.draggable("enable"))},n.prototype._createDisabledDiv=function(){var e=this,n,r=e.uiDialog,i=r.offset(),s=r.outerWidth(),o=r.outerHeight();return n=t("<div></div>").addClass("ui-disabled").css({"z-index":"99999",position:"absolute",width:s,height:o,left:i.left,top:i.top}),t.browser.msie&&(n.css("background-color","white"),t.browser.version==="9.0"&&n.css("opacity","0.1")),n},n.prototype.destroy=function(){var e=this;e.disabledDiv&&(e.disabledDiv.remove(),e.disabledDiv=null),t.ui.dialog.prototype._destroy.apply(e,arguments),e.element.unbind(".wijdialog").removeData("wijdialog")},n.prototype._attachDraggableResizableEvent=function(){var e=this,t=e.uiDialog,n=e.options;n.draggable&&t.draggable&&t.bind("dragstop",function(t,n){e._saveNormalState(),e._destoryIframeMask()}).bind("dragstart",function(t,n){e._createIframeMask()}),n.resizable&&t.resizable&&t.bind("resizestop",function(t,n){e._saveNormalState(),e._destoryIframeMask()}).bind("resizestart",function(t,n){e._createIframeMask()})},n.prototype._createIframeMask=function(){var e=this;e.innerFrame&&(e.mask=t("<div style='width:100%;height:100%;position:absolute;top:0px;left:0px;z-index:"+(t.ui.dialog.maxZ+1)+"'></div>").appendTo(e.uiDialog))},n.prototype._destoryIframeMask=function(){var e=this;e.innerFrame&&e.mask&&(e.mask.remove(),e.mask=undefined)},n.prototype._initWijWindow=function(){var e=this,n=!0;e._createCaptionButtons(),e._checkUrl(),e.uiDialog.bind("mousedown",function(n){var r=n.target;t.contains(e.element[0],r)||e.uiDialog.focus()}).bind("mouseenter",function(e){n=!0}).bind("mouseleave",function(e){n=!1}).bind("focusout",function(t){n||e._trigger("blur",t,{el:e.element})})},n.prototype._moveToTop=function(e,n){var r=this,i=r.options,s;return i.modal&&!n||!i.stack&&!i.modal?r._trigger("focus",e):(i.zIndex>t.ui.dialog.maxZ&&(t.ui.dialog.maxZ=i.zIndex),r.overlay&&(t.ui.dialog.maxZ+=1,r.overlay.css("z-index",t.ui.dialog.maxZ)),s={scrollTop:r.element.scrollTop(),scrollLeft:r.element.scrollLeft()},t.ui.dialog.maxZ+=1,r.uiDialog.css("z-index",t.ui.dialog.maxZ),r.element.attr(s),r._trigger("focus",e),r)},n.prototype._checkUrl=function(){var e=this,n=e.options,r=n.contentUrl,i=t('<iframe style="width:100%;height:99%;" frameborder="0"></iframe>');typeof r=="string"&&r.length>0&&(e.element.addClass("wijmo-wijdialog-hasframe"),e.element.append(i),e.innerFrame=i),e.contentWrapper=e.element},n.prototype._setOption=function(e,n){var r=this;t.ui.dialog.prototype._setOption.apply(r,arguments),e==="disabled"?r._handleDisabledOption(n,r.element):e==="contentUrl"?r.innerFrame?r.innerFrame.attr("src",n):r._checkUrl():(e="captionButtons")&&r._createCaptionButtons()},n.prototype._createCaptionButtons=function(){var e=[],n=this,r=n.options,i,s={pin:{visible:!0,click:n.pin,iconClassOn:"ui-icon-pin-w",iconClassOff:"ui-icon-pin-s"},refresh:{visible:!0,click:n.refresh,iconClassOn:"ui-icon-refresh"},toggle:{visible:!0,click:n.toggle,iconClassOn:"ui-icon-carat-1-n",iconClassOff:"ui-icon-carat-1-s"},minimize:{visible:!0,click:n.minimize,iconClassOn:"ui-icon-minus"},maximize:{visible:!0,click:n.maximize,iconClassOn:"ui-icon-extlink"},close:{visible:!0,click:n.close,iconClassOn:"ui-icon-close"}},o=r.captionButtons,u=n.uiDialogTitlebar;u.children(".ui-dialog-titlebar-close, .wijmo-wijdialog-captionbutton").remove(),t.each(s,function(n,r){o&&o[n]&&t.extend(r,o[n]),e.push({button:n,info:r})}),n._trigger("buttonCreating",null,e);for(i=0;i<e.length;i++)n._createCaptionButton(e[i],u)},n.prototype._createCaptionButton=function(e,n,i){var s=this,o,u="wijmo-wijdialog-titlebar-"+e.button,a=n.children("."+u),f=e.info,l=t("<span></span>");if(f.visible){if(a.size()===0){l.addClass("ui-icon "+f.iconClassOn).text(f.text||e.button),o=t('<a href="#"></a>').append(l).addClass(u+" ui-corner-all wijmo-wijdialog-captionbutton").attr("role","button").hover(function(){o.addClass(r)},function(){o.removeClass(r)}).click(function(e){return l.hasClass(f.iconClassOff)?l.removeClass(f.iconClassOff):l.addClass(f.iconClassOff),t.isFunction(f.click)&&f.click.apply(s,arguments),!1});if(i)return o;o.appendTo(n)}s[e.button+"Button"]=o}else a.remove()},n.prototype.pin=function(){var e=this.isPin,t=this.pinButton.children("span");e?t.removeClass("ui-icon-pin-s"):t.length&&(t.hasClass("ui-icon-pin-s")||t.addClass("ui-icon-pin-s")),this._enableDisableDragger(!e),this.isPin=!e},n.prototype.refresh=function(){var e=this.innerFrame;e!==undefined&&e.attr("src",e.attr("src"))},n.prototype.toggle=function(){var e=this,t=e.toggleButton.children("span");e.minimized||(e.collapsed===undefined||!e.collapsed?(e.collapsed=!0,t.hasClass("ui-icon-carat-1-s")||t.addClass("ui-icon-carat-1-s"),e._collapseDialogContent(!0)):(e.collapsed=!1,t.hasClass("ui-icon-carat-1-s")&&t.removeClass("ui-icon-carat-1-s"),e._expandDialogContent(!0)))},n.prototype._expandDialogContent=function(e){var n=this,r=n.options,i=r.expandingAnimation;n.uiDialog.height("auto"),e&&i!==null?n.contentWrapper.show(i.animated,i.options,i.duration,function(e){n.uiDialog.css("height",n._toggleHeight),t.isFunction(i.callback)&&i.callback(e),r.resizable&&n._enableDisableResizer(!1)}):(n.contentWrapper.show(),r.resizable&&n._enableDisableResizer(!1),n.uiDialog.css("height",n.toggleHeight))},n.prototype._collapseDialogContent=function(e){var t=this,n=t.options,r=n.collapsingAnimation;n.resizable&&t._enableDisableResizer(!0),t._toggleHeight=t.uiDialog[0].style.height,t.uiDialog.height("auto"),e&&r!==null?t.contentWrapper.hide(r.animated,r.options,r.duration):t.contentWrapper.hide(),t._enableDisableDragger(t.isPin)},n.prototype._enableDisableResizer=function(e){var t=this.uiDialog;if(!this.options.resizable)return;t.resizable({disabled:e}),e&&t.removeClass("ui-state-disabled")},n.prototype._enableDisableDragger=function(e){var t=this.uiDialog;if(!this.options.draggable)return;t.draggable({disabled:e}),e&&t.removeClass("ui-state-disabled")},n.prototype.minimize=function(){var e=this,n=e.uiDialog,r=e.options,s=null,o=t("<div></div>"),u=t("<div></div>"),a,f,l,c,h={width:undefined,height:undefined},p,d={width:undefined,height:undefined},v="uiDialog",m;e.minimized||(c=e.uiDialog.position(),h.width=e.uiDialog.width(),h.height=e.uiDialog.height(),m=e.getState(),e.maximized?(e.maximized=!1,e.restoreButton.remove(),t(window).unbind(".onWinResize")):(e.collapsed&&e._expandDialogContent(!1),e._saveNormalState()),e._enableDisableResizer(!0),e.collapsed&&e._collapseDialogContent(!1),o.appendTo(document.body).css({top:e.uiDialog.offset().top,left:e.uiDialog.offset().left,height:e.uiDialog.innerHeight(),width:e.uiDialog.innerWidth(),position:"absolute"}),e.contentWrapper.hide(),e.uiDialogButtonPane.length&&e.uiDialogButtonPane.hide(),n.height("auto"),n.width("auto"),e._doButtonAction(e.minimizeButton,"hide"),e._restoreButton(!0,e.minimizeButton,"After"),e._doButtonAction(e.pinButton,"hide"),e._doButtonAction(e.refreshButton,"hide"),e._doButtonAction(e.toggleButton,"hide"),e._doButtonAction(e.maximizeButton,"show"),t.browser.webkit&&t(".wijmo-wijdialog-captionbutton",e.uiDialog).css("float","left"),e.innerFrame&&(v="copy",e[v]=e.uiDialog.clone(),e[v].empty(),e.uiDialogTitlebar.appendTo(e[v])),r.minimizeZoneElementId.length>0&&(s=t("#"+r.minimizeZoneElementId)),s!==null&&s.size()>0?s.append(e[v]):(a=t("."+i),a.size()===0&&(a=t('<div class="'+i+'"></div>'),t(document.body).append(a)),a.append(e[v]).css("z-index",n.css("z-index"))),e[v].css("position","static"),e[v].css("float","left"),t.browser.msie&&t.browser.version==="6.0"&&(f=t(document).scrollTop(),l=document.documentElement.clientHeight-a.height()+f,a.css({position:"absolute",left:"0px",top:l})),u.appendTo(document.body).css({top:e[v].offset().top,left:e[v].offset().left,height:e[v].innerHeight(),width:e[v].innerWidth(),position:"absolute"}),e.uiDialog.hide(),e.innerFrame&&e[v].hide(),o.effect("transfer",{to:u,className:"ui-widget-content"},100,function(){o.remove(),u.remove(),e[v].show(),e.minimized=!0,p=e.uiDialog.position(),d.width=e.uiDialog.width(),d.height=e.uiDialog.height(),e._enableDisableDragger(!0),e._trigger("resize",null,{originalPosition:c,originalSize:h,position:p,size:d}),e._trigger("stateChanged",null,{originalState:m,state:"minimized"})}))},n.prototype._doButtonAction=function(e,t){e!==undefined&&(e.removeClass(r),e[t]())},n.prototype.maximize=function(){var e=this,n=t(window),r,i={width:undefined,height:undefined},s,o={width:undefined,height:undefined},u;e.maximized||(e._enableDisableDragger(!1),r=e.uiDialog.position(),i.width=e.uiDialog.width(),i.height=e.uiDialog.height(),e.minimized?e.restore():(e.collapsed&&e._expandDialogContent(!1),e._saveNormalState(),u="normal"),e.maximized=!0,e.maximizeButton!==undefined&&(e.maximizeButton.hide(),e._restoreButton(!0,e.maximizeButton,"Before")),t.browser.webkit&&t(".wijmo-wijdialog-captionbutton").css("float",""),e._onWinResize(e,n),e.collapsed&&e._collapseDialogContent(!1),e.collapsed||e._enableDisableDragger(!0),e._enableDisableResizer(!0),s=e.uiDialog.position(),o.width=e.uiDialog.width(),o.height=e.uiDialog.height(),e._trigger("resize",null,{originalPosition:r,originalSize:i,position:s,size:o}),u==="normal"&&e._trigger("stateChanged",null,{originalState:"normal",state:"maximized"}))},n.prototype._bindWindowResize=function(){var e=this,n=t(window),r,i,s;n.resize(function(){e.maximized&&e._onWinResize(e,n)}),t.browser.msie&&t.browser.version==="6.0"&&n.bind("scroll.wijdialog resize.wijdialog",function(){e.minimized&&(i=t(document).scrollTop(),s=e.uiDialog.parent(),r=document.documentElement.clientHeight-s.height()+i,s.css({top:r}))})},n.prototype._saveNormalState=function(){var e=this,t=e.uiDialog,n=e.element;e.maximized||(e.normalWidth=t.css("width"),e.normalLeft=t.css("left"),e.normalTop=t.css("top"),e.normalHeight=t.css("height"),e.normalInnerHeight=n.css("height"),e.normalInnerWidth=n.css("width"),e.normalInnerMinWidth=n.css("min-width"),e.normalInnerMinHeight=n.css("min-height"))},n.prototype._onWinResize=function(e,t){e.uiDialog.css("top",t.scrollTop()),e.uiDialog.css("left",t.scrollLeft()),e.uiDialog.setOutWidth(t.width()),e.uiDialog.setOutHeight(t.height()),e.options.width=e.uiDialog.width(),e.options.height=e.uiDialog.height(),e._size(),e.collapsed&&(e.uiDialog.height("auto"),e.contentWrapper.hide())},n.prototype._restoreButton=function(e,t,n){var r=this,i={button:"restore",info:{visible:e,click:r.restore,iconClassOn:"ui-icon-newwin"}},s=r._createCaptionButton(i,r.uiDialogTitlebar,!0);e&&(s["insert"+n](t),r.restoreButton=s)},n.prototype._appendToBody=function(e){this.innerFrame?(this.uiDialogTitlebar.prependTo(e),e.show()):e.appendTo(document.body)},n.prototype.restore=function(){var e=this,n=e.uiDialog,r,i={width:undefined,height:undefined},s,o={width:undefined,height:undefined},u=t("<div></div>"),a=t("<div></div>"),f="uiDialog",l;e.minimized?(e.minimized=!1,e.innerFrame&&(f="copy",e[f]||(f="uiDialog")),r=e[f].position(),i.width=e[f].width(),i.height=e[f].height(),u.appendTo(document.body).css({top:e[f].offset().top,left:e[f].offset().left,height:e[f].innerHeight(),width:e[f].innerWidth(),position:"absolute"}),n.css("position","absolute"),n.css("float",""),e._appendToBody(n),e._enableDisableResizer(!1),e.isPin||e._enableDisableDragger(!1),e._restoreToNormal(),e.contentWrapper.show(),e.uiDialogButtonPane.length&&e.uiDialogButtonPane.show(),a.appendTo(document.body).css({top:e.uiDialog.offset().top,left:e.uiDialog.offset().left,height:e.uiDialog.innerHeight(),width:e.uiDialog.innerWidth(),position:"absolute"}),e.uiDialog.hide(),u.effect("transfer",{to:a,className:"ui-widget-content"},150,function(){e.uiDialog.show(),s=e.uiDialog.position(),o.width=e.uiDialog.width(),o.height=e.uiDialog.height(),u.remove(),a.remove(),e.copy&&e.copy.remove(),e._trigger("resize",null,{originalPosition:r,originalSize:i,position:s,size:o}),l=e.getState(),e._trigger("stateChanged",null,{originalState:"minimized",state:l})}),e.collapsed&&e._collapseDialogContent(),e._doButtonAction(e.minimizeButton,"show"),e._doButtonAction(e.restoreButton,"remove"),e._doButtonAction(e.pinButton,"show"),e._doButtonAction(e.refreshButton,"show"),e._doButtonAction(e.toggleButton,"show"),t.browser.webkit&&t(".wijmo-wijdialog-captionbutton").css("float","")):e.maximized&&(e.maximized=!1,r=e.uiDialog.position(),i.width=e.uiDialog.width(),i.height=e.uiDialog.height(),t(window).unbind(".onWinResize"),e.collapsed&&e._expandDialogContent(),e._enableDisableResizer(!1),e.isPin||e._enableDisableDragger(!1),e._restoreToNormal(),e.contentWrapper.show(),e.collapsed&&e._collapseDialogContent(),e.maximizeButton!==undefined&&(e.maximizeButton.show(),e._restoreButton(!1,e.maximizeButton,"before")),s=e.uiDialog.position(),o.width=e.uiDialog.width(),o.height=e.uiDialog.height(),e._trigger("resize",null,{originalPosition:r,originalSize:i,position:s,size:o}),l=e.getState(),e._trigger("stateChanged",null,{originalState:"maximized",state:l}))},n.prototype.getState=function(){var e=this;return e.minimized?"minimized":e.maximized?"maximized":"normal"},n.prototype.reset=function(){var e=this;e.normalWidth=e.normalLeft=e.normalTop=e.normalHeight=e.normalInnerHeight=e.normalInnerWidth=e.normalInnerMinWidth=e.normalInnerMinHeight=undefined,e._setOption("position",e._originalPosition)},n.prototype.open=function(){var e=this,n=e.options;(n.hide==="drop"||n.hide==="bounce")&&t.browser.msie&&e.uiDialog.css("filter","auto"),e.innerFrame?(e.innerFrame.attr("src",n.contentUrl),e.minimized?(e.uiDialogTitlebar.show(),e._isOpen=!0):t.ui.dialog.prototype.open.apply(e,arguments)):(e.minimized?(e.uiDialog.show(),e._isOpen=!0):t.ui.dialog.prototype.open.apply(e,arguments),e.uiDialog.wijTriggerVisibility()),e.collapsed&&e._collapseDialogContent(),n.disabled&&(e.disabledDiv?e.disabledDiv.show():e.disable())},n.prototype.close=function(){var e=this,n=e.options;t.ui.dialog.prototype.close.apply(e,arguments)&&(e.innerFrame&&(e.innerFrame.attr("src",""),e.minimized&&e.uiDialogTitlebar.hide()),e.disabledDiv&&n.disabled&&e.disabledDiv.hide())},n.prototype._restoreToNormal=function(){var e=this,t=e.uiDialog,n=e.element;t.css("width",e.normalWidth),t.css("left",e.normalLeft),t.css("top",e.normalTop),t.css("height",e.normalHeight),n.css("height",e.normalInnerHeight),n.css("width",e.normalInnerWidth),n.css("min-width",e.normalInnerMinWidth),n.css("min-height",e.normalInnerMinHeight),e.options.width=e.uiDialog.width(),e.options.height=e.uiDialog.height()},n}(s);e.WijDialog=o,t.ui&&t.ui.dialog&&(t.extend(t.ui.dialog.overlay,{create:function(e){this.instances.length===0&&(setTimeout(function(){t.ui.dialog.overlay.instances.length&&t(document).bind(t.ui.dialog.overlay.events,function(n){if(t(n.target).zIndex()<t.ui.dialog.overlay.maxZ&&!t.contains(e.element[0],n.target))return!1})},1),t(document).bind("keydown.dialog-overlay",function(n){e.options.closeOnEscape&&!n.isDefaultPrevented()&&n.keyCode&&n.keyCode===t.ui.keyCode.ESCAPE&&(e.close(n),n.preventDefault())}),t(window).bind("resize.dialog-overlay",t.ui.dialog.overlay.resize));var n=(this.oldInstances.pop()||t("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return t.fn.bgiframe&&n.bgiframe(),this.instances.push(n),n},height:function(){var e,n;return t.browser.msie?(e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),n=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),e<n?t(window).height()+"px":e+"px"):t(document).height()+"px"},width:function(){var e,n;return t.browser.msie?(e=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),n=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),e<n?t(window).width()+"px":e+"px"):t(document).width()+"px"}}),o.prototype.options=t.extend(!0,{},t.ui.dialog.prototype.options,{zIndex:1e3,initSelector:"",captionButtons:{},collapsingAnimation:null,expandingAnimation:null,contentUrl:"",minimizeZoneElementId:"",buttonCreating:null,stateChanged:null,blur:null}),t.wijmo.registerWidget(n,t.ui.dialog,o.prototype))})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){"use strict";var t=jQuery,n=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n.prototype._create=function(){window.wijmoApplyWijTouchUtilEvents&&(t=window.wijmoApplyWijTouchUtilEvents(t)),this.element.addClass(this.options.wijCSS.widget+" wijmo-wijpager "+this.options.wijCSS.helperClearFix),this.options.disabled&&this.disable(),this._refresh()},n.prototype._destroy=function(){this.element.removeClass(this.options.wijCSS.widget+" wijmo-wijpager "+this.options.wijCSS.helperClearFix),this.$ul.remove()},n.prototype._setOption=function(e,t){this._super(e,t),this._refresh()},n.prototype._refresh=function(){this._validate(),this.$ul&&this.$ul.remove(),this.element.append(this.$ul=t('<ul class="ui-list '+this.options.wijCSS.cornerAll+" "+this.options.wijCSS.content+" "+this.options.wijCSS.helperClearFix+'" role="tablist"></ul>'));switch((this.options.mode||"").toLowerCase()){case"nextprevious":this._createNextPrev(!1);break;case"nextpreviousfirstlast":this._createNextPrev(!0);break;case"numeric":this._createNumeric(!1);break;case"numericfirstlast":this._createNumeric(!0)}},n.prototype._validate=function(){var e=this.options;if(isNaN(e.pageCount)||e.pageCount<1)e.pageCount=1;isNaN(e.pageIndex)||e.pageIndex<0?e.pageIndex=0:e.pageIndex>=e.pageCount&&(e.pageIndex=e.pageCount-1);if(isNaN(e.pageButtonCount)||e.pageButtonCount<1)e.pageButtonCount=1},n.prototype._createNextPrev=function(e){var t=this.options;e&&t.pageIndex&&this.$ul.append(this._createPagerItem(!1,t.firstPageText,1,t.firstPageClass)),t.pageIndex&&this.$ul.append(this._createPagerItem(!1,t.previousPageText,t.pageIndex,t.previousPageClass)),t.pageIndex+1<t.pageCount&&this.$ul.append(this._createPagerItem(!1,t.nextPageText,t.pageIndex+2,t.nextPageClass)),e&&t.pageIndex+1<t.pageCount&&this.$ul.append(this._createPagerItem(!1,t.lastPageText,t.pageCount,t.lastPageClass))},n.prototype._createNumeric=function(e){var t=this.options,n=t.pageIndex+1,r=1,i=Math.min(t.pageCount,t.pageButtonCount),s;n>i&&(r=Math.floor(t.pageIndex/t.pageButtonCount)*t.pageButtonCount+1,i=r+t.pageButtonCount-1,i=Math.min(i,t.pageCount),i-r+1<t.pageButtonCount&&(r=Math.max(1,i-t.pageButtonCount+1))),r!==1&&(e&&this.$ul.append(this._createPagerItem(!1,t.firstPageText,1,t.firstPageClass)),this.$ul.append(this._createPagerItem(!1,"...",r-1,"")));for(s=r;s<=i;s++)this.$ul.append(this._createPagerItem(s===n,s.toString(),s,""));t.pageCount>i&&(this.$ul.append(this._createPagerItem(!1,"...",i+1,"")),e&&this.$ul.append(this._createPagerItem(!1,t.lastPageText,t.pageCount,t.lastPageClass)))},n.prototype._createPagerItem=function(e,n,r,i){var s,o=this.options.wijCSS,u=this,a=t("<li />").addClass("wijmo-wijpager-button "+o.cornerAll).attr({role:"tab","aria-label":n,title:n});return e?a.addClass(o.stateActive).attr("aria-selected","true"):a.addClass(o.stateDefault).hover(function(){u.options.disabled||t(this).removeClass(o.stateDefault).addClass(o.stateHover)},function(){u.options.disabled||t(this).removeClass(o.stateHover).addClass(o.stateDefault)}).bind("click."+this.widgetName,{newPageIndex:r-1},t.proxy(this._onClick,this)),e?s=t("<span />"):s=i?t("<span />").addClass(o.icon+" "+i):t("<a/>").attr("href","#"),s.text(n),a.append(s),a},n.prototype._onClick=function(e){if(this.options.disabled)return!1;var t={newPageIndex:e.data.newPageIndex,handled:!1};return this._trigger("pageIndexChanging",null,t)!==!1&&this.options.pageIndex!==t.newPageIndex&&(this.options.pageIndex=t.newPageIndex,t.handled||this._refresh(),this._trigger("pageIndexChanged",null,{newPageIndex:t.newPageIndex})),!1},n}(e.wijmoWidget);e.wijpager=n,n.prototype.widgetEventPrefix="wijpager",n.prototype.options=t.extend(!0,{},e.wijmoWidget.prototype.options,{wijMobileCSS:{header:"ui-header ui-bar-a",content:"ui-body-c",stateDefault:"ui-btn-up-c",stateHover:"ui-btn-down-b",stateActive:"ui-btn-down-c"},firstPageClass:t.wijmo.widget.prototype.options.wijCSS.iconSeekFirst,firstPageText:"First",lastPageClass:t.wijmo.widget.prototype.options.wijCSS.iconSeekEnd,lastPageText:"Last",mode:"numeric",nextPageClass:t.wijmo.widget.prototype.options.wijCSS.iconSeekNext,nextPageText:"Next",pageButtonCount:10,previousPageClass:t.wijmo.widget.prototype.options.wijCSS.iconSeekPrev,previousPageText:"Previous",pageCount:1,pageIndex:0,pageIndexChanging:null,pageIndexChanged:null}),t.wijmo.registerWidget("wijpager",n.prototype)})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(b){var c=jQuery;var a=(function(e){__extends(d,e);function d(){e.apply(this,arguments);this._dataOffset=0;this._scrollingState={x:null,y:null,index:0};this._windowResizeTimer=0}d.prototype._createWidget=function(f,g){var h=f&&(b).data.util.isClassInstance(f.data)&&!((typeof wijdatasource==="function")&&(f.data instanceof wijdatasource))&&f.data;if(h){delete f.data}e.prototype._createWidget.apply(this,arguments);if(h){this.option("data",h)}};d.prototype._create=function(){var g=this;if(!this.element.is("table")){throw"invalid markup"}this._windowResizeTimer=0;this._dataOffset=0;this._scrollingState={x:null,y:null,index:0};this._initialized=false;this._destroyed=false;this._rendered=false;this._eventUID=undefined;this._dataViewWrapper=undefined;this._originalHtml=undefined;this._originalAttr=undefined;this._originalCssText=undefined;this._autoHeight=undefined;this._autoWidth=undefined;this._renderCounter=0;this.$superPanelHeader=undefined;this.$topPagerDiv=undefined;this.$bottomPagerDiv=undefined;this.$groupArea=undefined;this.__uid=undefined;this._wijDataView=undefined;this.outerDiv=undefined;this.sketchTable=undefined;this.cellFormatter=undefined;this.rowStyleFormatter=undefined;this.cellStyleFormatter=undefined;this._eventUID=b.grid.getUID();this._spinnerIsActivated=false;this.options=c.extend(true,{},this.options);if(window.wijmoApplyWijTouchUtilEvents){c=window.wijmoApplyWijTouchUtilEvents(c)}if(c.isFunction(window.wijmoASPNetParseOptions)){window.wijmoASPNetParseOptions(this.options)}this._initialized=false;this._destroyed=false;var h=this.element[0].style.height,f=this.element[0].style.width;this._dataViewWrapper=new b.grid.dataViewWrapper(this);this._originalHtml=this.element.html();this._originalAttr={};this._originalCssText=this.element[0].style.cssText;this.element.addClass("wijmo-wijgrid-root");this.element.wrap('<div class="'+this.options.wijCSS.widget+" wijmo-wijgrid "+this.options.wijCSS.content+" "+this.options.wijCSS.cornerAll+'"></div>');this.outerDiv=this.element.parent();if(h){this.outerDiv.css("height",this.element[0].style.height)}if(h!==""&&h!=="auto"){this._autoHeight=false}else{this._autoHeight=true}if(f){this.outerDiv.css("width",this.element[0].style.width)}if(f!==""&&f!=="auto"){this._autoWidth=false}else{this._autoWidth=true}this.element.css({height:"",width:""});if(this.options.disabled){this.disable()}this.cellFormatter=new b.grid.cellFormatterHelper();this.rowStyleFormatter=new b.grid.rowStyleFormatterHelper(this);this.cellStyleFormatter=new b.grid.cellStyleFormatterHelper(this);this._field("viewRenderBounds",{start:0,end:0});if(this._allowVirtualScrolling()){this._field("viewRenderBounds").start=this._scrollingState.index;if(this._serverSideVirtualScrolling()){this._dataOffset=this._scrollingState.index}}if(this.element.wijAddVisibilityObserver){this.element.wijAddVisibilityObserver(function(){if(g._initialized&&!g._destroyed){g.setSize()}},"wijgrid")}this._renderCounter=0};d.prototype._destroy=function(){var g,f=this;try{this._view().dispose();this._detachEvents(true);if(g=this._field("resizer")){g.dispose()}if(g=this._field("frozener")){g.dispose()}if(g=this._field("selectionui")){g.dispose()}if(g=this._field("dragndrop")){g.dispose()}this._dataViewWrapper.dispose();b.grid.remove$dataByPrefix(this.element,this._data$prefix);if(this.element.wijRemoveVisibilityObserver){this.element.wijRemoveVisibilityObserver()}this.element.insertBefore(this.outerDiv);this.outerDiv.remove();this.element.html(this._originalHtml);c.each(this._originalAttr,function(h,i){if(i===undefined){f.element.removeAttr(h)}else{f.element.attr(h,i)}});this.element.removeClass("wijmo-wijgrid-root");this.element[0].style.cssText=this._originalCssText}finally{this._destroyed=true}};d.prototype._init=function(){this.$superPanelHeader=null;this.$topPagerDiv=null;this.$bottomPagerDiv=null;this.$groupArea=null;this._field("closestCulture",Globalize.findClosestCulture(this.options.culture)||Globalize.findClosestCulture("default"));if(!this.options.data){if(!this._field("thead")){this._field("thead",b.grid.readTableSection(this.element,1))}if(!this._field("tfoot")){this._field("tfoot",b.grid.readTableSection(this.element,3))}}this._initialized=this._initialized||false;this.ensureControl(true)};d.prototype._setOption=function(h,j){var k=this["_preset_"+h],g=this.options[h],i,f;if(k!==undefined){j=k.apply(this,[j,g])}i=(j!==g);e.prototype._setOption.apply(this,[h,j]);if(i){f=this["_postset_"+h];if(f!==undefined){f.apply(this,[j,g])}}};d.prototype.columns=function(){return this._field("columns")||[]};d.prototype.currentCell=function(h,f){var j,g=this._view(),i=this._rows();if(arguments.length===0){j=this._field("currentCell");if(!j){this._field("currentCell",j=b.grid.cellInfo.outsideValue)}return j}else{j=(arguments.length===1)?(h)._clone():new b.grid.cellInfo(h,f);if(!j.isEqual(b.grid.cellInfo.outsideValue)){if(!j._isValid()){throw"invalid arguments"}j._clip(this._getDataCellsRange());if(j.rowIndex()>=0){if(!(g._getRowInfo(i.item(j.rowIndex())).type&b.grid.rowType.data)){return}}}j._setGridView(this);this._changeCurrentCell(null,j);return this._field("currentCell")}};d.prototype.data=function(){return this._dataViewWrapper.dataView().getSource()};d.prototype.dataView=function(){return this._dataViewWrapper.dataView()};d.prototype.doRefresh=function(f){if(!c.isPlainObject(f)){f={}}var m,h=this,i=b.grid.EXPANDO,g=f&&f.virtualScrollData;if(!this._initialized){try{this._prepareColumnOptions(true,true)}catch(j){throw j}finally{this._ownerise(true);this._initialized=true}}else{}if(!g){this._rebuildLeaves();var l=this._dataViewWrapper.data();var k=this._dataViewWrapper.dataView();c.each(this._field("leaves"),function(){this._totalsValue=(l.totals)?l.totals[this.dataKey]:undefined});this.sketchTable=[];if(l.data&&l.data.length){m=this._field("leaves");c.each(l.data,function(n,o){h.sketchTable.push(h._buildSketchRow(o,m))})}else{if(l.emptyData){m=this._field("visibleLeaves");c.each(l.emptyData,function(n,o){h.sketchTable.push(h._buildSketchRowEmptyDataItem(o,m,n===l.emptyData.length-1))})}}}this._onRendering(f);if(!g){this._refresh(f)}else{this._refreshVirtual(f)}this._onRendered(f);if(f&&c.isFunction(f.afterRefresh)){f.afterRefresh.apply(this,[f])}};d.prototype.beginEdit=function(){return this._beginEditInternal(null)};d.prototype.endEdit=function(){return this._endEditInternal(null)};d.prototype.ensureControl=function(g,f){this._loading();if(!c.isPlainObject(f)){f={data:null,afterRefresh:null,beforeRefresh:null}}f._wijgridMarker=true;if(this._initialized){this._convertWidgetsToOptions()}else{this._prepareColumnOptions(this._dataViewWrapper.isDataLoaded(),false);if(!this._dataViewWrapper.isOwnDataView()){(new b.grid.settingsManager(this)).MapDVToWG()}}this._ownerise(true);if(this._initialized){if(f&&c.isFunction(f.beforeRefresh)){f.beforeRefresh.apply(this)}}this._field("allowVirtualScrolling",null);if(g===true){this._dataViewWrapper.load(f)}else{this.doRefresh(f);this._loaded()}};d.prototype.getCellInfo=function(g){var f=null;if(g&&(g=this._findUntilOuterDiv(g,{td:true,th:true}))){f=this._view().getAbsoluteCellInfo(g)}return f};d.prototype.getFilterOperatorsByDataType=function(f){return(new b.grid.filterOperatorsCache(this)).getByDataType(f||"string")};d.prototype.pageCount=function(){if(this._customPagingEnabled()){return Math.ceil(this.options.totalRows/this.options.pageSize)||1}return this.options.allowPaging?(this._dataViewWrapper.dataView()).pageCount():1};d.prototype._serverShaping=function(){return false};d.prototype._pageIndexForDataView=function(){return this.options.pageIndex};d.prototype.setSize=function(k,h){var i=this._view(),j={type:"",hScrollValue:null,vScrollValue:null},l=this.outerDiv,m=this._field("frozener"),g=this._field("visibleLeaves"),f=[];if(i&&i.getScrollValue){j=i.getScrollValue()}if(k||(k===0)){this._autoWidth=false;l.width(k)}if(h||(h===0)){this._autoHeight=false;l.height(h)}c.each(g,function(o,n){var p=i.getHeaderCell(o),q=i.getJoinedCols(o);c(p).css("width","");c.each(q,function(s,r){c(r).css("width","")})});this._view().updateSplits(j);if(m){m.refresh()}};d.prototype.selection=function(){var f=this._field("selection");if(!f){this._field("selection",f=new b.grid.selection(this))}return f};d.prototype._onDataViewCurrentPositionChanged=function(i,g){var f=this._dataViewWrapper.currentPosition(),j=new b.grid.cellInfo(this.currentCell().cellIndex(),this._dataViewDataRowIndexToGrid(f),null),h=this.selection();if(j.rowIndex()<0){j.cellIndex(-1)}else{if(j.cellIndex()<0){j.cellIndex(0)}}j=this.currentCell(j);h.beginUpdate();h.clear();if(j&&j._isValid()){h._selectRange(new b.grid.cellInfoRange(j,j),false,false,0,null)}h.endUpdate()};d.prototype._resetDataProperties=function(){this.options.pageIndex=0;var f=this._field("viewRenderBounds");f.start=f.end=0};d.prototype._onDataViewLoading=function(){this._activateSpinner();this._trigger("dataLoading")};d.prototype._onDataViewReset=function(f){(new b.grid.settingsManager(this)).MapDVToWG();this._trigger("dataLoaded");this.doRefresh(f);this._loaded()};d.prototype._onDataViewLoaded=function(){};d.prototype._loading=function(){this._activateSpinner();this._trigger("loading")};d.prototype._loaded=function(){this._deactivateSpinner();this._trigger("loaded")};d.prototype._buildSketchRow=function(q,j){var g,k,l,n,o,h,f=[],p=b.data.Expando.getFrom(q.values,false),m=p?p[b.grid.EXPANDO]:null;for(g=0,k=j.length;g<k;g++){l=j[g];if(b.grid.validDataKey(l.dataKey)){n=(m&&m.cellsAttributes)?m.cellsAttributes[l.dataKey]:{};o=this._dataViewWrapper.getValue(q.values,l.dataKey);f.push({value:this._parse(l,o),__attr:n||{},__style:{}})}}(f).originalRowIndex=q.originalRowIndex;(f).rowType=b.grid.rowType.data;if(q.originalRowIndex%2!==0){(f).rowType|=b.grid.rowType.dataAlt}(f).__style={};(f).__attr=(m&&m.rowAttributes)?m.rowAttributes:{};return f};d.prototype._buildSketchRowEmptyDataItem=function(g,m,l){var h,f,k=[],j=m.length;for(h=0,f=g.length;h<f;h++){k.push({html:g[h],__attr:{colSpan:(j>0&&l)?j:1},__style:{}})}(k).rowType=b.grid.rowType.emptyDataRow;(k).__style={};(k).__attr={};return k};d.prototype._prepareColumnOptions=function(j,i){b.grid.traverse(this.options.columns,function(l){l.isBand=(c.isArray(l.columns)||(l.clientType==="c1band"));l._originalDataKey=l.dataKey;l._originalHeaderText=l.headerText});new b.grid.bandProcessor().getVisibleHeight(this.options.columns,true);var k=[],h=this._originalHeaderRowData(),g=this._originalFooterRowData(),f=(this.options.columnsAutogenerationMode||"").toLowerCase();if(j){b.grid.columnsGenerator.generate(f,this._dataViewWrapper.getFieldsInfo(),this.options.columns)}b.grid.setTraverseIndex(this.options.columns);b.grid.traverse(this.options.columns,function(l){l.isBand=(c.isArray(l.columns)||(l.clientType==="c1band"));b.grid.shallowMerge(l,b.c1basefield.prototype.options);if(!l.isBand){b.grid.shallowMerge(l,b.c1field.prototype.options);l.groupInfo=l.groupInfo||{};b.grid.shallowMerge(l.groupInfo,b.c1field.prototype.options.groupInfo);if(!l.clientType){l.clientType="c1field"}}else{l.clientType="c1band"}if(l.isLeaf&&!l.isBand){k.push(l)}});this._field("leaves",k);if(j){c.each(k,c.proxy(function(n,l){var m=(typeof(l.dataKey)==="number")?l.dataKey:n;if(f==="merge"||l.dynamic===true){if(l.headerText===undefined){if(this._dataViewWrapper.isBoundedToDOM()&&h&&(m<h.length)){l.headerText=c.trim(h[m])}else{if(b.grid.validDataKey(l.dataKey)){l.headerText=""+l.dataKey}}}}if(this._dataViewWrapper.isBoundedToDOM()&&g&&(m<g.length)){l._footerTextDOM=c.trim(g[m])}},this))}};d.prototype._rebuildLeaves=function(){var f=[],h=[],g;if(this.options.showRowHeader){g=b.grid.createDynamicField({clientType:"c1basefield",dataIndex:-1,travIdx:-1,parentVis:true,allowMoving:false,allowSizing:false,allowSort:false,isRowHeader:true});g.owner=this;f.push(g)}c.each(this.options.columns,function(i,j){f.push(j)});this._columnsHeadersTable(new b.grid.bandProcessor().generateSpanTable(f,h));this._field("leaves",h);this._onLeavesCreated()};d.prototype._onLeavesCreated=function(){var k=this._field("leaves"),i=this._dataViewWrapper.getFieldsInfo(),j,h=0,f=0,g=this;this._field("visibleLeaves",c.grep(k,function(l,m){l.leavesIdx=m;if(b.grid.validDataKey(l.dataKey)){l.dataIndex=h++}else{l.dataIndex=-1}if(!l.isBand){j=i[l.dataKey];if(j){l._underlyingDataType=j.type;l._underlyingDataFormatString=j.format}if(c.isFunction(l.dataParser)){l.dataParser=new l.dataParser()}}if(l.parentVis){l.visLeavesIdx=f++;return true}return false}))};d.prototype._allowVirtualScrolling=function(){var f=this._field("allowVirtualScrolling");if(!f){f=this._field("allowVirtualScrolling",!this.options.allowPaging&&this.options.allowVirtualScrolling&&(this.options.staticRowIndex<0)&&(this.options.scrollMode!=="none")&&!this._hasMerging())}return f};d.prototype._dragndrop=function(g){if(typeof g==="undefined"){g=false}var f=this._field("dragndrop");if(!f&&g){this._field("dragndrop",f=new b.grid.uiDragndrop(this))}return f};d.prototype._headerRows=function(){return this._view().headerRows()};d.prototype._filterRow=function(){return this._view().filterRow()};d.prototype._rows=function(){return this._view().bodyRows()};d.prototype._localizeFilterOperators=function(g){var f=this,h=new b.grid.filterOperatorsCache(this);c.each(g,function(j,l){if(l.name){var k=h.getByName(l.name);if(k){k.displayName=l.displayName}}})};d.prototype._selectionui=function(f){var g=this._field("selectionui");if(!g&&f){this._field("selectionui",g=new b.grid.uiSelection(this))}return g};d.prototype._postset_allowColMoving=function(h,g){var f=this;c.each(this.columns(),function(i,j){if(h){f._dragndrop(true).attach(j)}else{f._dragndrop(true).detach(j)}});c.each(this._field("groupedWidgets"),function(i,j){if(h){f._dragndrop(true).attach(j)}else{f._dragndrop(true).detach(j)}})};d.prototype._postset_allowSorting=function(g,f){this.ensureControl(false)};d.prototype._postset_columns=function(g,f){this._initialized=false;this.ensureControl(true)};d.prototype._postset_allowPaging=function(g,f){this.ensureControl(true)};d.prototype._postset_culture=function(g,f){throw"read-only"};d.prototype._postset_customFilterOperators=function(g,f){var h=this._dataViewWrapper.dataView()};d.prototype._postset_data=function(g,f){this._ownerise(false);b.grid.traverse(this.options.columns,function(j,i){if(j.dynamic){var h=c.inArray(j,i);if(h>=0){i.splice(h,1)}}else{j.dataKey=j._originalDataKey;j.headerText=j._originalHeaderText}});this._initialized=false;if(this._dataViewWrapper){this._dataViewWrapper.dispose()}this._dataViewWrapper=new b.grid.dataViewWrapper(this);this.ensureControl(true)};d.prototype._postset_disabled=function(i,h){var g=this,f=this._view();b.grid.iterateChildrenWidgets(this.outerDiv,function(j,k){if(k!==g){k.option("disabled",i)}});if(f){f.ensureDisabledState()}};d.prototype._postset_groupIndent=function(g,f){this.ensureControl(false)};d.prototype._postset_groupAreaCaption=function(h,g){var f=this._field("groupedColumns");if(this.$groupArea&&(!f||!f.length)){this.$groupArea.html(h||"&nbsp;")}};d.prototype._postset_highlightCurrentCell=function(g,f){var h=this.currentCell();if(h&&h._isValid()){this._highlightCellPosition(h,g)}};d.prototype._preset_pageIndex=function(j,h){if(isNaN(j)){throw"out of range"}var g=this.pageCount(),i=function(k){if(k>g-1){k=g-1}if(k<0){k=0}return k},f;j=i(j);if(this.options.allowPaging&&j!==h){f={newPageIndex:j};if(!this._onPageIndexChanging(f)){j=h}else{j=i(f.newPageIndex)}}return j};d.prototype._postset_pageIndex=function(h,g){if(this.options.allowPaging){var f={newPageIndex:h};if(this._customPagingEnabled()){this._convertWidgetsToOptions();this._onPageIndexChanged(f)}else{this.ensureControl(true,{afterRefresh:function(){this._onPageIndexChanged(f)}})}}};d.prototype._preset_pageSize=function(g,f){if(isNaN(g)){throw"out of range"}if(g<=0){g=1}return g};d.prototype._postset_pageSize=function(g,f){this._resetDataProperties();if(this.options.allowPaging&&!this._customPagingEnabled()){this.ensureControl(true)}};d.prototype._postset_pagerSettings=function(g,f){this.ensureControl(false)};d.prototype._postset_scrollMode=function(g,f){this.ensureControl(false)};d.prototype._postset_selectionMode=function(i,g){var h=this.selection(),j=this.currentCell(),f=this.selection().selectedCells().length();h.beginUpdate();h.clear();if(j&&j._isValid()&&f){h._selectRange(new b.grid.cellInfoRange(j,j),false,false,0,null)}h.endUpdate();this._view().toggleDOMSelection(i==="none")};d.prototype._postset_showFilter=function(g,f){this.ensureControl(false)};d.prototype._postset_showGroupArea=function(g,f){this.ensureControl(false)};d.prototype._postset_showRowHeader=function(g,f){this.ensureControl(false)};d.prototype._postset_staticRowIndex=function(){if(this.options.scrollMode!=="none"){this.ensureControl(false)}};d.prototype._postset_staticColumnIndex=function(){if(this.options.scrollMode!=="none"){this.ensureControl(false)}};d.prototype._postset_allowVirtualScrolling=function(g,f){this.ensureControl(false)};d.prototype._preset_allowVirtualScrolling=function(g,f){if(isNaN(g)||g<0){throw"out of range"}return g};d.prototype._activateSpinner=function(){if(!this._spinnerIsActivated){var g=this.options.wijCSS,f=this.outerDiv.append('<div class="wijmo-wijgrid-overlay '+g.overlay+'"></div><span class="wijmo-wijgrid-loadingtext '+g.content+" "+g.cornerAll+'"><span class="'+g.icon+' ui-icon-clock"></span>'+this.options.loadingText+"</span>").find("> .wijmo-wijgrid-loadingtext");f.position({my:"center",at:"center center",of:this.outerDiv,collision:"none"});this._spinnerIsActivated=true}};d.prototype._customPagingEnabled=function(){return this.options.allowPaging&&this.options.totalRows>=0};d.prototype._deactivateSpinner=function(){if(this._spinnerIsActivated){try{this.outerDiv.find("> .wijmo-wijgrid-overlay, > .wijmo-wijgrid-loadingtext").remove()}finally{this._spinnerIsActivated=false}}};d.prototype._columnWidgetsFactory=function(f,i){var g,h=i.clientType;if(!h&&i.isBand){h="c1band"}i=c.extend({},i,{disabled:this.options.disabled});try{c.data(f[0],"wijgridowner",this);switch(h){case"c1basefield":g=f.c1basefield(i);break;case"c1band":g=f.c1band(i);break;default:g=f.c1field(i)}}finally{c.removeData(f[0],"wijgridowner")}return g};d.prototype._convertWidgetsToOptions=function(){if(this._initialized&&this._mergeWidgetsWithOptions){this._ownerise(false);this._widgetsToOptions();this._ownerise(true)}};d.prototype._field=function(f,g){return b.grid.dataPrefix(this.element,this._data$prefix,f,g)};d.prototype._removeField=function(f){var g=this._data$prefix+f;this.element.removeData(g)};d.prototype._prepareTotalsRequest=function(g){var i=this._field("leaves"),f,h;if(!i||!this.options.showFooter){return[]}f=c.map((i),function(k,j){if(!k.isBand&&b.grid.validDataKey(k.dataKey)&&k.aggregate&&k.aggregate!=="none"){if(g){return[{column:k,aggregate:k.aggregate}]}else{return[{dataKey:k.dataKey,aggregate:k.aggregate}]}}return null});return f};d.prototype._widgetsToOptions=function(){var f=b.grid.flatten(this.options.columns);c.each(this.columns(),function(i,h){delete h.options.columns;var g=f[h.options.travIdx];c.extend(true,g,h.options);g.filterValue=h.options.filterValue;g.filterOperator=h.options.filterOperator})};d.prototype._recreateColumnWidgets=function(){c.each(this.columns(),function(i,p){p.destroy()});var k=[],m=this._headerRows(),o,l,n,j,h,f,g;if(m&&m.length()){o=[];b.grid.traverse(this.options.columns,function(i){if(i.parentVis){o.push(i)}});for(l=0,n=o.length;l<n;l++){j=o[l];h=m.item(j.thY);f=b.grid.rowAccessor.getCell(h,j.thX);g=this._columnWidgetsFactory(c(f),j);k.push(g.data(b.grid.widgetName(g)))}}this._field("columns",k)};d.prototype._ownerise=function(f){if(f){var g=this;b.grid.traverse(this.options.columns,function(l){l.owner=g;var k,j,h;if((k=l.groupInfo)){k.owner=l;if(k.expandInfo){for(j=0,h=k.expandInfo.length;j<h;j++){k.expandInfo[j].owner=k}}}})}else{b.grid.traverse(this.options.columns,function(l){delete l.owner;var k,j,h;if((k=l.groupInfo)){delete k.owner;if(k.expandInfo){for(j=0,h=k.expandInfo.length;j<h;j++){delete k.expandInfo[j].owner}}}})}};d.prototype._ensureRenderBounds=function(g){var f=this._totalRowsCount();if(g.start<0){g.start=0}g.start=Math.min(g.start,f-1);if(g.end<0){g.end=0}g.end=Math.min(g.end,f-1);return g};d.prototype._refresh=function(f){new b.grid.grouper().group(this,this.sketchTable,this._field("leaves"));new b.grid.merger().merge(this.sketchTable,this._field("visibleLeaves"));var g=this._field("viewRenderBounds");this._ensureRenderBounds(g);if(this.options.scrollMode!=="none"){this._field("view",new b.grid.fixedView(this,this._field("viewRenderBounds")))}else{this._field("view",new b.grid.flatView(this,this._field("viewRenderBounds")))}this._render();this._ownerise(false);this._recreateColumnWidgets();this._ownerise(true);if(this.options.allowPaging){if(this.$topPagerDiv){this.$topPagerDiv.wijpager(this._pagerSettings2PagerWidgetSettings()).css("zIndex",5)}if(this.$bottomPagerDiv){this.$bottomPagerDiv.wijpager(this._pagerSettings2PagerWidgetSettings()).css("zIndex",5)}}};d.prototype._refreshVirtual=function(f){var h=f.virtualScrollData,g={top:0,bottom:0};if(h.data){g=this._processVirtualData(h)}this._updateRowInfos(h,g);this._renderVirtualIntoView(h)};d.prototype._updateRowInfos=function(l,h){var f=this._field("viewRenderBounds"),n=this._view(),j=l.newBounds,p=this._view().bodyRows(),m,k,o,g;switch(l.mode){case"reset":break;case"overlapBottom":m={start:j.start-f.start,end:f.end-f.start};o=j.start-f.start;for(k=m.start;k<=m.end;k++){g=n._getRowInfo(p.item(k));g.sectionRowIndex-=o;g.dataItemIndex+=h.top;n._setRowInfo(g.$rows,g)}break;case"overlapTop":m={start:f.start-f.start,end:j.end-f.start};o=f.start-j.start;for(k=m.start;k<=m.end;k++){g=n._getRowInfo(p.item(k));g.sectionRowIndex+=o;g.dataItemIndex+=h.top;n._setRowInfo(g.$rows,g)}break}};d.prototype._renderVirtualIntoView=function(m){var k=this._field("viewRenderBounds"),g=this._view(),l=function(i){return(i.rowType&b.grid.rowType.data)?i.originalRowIndex:-1},h,j,n,f;switch(m.mode){case"reset":g._clearBody();for(j=m.newBounds.start;j<=m.newBounds.end;j++){n=this.sketchTable[j-this._dataOffset];g._insertBodyRow(n,-1,l(n),j)}g._rebuildOffsets();break;case"overlapBottom":h={start:m.newBounds.start,end:k.end};for(j=0;j<h.start-k.start;j++){g._removeBodyRow(0,false)}for(j=h.end+1;j<=m.newBounds.end;j++){n=this.sketchTable[j-this._dataOffset];g._insertBodyRow(n,-1,l(n),j)}break;case"overlapTop":h={start:k.start,end:m.newBounds.end};for(j=0;j<k.end-m.newBounds.end;j++){g._removeBodyRow(h.end-h.start+1,false)}f=0;for(j=m.newBounds.start;j<k.start;j++){n=this.sketchTable[j-this._dataOffset];g._insertBodyRow(n,f++,l(n),j)}break;default:break}};d.prototype._processVirtualData=function(n){var o=this._dataViewWrapper,f=o.dataView().getSource(),g,p=this._field("leaves"),m,j,h,l=0,r={top:0,bottom:0},q,k=this._serverSideVirtualScrollingMargin();switch(n.mode){case"reset":this.sketchTable.splice(0,this.sketchTable.length);o._unsafeSplice(0,f.length);this._dataOffset=n.request.index;for(m=0;m<n.data.length;m++){o._unsafePush(g=n.data[m]);this.sketchTable.push(this._buildSketchRow(o._wrapDataItem(g,m),p))}break;case"overlapBottom":for(m=0;m<n.data.length;m++){o._unsafePush(g=n.data[m]);this.sketchTable.push(this._buildSketchRow(o._wrapDataItem(g,f.length-1),p))}r.bottom=n.data.length;break;case"overlapTop":for(m=n.data.length-1;m>=0;m--){o._unsafeSplice(0,0,g=n.data[m]);this.sketchTable.splice(0,0,this._buildSketchRow(o._wrapDataItem(g,m),p))}this._dataOffset=n.request.index;r.top=n.data.length;break}j=this._ensureRenderBounds({start:n.newBounds.start,end:n.newBounds.end});h={start:this._dataOffset,end:this._dataOffset+f.length-1};l=(h.end-j.end)-k;if(l>0){r.bottom-=l;o._unsafeSplice(f.length-l,l);this.sketchTable.splice(this.sketchTable.length-l,l)}l=(j.start-h.start)-k;if(l>0){r.top-=l;o._unsafeSplice(0,l);this.sketchTable.splice(0,l);this._dataOffset+=l}for(m=0;m<this.sketchTable.length;m++){this.sketchTable[m].originalRowIndex=m}o._refreshSilent();return r};d.prototype._needToCreatePagerItem=function(){return this.options.allowPaging===true};d.prototype._render=function(){var f=this._view(),i=this.options,h=this.options.wijCSS,g;f.render();g=this.outerDiv;if(i.scrollMode!=="none"){g=this.outerDiv.find("div.wijmo-wijgrid-scroller:first")}this.$superPanelHeader=null;if(this.$topPagerDiv){if(this.$topPagerDiv.data("wijmo-wijpager")){this.$topPagerDiv.wijpager("destroy")}this.$topPagerDiv.remove()}this.$topPagerDiv=null;if(this._needToCreatePagerItem()&&((i.pagerSettings.position==="top")||(i.pagerSettings.position==="topAndBottom"))){if(!this.$topPagerDiv){g.prepend(this.$superPanelHeader=c('<div class="wijmo-wijsuperpanel-header"></div>'));this.$superPanelHeader.prepend(this.$topPagerDiv=c('<div class="wijmo-wijgrid-header '+h.header+" "+h.cornerTop+'"></div>'))}}if(i.showGroupArea){this._processGroupArea(g)}else{this.$groupArea=null}if(this.$bottomPagerDiv){if(this.$bottomPagerDiv.data("wijmo-wijpager")){this.$bottomPagerDiv.wijpager("destroy")}this.$bottomPagerDiv.remove()}this.$bottomPagerDiv=null;if(this._needToCreatePagerItem()&&((i.pagerSettings.position==="bottom")||(i.pagerSettings.position==="topAndBottom"))){if(!this.$bottomPagerDiv){g.append(this.$bottomPagerDiv=c('<div class="wijmo-wijgrid-footer wijmo-wijsuperpanel-footer '+h.stateDefault+" "+h.cornerBottom+'"></div>'))}}};d.prototype._processGroupArea=function(h){var f=this,g=this._field("groupedColumns"),i=[];this.$groupArea=c('<div class="'+this.options.wijCSS.content+" "+this.options.wijCSS.helperClearFix+'"></div>');if(g.length>0){c.each(g,function(j,l){var k=c('<a href="#"></a>').appendTo(f.$groupArea);try{c.data(k[0],"wijgridowner",f);k.c1groupedfield(c.extend({},{allowMoving:l.allowMoving,allowSort:l.allowSort,dataIndex:l.dataIndex,headerText:l.headerText,isBand:l.isBand,isLeaf:l.isLeaf,linearIdx:l.linearIdx,parentIdx:l.parentIdx,sortDirection:l.sortDirection,travIdx:l.travIdx,groupedIndex:l.groupedIndex},{disabled:f.options.disabled}))}finally{c.removeData(k[0],"wijgridowner")}i.push(k.data("wijmo-c1groupedfield"))})}else{this.$groupArea.addClass("wijmo-wijgrid-group-area").css("padding",0).html(this.options.groupAreaCaption||"&nbsp;")}this._field("groupedWidgets",i);if(!this.$superPanelHeader){h.prepend(this.$superPanelHeader=c('<div class="wijmo-wijsuperpanel-header"></div>'))}this.$superPanelHeader.prepend(this.$groupArea);this._dragndrop(true).attachGroupArea(this.$groupArea)};d.prototype._attachEvents=function(){var f=this._view(),h=f.focusableElement(),g=this;h.bind("keydown."+this.widgetName,c.proxy(this._onKeyDown,this));h.bind("keypress."+this.widgetName,c.proxy(this._onKeyPress,this));c.each(f.subTables(),function(i,j){var k=j.element();if(k){if(k.tHead){c(k.tHead).bind("click."+g.widgetName,c.proxy(g._onClick,g))}if(k.tBodies.length){c(k.tBodies[0]).bind("click."+g.widgetName,c.proxy(g._onClick,g)).bind("dblclick."+g.widgetName,c.proxy(g._onDblClick,g)).bind("mousemove."+g.widgetName,c.proxy(g._onMouseMove,g)).bind("mouseout."+g.widgetName,c.proxy(g._onMouseOut,g))}}});c(window).bind("resize."+this.widgetName+"."+this._eventUID,c.proxy(this._onWindowResize,this))};d.prototype._detachEvents=function(i){var f=this._view(),h=this,g;this._windowResizeTimer=0;c(window).unbind("resize."+this.widgetName+"."+this._eventUID);if(f){g=f.focusableElement();g.unbind("keydown."+this.widgetName);g.unbind("keypress."+this.widgetName);c.each(f.subTables(),function(){var j=this.element();if(j){if(j.tHead){c(j.tHead).unbind("."+h.widgetName)}if(j.tBodies.length){c(j.tBodies[0]).unbind("."+h.widgetName)}}})}};d.prototype._handleSort=function(k,g){var j=this.options.columns,f=k.travIdx,i,h;if(k&&this.options.allowSorting){i=((k.sortDirection==="none")?"ascending":((k.sortDirection==="ascending")?"descending":"ascending"));h={column:k,sortDirection:i,sortCommand:k.dataKey+" "+(i==="ascending"?"asc":"desc")};if(this._onColumnSorting(h)){k.sortDirection=h.sortDirection;if(g){k.sortOrder=this._customSortOrder++}else{this._customSortOrder=1000;c.each(this.columns(),function(l,m){m.options.sortOrder=0;if(m.options.travIdx!==f&&!(m.options.groupInfo&&m.options.groupInfo.position!=="none")){m.options.sortDirection="none"}});b.grid.traverse(j,function(l){l.sortOrder=0;if(l.travIdx!==f&&!(l.groupInfo&&l.groupInfo.position!=="none")){l.sortDirection="none"}})}h={column:k,sortDirection:k.sortDirection,sortCommand:k.dataKey+" "+(k.sortDirection==="ascending"?"asc":"desc")};if(this._customPagingEnabled()){this._convertWidgetsToOptions();this._onColumnSorted(h)}else{this.ensureControl(true,{afterRefresh:function(){this._onColumnSorted(h)}})}}}};d.prototype._pagerSettings2PagerWidgetSettings=function(){return c.extend({},this.options.pagerSettings,{disabled:this.options.disabled,pageCount:this.pageCount(),pageIndex:this.options.pageIndex,pageIndexChanging:c.proxy(this._onPagerWidgetPageIndexChanging,this),pageIndexChanged:c.proxy(this._onPagerWidgetPageIndexChanged,this)})};d.prototype._handleDragnDrop=function(j,n,i,f,m){var l=b.grid.getColumnByTravIdx(this.options.columns,j),h=b.grid.getColumnByTravIdx(this.options.columns,n),g=f?"groupArea":"columns",k=m?"groupArea":"columns";if(m){if(this._onColumnGrouping({drag:l.found,drop:h?h.found:null,dragSource:g,dropSource:k,at:i})){this.ensureControl(true,{beforeRefresh:function(){if(!h){l.found.groupedIndex=0}else{switch(i){case"left":l.found.groupedIndex=h.found.groupedIndex-0.5;break;case"right":l.found.groupedIndex=h.found.groupedIndex+0.5;break}}if(!f){c.extend(true,l.found,{groupInfo:{position:"header"}})}},afterRefresh:function(){this._onColumnGrouped({drag:l.found,drop:h?h.found:null,dragSource:g,dropSource:k,at:i})}})}}else{if(this._onColumnDropping({drag:l.found,drop:h.found,at:i})){this.ensureControl(false,{beforeRefresh:function(){l.at.splice(l.found.linearIdx,1);switch(i){case"left":if(l.at===h.at&&l.found.linearIdx<h.found.linearIdx){h.at.splice(h.found.linearIdx-1,0,l.found)}else{h.at.splice(h.found.linearIdx,0,l.found)}break;case"right":if(l.at===h.at&&l.found.linearIdx<h.found.linearIdx){h.at.splice(h.found.linearIdx,0,l.found)}else{h.at.splice(h.found.linearIdx+1,0,l.found)}break;case"center":h.found.columns.push(l.found);break}b.grid.setTraverseIndex(this.options.columns)},afterRefresh:function(){this._onColumnDropped({drag:l.found,drop:h.found,at:i})}})}}};d.prototype._handleFilter=function(i,l,k){var f=(new b.grid.filterOperatorsCache(this)).getByName(l),j,h,g;if(f){if(f.arity>1){j=this._parse(i.options,k);h=(j!==null&&(b.grid.getDataType(i.options)==="string"||!isNaN(j)))}else{h=true}if(h){g={column:i.options,operator:f.name,value:j};if(this._onColumnFiltering(g)){i.options.filterValue=g.value;i.options.filterOperator=g.operator;this._resetDataProperties();if(this._customPagingEnabled()){this._convertWidgetsToOptions();this._onColumnFiltered({column:i.options})}else{this.ensureControl(true,{afterRefresh:function(){this._onColumnFiltered({column:i.options})}})}}}}};d.prototype._handleUngroup=function(h){var g=b.grid.getColumnByTravIdx(this.options.columns,h),f;if(g&&g.found){f=g.found;if(this._onColumnUngrouping({column:f})){this.ensureControl(false,{beforeRefresh:function(){delete f.groupedIndex;c.extend(true,f,{groupInfo:{position:"none"}})},afterRefresh:function(){this._onColumnUngrouped({column:f})}})}}};d.prototype._onVirtualScrolling=function(j,g,k,f,i,h){this.ensureControl(true,{virtualScrollData:{newBounds:j,request:g,mode:k,data:h},afterRefresh:function(l){var m=this._field("viewRenderBounds");c.extend(m,l.virtualScrollData.newBounds);this._view()._adjustRowsHeights();i(f)}})};d.prototype._handleVirtualScrolling=function(f,j){var h=this._field("viewRenderBounds"),i=this._ensureRenderBounds({start:f,end:f+this.options.pageSize-1}),k=this._ensureRenderBounds({start:this._dataOffset,end:this._dataOffset+this._dataViewWrapper.dataView().count()-1}),g=null,l;if(i.start>h.end||i.end<h.start){l="reset"}else{if(i.start>h.start){l="overlapBottom"}else{if(i.start<h.start){l="overlapTop"}else{}}}if(this._serverSideVirtualScrolling()){switch(l){case"reset":g={index:f,maxCount:this.options.pageSize};break;case"overlapBottom":if(i.end>k.end){g={index:k.end+1,maxCount:this.options.pageSize}}break;case"overlapTop":if(i.start<k.start){g={index:Math.max(0,k.start-this.options.pageSize),maxCount:0};g.maxCount=k.start-g.index}break}}if(l!=="none"){this._onVirtualScrolling(i,g,l,f,j)}};d.prototype._serverSideVirtualScrolling=function(){return false};d.prototype._serverSideVirtualScrollingMargin=function(){return this.options.pageSize*2};d.prototype._onColumnDropping=function(f){return this._trigger("columnDropping",null,f)};d.prototype._onColumnDropped=function(f){this._trigger("columnDropped",null,f)};d.prototype._onColumnGrouping=function(f){return this._trigger("columnGrouping",null,f)};d.prototype._onColumnGrouped=function(f){this._trigger("columnGrouped",null,f)};d.prototype._onColumnUngrouping=function(f){return this._trigger("columnUngrouping",null,f)};d.prototype._onColumnUngrouped=function(f){this._trigger("columnUngrouped",null,f)};d.prototype._onColumnFiltering=function(f){return this._trigger("filtering",null,f)};d.prototype._onColumnFiltered=function(f){this._trigger("filtered",null,f)};d.prototype._onFilterOperatorsListShowing=function(f){this._trigger("filterOperatorsListShowing",null,f)};d.prototype._onColumnSorting=function(f){return this._trigger("sorting",null,f)};d.prototype._onColumnSorted=function(f){this._trigger("sorted",null,f)};d.prototype._onCurrentCellChanged=function(f){var h=this.options,g=this._field("currentCell");this._dataViewWrapper.currentPosition(this._gridDataRowIndexToDataView(g.rowIndex()));if(h.scrollMode!=="none"&&g&&!g.isEqual(b.grid.cellInfo.outsideValue)){(this._view()).scrollTo(g)}this._trigger("currentCellChanged");if(f&&((f.type||"").toLowerCase()==="click")&&this._editBySingleClick()){this._beginEditInternal(f)}};d.prototype._onPageIndexChanging=function(f){return this._trigger("pageIndexChanging",null,f)};d.prototype._onPageIndexChanged=function(f){this._trigger("pageIndexChanged",null,f)};d.prototype._onPagerWidgetPageIndexChanging=function(g,f){f.handled=true};d.prototype._onPagerWidgetPageIndexChanged=function(g,f){this._setOption("pageIndex",f.newPageIndex)};d.prototype._onRendering=function(f){var g=this._view();this._rendered=false;if(f.virtualScrollData){this.selection().clear();if(this.options.highlightCurrentCell){this._highlightCellPosition(this.currentCell(),false)}}else{if(g){g.dispose()}this._detachEvents(false);this.element.detach();this.element.empty();this.outerDiv.empty();this.outerDiv.append(this.element);if(this._field("selectionui")){this._field("selectionui").dispose();this._field("selectionui",null)}if(this._field("resizer")){this._field("resizer").dispose();this._field("resizer",null)}if(this._field("frozener")){this._field("frozener").dispose();this._field("frozener",null)}}this._trigger("rendering")};d.prototype._onRendered=function(f){var g=this._view(),i,j,h=this.selection().selectedCells().length()>0;this._rendered=true;this._setAttr(g.focusableElement(),"tabIndex",0);i=this.currentCell();if(i._isValid()&&(i=this.currentCell(i))){i._isEdit(false)}else{i=this.currentCell(this._getFirstDataRowCell(0))}this._field("selection",null);i=this.currentCell();if(i._isValid()&&(h||this.options.showSelectionOnRender)){this.selection()._startNewTransaction(i);this.selection()._selectRange(new b.grid.cellInfoRange(i,i),false,false,0,null)}if(!f.virtualScrollData){this._attachEvents();this._selectionui(true);j=new b.grid.uiResizer(this);c.each(this.columns(),function(l,k){var m=k.options;if(m.visible&&m.parentVis&&m.isLeaf){j.addElement(k)}});this._field("resizer",j);g.updateSplits(this._scrollingState);if(this.options.scrollMode!=="none"){this._field("frozener",new b.grid.uiFrozener(this))}}this._renderCounter++;this._trigger("rendered")};d.prototype._onClick=function(j){if(!this._canInteract()||!j.target){return}var m=this._view(),i=this._findUntilOuterDiv(j.target,{td:true,th:true}),k,f,g=0,l,n;if(i){if(c(j.target).hasClass("wijmo-wijgrid-grouptogglebtn")){this._onGroupBtnClick(j);j.stopPropagation();return false}k=c(i).closest("tr");if(!k.length){return}f=m.getAbsoluteCellInfo(i);if(k.hasClass("wijmo-wijgrid-datarow")||k.hasClass("wijmo-wijgrid-headerrow")){if(f.cellIndex()<0||f.rowIndex()<0){if(f.rowIndex()>=0){f=new b.grid.cellInfo(0,f.rowIndex());g=2}else{f=this._getFirstDataRowCell(f.cellIndex());g=1}}this._changeCurrentCell(j,f,!c(j.target).is(":focus"));l=this.currentCell();n=this.selection();if(!j.shiftKey||(!n._multipleRangesAllowed()&&this.options.selectionMode.toLowerCase()!=="singlerange")){n._startNewTransaction(l)}n.beginUpdate();if(j.shiftKey&&j.ctrlKey){n._clearRange(new b.grid.cellInfoRange(l,l),g)}else{n._selectRange(new b.grid.cellInfoRange(n._anchorCell(),l),j.ctrlKey,j.shiftKey,g,null)}n.endUpdate()}var h={cell:f};this._trigger("cellClicked",null,h)}};d.prototype._onDblClick=function(f){if(!this._editBySingleClick()){this._beginEditInternal(f)}};d.prototype._onGroupBtnClick=function(k){if(!this._canInteract()){return}var f=c(k.target).closest("tr"),g=b.grid.groupHelper,h=g.getGroupInfo(f[0]),i,j;if(h){i=g.getColumnByGroupLevel(this._field("leaves"),h.level);if(i){j=i.groupInfo.expandInfo[h.index];if(j.isExpanded){j.collapse()}else{j.expand(k.shiftKey)}this._view().ensureHeight()}}};d.prototype._onKeyDown=function(k){if(!this._canInteract()){return true}var f=(k.target).tagName.toLowerCase(),g=false,j,l,i,h=b.grid.getKeyCodeEnum();if((f==="input"||f==="option"||f==="select"||f==="textarea")&&(c(k.target).closest("tr.wijmo-wijgrid-datarow").length===0)){return true}if(this.options.allowEditing){if((k.which===h.ESCAPE||k.which===113)&&(this.currentCell()._isValid()&&this.currentCell()._isEdit())){this._endEditInternal(k);return false}else{if(k.which===113){this._beginEditInternal(k);return false}}}if(!this.options.allowKeyboardNavigation||(k.which===h.TAB)){return true}switch(k.which){case h.LEFT:case h.RIGHT:case h.DOWN:case h.UP:case h.PAGE_DOWN:case h.PAGE_UP:case h.HOME:case h.END:case h.TAB:j=this._getNextCurrencyPos(this._getDataCellsRange(),this.currentCell(),k.keyCode,k.shiftKey);g=this._canMoveToAnotherCell(k.target,k.which);break}if(g){this._changeCurrentCell(k,new b.grid.cellInfo(j.cellIndex,j.rowIndex),true);l=this.currentCell();i=this.selection();if(!k.shiftKey||(!i._multipleRangesAllowed()&&this.options.selectionMode.toLowerCase()!=="singlerange")){i._startNewTransaction(l)}i.beginUpdate();i._selectRange(new b.grid.cellInfoRange(i._anchorCell(),l),false,k.shiftKey,0,null);i.endUpdate();return false}return true};d.prototype._onKeyPress=function(j){if(this._canInteract()&&this.options.allowEditing){var g=j.which,k=this.currentCell(),f,i,h;if(g&&k._isValid()&&!k._isEdit()){f=(j.target).tagName.toLowerCase();if(f!=="input"&&f!=="option"&&f!=="select"&&f!=="textarea"){i=c(j.target).closest(".wijmo-wijgrid-table");if(i.length){h=c.map(this._view().subTables(),function(m,l){return m.element()});if(c.inArray(i[0],h)>=0){if(c.wij.charValidator.isPrintableChar(String.fromCharCode(g))){this._beginEditInternal(j);return false}}}}}}};d.prototype._onMouseMove=function(k){var n=this._view(),i=this._field("frozener"),j,h,o,l,m,f,g=b.grid.renderState;if(!this.options.highlightOnHover||!this._canInteract()||(i&&i.inProgress())){return}j=this._findUntilOuterDiv(k.target,{td:true,th:true});if(j){h=c(j).closest("tr");if(!h.length||!(h.hasClass("wijmo-wijgrid-datarow")||h.hasClass("wijmo-wijgrid-headerrow"))){return}o=n.getAbsoluteCellInfo(j);l=this._field("hoveredRow");if(o.rowIndex()!==l){if(l!==undefined){m=this._rows().item(l);if(m){f=n._getRowInfo(m);n._changeRowRenderState(f,g.hovered,false);this.rowStyleFormatter.format(f)}}l=o.rowIndex();this._field("hoveredRow",l);if(l>=0){m=this._rows().item(l);if(m){f=n._getRowInfo(m);n._changeRowRenderState(f,g.hovered,true);this.rowStyleFormatter.format(f)}}}}};d.prototype._onMouseOut=function(j){if(!this._canInteract()){return}if(c(j.relatedTarget).closest(".wijmo-wijgrid-data").length===0){var h=this._field("hoveredRow"),g,i,f=this._view();if(h>=0){g=this._rows().item(h);if(g){i=f._getRowInfo(g);f._changeRowRenderState(i,b.grid.renderState.hovered,false);this.rowStyleFormatter.format(i)}}}};d.prototype._onWindowResize=function(g){var f=this;if(this._windowResizeTimer>0){window.clearTimeout(this._windowResizeTimer);this._windowResizeTimer=0}if(this._windowResizeTimer!==-1){this._windowResizeTimer=window.setTimeout(function(){f._windowResizeTimer=-1;try{if(!f._destroyed&&f._initialized&&f.element.parent().length){f.setSize()}}finally{f._windowResizeTimer=0}},50)}};d.prototype._fieldResized=function(j,g,i){if(g<0){g=0}if(i<=0){i=1}var h={column:j.options,oldWidth:g,newWidth:i};if(this._trigger("columnResizing",null,h)!==false){if(isNaN(h.newWidth)||h.newWidth<0){h.newWidth=1}j.option("width",h.newWidth);var f={column:j.options};this._trigger("columnResized",null,f)}};d.prototype._changeCurrentCell=function(f,i,k){var m=this.currentCell(),l=this._getDataCellsRange(),j,g,h=this.options.highlightCurrentCell,n;if((l._isValid()&&l._containsCellInfo(i))||(i.isEqual(b.grid.cellInfo.outsideValue))){if(m.cellIndex()!==i.cellIndex()||m.rowIndex()!==i.rowIndex()){j={cellIndex:i.cellIndex(),rowIndex:i.rowIndex(),oldCellIndex:m.cellIndex(),oldRowIndex:m.rowIndex()};if(this._trigger("currentCellChanging",null,j)){g=false;if(!this.options.allowEditing||!m._isEdit()||(g=this._endEditInternal(null))){if(l._containsCellInfo(m)){if(h){this._highlightCellPosition(m,false)}if(n=m.tableCell()){c(n).removeAttr("tabIndex")}}m=i._clone();m._setGridView(this);if(h){this._highlightCellPosition(m,true)}if(n=m.tableCell()){c(n).attr("tabIndex",0);if(k&&!m._isEdit()){c(n).focus()}}this._field("currentCell",m);this._onCurrentCellChanged(f)}}}else{if(h){this._highlightCellPosition(m,true)}if(n=m.tableCell()){c(n).attr("tabIndex",0)}}}else{}};d.prototype._highlightCellPosition=function(i,n){if(i&&i._isValid()){var m=i.cellIndexAbs(),k=i.rowIndexAbs(),h=b.grid.renderState,l=this._view(),g,j,f;j=l.getHeaderCell(m);if(j){g=l._getRowInfo(this._headerRows().item(i.column().thY));j=c(j);f=l._changeCellRenderState(j,h.current,n);this.cellStyleFormatter.format(j,m,i.column(),g,f)}j=l.getJoinedRows(k,0);if(j){g=l._getRowInfo(j);l._changeRowRenderState(g,h.current,n);this.rowStyleFormatter.format(g)}j=l.getCell(m,k);if(j){j=c(j);f=l._changeCellRenderState(j,h.current,n);this.cellStyleFormatter.format(j,m,i.column(),g,f)}}};d.prototype._beginEditInternal=function(h){if(this._canInteract()&&this.options.allowEditing){var g=this.currentCell().column(),f;if(g&&!g.readOnly){f=new b.grid.cellEditorHelper().currentCellEditStart(this,h);if(f){}return f}}return false};d.prototype._endEditInternal=function(g){if(this._canInteract()&&this.options.allowEditing){var f=new b.grid.cellEditorHelper().currentCellEditEnd(this,g);if(f&&!this._allowVirtualScrolling()){this._view().ensureHeight(this.currentCell().rowIndex())}return f}return false};d.prototype._onViewInsertEmptyRow=function(j,f,g,h,i){return null};d.prototype._onViewCreateEmptyCell=function(h,f,g){return null};d.prototype._onViewCellRendered=function(i,h,f,g){};d.prototype._onViewRowRendered=function(f){};d.prototype._getDataParser=function(f){return f.dataParser||b.data.defaultParsers[f.dataType]||b.data.defaultParsers.string};d.prototype._parse=function(g,i){var j=this._dataViewWrapper.dataView(),h=b.grid.getDataType(g),f=b.grid.getDataType(g);if(c.isFunction(i)){i=i()}i=b.data.convert(i,h,f,{culture:this._field("closestCulture"),format:g.dataFormatString||g._underlyingDataFormatString,nullString:this.options.nullString,parser:g.dataParser});return i};d.prototype._toStr=function(g,i){var j=this._dataViewWrapper.dataView(),h=b.grid.getDataType(g),f="string";i=b.data.convert(i,h,f,{culture:this._field("closestCulture"),format:g.dataFormatString||g._underlyingDataFormatString,nullString:this.options.nullString,parser:g.dataParser});return i};d.prototype._funcOptions=function(){return["cellStyleFormatter","rowStyleFormatter","afterCellEdit","afterCellUpdate","beforeCellEdit","beforeCellUpdate","cellClicked","columnDragging","columnDragged","columnDropping","columnDropped","columnResizing","columnResized","columnGrouping","columnGrouped","columnUngrouping","columnUngrouped","currentCellChanging","currentCellChanged","filtering","filtered","filterOperatorsListShowing","groupAggregate","groupText","invalidCellValue","pageIndexChanging","pageIndexChanged","selectionChanged","sorting","sorted","dataLoading","dataLoaded","loading","loaded","rendering","rendered"]};d.prototype._canInteract=function(){return !this.options.disabled};d.prototype._canMoveToAnotherCell=function(l,k){var g=l.tagName.toLowerCase(),f,m,j,i;switch(g){case"input":if(c(l).hasClass("wijgridinput")){var h=l;if(h.type==="text"){f=h.value.length;m=new b.grid.domSelection(h).getSelection();j=b.grid.getKeyCodeEnum();i=((k===j.UP||k===j.DOWN||k===j.PAGE_DOWN||k===j.PAGE_UP)||(m.length===0&&((m.start===0&&(k===j.LEFT||k===j.HOME))||(m.end>=f&&(k===j.RIGHT||k===j.END)))));return i}return true}return false;case"textarea":case"select":return false}return true};d.prototype._editBySingleClick=function(){var f=(this.options.editingInitOption||"").toLowerCase();switch(f){case"click":case"doubleclick":break;case"auto":default:f=this._isMobile?"click":"doubleclick";break}return f==="click"};d.prototype._getDataToAbsOffset=function(){var f=0,h=0,g=this._headerRows();if(this.options.showRowHeader){f++}if(g){h+=g.length()}if(this._filterRow()){h++}return{x:f,y:h}};d.prototype._gridDataRowIndexToDataView=function(h){var g=-1,f=b.grid.rowType,i;if(h<0){return g}i=this._view()._getRowInfo(this._rows().item(h));return(i.type&b.grid.rowType.data)?i.dataItemIndex:-1};d.prototype._dataViewDataRowIndexToGrid=function(l){var g=b.grid.rowType,h=this._view(),k=this._rows(),j,f,m;if(l<0){return -1}for(j=0,f=k.length();j<f;j++){m=h._getRowInfo(k.item(j));if((m.type&g.data)&&(m.dataItemIndex===l)){return m.sectionRowIndex}}return -1};d.prototype._getDataCellsRange=function(){var h=0,f=0,g=this._field("visibleLeaves").length-1,i=(this._rendered)?this._rows().length()-1:this.sketchTable.length-1;if(this.options.showRowHeader){g--}if(g<0||i<0){h=f=g=i=-1}return new b.grid.cellInfoRange(new b.grid.cellInfo(h,f,null),new b.grid.cellInfo(g,i,null))};d.prototype._getDataItem=function(f){return this.dataView().item(f)};d.prototype._getFirstDataRowCell=function(k){var l,g,j,h=this._view(),i=this._rows(),f=b.grid.rowType;for(l=0,g=i.length();l<g;l++){j=h._getRowInfo(i.item(l));if(j.type&f.data){return new b.grid.cellInfo(k,l)}}return b.grid.cellInfo.outsideValue};d.prototype._getNextCurrencyPos=function(j,i,l,f){var h=i.cellIndex(),m=i.rowIndex(),k,g=b.grid.getKeyCodeEnum();switch(l){case g.PAGE_UP:if(this._reverseKey&&m===j.topLeft().rowIndex()){m=j.bottomRight().rowIndex()}else{m-=this._pageSizeKey;if(m<(k=j.topLeft().rowIndex())){m=k}}break;case g.PAGE_DOWN:if(this._reverseKey&&m===j.bottomRight().rowIndex()){m=j.topLeft().rowIndex()}else{m+=this._pageSizeKey;if(m>(k=j.bottomRight().rowIndex())){m=k}}break;case g.END:h=(this._reverseKey&&h===j.bottomRight().cellIndex())?j.topLeft().cellIndex():j.bottomRight().cellIndex();break;case g.HOME:h=(this._reverseKey&&h===j.topLeft().cellIndex())?j.bottomRight().cellIndex():j.topLeft().cellIndex();break;case g.LEFT:if(h>j.topLeft().cellIndex()){h--}else{if(this._reverseKey){h=j.bottomRight().cellIndex()}}break;case g.UP:if(m>j.topLeft().rowIndex()){m--}else{if(this._reverseKey){m=j.bottomRight().rowIndex()}}break;case g.RIGHT:if(h<j.bottomRight().cellIndex()){h++}else{if(this._reverseKey){h=j.topLeft().cellIndex()}}break;case g.ENTER:case g.DOWN:if(m<j.bottomRight().rowIndex()){m++}else{if(this._reverseKey){m=j.topLeft().rowIndex()}}break;case g.TAB:if(false){if(f){h--;if(h<j.topLeft().cellIndex()){h=j.bottomRight().cellIndex();m--;if(m<j.topLeft().rowIndex()){m=j.bottomRight().rowIndex()}}}else{h++;if(h>j.bottomRight().cellIndex()){h=j.topLeft().cellIndex();m++;if(m>j.bottomRight().rowIndex()){m=j.topLeft().rowIndex()}}}}break}return{cellIndex:h,rowIndex:m}};d.prototype._findUntilOuterDiv=function(k,f){var i=k,g,j,h=null;for(;i;i=i.parentNode){j=i.nodeName.toLowerCase();if(j){if(i===this.outerDiv[0]){g=i;break}if(f[j]){h=i}}}return g?h:null};d.prototype._getStaticIndex=function(h){var f,g=this._getDataCellsRange();if(this._hasSpannedCells()){return -1}if(h){f=Math.min(this.options.staticRowIndex,g.bottomRight().rowIndex())}else{f=Math.min(this.options.staticColumnIndex,g.bottomRight().cellIndex())}if(f<-1){f=-1}return f};d.prototype._getStaticOffsetIndex=function(f){var g=0;if(f){if(this.options.showRowHeader===true){g++}}else{g=this._columnsHeadersTable().length;if(this.options.showFilter){g++}}return g};d.prototype._getRealStaticColumnIndex=function(){var k,g,i=this._getStaticOffsetIndex(true),j=this._getStaticIndex(false),f,h;f=j+i;if(j>=0){k=this._field("visibleLeaves");g=k.length;h=f;for(;f<g;f++){if(k[f].parentIdx===-1){if(f>h){f--}break}}if(f>=g){f=g-1}}return f};d.prototype._getRealStaticRowIndex=function(){var f=this._getStaticOffsetIndex(false);return this._getStaticIndex(true)+f};d.prototype._hasMerging=function(){var k=this._field("leaves"),j,g,h,f=false;if(k){for(j=0,g=k.length;(j<g)&&!f;j++){h=k[j];f=f||(h.parentVis&&(h.rowMerge!=="none"))}}return f};d.prototype._hasGrouping=function(){var k=this._field("leaves"),j,g,h,f=false;for(j=0,g=k.length;(j<g)&&!f;j++){h=k[j];f=h.groupInfo&&(h.groupInfo.position!=="none")}return f};d.prototype._hasSpannedCells=function(){return this._hasGrouping()||this._hasMerging()};d.prototype._columnsHeadersTable=function(f){if(arguments.length){this._field("columnsHeadersTable",f)}return this._field("columnsHeadersTable")};d.prototype._view=function(){return this._field("view")};d.prototype._originalFooterRowData=function(){var f=this._field("tfoot");return(f&&f.length)?f[0]:null};d.prototype._originalHeaderRowData=function(){var f=this._field("thead");return(f&&f.length)?f[0]:null};d.prototype._setAttr=function(f,h,i){var g=this;if(f===this.element){if(arguments.length===2){c.each(h,function(l,j){if(!(l in g._originalAttr)){g._originalAttr[l]=f.attr(l)}});return f.attr(h)}else{if(!(h in this._originalAttr)){this._originalAttr[h]=f.attr(h)}return f.attr(h,i)}}else{return(arguments.length===3)?f.attr(h,i):f.attr(h)}return this};d.prototype._totalRowsCount=function(){return this.sketchTable.length};d.prototype._trackScrollingPosition=function(f,g){this._scrollingState.x=f;this._scrollingState.y=g};d.prototype._trackScrollingIndex=function(f){this._scrollingState.index=f};d.prototype._uid=function(){if(this.__uid===undefined){this.__uid=b.grid.getUID()}return"wijgrid"+this.__uid};return d})(b.wijmoWidget);b.wijgrid=a;a.prototype.widgetEventPrefix="wijgrid";a.prototype._data$prefix="wijgrid";a.prototype._customSortOrder=1000;a.prototype._reverseKey=false;a.prototype._pageSizeKey=10;a.prototype._mergeWidgetsWithOptions=true;a.prototype.options=c.extend(true,{},b.wijmoWidget.prototype.options,{wijMobileCSS:{header:"ui-header ui-bar-a",content:"ui-body-c",stateHover:"ui-btn-down-c",stateActive:"ui-btn-down-c"},allowColMoving:false,allowColSizing:false,allowEditing:false,allowKeyboardNavigation:true,allowPaging:false,allowSorting:false,allowVirtualScrolling:false,alwaysParseData:true,cellStyleFormatter:undefined,columns:[],columnsAutogenerationMode:"merge",culture:"",customFilterOperators:[],data:null,editingInitOption:"auto",ensureColumnsPxWidth:false,filterOperatorsSortMode:"alphabeticalCustomFirst",groupAreaCaption:"Drag a column here to group by that column.",groupIndent:10,highlightCurrentCell:false,highlightOnHover:true,loadingText:"Loading...",nullString:"",pageIndex:0,pageSize:10,pagerSettings:{mode:"numeric",pageButtonCount:10,position:"bottom"},readAttributesFromData:false,rowStyleFormatter:undefined,scrollMode:"none",selectionMode:"singleRow",showFilter:false,showFooter:false,showGroupArea:false,showSelectionOnRender:true,showRowHeader:false,staticColumnIndex:-1,staticRowIndex:-1,totalRows:-1,afterCellEdit:null,afterCellUpdate:null,beforeCellEdit:null,beforeCellUpdate:null,cellClicked:null,columnDragging:null,columnDragged:null,columnDropping:null,columnDropped:null,columnGrouping:null,columnGrouped:null,columnResizing:null,columnResized:null,columnUngrouping:null,columnUngrouped:null,currentCellChanging:null,currentCellChanged:null,filterOperatorsListShowing:null,filtering:null,filtered:null,groupAggregate:null,groupText:null,invalidCellValue:null,pageIndexChanging:null,pageIndexChanged:null,selectionChanged:null,sorting:null,sorted:null,dataLoading:null,dataLoaded:null,loading:null,loaded:null,rendering:null,rendered:null});c.wijmo.registerWidget("wijgrid",a.prototype)})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(b){var c=jQuery;var a=(function(e){__extends(d,e);function d(){e.apply(this,arguments)}d.prototype._create=function(){var f=c.data(this.element[0],"wijgridowner");this._field("owner",f);b.grid.widgetName(this.element[0],this.widgetFullName);this._destroyed=false;this.element.addClass(f.options.wijCSS.widget+" wijmo-c1basefield "+f.options.wijCSS.stateDefault);if(this.options.disabled){this.disable()}if(f.options.allowColMoving){f._dragndrop(true).attach(this)}};d.prototype._init=function(){this.element.wrapInner("<div class='wijmo-wijgrid-innercell'></div>");this._refreshHeaderCell()};d.prototype.destroy=function(){try{e.prototype.destroy.apply(this,arguments)}finally{this._destroyed=true}};d.prototype._destroy=function(){if(this._isDestroyed()){return}var f=this._owner();if(f&&f._dragndrop(false)){f._dragndrop(false).detach(this)}b.grid.remove$dataByPrefix(this.element,this._data$prefix);this.element.removeClass(f.options.wijCSS.widget+" wijmo-c1basefield "+f.options.wijCSS.stateDefault).html(this.element.find(".wijmo-wijgrid-headertext").html())};d.prototype._field=function(f,g){return b.grid.dataPrefix(this.element,this._data$prefix,f,g)};d.prototype._removeField=function(f){var g=this._data$prefix+f;this.element.removeData(g)};d.prototype._setOption=function(h,j){var l=this["_preset_"+h],g=this.options[h],i,f;if(l!==undefined){j=l.apply(this,[j,g])}i=(j!==g);e.prototype._setOption.apply(this,[h,j]);if(i){if(this.options.groupedIndex!==undefined){var k=this._owner()._field("groupedWidgets")[this.options.groupedIndex];if(k&&(h in k.options)){k._setOption(h,j)}}f=this["_postset_"+h];if(f!==undefined){f.apply(this,[j,g])}}};d.prototype._postset_allowMoving=function(g,f){};d.prototype._preset_clientType=function(g,f){throw"read-only"};d.prototype._postset_headerText=function(g,f){this._refreshHeaderCell()};d.prototype._postset_visible=function(g,f){this._owner().ensureControl(false)};d.prototype._postset_width=function(i,f){var g=this._owner();if(g){this.options.ensurePxWidth=true;var h=b.grid.getColumnByTravIdx(g.options.columns,this.options.travIdx);if(h){h.found.width=i;h.found.ensurePxWidth=true}g.setSize()}};d.prototype._owner=function(){return this._field("owner")};d.prototype._canSize=function(){return this.options.allowSizing&&this._owner().options.allowColSizing};d.prototype._canDrag=function(){return this.options.allowMoving===true};d.prototype._canDropTo=function(f){if(b.grid.isChildOf(this._owner().options.columns,f,this)){return false}return true};d.prototype._createHeaderContent=function(f){return f.html(this.options.headerText||"")};d.prototype._decorateHeaderContent=function(f){return f.wrapInner('<span class="wijmo-wijgrid-headertext" />')};d.prototype._refreshHeaderCell=function(){var f=this.element.children(".wijmo-wijgrid-innercell").empty();this._createHeaderContent(f);this._decorateHeaderContent(f)};d.prototype._isDestroyed=function(){return this._destroyed};return d})(b.wijmoWidget);b.c1basefield=a;a.prototype._data$prefix="c1basefield";a.prototype.options=c.extend(true,{},b.JQueryUIWidget.prototype.options,{allowMoving:true,allowSizing:true,cellFormatter:undefined,dataKey:undefined,ensurePxWidth:undefined,footerText:undefined,headerText:undefined,textAlignment:undefined,visible:true,width:undefined});c.wijmo.registerWidget("c1basefield",a.prototype)})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(a){var b=jQuery;var c=(function(d){__extends(e,d);function e(){d.apply(this,arguments)}e.prototype._create=function(){d.prototype._create.apply(this,arguments);var f=this._owner();this.element.addClass(f.options.wijCSS.widget+" wijmo-c1field")};e.prototype._destroy=function(){if(this._isDestroyed()){return}var f=this._owner();this.element.find("*").unbind("."+this.widgetName);if(this.$filterEditor){this.$filterEditor.closest("td").find("*").unbind("."+this.widgetName);switch(this._getInputEditorType(this.options)){case"date":if(this.$filterEditor.data("wijmo-wijinputdate")){this.$filterEditor.wijinputdate("destroy")}break;case"mask":if(this.$filterEditor.data("wijmo-wijinputmask")){this.$filterEditor.wijinputmask("destroy")}break;case"numberCurrency":case"numberNumber":case"numberPercent":if(this.$filterEditor.data("wijmo-wijinputnumber")){this.$filterEditor.wijinputnumber("destroy")}break}this.$filterEditor=null}this.element.removeClass(f.options.wijCSS.widget+" wijmo-c1field").find(".wijmo-wijgrid-headertext > span."+f.options.wijCSS.icon).remove();this._removeDropDownFilterList();d.prototype._destroy.apply(this,arguments)};e.prototype._init=function(){d.prototype._init.apply(this,arguments);this.$filterEditor=null;var f=this._owner();this.filterRow=f._filterRow();if(f.options.showFilter&&this.options.showFilter&&(this.options.dataIndex>=0)){this._prepareFilterCell()}};e.prototype._postset_aggregate=function(g,f){this._owner().ensureControl(false)};e.prototype._postset_allowSort=function(g,f){this._refreshHeaderCell()};e.prototype._postset_dataType=function(g,f){throw"read-only"};e.prototype._postset_dataParser=function(g,f){this._owner().ensureControl(false)};e.prototype._postset_dataFormatString=function(g,f){this._owner().ensureControl(false)};e.prototype._postset_filterOperator=function(g,f){this._owner().ensureControl(true)};e.prototype._postset_filterValue=function(g,f){this._owner().ensureControl(true)};e.prototype._postset_groupInfo=function(g,f){this._owner().ensureControl(true)};e.prototype._postset_rowMerge=function(g,f){this._owner().ensureControl(false)};e.prototype._postset_showFilter=function(g,f){this._owner().ensureControl(false)};e.prototype._postset_sortDirection=function(g,f){this.options.sortOrder=0;this._owner().ensureControl(true)};e.prototype._postset_width=function(g,f){d.prototype._postset_width.apply(this,arguments)};e.prototype._canDropTo=function(f){if(d.prototype._canDropTo.apply(this,arguments)){if(this.options.groupedIndex!==undefined&&(f instanceof b.wijmo.c1groupedfield)){return false}return true}return false};e.prototype._canSort=function(){var f=this._owner();return(f&&f.options.allowSorting&&this.options.allowSort&&(this.options.dataIndex>=0))};e.prototype._decorateHeaderContent=function(h){if(this._canSort()){var f=this._owner(),g=h.wrapInner('<a class="wijmo-wijgrid-headertext" href="#" role="button" />').children("a");g.bind("click."+this.widgetName,this,b.proxy(this._onHrefClick,this));switch(this.options.sortDirection){case"ascending":g.append(b('<span class="'+f.options.wijCSS.icon+" "+f.options.wijCSS.iconArrowUp+'">ascending</span>'));break;case"descending":g.append(b('<span class="'+f.options.wijCSS.icon+" "+f.options.wijCSS.iconArrowDown+'">descending</span>'));break}}else{d.prototype._decorateHeaderContent.apply(this,arguments)}};e.prototype._prepareFilterCell=function(){var l=this.options.visLeavesIdx,i=null,g=null,j,k,h=this,f;if(l>=0){i=this._owner();if(this.filterRow){g=b(a.grid.rowAccessor.getCell(this.filterRow,l))}else{throw"exception"}this.$filterEditor=g.find("input");g.bind(((b.support).selectstart?"selectstart":"mousedown"),function(m){m.stopPropagation()});j=i._parse(this.options,a.grid.filterHelper.getSingleValue(this.options.filterValue));if(j===null||j==="undefined"){switch(a.grid.getDataType(this.options)){case"boolean":j=false;break;case"number":case"currency":case"datetime":j=0;break;default:j=""}}k={culture:i.options.culture,disabled:i.options.disabled,decimalPlaces:(function(m){var n=/^(n|p|c){1}(\d*)$/.exec(m);if(n){if(n[2]){return parseInt(n[2],10)}}return 2})(this.options.dataFormatString)};switch(f=this._getInputEditorType(this.options)){case"date":this.$filterEditor.wijinputdate(b.extend(k,{date:j,dateFormat:this.options.dataFormatString||undefined}));break;case"mask":this.$filterEditor.wijinputmask({text:j+""});break;case"numberCurrency":this.$filterEditor.wijinputnumber(b.extend(k,{type:"currency",value:j}));break;case"numberNumber":this.$filterEditor.wijinputnumber(b.extend(k,{value:j}));break;case"numberPercent":this.$filterEditor.wijinputnumber(b.extend(k,{type:"percent",value:j*100}));break;default:throw a.grid.stringFormat('Unsupported editor type: "{0}"',f)}g.find(".wijmo-wijgrid-filter-trigger").attr({role:"button","aria-haspopup":"true"}).bind("mouseenter."+this.widgetName,function(m){if(!h.options.disabled){b(this).addClass(i.options.wijCSS.stateHover)}}).bind("mouseleave."+this.widgetName,function(m){if(!h.options.disabled){b(this).removeClass(i.options.wijCSS.stateHover+" "+i.options.wijCSS.stateActive)}}).bind("mouseup."+this.widgetName,this,function(m){if(!h.options.disabled){b(this).removeClass(i.options.wijCSS.stateActive)}}).bind("mousedown."+this.widgetName,{column:this},this._onFilterBtnClick).bind("click."+this.widgetName,function(m){m.preventDefault()})}};e.prototype._onFilterBtnClick=function(m){var i=m.data.column,j=8,l,k,n,o,p,r,g,f,h,q;if(i.options.disabled){return false}if(i.$dropDownFilterList){i._removeDropDownFilterList();return false}m.target.focus();l=i._owner();k=a.grid.filterHelper.getSingleOperatorName(i.options.filterOperator).toLowerCase();n=l.getFilterOperatorsByDataType(a.grid.getDataType(i.options));o={operators:n,column:i.options};l._onFilterOperatorsListShowing(b.extend(true,{},o));p=[];if(o.operators){b.each(o.operators,function(t,s){p.push({label:s.displayName||s.name,value:s.name,selected:s.name.toLowerCase()===k})})}i.$dropDownFilterList=b('<div class="wijmo-wijgrid-filterlist"></div').appendTo(document.body).wijlist({autoSize:true,maxItemsCount:j,selected:function(u,t){var v,s;switch(s=i._getInputEditorType(i.options)){case"date":v=i.$filterEditor.wijinputdate("option","date")||new Date();break;case"mask":v=i.$filterEditor.wijinputmask("option","text");break;case"numberCurrency":case"numberNumber":case"numberPercent":v=i.$filterEditor.wijinputnumber("option","value");if(s==="numberPercent"){v/=100}break}i._removeDropDownFilterList();l._handleFilter(i,t.item.value,v)}});if(b.ui&&b.fn.zIndex){q=l.outerDiv.zIndex();if(q){q++}}i.$dropDownFilterList.css("z-index",Math.max(q||0,100));i.$dropDownFilterList.wijlist("setItems",p).wijlist("renderList");f=i.$dropDownFilterList.width()|150;i.$dropDownFilterList.width(p.length>j?f+20:f).wijlist("refreshSuperPanel").position({of:b(this),my:"left top",at:"left bottom"});(i.$dropDownFilterList).$button=b(this);h=(i.$dropDownFilterList).eventUID=a.grid.getUID();b(document).bind("mousedown."+i.widgetName+"."+h,{column:i},i._onDocMouseDown)};e.prototype._onDocMouseDown=function(i){var f=b(i.target),g=f.parents(".wijmo-wijgrid-filterlist:first"),h=f.is(".wijmo-wijgrid-filter-trigger")?f:f.parents(".wijmo-wijgrid-filter-trigger:first");if((h.length&&(h[0]===i.data.column.$dropDownFilterList.$button[0]))||(g.length&&(g[0]===i.data.column.$dropDownFilterList[0]))){}else{i.data.column._removeDropDownFilterList()}};e.prototype._onHrefClick=function(f){if(f.data.options.disabled){return false}if(f.data.options.allowSort){f.data._owner()._handleSort(f.data.options,f.ctrlKey)}return false};e.prototype._removeDropDownFilterList=function(){if(this.$dropDownFilterList){var f=(this.$dropDownFilterList).eventUID;this.$dropDownFilterList.remove();this.$dropDownFilterList=null;b(document).unbind("mousedown."+this.widgetName+"."+f,this._onDocMouseDown)}};e.prototype._getInputEditorType=function(f){switch(a.grid.getDataType(f)){case"number":return(f.dataFormatString&&f.dataFormatString.indexOf("p")===0)?"numberPercent":"numberNumber";case"currency":return"numberCurrency";case"datetime":return"date";default:return"mask"}};return e})(a.c1basefield);a.c1field=c;c.prototype.options=b.extend(true,{},a.c1basefield.prototype.options,{aggregate:"none",allowSort:true,dataType:undefined,dataParser:undefined,dataFormatString:undefined,filterOperator:"nofilter",filterValue:undefined,groupInfo:{expandInfo:[],groupSingleRow:true,collapsedImageClass:b.wijmo.wijCSS.iconArrowRight,expandedImageClass:b.wijmo.wijCSS.iconArrowRightDown,position:"none",outlineMode:"startExpanded",headerText:undefined,footerText:undefined},readOnly:false,rowMerge:"none",showFilter:true,sortDirection:"none",valueRequired:false});b.wijmo.registerWidget("c1field",b.wijmo.c1basefield,c.prototype)})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(a){var b=jQuery;var c=(function(d){__extends(e,d);function e(){d.apply(this,arguments)}e.prototype._create=function(){d.prototype._create.apply(this,arguments);var f=this._owner();this.element.addClass(f.options.wijCSS.widget+" wijmo-c1band")};e.prototype._canDropTo=function(f){if(d.prototype._canDropTo.apply(this,arguments)){return !(f instanceof b.wijmo.c1groupedfield)}return false};return e})(a.c1basefield);a.c1band=c;c.prototype.options=b.extend(true,{},a.c1basefield.prototype.options,{columns:[]});b.wijmo.registerWidget("c1band",b.wijmo.c1basefield,c.prototype)})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(a){var b=jQuery;var c=(function(d){__extends(e,d);function e(){d.apply(this,arguments)}e.prototype._create=function(){var f=b.data(this.element[0],"wijgridowner");this._field("owner",f);a.grid.widgetName(this.element[0],this.widgetFullName);this._destroyed=false;this.element.addClass("wijmo-wijgrid-group-button "+f.options.wijCSS.stateDefault+" "+f.options.wijCSS.cornerAll);if(this.options.disabled){this.disable()}if(f.options.allowColMoving){f._dragndrop(true).attach(this)}};e.prototype._init=function(){this._refreshHeaderCell()};e.prototype.destroy=function(){try{d.prototype.destroy.apply(this,arguments)}finally{this._destroyed=true}};e.prototype._destroy=function(){if(this._isDestroyed()){return}this.element.find("*").unbind("."+this.widgetName);var f=this._owner();if(f&&f._dragndrop(false)){f._dragndrop(false).detach(this)}a.grid.remove$dataByPrefix(this.element,this._data$prefix)};e.prototype._field=function(f,g){return a.grid.dataPrefix(this.element,this._data$prefix,f,g)};e.prototype._removeField=function(f){var g=this._data$prefix+f;this.element.removeData(g)};e.prototype._setOption=function(h,j){var k=this["_preset_"+h],g=this.options[h],i,f;if(k!==undefined){j=k.apply(this,[j,g])}i=(j!==g);d.prototype._setOption.apply(this,[h,j]);if(i){f=this["_postset_"+h];if(f!==undefined){f.apply(this,[j,g])}}};e.prototype._postset_headerText=function(h,g,f){this._refreshHeaderCell()};e.prototype._postset_allowSort=function(h,g,f){this._refreshHeaderCell()};e.prototype._owner=function(){return this._field("owner")};e.prototype._canSize=function(){return this.options.allowSizing&&this._owner().options.allowColSizing};e.prototype._canDrag=function(){return this.options.allowMoving===true};e.prototype._canDropTo=function(f){if(!(f instanceof b.wijmo.c1groupedfield)){return false}if(a.grid.isChildOf(this._owner().options.columns,f,this)){return false}return true};e.prototype._canSort=function(){var f=this._owner();return(f&&f.options.allowSorting&&this.options.allowSort&&(this.options.dataIndex>=0))};e.prototype._refreshHeaderCell=function(){var g=this._owner().options.wijCSS,f=b('<span class="wijmo-wijgrid-group-button-close '+g.stateDefault+" "+g.cornerAll+'"><span class="'+g.icon+" "+g.iconClose+'"></span></span>').bind("click."+this.widgetName,this,this._onCloseClick);this.element.html(this.options.headerText||"").prepend(f).bind("click."+this.widgetName,this,b.proxy(this._onHrefClick,this));if(this._canSort()){switch(this.options.sortDirection){case"ascending":this.element.append(b('<span class="wijmo-wijgrid-group-button-sort '+g.icon+" "+g.iconArrowUp+'"></span>'));break;case"descending":this.element.append(b('<span class="wijmo-wijgrid-group-button-sort '+g.icon+" "+g.iconArrowDown+'"></span>'));break}}};e.prototype._onCloseClick=function(g){var f=g.data.options;if(!f.disabled){g.data._owner()._handleUngroup(g.data.options.travIdx)}return false};e.prototype._onHrefClick=function(g){var h=g.data._owner(),f=g.data.options,i;if(!f.disabled&&f.allowSort){i=a.grid.search(h.columns(),function(j){return j.options.travIdx===f.travIdx});i=(!i.found)?a.grid.getColumnByTravIdx(h.options.columns,f.travIdx).found:i.found.options;if(i){h._handleSort(i,g.ctrlKey)}}return false};e.prototype._isDestroyed=function(){return this._destroyed};return e})(a.wijmoWidget);a.c1groupedfield=c;c.prototype._data$prefix="c1groupedfield";c.prototype.options=b.extend(true,{},a.JQueryUIWidget.prototype.options,{wijMobileCSS:{header:"ui-header ui-bar-a",content:"ui-body-c",stateDefault:"ui-btn-up-c",stateHover:"ui-btn-down-c",stateActive:"ui-btn-down-c"},allowMoving:true,allowSort:true,headerText:undefined,sortDirection:"none"});b.wijmo.registerWidget("c1groupedfield",c.prototype)})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var j=jQuery;var o=(function(){function p(){}p.prototype.generateSpanTable=function(q,s){this._height=this._width=this._inc=this._shift=0;this._table=[];this._traverseList=[];this._savedXPos=[];var r=this._generateSpanTable(q,s,true);return r};p.prototype._generateSpanTable=function(q,v,t){var u,s,r=this;this._height=this.getVisibleHeight(q,t);v=v||[];b.grid.traverse(q,function(w){if(w.isLeaf){v.push(w)}r._traverseList.push(w)});this._width=v.length;for(u=0;u<this._height;u++){this._table[u]=[];for(s=0;s<this._width;s++){this._table[u][s]={column:null,colSpan:0,rowSpan:0}}}this._setTableValues(q,0,0);return this._table};p.prototype.getVisibleHeight=function(s,t){var v,r,w,u,q=0;if(j.isArray(s)){for(v=0,r=s.length;v<r;v++){u=this.getVisibleHeight(s[v],t);q=Math.max(q,u)}}else{w=(s.visible===undefined)?true:s.visible;s.parentVis=w&&t;if(s.isBand){for(v=0,r=s.columns.length;v<r;v++){u=this.getVisibleHeight(s.columns[v],s.parentVis);q=Math.max(q,u)}if(!s.parentVis){return q}s.isLeaf=(q===0);q++}else{s.isLeaf=true;if(s.parentVis){q=1}}}return q};p.prototype._getVisibleParent=function(q){while(q){q=this._traverseList[q.parentIdx];if(q&&(q.parentVis||q.parentVis===undefined)){return q}}return null};p.prototype._setTableValues=function(w,v,z){var s,u,t,r,A,q;if(j.isArray(w)){for(s=0,u=w.length;s<u;s++){this._setTableValues(w[s],v,z)}}else{if(w.travIdx===undefined){throw"undefined travIdx"}t=z+this._shift;if(w.parentVis){r=t+this._inc;this._table[v][r].column=w;this._savedXPos[w.travIdx]=r}if(w.isBand){for(s=0,u=w.columns.length;s<u;s++){this._setTableValues(w.columns[s],v+1,z)}}if(w.parentVis){if(this._shift-t===0){this._table[v][this._savedXPos[w.travIdx]].rowSpan=this._height-v;this._shift++}else{this._table[v][this._savedXPos[w.travIdx]].colSpan=this._shift-t}}else{if(!w.isBand&&this._height>0){q=this._getVisibleParent(w);A=(q)?q.isLeaf:false;if(A){this._inc++}if(v>=this._height){v=this._height-1}r=z+this._shift+this._inc;this._table[v][r].column=w;if(!A){if(q&&(this._savedXPos[q.travIdx]===r)){this._shiftTableElements(r,v)}this._inc++}}}}};p.prototype._shiftTableElements=function(q,r){var s;for(s=0;s<r;s++){this._table[s][q+1]=this._table[s][q];this._table[s][q]={column:null,colSpan:0,rowSpan:0};if(this._table[s][q+1].column){this._savedXPos[this._table[s][q+1].column.travIdx]++}}};return p})();d.bandProcessor=o;function h(p){var q=[];k(p,q);return q}d.getAllLeaves=h;function k(s,u){var r,q,t,p;if(s){for(r=0,q=s.length;r<q;r++){t=s[r];if(t.options){t=t.options}p=t.columns;if(p&&p.length){k(p,u)}else{u.push(t)}}}}function i(t,r){var s,q,u,p=null;if(t&&r>=0){for(s=0,q=t.length;s<q&&!p;s++){u=t[s];if(u.options){u=u.options}if(u.travIdx===r){return{found:u,at:t}}if(u.columns){p=this.getColumnByTravIdx(u.columns,r)}}}return p}d.getColumnByTravIdx=i;function m(p,s,q){if(s.options){s=s.options}if(q.options){q=q.options}if(q.isBand&&s.parentIdx>=0){if(s.parentIdx===q.travIdx){return true}if(s.parentIdx>q.travIdx){var r=this.flatten(p);while(true){s=r[s.parentIdx];if(s.travIdx===q.travIdx){return true}if(s.parentIdx===-1){break}}}}return false}d.isChildOf=m;function g(p){var q=[];f(p,q);return q}d.getLeaves=g;function f(r,t){var q,p,s;if(r){for(q=0,p=r.length;q<p;q++){s=r[q];if(s.isLeaf){t.push(s)}if(s.columns){f(s.columns,t)}}}}function n(p){return e(p,0,-1)}d.setTraverseIndex=n;function e(s,q,u){var r,p,t;if(s){for(r=0,p=s.length;r<p;r++){t=s[r];if(t.options){t=t.options}t.linearIdx=r;t.travIdx=q++;t.parentIdx=u;if(t.columns){q=e(t.columns,q,q-1)}}}return q}function c(q){var p=[];b.grid.traverse(q,function(r){p.push(r)});return p}d.flatten=c;function l(r,t){var q,p,s;if(r&&(j.isFunction(t))){for(q=0;q<r.length;q++){s=r[q];if(s.options){s=s.options}p=r.length;t(s,r);if(r.length!==p){q--;continue}if(s.columns){b.grid.traverse(s.columns,t)}}}}d.traverse=l})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(){function f(g){this._dvFilteringSettings=undefined;this._dvPagingSettings=undefined;this._dvSortingSettings=undefined;this._wgFilteringSettings=undefined;this._wgPagingSettings=undefined;this._wgSortingSettings=undefined;if(!g){throw"exception"}this._wijgrid=g;this._dataView=g._dataViewWrapper.dataView();this._filterCache=new b.grid.filterOperatorsCache(g)}f.prototype.compareSettings=function(){var j=true,k,h,l,g;j=((k=this.DVPagingSettings())===(h=this.WGPagingSettings()));if(!j&&k&&h){j=(k.pageSize===h.pageSize&&k.pageIndex===h.pageIndex)}if(j){j=((k=this.DVSortingSettings())===(h=this.WGSortingSettings()));if(!j&&k&&h&&((g=k.length)===h.length)){j=true;for(l=0;l<g&&j;l++){j=((k[l].dataKey===h[l].dataKey)&&(k[l].sortDirection===h[l].sortDirection))}}}if(j){k=this.DVFilteringSettings();h=this.WGFilteringSettings();j=b.grid.compareObj(k,h)}return j};f.prototype.DVFilteringSettings=function(){function h(j,k){var l;e.each(j,function(m,n){if(typeof(n)==="string"){l=n}else{if(e.isArray(n)){h(n,k)}else{k.filterValue.push(n.value);k.filterOperator.push({name:n.operator,condition:l})}}})}if(this._dvFilteringSettings===undefined){var i=[],g=this._dataView.filter();if(g){e.each(g,function(l,j){var k={dataKey:l};if(e.isArray(j)){k.filterValue=[];k.filterOperator=[];h(j,k)}else{if(e.isPlainObject(j)){k.filterValue=j.value;k.filterOperator=j.operator||"Equals"}else{k.filterValue=j;k.filterOperator="Equals"}}i.push(k)})}this._dvFilteringSettings=(i.length)?i:null}return this._dvFilteringSettings};f.prototype.DVPagingSettings=function(){if(this._dvPagingSettings===undefined){var h=b.grid.asPagedDataView(this._dataView);if(h){var g=h.pageSize();this._dvPagingSettings=(g>0)?{pageSize:h.pageSize(),pageIndex:h.pageIndex()}:null}}return this._dvPagingSettings};f.prototype.DVSortingSettings=function(){if(this._dvSortingSettings===undefined){var h=[];if(true){var g=b.data.sorting.compile(this._dataView.sort()).normalized;if(g){e.each(g,function(i,j){if(j!==null){h.push({dataKey:(typeof(j)==="string")?j:j.property,sortDirection:j.asc||j.asc===undefined?"ascending":"descending"})}})}}this._dvSortingSettings=(h.length)?h:null}return this._dvSortingSettings};f.prototype.WGFilteringSettings=function(){if(this._wgFilteringSettings===undefined){var i=[],h=this._wijgrid._field("leaves"),g=this;if(h){e.each(h,function(l,j){if(b.grid.validDataKey(j.dataKey)&&j.filterOperator){var m=(b.grid.deepExtend({},{foo:j.filterValue})).foo,k=(b.grid.deepExtend({},{foo:j.filterOperator})).foo,n=b.grid.filterHelper.verify(k,m,j.dataType,g._filterCache);if(n){i.push({dataKey:j.dataKey,filterValue:n.filterValue,filterOperator:n.filterOperator})}}})}this._wgFilteringSettings=(i.length)?i:null}return this._wgFilteringSettings};f.prototype.WGPagingSettings=function(){if(this._wgPagingSettings===undefined){this._wgPagingSettings=this._wijgrid.options.allowPaging?{pageSize:this._wijgrid.options.pageSize,pageIndex:this._wijgrid.options.pageIndex}:null}return this._wgPagingSettings};f.prototype.WGSortingSettings=function(){if(this._wgSortingSettings===undefined){var h=[],g=this._wijgrid._field("leaves");if(this._wijgrid.options.allowSorting){if(g){e.each(g,function(j,i){if(!i.isBand&&i.allowSort&&b.grid.validDataKey(i.dataKey)){if(i.groupInfo&&(i.groupInfo.position!=="none")&&(i.sortDirection==="none")){i.sortDirection="ascending"}if(i.sortDirection==="ascending"||i.sortDirection==="descending"){h.push({dataKey:i.dataKey,sortDirection:i.sortDirection,sortOrder:i.sortOrder||0})}}})}if(h.length){h.sort(function(j,i){return j.sortOrder-i.sortOrder});e.each(h,function(i,j){delete j.sortOrder})}}this._wgSortingSettings=(h.length)?h:null}return this._wgSortingSettings};f.prototype.MapWGToDV=function(){var g={},i,h;if(this._mapPagingParams()&&(i=this.WGPagingSettings())){g.pageIndex=i.pageIndex;g.pageSize=i.pageSize}else{g.pageSize=-1}if(this._mapSortingParams()){g.sort=[];if(i=this.WGSortingSettings()){g.sort=[];e.each(i,function(j,k){g.sort.push({property:k.dataKey,asc:k.sortDirection==="ascending"})})}}if(this._mapFilteringParams()){g.filter={};if(i=this.WGFilteringSettings()){g.filter=this._convertFilterToDV(i)}if(e.isEmptyObject(g.filter)){g.filter=null}}return g};f.prototype.MapDVToWG=function(){var l,j={},g=this._mapSortingParams(),k=this._mapPagingParams(),i=this._mapFilteringParams(),h=b.grid.asPagedDataView(this._dataView);e.each(this._wijgrid._field("leaves"),function(n,m){if(g){m.sortOrder=0;m.sortDirection="none"}if(i){m.filterOperator="nofilter";m.filterValue=undefined}j[m.dataKey]=m});if(k&&h){this._wijgrid.options.pageSize=h.pageSize();this._wijgrid.options.pageIndex=h.pageIndex()}if(g&&(l=this.DVSortingSettings())){e.each(l,function(m,p){var n;if((n=j[p.dataKey])){n.sortDirection=p.sortDirection;n.sortOrder=m}})}if(i&&(l=this.DVFilteringSettings())){e.each(l,function(n,p){var m;if((m=j[p.dataKey])){m.filterValue=p.filterValue;m.filterOperator=p.filterOperator;if(e.isPlainObject(m.filterOperator)){m.filterOperator=m.filterOperator.name}}})}};f.prototype._mapPagingParams=function(){return this._wijgrid.options.allowPaging&&!this._wijgrid._customPagingEnabled()&&!this._wijgrid._serverShaping()};f.prototype._mapSortingParams=function(){return this._wijgrid.options.allowSorting&&!this._wijgrid._serverShaping()};f.prototype._mapFilteringParams=function(){return !this._wijgrid._serverShaping()};f.prototype._convertFilterToDV=function(i){var g={},h=this;e.each(i,function(o,s){var k=s.dataKey,j=[],p="and",m,r,l,n,q;if(!e.isPlainObject(s)){return}r=s.filterOperator;l=s.filterValue;if(r==null){return}if(!e.isArray(r)){r=[r]}if(!e.isArray(l)){l=[l]}if(r.length!=l.length){throw"The number of filter operators must match the number of filter values"}if(r.length==0){return}e.each(r,function(v,u){if(typeof(u)==="string"){u={name:u}}if(!e.isPlainObject(u)||!u.name){throw"Invalid filter operator"}n=l[v];if(!e.isArray(n)){n=[n]}q=e.map(n,function(x){var y={property:k,operator:u.name,value:x};var z=h._filterCache.getByNameInt(u.name);if(z.isCustom){var A=e.extend(true,{},z.op);if(e.isFunction(A.operator)){(A).apply=A.operator}y.operator=A}return y});function t(){if(q.length>1){q.splice(0,0,"or")}else{q=q[0]}}function w(){if(p==null){p=m;j.splice(0,0,m)}}p=null;m=u.condition||"or";if(j.length<=1||p==m){if(q.length==1||j.length<=1||p=="or"){j=j.concat(q);w()}else{t();j.push(q);w()}}else{t();j=[j,q];w()}});e.each(j,function(t,u){if(e.isArray(u)&&u.length==2){j[t]=u[1]}});if(j.length==2&&typeof(j[0]==="string")){j.shift()}if(j.length==1){j=j[0]}g[k]=j});return g};return f})();d.settingsManager=c})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var g=jQuery;var f=(function(){function i(j){this._domSource=null;this._ignoreAllEvents=false;this._ignoreChangeEvent=false;this._ignoreCurrentChangedEvent=false;this._sharedDataItems=[];this._userData=null;this._totals={};this._changeTimer=0;this._toDispose=[];this._isOwnDataView=false;this._isWijdatasource=false;this._isDynamicWijdatasource=false;this._wijgrid=j;this._createDataViewWrapper()}i.prototype.data=function(){var k=this._getDataViewInst(),j=b.grid.asPagedDataView(k);return{data:this._sharedDataItems,totalRows:j!=null?j.totalItemCount():(k.getSource()||[]).length,totals:this._totals,emptyData:this.isBoundedToDOM()?this._domSource.emptyData:null}};i.prototype.dataView=function(){return this._getDataViewInst()};i.prototype.dispose=function(){var j=this._getDataViewInst();this._propChangeListener.dispose();g.each(this._toDispose,function(k,l){l.dispose()});if(j&&this._isOwnDataView){j.dispose()}this._wijgrid._wijDataView=null};i.prototype.ignoreChangeEvent=function(j){if(arguments.length){this._ignoreChangeEvent=(j===true)}else{return this._ignoreChangeEvent}};i.prototype.ignoreCurrentChangedEvent=function(j){if(arguments.length){this._ignoreCurrentChangedEvent=(j===true)}else{return this._ignoreCurrentChangedEvent}};i.prototype.isDataLoaded=function(){var j=this._getDataViewInst();return j.isLoaded()};i.prototype.isOwnDataView=function(){return this._isOwnDataView};i.prototype.getFieldsInfo=function(){var l=this._getDataViewInst(),k=l.getProperties(),j={};g.each(k,function(m,n){j[n.name]={name:n.name,type:n.type||"string"}});return j};i.prototype.isBoundedToDOM=function(){return this._domSource!==null};i.prototype.load=function(j){this._userData=j;var m=this._getDataViewInst();if(!m){this._createDataViewWrapper();m=this._getDataViewInst()}this._onDataViewLoading();var n=new b.grid.settingsManager(this._wijgrid);if(this._needToLoad(n)){var k=n.MapWGToDV(),l=false;if(this._isWijdatasource&&!this._isDynamicWijdatasource&&m.isLoaded()){l=true}m.refresh(k,l)}else{if(this.isDataLoaded()){this._onDataViewLoaded();this._onDataViewReset()}}};i.prototype.currentPosition=function(k){var j=this._getDataViewInst();if(!arguments.length){return j.currentPosition()}this.ignoreCurrentChangedEvent(true);try{j.currentPosition(k)}finally{this.ignoreCurrentChangedEvent(false)}};i.prototype.getValue=function(k,j){var l=this._getDataViewInst();if(typeof(j)==="number"){j=j+""}return l.getProperty(k,j)};i.prototype.setValue=function(k,j,l){var m=this._getDataViewInst();this.ignoreChangeEvent(true);try{if(typeof(j)==="number"){j=j+""}m.setProperty(k,j,l)}finally{this.ignoreChangeEvent(false)}};i.prototype._createDataViewWrapper=function(){var j,l=this._wijgrid.options.data,m=this._getDataViewInst(),k=false;if(m){return}if(!l){this._domSource=this._processDOM(this._wijgrid.element,this._wijgrid.options.readAttributesFromData);l=this._domSource.items}k=(typeof(wijdatasource)!=="undefined"&&(l instanceof wijdatasource));this._isOwnDataView=(g.isArray(l)||k);this._isWijdatasource=!!(this._isOwnDataView&&k);this._isDynamicWijdatasource=!!(this._isOwnDataView&&k&&l.dynamic);if(this._isOwnDataView){if(!this._domSource&&this._wijgrid.options.readAttributesFromData){this._moveAttributesToExpando(l)}m=b.grid.GridDataView.create(b.data.asDataView(l))}else{m=l}this._wijgrid._wijDataView=m;this._toDispose.push(m.isLoading.subscribe(g.proxy(this._onDataViewLoadingInternal,this)));this._toDispose.push(m.isLoaded.subscribe(g.proxy(this._onDataViewLoadedInternal,this)));this._toDispose.push(m.subscribe(g.proxy(this._onDataViewChangeInternal,this)));this._toDispose.push(m.currentPosition.subscribe(g.proxy(this._onDataViewCurrentChangedInternal,this)));this._propChangeListener=new b.grid.propChangeListener(g.proxy(this._onPropertyChanged,this))};i.prototype._getDataViewInst=function(){return this._wijgrid._wijDataView};i.prototype._needToLoad=function(j){var k=this._getDataViewInst();if(this._isDynamicWijdatasource||(this._isWijdatasource&&!k.isLoaded())){return true}if(this.isDataLoaded()||k.isLoading()){return !j.compareSettings()}return false};i.prototype._validateSettings=function(j){if(!this._isOwnDataView&&this._wijgrid.options.allowPaging&&((j.DVPagingSettings()||{}).pageSize!==(j.WGPagingSettings()||{}).pageSize)){throw"The pageSize option of the external dataView can't be changed."}};i.prototype._onDataViewLoadingInternal=function(j){if(this._ignoreAllEvents){return}if(j){if(!this._userData){this._onDataViewLoading()}}};i.prototype._onDataViewLoadedInternal=function(j){if(this._ignoreAllEvents){return}if(j){this._onDataViewLoaded()}};i.prototype._onDataViewChangeInternal=function(k){var j=this;if(this._ignoreAllEvents||this._ignoreChangeEvent){return}if(k.changes){if(k.length&&k[0].entityState()==="detached"){return}g.each(k.changes,function(l,m){switch(m.changeType){case"remove":j._propChangeListener.remove(m.index);break;case"add":j._propChangeListener.insert(m.index,m.element);break}})}this._onDataViewChange.apply(this,arguments)};i.prototype._onDataViewCurrentChangedInternal=function(){if(this._ignoreAllEvents||this._ignoreCurrentChangedEvent){return}this._onDataViewCurrentChanged.apply(this,arguments)};i.prototype._onDataViewReset=function(){this._sharedDataItems=[];this._totals={};var l,m=this._getDataViewInst(),j=m.count(),k;try{this._propChangeListener.removeAll();for(l=0;l<j;l++){k=m.item(l);this._propChangeListener.insert(l,k);this._sharedDataItems.push(this._wrapDataItem(k,l))}this._totals=this._getTotals(m,this._wijgrid._prepareTotalsRequest(true));this._wijgrid._onDataViewReset(this._userData)}finally{this._userData=null}};i.prototype._onPropertyChanged=function(k){var j=this;if(this._changeTimer>0){window.clearTimeout(this._changeTimer);this._changeTimer=0}if(this._changeTimer!=-1){this._changeTimer=window.setTimeout(function(){j._changeTimer=-1;if(!j._wijgrid._destroyed){j._onDataViewChange()}j._changeTimer=0},100)}};i.prototype._onDataViewChange=function(j){this._onDataViewReset()};i.prototype._onDataViewCurrentChanged=function(k,j){this._wijgrid._onDataViewCurrentPositionChanged(k,j)};i.prototype._onDataViewLoading=function(){this._wijgrid._onDataViewLoading()};i.prototype._onDataViewLoaded=function(){this._wijgrid._onDataViewLoaded()};i.prototype._getTotals=function(r,q){if(!q||q.length===0){return{}}var p,l,o,m,n=[],k={};for(p=0,l=q.length;p<l;p++){n.push(new b.grid.tally())}for(p=0,l=r.count();p<l;p++){for(o=0,m=n.length;o<m;o++){n[o].add(this._wijgrid._parse(q[o].column,this.getValue(p,q[o].column.dataKey)))}}for(p=0,l=n.length;p<l;p++){k[q[p].column.dataKey]=n[p].getValueString(q[p].column)}return k};i.prototype._processDOM=function(l,k){var j={items:[],emptyData:[],header:b.grid.readTableSection(l,b.grid.rowScope.head)};if(b.grid.getTableSectionLength(l,2)===1&&g(b.grid.getTableSectionRow(l,2,0)).hasClass("wijmo-wijgrid-emptydatarow")){j.emptyData=b.grid.readTableSection(l,b.grid.rowScope.body)}else{j.items=b.grid.readTableSection(l,b.grid.rowScope.body,k)}return j};i.prototype._moveAttributesToExpando=function(j){g.each(j,function(k,l){var n=(b).data.Expando.getFrom(l,true),m;m=n[b.grid.EXPANDO]={cellsAttributes:{},rowAttributes:{}};if(l.rowAttributes){m.rowAttributes=l.rowAttributes;delete l.rowAttributes}g.each(l,function(p,o){if(g.isArray(o)){m.cellsAttributes[p]=o[1];l[p]=o[0]}})})};i.prototype._wrapDataItem=function(j,k){return{values:j,originalRowIndex:k}};i.prototype._refreshSilent=function(){var j=this._getDataViewInst();if(j){try{this._ignoreAllEvents=true;j.refresh()}finally{this._ignoreAllEvents=false}}};i.prototype._unsafeReplace=function(j,k){var l=this._getDataViewInst();if(!(l instanceof b.grid.GridDataView)){"operation is not supported"}l._unsafeReplace(j,k)};i.prototype._unsafeSplice=function(j,l,k){var m=this._getDataViewInst();if(!(m instanceof b.grid.GridDataView)){"operation is not supported"}if(arguments.length===2){m._unsafeSplice(j,l)}else{m._unsafeSplice(j,l,k)}};i.prototype._unsafePush=function(j){var k=this._getDataViewInst();if(!(k instanceof b.grid.GridDataView)){"operation is not supported"}k._unsafePush(j)};return i})();d.dataViewWrapper=f;function c(i){return i&&("pageCount" in i)?i:null}d.asPagedDataView=c;function e(i){return i&&("commitEdit" in i)?i:null}d.asEditableDataView=e;var h=(function(){function i(j){this._subscriptions=[];this._callback=j}i.prototype.insert=function(k,l){var m=[],j=this;this._subscriptions.splice(k,0,m);g.each(l,function(n,o){if(j._isValidPropName(n)&&o&&g.isFunction(o.subscribe)){m.push(o.subscribe(j._callback))}})};i.prototype.remove=function(k){var j=this._subscriptions[k];if(j){g.each(j,function(l,m){m.dispose();j[l]=null})}this._subscriptions[k]=null;this._subscriptions.splice(k,1)};i.prototype.removeAll=function(){var j,k;while(j=this._subscriptions.length){this.remove(j-1)}this._subscriptions=[]};i.prototype.dispose=function(){this.removeAll()};i.prototype._isValidPropName=function(j){if(j&&(typeof(j)==="string")){return j.match("^entityState|jQuery")===null}return true};return i})();d.propChangeListener=h})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var f=jQuery;var e=(function(){function g(j,i,k,h,l){this.cr=new b.grid.cellRange(-1,-1);this.isExpanded=false;this._value=-1;this._sum=-1;this._position="none";this._hasHeaderOrFooter=true;if(j!==undefined){this.isExpanded=j}if(i!==undefined){this.cr=i}if(k!==undefined){this._sum=k}if(h!==undefined){this._position=h}if(l!==undefined){this._hasHeaderOrFooter=l}}g.prototype.isSubRange=function(h){return((this.cr.r1>=h.cr.r1)&&(this.cr.r2<=h.cr.r2))};g.prototype.toString=function(){return this.cr.r1+"-"+this.cr.r2};g.prototype.getHeaderImageClass=function(h){var i=this.owner;if(i){return h?i.expandedImageClass||b.c1field.prototype.options.groupInfo.expandedImageClass:i.collapsedImageClass||b.c1field.prototype.options.groupInfo.collapsedImageClass}return null};g.prototype.collapse=function(){var j,k,i,l,h;if((j=this.owner)&&(k=j.owner)&&(i=k.owner)){l=i._field("leaves");if(b.grid.groupHelper.isParentExpanded(l,this.cr,j.level)){if((j.position!=="footer")&&(j.outlineMode!=="none")){h=b.grid.groupHelper.getGroupedColumnsCount(l);this._collapse(i._rows(),l,this,h,i._field("viewRenderBounds").start)}}}};g.prototype.expand=function(l){var j,k,i,m,h;if((j=this.owner)&&(k=j.owner)&&(i=k.owner)){m=i._field("leaves");if(b.grid.groupHelper.isParentExpanded(m,this.cr,j.level)){h=b.grid.groupHelper.getGroupedColumnsCount(m);this._expand(i._rows(),m,this,h,l,true,i._field("viewRenderBounds").start)}}};g.prototype._collapse=function(l,s,t,u,q){var h=t.owner,m=t.cr.r1,v=t.cr.r2,p,r,o,k,n;switch(h.position){case"header":case"headerAndFooter":this._toggleRowVisibility(l.item(t.cr.r1-q),undefined,false);m++;break}for(p=m;p<=v;p++){this._toggleRowVisibility(l.item(p-q),false)}t.isExpanded=false;this._updateHeaderIcon(l,t,q);for(p=h.level+1;p<=u;p++){o=b.grid.groupHelper.getChildGroupRanges(s,t.cr,p-1);for(n=0,r=o.length;n<r;n++){k=o[n];k.isExpanded=false;switch(k.owner.position){case"header":case"headerAndFooter":this._toggleRowVisibility(l.item(k.cr.r1-q),undefined,false);break}this._updateHeaderIcon(l,k,q)}}};g.prototype._expand=function(n,s,u,v,h,l,q){var j=u.owner,m=u.cr.r1,w=u.cr.r2,p,r,o,k,t;switch(j.position){case"header":this._toggleRowVisibility(n.item(m-q),true,l||h);m++;break;case"footer":this._toggleRowVisibility(n.item(w-q),true);w--;break;case"headerAndFooter":this._toggleRowVisibility(n.item(m-q),true,l||h);if(l){this._toggleRowVisibility(n.item(w-q),true)}m++;w--;break}if(l){u.isExpanded=true;this._updateHeaderIcon(n,u,q)}else{return}if(u.owner.level===v){for(p=m;p<=w;p++){this._toggleRowVisibility(n.item(p-q),true)}}else{o=b.grid.groupHelper.getChildGroupRanges(s,u.cr,u.owner.level);if(o.length&&(m!==o[0].cr.r1)){for(p=m;p<o[0].cr.r1;p++){this._toggleRowVisibility(n.item(p-q),true)}}if(h){for(p=0,r=o.length;p<r;p++){k=o[p];this._expand(n,s,k,v,h,true,q)}}else{for(p=0,r=o.length;p<r;p++){k=o[p];t=(k.owner.position==="footer"||k.owner.outlineMode==="none")?true:false;this._expand(n,s,k,v,false,t,q)}}}};g.prototype._toggleRowVisibility=function(i,j,h){if(i){if(i[0]){if(j!==undefined){i[0].style.display=j?"":"none";i[0]["aria-hidden"]=j?"false":"true"}if(h!==undefined){i[0]["aria-expanded"]=h?"true":"false"}}if(i[1]){if(j!==undefined){i[1].style.display=j?"":"none";i[1]["aria-hidden"]=j?"false":"true"}if(h!==undefined){i[1]["aria-expanded"]=h?"true":"false"}}}};g.prototype._updateHeaderIcon=function(i,k,j){if(k.owner.position!=="footer"){var l,h=i.item(k.cr.r1-j);if(h){if(h[0]){l=f(h[0]).find("div.wijmo-wijgrid-grouptogglebtn:first-child")}}if(l&&l.length){l.toggleClass(k.getHeaderImageClass(!k.isExpanded),false);l.toggleClass(k.getHeaderImageClass(k.isExpanded),true)}}};return g})();d.groupRange=e;var c=(function(){function g(){this._groupRowIdx=0}g.prototype.group=function(j,m,o){this._grid=j;this._data=m;this._leaves=o;this._groupRowIdx=0;var k=1,n,p,r,q=[],l=false,h=0;for(n=0,p=o.length;n<p;n++){r=o[n];if(r.groupInfo){delete r.groupInfo.level;delete r.groupInfo.expandInfo}if(r.groupInfo&&(r.groupInfo.position&&(r.groupInfo.position!=="none"))&&(r.dataIndex>=0)){if(r.groupedIndex===undefined){l=true}}else{if(r.groupedIndex!==undefined){delete r.groupedIndex}}}if(l){for(n=0,p=o.length;n<p;n++){r=o[n];if(r.groupInfo&&(r.groupInfo.position&&(r.groupInfo.position!=="none"))&&(r.dataIndex>=0)){r.groupedIndex=h++;q.push(r)}}}else{q=f.map(o,function(i){return i.groupedIndex!==undefined?i:null});q.sort(function(s,i){return s.groupedIndex-i.groupedIndex});f.each(q,function(i,s){s.groupedIndex=i})}j._field("groupedColumns",q);for(n=0,p=q.length;n<p;n++){r=q[n];this._groupRowIdx=0;if(r.groupInfo&&(r.groupInfo.position&&(r.groupInfo.position!=="none"))&&(r.dataIndex>=0)){r.groupInfo.level=k;r.groupInfo.expandInfo=[];this._processRowGroup(r,k++)}}delete this._grid;delete this._data;delete this._leaves};g.prototype._processRowGroup=function(q,j){var v,p,h,o,k,r,l,n,s,m,t=0,u=true;f.each(this._leaves,function(x,w){if(w.parentVis){t=x;return false}});for(v=0;v<this._data.length;v++){if(!(this._data[v].rowType&b.grid.rowType.data)){continue}p=this._getGroupCellRange(v,q,j);h=true;o=(q.groupInfo.outlineMode==="startCollapsed");if(o||b.grid.groupHelper.isParentCollapsed(this._leaves,p,j)){if((q.groupInfo.groupSingleRow===false)&&(p.r1===p.r2)){continue}h=false}if(j&&this._grid.options.groupIndent){for(k=p.r1;k<=p.r2;k++){this._addIndent(this._data[k][t],j)}}u=!(q.groupInfo.groupSingleRow===false&&(p.r1===p.r2));switch(q.groupInfo.position){case"header":r=this._addGroupRange(q.groupInfo,p,h,u);for(m=p.r1;m<=p.r2;m++){this._data[m].__attr["aria-level"]=j+1;if(!h){this._data[m].__style.display="none";this._data[m].__attr["aria-hidden"]=true}}if(!u){break}this._updateByGroupRange(r,j);l=b.grid.groupHelper.isParentCollapsed(this._leaves,r.cr,j);n=this._buildGroupRow(r,p,true,l);this._data.splice(p.r1,0,n);n.__attr["arial-level"]=j;n.__attr["aria-expanded"]=h;if(l){n.__style.display="none";n.__attr["aria-hidden"]=true}v=p.r2+1;break;case"footer":r=this._addGroupRange(q.groupInfo,p,true,u);if(!u){break}this._updateByGroupRange(r,j);s=this._buildGroupRow(r,p,false,false);s.__attr["aria-level"]=j;this._data.splice(p.r2+1,0,s);v=p.r2+1;l=b.grid.groupHelper.isParentCollapsed(this._leaves,r.cr,j);if(l){s.__style.display="none";s.__attr["aria-hidden"]=true}break;case"headerAndFooter":r=this._addGroupRange(q.groupInfo,p,h,u);for(m=p.r1;m<=p.r2;m++){this._data[m].__attr["aria-level"]=j+1;if(!h){this._data[m].__style.display="none";this._data[m].__attr["aria-hidden"]=true}}if(!u){break}this._updateByGroupRange(r,j);l=b.grid.groupHelper.isParentCollapsed(this._leaves,r.cr,j);n=this._buildGroupRow(r,p,true,l);s=this._buildGroupRow(r,p,false,false);this._data.splice(p.r2+1,0,s);s.__attr["aria-level"]=j;if(l||!h){s.__style.display="none";s.__attr["aria-hidden"]=true}this._data.splice(p.r1,0,n);n.__attr["aria-level"]=j;n.__attr["aria-expanded"]=h;if(l){n.__style.display="none";n.__attr["aria-hidden"]=true}v=p.r2+2;break;default:throw b.grid.stringFormat('Unknown Position value: "{0}"',q.groupInfo.position)}this._groupRowIdx++}};g.prototype._buildGroupRow=function(p,t,j,w){var n=p.owner,v=n.owner,o=v.owner,l=[],m="",s="",y,h,x,i,u,k,r,q;(l).__style={};(l).__attr={};(l).__attr.id=((j)?"GH":"GF")+this._groupRowIdx+"-"+n.level;(l).rowType=(j)?b.grid.rowType.groupHeader:b.grid.rowType.groupFooter;if((v.dataIndex>=0)&&((y=this._data[t.r1][v.dataIndex].value)!==null)){m=o._toStr(v,y)}if(this._grid.options.showRowHeader){l.push({html:"&nbsp;"})}h={html:"",__attr:{},__style:{}};if(j&&n.outlineMode!=="none"){if(p.isExpanded){h.html='<div class="'+o.options.wijCSS.icon+" "+p.getHeaderImageClass(true)+' wijmo-wijgrid-grouptogglebtn">&nbsp;</div>'}else{h.html='<div class="'+o.options.wijCSS.icon+" "+p.getHeaderImageClass(false)+' wijmo-wijgrid-grouptogglebtn">&nbsp;</div>'}}l.push(h);if(v.aggregate&&(v.aggregate!=="none")){s=this._getAggregate(t,v,v,j,m)}x=(j)?n.headerText:n.footerText;if(x==="custom"){i={data:this._data,column:v,groupByColumn:n.owner,groupText:m,text:"",groupingStart:t.r1,groupingEnd:t.r2,isGroupHeader:j,aggregate:s};if(this._grid._trigger("groupText",null,i)){x=i.text}}else{if((x===undefined)||(x===null)){if(j){x="{1}: {0}"}if(s||(s===0)){x=x?x+" {2}":"{2}"}}x=b.grid.stringFormat(x,m,v&&v.headerText?v.headerText:"",s.toString())}if(!x){x="&nbsp;"}h.html+="<span>"+x+"</span>";this._addIndent(h,n.level-1);u=1;k=(this._grid.options.showRowHeader)?1:0;r=true;for(;k<this._leaves.length;k++){y=this._leaves[k];if(y.parentVis){if(r){r=false;continue}if((y.dynamic!==true)&&y.aggregate&&(y.aggregate!=="none")){break}u++}}for(;k<this._leaves.length;k++){y=this._leaves[k];if(y.parentVis){q=this._getAggregate(t,y,n.owner,j,m);if(!q&&(q!==0)){q="&nbsp;"}l.push({html:q.toString(),__attr:{groupInfo:{leafIndex:y.leavesIdx,purpose:b.grid.groupRowCellPurpose.aggregateCell}}})}}h.__attr.colSpan=u;h.__attr.groupInfo={leafIndex:v.leavesIdx,purpose:b.grid.groupRowCellPurpose.groupCell};return l};g.prototype._getAggregate=function(l,k,i,o,n){var h="",m,j,p;if(!k.aggregate||(k.aggregate==="none")){return h}if(k.aggregate==="custom"){m={data:this._data,column:k,groupByColumn:i,groupText:n,text:"",groupingStart:l.r1,groupingEnd:l.r2,isGroupHeader:o};if(this._grid._trigger("groupAggregate",null,m)){h=m.text}}else{j=new b.grid.tally();for(p=l.r1;p<=l.r2;p++){j.add(this._data[p][k.dataIndex].value)}h=j.getValueString(k)}return h};g.prototype._getGroupCellRange=function(p,l,h){var o=l.leavesIdx,j=new b.grid.cellRange(p,o),i=b.grid.groupHelper.getParentGroupRange(this._leaves,j,h),n,m,k;if(this._data[p].rowType&b.grid.rowType.data){n=this._data[p][l.dataIndex].value;if(n instanceof Date){n=n.getTime()}for(j.r2=p,k=this._data.length-1;j.r2<k;j.r2++){if(!(this._data[j.r2+1].rowType&b.grid.rowType.data)||(i&&(j.r2+1>i.cr.r2))){break}m=this._data[j.r2+1][l.dataIndex].value;if(m instanceof Date){m=m.getTime()}if(n!==m){break}}}return j};g.prototype._addGroupRange=function(j,n,h,p){var q=null,o=b.grid.groupHelper.getChildGroupIndex(n,j.expandInfo),m,i,l,k;if(o>=0&&o<j.expandInfo.length){q=j.expandInfo[o]}else{m=new b.grid.cellRange(n.r1,n.r1,n.r2,n.r2);i=(j.position==="footer"||!p)?true:h&&(j.outlineMode!=="startCollapsed");q=new b.grid.groupRange(i,m,-1,j.position,p);q.owner=j;j.expandInfo.push(q)}if(q&&p){l=n.r1;k=n.r2;if(j.position==="headerAndFooter"){k+=2}if(j.position!=="headerAndFooter"){k++}q.cr.r2=k}return q};g.prototype._updateByGroupRange=function(p,h){var n,o,k,l,m,r,q;for(n=0,o=this._leaves.length;n<o;n++){k=this._leaves[n].groupInfo;if(k&&(k.level<h)){l=(k.expandInfo)?k.expandInfo.length:0;for(m=0;m<l;m++){r=k.expandInfo[m];q=(p.position==="headerAndFooter")?2:1;if(r.cr.r1>=p.cr.r1&&!((r.cr.r1===p.cr.r1)&&(r.position==="footer"))){r.cr.r1+=q}if(r.cr.r2>=p.cr.r1){r.cr.r2+=q}}}}};g.prototype._addIndent=function(i,j){var h;if(j>0&&(h=this._grid.options.groupIndent)){i.__style.paddingLeft=(h*j)+"px"}};return g})();d.grouper=c})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var d=jQuery;var e=(function(){function f(){}f._getGroupInfoRegExp=new RegExp(".*G([HF]){1}(\\d+)-(\\d+)$");f.getGroupInfo=function m(s){if(s){var r=b.grid.groupHelper._getGroupInfoRegExp.exec(s.id),t,p,q;if(r){t=parseInt(r[3],10);p=parseInt(r[2],10);q=(r[1]==="H");return{level:t,index:p,isHeader:q,toString:function(){return(q?"GH":"GF")+p+"-"+t}}}}return null};f.getColumnByGroupLevel=function j(t,s){var r,p,q;for(r=0,p=t.length;r<p;r++){q=t[r];if(q.groupInfo&&(q.groupInfo.level===s)){return q}}return null};f.getGroupedColumnsCount=function l(t){var q=0,s,p,r;for(s=0,p=t.length;s<p;s++){r=t[s].groupInfo;if(r&&(r.position==="header"||r.position==="headerAndFooter"||r.position==="footer")){q++}}return q};f.getChildGroupIndex=function n(q,p){var u=0,r=p.length-1,s,t;while(u<=r){s=((r-u)>>1)+u;t=p[s].cr.r1-q.r1;if(t===0){return s}if(t<0){u=s+1}else{r=s-1}}return u};f.getParentGroupIndex=function h(q,r){var p=b.grid.groupHelper.getChildGroupIndex(q,r);if(p>0){p--}return(p<r.length)?p:-1};f.getChildGroupRanges=function k(t,v,p){var y=[],r,q,s,u,w,x=b.grid.groupHelper.getColumnByGroupLevel(t,p+1);if(x){r=x.groupInfo.expandInfo;w=b.grid.groupHelper.getChildGroupIndex(v,r);for(s=w,u=r.length;s<u;s++){q=r[s];if(q.cr.r2<=v.r2){y.push(q)}else{break}}}return y};f.getParentGroupRange=function g(u,q,t){var s,r,p;if(t===undefined){t=65535}if(t-2>=0){for(s=u.length-1;s>=0;s--){r=u[s].groupInfo;if(!r||!r.expandInfo||(r.level<0)||(r.level!==t-1)){continue}p=b.grid.groupHelper.getParentGroupIndex(q,r.expandInfo);if(p>=0){return r.expandInfo[p]}}}return null};f.isParentCollapsed=function i(t,p,s){var q,r;if(s===1){return false}for(q=s;q>1;q--){r=b.grid.groupHelper.getParentGroupRange(t,p,q);if(r&&!r.isExpanded){return true}p=r.cr}return false};f.isParentExpanded=function o(t,p,s){var q,r;if(s===1){return true}for(q=s;q>1;q--){r=b.grid.groupHelper.getParentGroupRange(t,p,q);if(r&&r.isExpanded){return true}p=r.cr}return false};return f})();c.groupHelper=e})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(){function g(j,k,h,i){switch(arguments.length){case 2:this.r1=this.r2=j;this.c1=this.c2=k;break;case 4:this.r1=j;this.r2=h;this.c1=k;this.c2=i;break;default:this.r1=0;this.r2=0;this.c1=0;this.c2=0}}g.prototype.isSingleCell=function(){return((this.r1===this.r2)&&(this.c1===this.c2))};return g})();d.cellRange=c;var f=(function(){function g(){}g.prototype.merge=function(m,j){this._leaves=j;this._data=m;var l,h,k;for(l=0,h=this._leaves.length;l<h;l++){k=this._leaves[l];if((k.dataIndex>=0)&&!k.isBand&&(k.rowMerge==="free"||k.rowMerge==="restricted")){this._mergeColumn(k)}}delete this._data;delete this._leaves};g.prototype._mergeColumn=function(n){var m=n.dataIndex,k,h,j,l,o;for(k=0,h=this._data.length;k<h;k++){if(!(this._data[k].rowType&b.grid.rowType.data)){continue}j=this._getCellRange(k,n);if(j.r1!==j.r2){l=j.r2-j.r1+1;this._data[j.r1][m].__attr.rowSpan=l;for(o=j.r1+1;o<=j.r2;o++){this._data[o][m].visible=false}}k=j.r2}};g.prototype._getCellRange=function(i,l){var k=l.dataIndex,n=new b.grid.cellRange(i,k),p=(this._data[i][k].value||"").toString(),j=this._data.length,h,o,m,q;for(n.r2=i;n.r2<j-1;n.r2++){h=this._data[n.r2+1];if(!(h.rowType&b.grid.rowType.data)||((h[k].value||"").toString()!==p)){break}}o=l.leavesIdx;if(o>0&&l.rowMerge==="restricted"){m=this._leaves[o-1];if(m.dataIndex>=0){q=this._getCellRange(i,m);n.r1=Math.max(n.r1,q.r1);n.r2=Math.min(n.r2,q.r2)}}return n};return g})();d.merger=f})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var l=jQuery;c.EXPANDO="__wijgrid";(function(G){G._map=[];G.header=1;G.data=2;G.dataAlt=4;G.filter=8;G.groupHeader=16;G.groupFooter=32;G.footer=64;G.emptyDataRow=128;G.fooRow=65536})(c.rowType||(c.rowType={}));var u=c.rowType;(function(G){G._map=[];G.none=0;G.rendering=1;G.current=2;G.hovered=4;G.selected=8})(c.renderState||(c.renderState={}));var E=c.renderState;(function(G){G._map=[];G.table=0;G.head=1;G.body=2;G.foot=3})(c.rowScope||(c.rowScope={}));var k=c.rowScope;(function(G){G._map=[];G.none=0;G.toColumn=1;G.toRow=2})(c.cellRangeExtendMode||(c.cellRangeExtendMode={}));var p=c.cellRangeExtendMode;(function(G){G._map=[];G.createIfNull=0;G.createAlways=1;G.dispose=2})(c.objectMode||(c.objectMode={}));var C=c.objectMode;(function(G){G._map=[];G.groupCell=0;G.aggregateCell=1})(c.groupRowCellPurpose||(c.groupRowCellPurpose={}));var o=c.groupRowCellPurpose;function h(J,H){var K,G,I;if(l.isArray(J)&&l.isArray(H)){if(J.length===H.length){I=true;for(K=0,G=J.length;K<G&&I;K++){I=b.grid.compareObj(J[K],H[K])}return I}}else{if(l.isPlainObject(J)&&l.isPlainObject(H)){for(K in J){if(J.hasOwnProperty(K)){if(!b.grid.compareObj(J[K],H[K])){return false}}}for(K in H){if(H.hasOwnProperty(K)){if(!b.grid.compareObj(J[K],H[K])){return false}}}return true}else{if(J instanceof Date){J=J.getTime()}if(H instanceof Date){H=H.getTime()}}}return J===H}c.compareObj=h;function e(J){var K=[];for(var I=0;I<(arguments.length-1);I++){K[I]=arguments[I+1]}var H,G;if(!J){return""}for(H=0,G=K.length;H<G;H++){J=J.replace(new RegExp("\\{"+H+"\\}","gm"),K[H])}return J}c.stringFormat=e;function m(G){return(G&&!(G<0))||(G===0)}c.validDataKey=m;function w(G){return G.dataType||G._underlyingDataType||"string"}c.getDataType=w;function d(G,H){if(G&&H){G.find(".ui-widget").each(function(I,J){l.each(l(J).data(),function(L,K){if(K.widgetName){H(I,K)}});return true})}}c.iterateChildrenWidgets=d;function F(G,H){var I=[];l.each(G.data(),function(J){if(J.indexOf(H)===0){I.push(J)}});l.each(I,function(J,K){G.removeData(K)})}c.remove$dataByPrefix=F;var y=(function(){function G(H){this._dom=H}G.prototype.getSelection=function(){var J=0,H=0,I;if(this._dom.selectionStart!==undefined){J=this._dom.selectionStart;H=this._dom.selectionEnd}else{if(document.selection){I=document.selection.createRange().duplicate();H=I.text.length;J=Math.abs(I.moveStart("character",-this._dom.value.length));H+=J}}return{start:J,end:H,length:H-J}};G.prototype.setSelection=function(H){if(this._dom.selectionStart!==undefined){this._dom.setSelectionRange(H.start,H.end)}else{var I=this._dom.createTextRange();I.collapse(true);I.moveStart("character",H.start);I.moveEnd("character",H.end);I.select()}};G.prototype.toggleSelection=function(J){var H=l(this._dom),I="onselectstart" in this._dom;if(J){if(I){H.unbind(".wijgrid-disableSelection")}else{H.css({MozUserSelect:"",WebkitUserSelect:""})}}else{if(I){H.bind("selectstart.wijgrid-disableSelection",function(K){K.preventDefault()})}else{H.css({MozUserSelect:"-moz-none",WebkitUserSelect:"none"})}}};return G})();c.domSelection=y;function g(G){return l.extend(true,{},b.c1basefield.prototype.options,b.c1field.prototype.options,{dynamic:true,isLeaf:true,isBand:false,parentIdx:-1},G)}c.createDynamicField=g;function n(I,H){if(I){var G=I.nodeType?l(I):I,J=G.offset();if(J){if(H){return{top:J.top,left:J.left,width:G[0].clientWidth||0,height:G[0].clientHeight||0}}return{top:J.top,left:J.left,width:G.outerWidth(),height:G.outerHeight()}}}return null}c.bounds=n;function r(J,L,I){if(L===undefined){L=3}if(J&&L!==0){if(!I&&J.nodeType===3){return J.nodeValue}if(J.nodeType===1){switch((J).type){case"button":case"text":case"textarea":case"select-one":return(J).value;case"checkbox":return(J).checked.toString()}var G="",H=0,K;while(K=J.childNodes[H++]){G+=b.grid._getDOMText(K,L-1)}return G}}return""}c._getDOMText=r;function D(I,M,G,O){var L=(I.jquery||l.isArray(I)),J,N,K,H=M+G;if(arguments.length===3){if(L){return l.data(I[0],H)}return l.data(I,H)}else{if(L){for(J=0,N=I.length;J<N;J++){K=l.data(I[J],H,O)}return K}return l.data(I,H,O)}}c.dataPrefix=D;function z(J,K){if(K&&J){var G,I,H;for(G in K){if(K.hasOwnProperty(G)){I=K[G];H=typeof(I);if((H==="string"||H==="boolean"||H==="number")&&(J[G]===undefined)){J[G]=I}}}}}c.shallowMerge=z;function B(G){return(G&&(typeof(G)==="object")&&!(G instanceof Date))}c.isCustomObject=B;function q(I,K){var G,J,H=l.isFunction(K);for(G in I){if(I.hasOwnProperty(G)){J=H?K(I[G]):(I[G]===K);if(J===true){return{at:G,found:I[G]}}}}return{at:null,found:null}}c.search=q;function v(N,I){if(N){var L,H,K=0,G={},M,J;for(L=0,H=N.attributes.length;L<H;L++){J=N.attributes[L].name;if(J&&(!I||!I(J))){M=N.getAttribute(J);if(J==="style"){M=(typeof(M)==="object")?M.cssText:M}if(!M&&J==="class"){M=N.getAttribute("className")}if(M&&(typeof(M)!=="function")){G[J]=M;K++}}}if(K){return G}}return null}c.getAttributes=v;function s(I,J){var H,K,M,G,L;if(I){if(typeof(J)!=="object"&&!l.isFunction(J)){J={}}for(H in I){K=I[H];M=J[M];if(K===J){continue}if(K&&(l.isPlainObject(K)||(G=l.isArray(K)))){if(G){G=false;L=M&&l.isArray(M)?M:[]}else{L=M&&l.isPlainObject(M)?M:{}}J[H]=b.grid.deepExtend(K,L)}else{J[H]=K}}}return J}c.deepExtend=s;function x(){if(l.ui&&l.ui.keyCode){return l.ui.keyCode}if(l.mobile&&l.mobile.keyCode){return l.mobile.keyCode}throw"keyCode object is not found"}c.getKeyCodeEnum=x;function i(H,G){if(H&&H.jquery){H=H[0]}if(H){return(arguments.length===1)?l.data(H,"wijgridwidgetName"):l.data(H,"wijgridwidgetName",G)}return undefined}c.widgetName=i;function j(H,G,I){return(H>G)&&(H<(G+I))}c.isOverAxis=j;function A(L,H,K,J,G,I){return b.grid.isOverAxis(L,K,G)&&b.grid.isOverAxis(H,J,I)}c.isOver=A;var f=0;function t(){return"uid"+f++}c.getUID=t;l.extend(l.wijmo.wijgrid,{rowType:b.grid.rowType,renderState:b.grid.renderState,bounds:b.grid.bounds})})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(){function g(i){this._cache={};var h=this;this._wijgrid=i;this._addOperator(null,{applicableTo:null,name:"NoFilter",arity:1,operator:function(){return true}});e.each(b.data.filtering.ops,function(j,k){h._addOperator(j,k)});e.each(i.options.customFilterOperators,function(j,k){h._addOperator(null,k,true)})}g.prototype.getByName=function(h){var i=this.getByNameInt(h);return(i)?i.op:null};g.prototype.getByNameInt=function(h){return this._cache[(h||"").toLowerCase()]};g.prototype.getByDataType=function(i){var j=[],h;e.each(this._cache,function(k,m){var l=m.op;if(!l.applicableTo||e.inArray(i,l.applicableTo)>=0){j.push(m)}});switch(this._wijgrid.options.filterOperatorsSortMode.toLowerCase()){case"alphabetical":j.sort(this._sortAlpha);break;case"alphabeticalcustomfirst":j.sort(this._sortAlphaCustomFirst);break;case"alphabeticalembeddedFirst":j.sort(this._sortAlphaEmbeddedFirst);break;case"none":break;default:break}h=e.map(j,function(l,k){return l.op});return h};g.prototype._addOperator=function(h,j,i){if(typeof i==="undefined"){i=false}if(h&&!j.name){j.name=h}h=(h||j.name).toLowerCase();if(!this._cache[h]){this._cache[h]={op:j,isCustom:(i===true)}}};g.prototype._sortAlpha=function(i,h){var k=i.op.name.toLowerCase(),j=h.op.name.toLowerCase();if(k!==j){if(k==="nofilter"){return -1}if(j==="nofilter"){return 1}}if(k===j){return 0}return(k<j)?-1:1};g.prototype._sortAlphaEmbeddedFirst=function(i,h){var k=i.op.name.toLowerCase(),j=h.op.name.toLowerCase();if(k!==j){if(k==="nofilter"){return -1}if(j==="nofilter"){return 1}}if(i.isCustom!==h.isCustom){if(i.isCustom){return 1}if(h.isCustom){return -1}}if(k===j){return 0}return(k<j)?-1:1};g.prototype._sortAlphaCustomFirst=function(i,h){var k=i.op.name.toLowerCase(),j=h.op.name.toLowerCase();if(k!==j){if(k==="nofilter"){return -1}if(j==="nofilter"){return 1}}if(i.isCustom!==h.isCustom){if(i.isCustom){return -1}if(h.isCustom){return 1}}if(k===j){return 0}return(k<j)?-1:1};return g})();d.filterOperatorsCache=c;var f=(function(){function k(){}k.marker="_wijgrid";k.getSingleValue=function h(l){if(e.isArray(l)){l=l[0];if(e.isArray(l)){l=l[0]}}return l};k.getSingleOperatorName=function g(l){if(e.isArray(l)){l=l[0]}return l.name||l||""};k.verify=function j(n,s,p,o){if(n){if(e.isArray(n)){var q,m,r=[],l=[];if(!e.isArray(s)){s=[s]}for(q=0,m=n.length;q<m;q++){if(b.grid.filterHelper._verifySingleOp(n[q],s[q],p,o)){r.push({name:n[q].name||n[q],condition:n[q].condition||"or"});l.push(s?s[q]:undefined)}}if(r.length){return{filterOperator:r,filterValue:l}}}else{if(b.grid.filterHelper._verifySingleOp(n,s,p,o)){return{filterOperator:n,filterValue:s}}}}return null};k._verifySingleOp=function i(l,p,n,m){if(l&&(l=(l.name||l))){var o;l=(l||"").toLowerCase();if((l!=="nofilter"||p!==undefined)&&(o=m.getByName(l))){if(o.applicableTo===null||e.inArray(n||"string",o.applicableTo)>=0){if(o.arity===1||(o.arity>1&&b.grid.filterHelper.getSingleValue(p)!==undefined)){return true}}}}return false};return k})();d.filterHelper=f})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var f=jQuery;function e(k,j){if(k&&!k.nodeType){k=k[0]}if(k){switch(j){case b.grid.rowScope.head:return k.tHead;case b.grid.rowScope.body:if(k.tBodies){return k.tBodies[0]||null}break;case b.grid.rowScope.foot:return k.tFoot;default:return k}}return null}d.getTableSection=e;function i(k,j){var l;if(k&&!k.nodeType){k=k[0]}return(k&&(l=this.getTableSection(k,j)))?l.rows.length:0}d.getTableSectionLength=i;function h(k,j,m){var l;if(k&&!k.nodeType){k=k[0]}return(k&&(l=this.getTableSection(k,j)))?(l.rows[m]||null):null}d.getTableSectionRow=h;function c(s,t,n){var o,q,w,j,k,v,r,l,u=[],m=function(x){x=x.toLowerCase();return x==="rowspan"||x==="colspan"},p;if(s&&!s.nodeType){s=s[0]}if(s&&(p=this.getTableSection(s,t))){for(o=0,q=p.rows.length;o<q;o++){k=p.rows[o];v=[];if(n){r=(b).data.Expando.getFrom(v,true);l=r[b.grid.EXPANDO]={cellsAttributes:{},rowAttributes:b.grid.getAttributes(k)||{}}}for(w=0,j=k.cells.length;w<j;w++){v[w]=f.trim((k.cells[w]).innerHTML);if(n){l.cellsAttributes[w]=b.grid.getAttributes(k.cells[w],m)||{}}}u[o]=v}}return u}d.readTableSection=c;var g=(function(){function j(l,m,k,n){this._width=0;this._table=l;this._offsets=[];if(n){this.ensureColGroup()}if(k){this.ensureTBody()}if(!m){this._buildOffsets()}}j.prototype.element=function(){return this._table};j.prototype.width=function(){return this._width};j.prototype.getCellIdx=function(l,k){return(l<this._width)?this._offsets[k][l].cellIdx:-1};j.prototype.getColumnIdx=function(l,k){if(typeof(l)!=="number"){var m=l;l=m.cellIndex;k=m.parentNode.rowIndex}return(l<this._width)?this._offsets[k][l].colIdx:-1};j.prototype.clearSection=function(l){var n,k,m=b.grid.getTableSection(this._table,l);switch(l){case b.grid.rowScope.body:n=this.getSectionLength(b.grid.rowScope.table);k=n+this.getSectionLength(l)-1;break;case b.grid.rowScope.foot:n=this.getSectionLength(b.grid.rowScope.table)+this.getSectionLength(b.grid.rowScope.head);k=n+this.getSectionLength(l)-1;break;default:n=0;k=this.getSectionLength(l)-1}while(m.rows.length){m.deleteRow(0)}this._offsets.splice(n,k-n+1)};j.prototype.getSectionLength=function(k){return b.grid.getTableSectionLength(this._table,k)};j.prototype.getSectionRow=function(l,k){return b.grid.getTableSectionRow(this._table,k,l)};j.prototype.forEachColumnCellNatural=function(n,q,p){var l,m,o,k;for(l=0,m=this._table.rows.length;l<m;l++){o=this._table.rows[l];if(n<o.cells.length){k=q(o.cells[n],l,p);if(k!==true){return k}}}return true};j.prototype.forEachColumnCell=function(o,r,q){var l,n,p,m,k;for(l=0,n=this._offsets.length;l<n;l++){p=this._table.rows[l];m=this.getCellIdx(o,l);if(m>=0){k=r(p.cells[m],l,q);if(k!==true){return k}}}return true};j.prototype.forEachRowCell=function(q,p,o){var n=this._table.rows[q],l,m,k;for(l=0,m=n.cells.length;l<m;l++){k=p(n.cells[l],l,o);if(k!==true){return k}}return true};j.prototype.colGroupTag=function(){var k=this._table.getElementsByTagName("colgroup");return((k&&k[0]))||null};j.prototype.colTags=function(){var k=this.colGroupTag();return(k&&k.getElementsByTagName("col"))||[]};j.prototype.ensureTBody=function(){return((this._table.tBodies&&this._table.tBodies[0])||this._table.appendChild(document.createElement("tbody")))};j.prototype.ensureTHead=function(){return(this._table.tHead&&this._table.tHead[0])||this._table.createTHead()};j.prototype.ensureTFoot=function(){return(this._table.tFoot&&this._table.tFoot[0])||this._table.createTFoot()};j.prototype.ensureColGroup=function(){var k=this._table.getElementsByTagName("colgroup");return((k&&k[0])||this._table.appendChild(document.createElement("colgroup")))};j.prototype.appendCol=function(l){var k=this.ensureColGroup();return((l&&k.appendChild(l))||k.appendChild(document.createElement("col")))};j.prototype.removeOffset=function(k){if(k>=0&&k<this._offsets.length){if(k<0||(!k&&k!==0)){k=this._offsets.length-1}this._offsets.splice(k,1)}};j.prototype.insertOffset=function(k){var m,l;if(this._width>0){m=[];for(l=0;l<this._width;l++){m.push({cellIdx:l,colIdx:l})}if(k<0||(!k&&k!==0)){k=this._offsets.length}this._offsets.splice(k,0,m)}};j.prototype.rebuildOffsets=function(){this._offsets=[];this._width=0;this._buildOffsets()};j.prototype._buildOffsets=function(){var q=[],l,o,s,u,n,t,k,r,p,m;for(o=0,s=this._table.rows.length;o<s;o++){l=[];this._offsets[o]=l;u=this._table.rows[o];for(n=0,t=0,k=u.cells.length;n<k;n++,t++){r=u.cells[n];for(;q[t]>1;t++){q[t]--;l[t]={cellIdx:-1,colIdx:-1}}if(!(q[t]>1)){q[t]=r.rowSpan}l[t]={cellIdx:n,colIdx:-1};l[n].colIdx=t;p=r.colSpan;for(;p>1;p--){l[++t]={cellIdx:-1,colIdx:-1}}}m=q.length;for(;t<m;t++){q[t]--;l[t]={cellIdx:-1,colIdx:-1}}this._width=Math.max(this._width,m)}};return j})();d.htmlTableAccessor=g})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(){function g(h,k,i,j){if(typeof i==="undefined"){i=null}if(typeof j==="undefined"){j=false}this.__isEdit=false;this._wijgrid=i;if(j){this._cia=h;this._ria=k}else{this._ci=h;this._ri=k}}g.outsideValue=new g(-1,-1,null,true);g.prototype.cellIndexAbs=function(h){if(arguments.length===0){this._ensureCia();return this._cia}this._ci=undefined;this._cia=h};g.prototype.rowIndexAbs=function(h){if(arguments.length===0){this._ensureRia();return this._ria}this._ri=undefined;this._ria=h};g.prototype.cellIndex=function(h){if(arguments.length===0){this._ensureCi();return this._ci}this._cia=undefined;this._ci=h};g.prototype.column=function(){if(this._wijgrid&&this._isValid()){return this._wijgrid._field("visibleLeaves")[this.cellIndexAbs()]}return null};g.prototype.container=function(){var i=this.tableCell(),h;if(i){h=e(i).children("div.wijmo-wijgrid-innercell");if(h){return h}}return null};g.prototype.isEqual=function(h){return(h&&(h.rowIndex()===this.rowIndex())&&(h.cellIndex()===this.cellIndex()))};g.prototype.row=function(){var i=null,h=null;if(this._wijgrid){i=this._wijgrid._view().rows().item(this.rowIndexAbs());if(i&&i.length){h=this._wijgrid._view()._getRowInfo(i)}}return h};g.prototype.rowIndex=function(h){if(arguments.length===0){this._ensureRi();return this._ri}this._ria=undefined;this._ri=h};g.prototype.tableCell=function(){if(this._wijgrid&&this._isValid()){return this._wijgrid._view().getCell(this.cellIndexAbs(),this.rowIndexAbs())}return null};g.prototype.value=function(i){var h,k,j;if(this._wijgrid&&this._isValid()){k=this._wijgrid._view()._getRowInfo(this._wijgrid._rows().item(this.rowIndex()));if(k.type&b.grid.rowType.data){h=this.column();if(arguments.length===0){j=this._wijgrid._dataViewWrapper.getValue(k.data,h.dataKey);return this._wijgrid._parse(h,j)}else{i=this._wijgrid._parse(h,i);if((i===null&&h.valueRequired)||((b.grid.getDataType(h)!=="string")&&isNaN(i))){throw"invalid value"}this._wijgrid._dataViewWrapper.setValue(k.dataItemIndex,h.dataKey,i)}}}};g.prototype.toString=function(){return this.cellIndex()+":"+this.rowIndex()};g.prototype._clip=function(i,k){if(typeof k==="undefined"){k=false}var h=false,j;if(k){if(this.cellIndexAbs()<(j=i.topLeft().cellIndexAbs())){h=true;this._cia=j;this._ci=undefined}if(this.cellIndexAbs()>(j=i.bottomRight().cellIndexAbs())){h=true;this._cia=j;this._ci=undefined}if(this.rowIndexAbs()<(j=i.topLeft().rowIndexAbs())){h=true;this._ria=j;this._ri=undefined}if(this.rowIndexAbs()>(j=i.bottomRight().rowIndexAbs())){h=true;this._ria=j;this._ri=undefined}}else{if(this.cellIndex()<(j=i.topLeft().cellIndex())){h=true;this._ci=j;this._cia=undefined}if(this.cellIndex()>(j=i.bottomRight().cellIndex())){h=true;this._ci=j;this._cia=undefined}if(this.rowIndex()<(j=i.topLeft().rowIndex())){h=true;this._ri=j;this._ria=undefined}if(this.rowIndex()>(j=i.bottomRight().rowIndex())){h=true;this._ri=j;this._ria=undefined}}return h};g.prototype._clone=function(){return new b.grid.cellInfo(this.cellIndex(),this.rowIndex(),this._wijgrid)};g.prototype._isValid=function(){return this.cellIndex()>=0&&this.rowIndex()>=0};g.prototype._isEdit=function(h){if(!arguments.length){return this.__isEdit}this.__isEdit=h};g.prototype._setGridView=function(h){this._wijgrid=h};g.prototype._ensureCia=function(){if(this._cia===undefined){if(this._ci===null){throw"relative index value is undefined"}if(this._ci>=0){if(!this._wijgrid){throw"wijgrid is null"}this._cia=this._ci+this._wijgrid._getDataToAbsOffset().x}else{this._cia=this._ci}if(this._cia<0){this._cia=-1}}};g.prototype._ensureRia=function(){if(this._ria===undefined){if(this._ri===undefined){throw"relative index value is undefined"}if(this._ri>=0){if(!this._wijgrid){throw"wijgrid is null"}this._ria=this._ri+this._wijgrid._getDataToAbsOffset().y}else{this._ria=this._ri}if(this._ria<0){this._ria=-1}}};g.prototype._ensureCi=function(){if(this._ci===undefined){if(this._cia===undefined){throw"absolute index value is undefined"}if(this._cia>=0){if(!this._wijgrid){throw"wijgrid is null"}this._ci=this._cia-this._wijgrid._getDataToAbsOffset().x}else{this._ci=this._cia}if(this._ci<0){this._ci=-1}}};g.prototype._ensureRi=function(){if(this._ri===undefined){if(this._ria===undefined){throw"relative index value is undefined"}if(this._ria>=0){if(!this._wijgrid){throw"wijgrid is null"}this._ri=this._ria-this._wijgrid._getDataToAbsOffset().y}else{this._ri=this._ria}if(this._ri<0){this._ri=-1}}};return g})();d.cellInfo=c;var f=(function(){function g(i,h){if(!i||!h){throw"invalid arguments"}this._topLeft=i._clone();this._bottomRight=h._clone()}g.prototype.bottomRight=function(){return this._bottomRight};g.prototype.isEqual=function(h){return(h&&this._topLeft.isEqual(h.topLeft())&&this._bottomRight.isEqual(h.bottomRight()))};g.prototype.topLeft=function(){return this._topLeft};g.prototype.toString=function(){return this._topLeft.toString()+" - "+this._bottomRight.toString()};g.prototype._isIntersect=function(j){var i,h,l,k;if(j){i=j.bottomRight().rowIndex()-j.topLeft().rowIndex()+1;h=this._bottomRight.rowIndex()-this._topLeft.rowIndex()+1;if((j.topLeft().rowIndex()+i)-this._topLeft.rowIndex()<i+h){l=j.bottomRight().cellIndex()-j.topLeft().cellIndex()+1;k=this._bottomRight.cellIndex()-this._topLeft.cellIndex()+1;return((j.topLeft().cellIndex()+l)-this._topLeft.cellIndex()<l+k)}}return false};g.prototype._isValid=function(){return this._topLeft._isValid()&&this._bottomRight._isValid()};g.prototype._clip=function(h,i){if(typeof i==="undefined"){i=false}return this._topLeft._clip(h,i)||this._bottomRight._clip(h,i)};g.prototype._clone=function(){return new g(this._topLeft._clone(),this._bottomRight._clone())};g.prototype._containsCellInfo=function(h){return(h&&h.cellIndex()>=this._topLeft.cellIndex()&&h.cellIndex()<=this._bottomRight.cellIndex()&&h.rowIndex()>=this._topLeft.rowIndex()&&h.rowIndex()<=this._bottomRight.rowIndex())};g.prototype._containsCellRange=function(h){return(h&&this._containsCellInfo(h.topLeft())&&this._containsCellInfo(h.bottomRight()))};g.prototype._extend=function(i,h){if(i===b.grid.cellRangeExtendMode.toColumn){this._topLeft.rowIndex(h.topLeft().rowIndex());this._bottomRight.rowIndex(h.bottomRight().rowIndex())}else{if(i===b.grid.cellRangeExtendMode.toRow){this._topLeft.cellIndex(h.topLeft().cellIndex());this._bottomRight.cellIndex(h.bottomRight().cellIndex())}}return this};g.prototype._normalize=function(){var i=this._topLeft.cellIndex(),k=this._topLeft.rowIndex(),h=this._bottomRight.cellIndex(),j=this._bottomRight.rowIndex();this._topLeft.cellIndex(Math.min(i,h));this._topLeft.rowIndex(Math.min(k,j));this._bottomRight.cellIndex(Math.max(i,h));this._bottomRight.rowIndex(Math.max(k,j))};return g})();d.cellInfoRange=f;e.extend(e.wijmo.wijgrid,{cellInfo:b.grid.cellInfo,cellInfoRange:b.grid.cellInfoRange})})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(){function f(g,h){this._rowHeaderSize=22;if(!g){throw"'wijgrid' must be specified"}this._wijgrid=g;this._bounds=h;this._wijgrid.element.addClass("wijmo-wijgrid-table")}f.prototype.dispose=function(){this.toggleDOMSelection(true);this._wijgrid.element.removeClass("wijmo-wijgrid-table")};f.prototype.ensureDisabledState=function(){var i="wijmo-wijgrid-disabled "+this._wijgrid.options.wijCSS.stateDisabled,h=this._wijgrid.options.disabled,g=this;e.each(this.subTables(),function(k,l){if(l){var j=e(l.element());if(h){j.addClass(i);g._wijgrid._setAttr(j,"aria-disabled",true)}else{j.removeClass(i);g._wijgrid._setAttr(j,"aria-disabled",false)}}})};f.prototype.ensureWidth=function(h,i,g){this._setColumnWidth(h,i)};f.prototype.ensureHeight=function(g){};f.prototype.getScrollValue=function(){return null};f.prototype.getVisibleAreaBounds=function(){throw"not implemented"};f.prototype.getFixedAreaVisibleBounds=function(){throw"not implemented"};f.prototype.render=function(){this._ensureRenderBounds();this._preRender();this._renderContent();this._postRender()};f.prototype.toggleDOMSelection=function(g){e.each(this.subTables(),function(h,i){(new b.grid.domSelection(i.element())).toggleSelection(g)});(new b.grid.domSelection(this._wijgrid.outerDiv)).toggleSelection(g)};f.prototype.updateSplits=function(g){throw"not implemented"};f.prototype.bodyRows=function(){if(!this._bodyRowsAccessor){this._bodyRowsAccessor=new b.grid.rowAccessor(this,b.grid.rowScope.body,0,0)}return this._bodyRowsAccessor};f.prototype.filterRow=function(){if(this._wijgrid.options.showFilter){var g=new b.grid.rowAccessor(this,b.grid.rowScope.head,0,0);return g.item(g.length()-1)}return null};f.prototype.headerRows=function(){var g;if(!this._headerRowsAccessor){g=this._wijgrid.options.showFilter?1:0;this._headerRowsAccessor=new b.grid.rowAccessor(this,b.grid.rowScope.head,0,g)}return this._headerRowsAccessor};f.prototype.rows=function(){if(!this._rowsAccessor){this._rowsAccessor=new b.grid.rowAccessor(this,b.grid.rowScope.table,0,0)}return this._rowsAccessor};f.prototype.focusableElement=function(){throw"not implemented"};f.prototype.forEachColumnCell=function(g,i,h){throw"not implemented"};f.prototype.forEachRowCell=function(i,h,g){throw"not implemented"};f.prototype.getAbsoluteCellInfo=function(g){throw"not implemented"};f.prototype.getAbsoluteRowIndex=function(g){throw"not implemented"};f.prototype.getCell=function(h,g){throw"not implemented"};f.prototype.getColumnIndex=function(g){throw"not implemented"};f.prototype.getHeaderCell=function(g){throw"not implemented"};f.prototype.getJoinedCols=function(g){throw"not implemented"};f.prototype.getJoinedRows=function(h,g){throw"not implemented"};f.prototype.getJoinedTables=function(g,h){throw"not implemented"};f.prototype.subTables=function(){throw"not implemented"};f.prototype._getMappedScrollMode=function(){var i=this._wijgrid.options.scrollMode,g="auto",h="auto";switch(i){case"horizontal":g="hidden";h="visible";break;case"vertical":g="visible";h="hidden";break;case"both":g="visible";h="visible";break}return{vScrollBarVisibility:g,hScrollBarVisibility:h}};f.prototype._postRender=function(){this.toggleDOMSelection(this._wijgrid.options.selectionMode==="none");this.ensureDisabledState()};f.prototype._preRender=function(){throw"not implemented"};f.prototype._ensureRenderBounds=function(){var g=this._wijgrid._getDataCellsRange();this._bounds.start=0;this._bounds.end=g.bottomRight().rowIndex()};f.prototype._renderContent=function(){this._renderCOLS();this._renderHeader();if(this._wijgrid.options.showFilter){this._renderFilter()}this._renderBody();if(this._wijgrid.options.showFooter){this._renderFooter()}};f.prototype._renderCOLS=function(){var h=this._wijgrid._field("visibleLeaves"),j,l,k,g;for(k=0,g=h.length;k<g;k++){j=h[k];l=this._createCol(j,k);this._appendCol(l,j,k)}};f.prototype._renderHeader=function(){var h=b.grid.rowType,j=this._wijgrid._columnsHeadersTable(),k,g,l;if(j&&(g=j.length)){for(k=0;k<g;k++){l=this._insertEmptyRow(h.header,k,-1,-1,-1);this._renderRow(l,null,j[k])}}};f.prototype._renderFilter=function(){var g=this._insertEmptyRow(b.grid.rowType.filter,-1,-1,-1,-1);this._renderRow(g,this._wijgrid._field("visibleLeaves"),null)};f.prototype._renderBody=function(){var k=b.grid.rowType,p=this._wijgrid._field("visibleLeaves"),q=this._wijgrid.sketchTable,j=-1,r=0,l=0,o,h,m,g,n=this._wijgrid._dataOffset;if(this._bounds.start>=0){for(o=this._bounds.start;o<=this._bounds.end;o++){m=q[o-n];g=(m.rowType&k.data)!==0;h=this._insertEmptyRow(m.rowType,l++,g?++j:-1,g?m.originalRowIndex:-1,g?r+m.originalRowIndex:-1);this._renderRow(h,p,m)}}};f.prototype._renderFooter=function(){var g=this._insertEmptyRow(b.grid.rowType.footer,-1,-1,-1,-1);this._renderRow(g,this._wijgrid._field("visibleLeaves"),null)};f.prototype._insertEmptyRow=function(m,g,h,j,l){var i=this._wijgrid._onViewInsertEmptyRow.apply(this._wijgrid,arguments),k=this._insertRow(m,g,i);return this._createRowInfo(k,m,b.grid.renderState.rendering,g,h,j,l)};f.prototype._createEmptyCell=function(j,g,i){var h=b.grid.rowType,k=this._wijgrid._onViewCreateEmptyCell.apply(this._wijgrid,arguments);return this._createCell(j.type,k)};f.prototype._insertRow=function(i,g,h){throw"not implemented"};f.prototype._createCell=function(i,j){var h=b.grid.rowType,g;if(!j){if(i===h.header){j=document.createElement("th")}else{j=document.createElement("td")}}if(i!==h.filter){g=document.createElement("div");g.className="wijmo-wijgrid-innercell";if(j.firstChild){while(j.firstChild){g.appendChild(j.firstChild)}}j.appendChild(g)}return e(j)};f.prototype._appendCell=function(i,g,h){throw"not implemented"};f.prototype._createCol=function(h,g){throw"not implemented"};f.prototype._appendCol=function(i,h,g){throw"not implemented"};f.prototype._renderRow=function(l,i,k){var h=b.grid.rowType,g,j;switch(l.type){case h.filter:this._renderFilterRow(l,i);break;case h.footer:this._renderFooterRow(l,i);break;case h.header:this._renderHeaderRow(l,k);break;case h.data:case h.data|h.dataAlt:this._renderDataRow(l,i,k);g=k.__attr;j=k.__style;break;case h.emptyDataRow:case h.groupHeader:case h.groupFooter:this._renderSpannedRow(l,i,k);g=k.__attr;j=k.__style;break;default:throw"unknown rowType"}this._rowRendered(l,g,j)};f.prototype._renderCell=function(g,l,n,k,i,j,h){var m=this._createEmptyCell(g,i.dataIndex,i);var o=(g.type===b.grid.rowType.filter)?m:e(m[0].firstChild);this._appendCell(g,l,m);if(k){o.html(n)}else{this._wijgrid.cellFormatter.format(o,i,n,g)}this._cellRendered(g,m,l,i,j,h)};f.prototype._renderDataRow=function(g,q,j){var k,l,m,p,r,o,h,n=false;for(k=0,l=q.length;k<l;k++){m=q[k];p=m.dataIndex;r=null;if(p>=0&&(!j[p]||(j[p].visible===false))){continue}r=(p>=0)?this._wijgrid._toStr(m,j[p].value):null;o=(p>=0)?j[p].__attr:null;h=(p>=0)?j[p].__style:null;this._renderCell(g,k,r,n,m,o,h)}};f.prototype._renderFilterRow=function(l,h){var k,g,j;for(k=0,g=h.length;k<g;k++){j=h[k];this._renderCell(l,k,b.grid.filterHelper.getSingleValue(j.filterValue),false,j)}};f.prototype._renderFooterRow=function(k,h){var j,g;for(j=0,g=h.length;j<g;j++){this._renderCell(k,j,"",false,h[j])}};f.prototype._renderHeaderRow=function(m,k){var j,g,l=0,h;for(j=0,g=k.length;j<g;j++){h=k[j];if(h.column&&h.column.parentVis){h.column.thX=l++;h.column.thY=m.sectionRowIndex;this._renderCell(m,j,h.column.headerText,false,h.column,{colSpan:h.colSpan,rowSpan:h.rowSpan})}}};f.prototype._renderSpannedRow=function(l,h,m){var k,j,g=Math.min(h.length,m.length);for(k=0;k<g;k++){this._renderCell(l,k,m[k].html,true,h[k],m[k].__attr,m[k].__style)}};f.prototype._cellRendered=function(l,k,i,h,g,j){this._wijgrid.cellStyleFormatter.format(k,i,h,l,b.grid.renderState.rendering,g,j);this._changeCellRenderState(k,b.grid.renderState.rendering,false);this._wijgrid._onViewCellRendered(l,k,i,h)};f.prototype._rowRendered=function(i,g,h){this._wijgrid.rowStyleFormatter.format(i,g,h);i.state&=~b.grid.renderState.rendering;this._setRowInfo(i.$rows,i);this._wijgrid._onViewRowRendered(i)};f.prototype._isBodyRow=function(i){var g=b.grid.rowType,h=i.type;return((h&g.data)||(h===g.groupHeader)||(h===g.groupFooter)||(h===g.emptyDataRow))};f.prototype._changeRowRenderState=function(h,g,i){if(i){h.state|=g}else{h.state&=~g}this._setRowInfo(h.$rows,h)};f.prototype._changeCellRenderState=function(l,h,k){var j=b.grid.dataPrefix,g=this._wijgrid._data$prefix,i=j(l,g,"renderState");if(k){h=i|h;j(l,g,"renderState",h)}else{h=i&~h;j(l,g,"renderState",h)}return h};f.prototype._adjustWidthArray=function(i,q,o,k,s){var r=this._sumWidthArray(i),j=this._sumWidthArray(q),p=[],m,n=0,h,g,l=true;if(r<=o){e.extend(true,p,i);if(r===o||k){return p}else{m=o-r}}else{e.extend(true,p,q);if(j>=o){return p}else{m=o-j}}e.each(p,function(t,u){if(!u.real){n++}});if(n!==0){if(s!==undefined&&(s>-1&&s<p.length)&&!p[s].real){p[s].width+=m;return p}h=Math.floor(m/n);g=m-h*n;e.each(p,function(t,u){if(!u.real){u.width+=h;if(l){u.width+=g;l=false}}})}return p};f.prototype._getColumnWidth=function(n,p){var o,k,g,q,s,l,t,v,r,u,h,m;if(p){o=this._wijgrid._field("visibleLeaves")[n];if(o._realWidth!==undefined){k={width:o._realWidth,real:true}}else{if(o.isRowHeader){k={width:this._rowHeaderSize,real:true}}else{g=0;q=this.getJoinedTables(true,n);s=q[2];for(l=0;l<2;l++){t=q[l];if(t!==null){v=t.element().rows;if(m=v.length){for(h=m-1,u=null;h>=0;h--){if(v[h].cells.length===t.width()){u=v[h];break}}if(u){r=u.cells[s];g=Math.max(g,e(r).outerWidth())}}}}k={width:g,real:false}}}p.push(k)}};f.prototype._setColumnWidth=function(g,h){var i=this.getHeaderCell(g),j=this.getJoinedCols(g);if(h){e(i).setOutWidth(h);e.each(j,function(k,l){e(l).setOutWidth(h)})}};f.prototype._setTableWidth=function(i,g,l,h){var k,j;e.each(i,function(m,n){n.css("table-layout","fixed").setOutWidth(g)});k=i[0].outerWidth();j=k-g;if(j!==0){this._setColumnWidth(h,l-j)}};f.prototype._sumWidthArray=function(j,i,h){var g=0;e.each(j,function(k,l){if(i!==undefined&&h!==undefined&&(k<i||k>h)){return true}g+=l.width});return g};f.prototype._clearBody=function(){e.each(this.subTables(),function(g,h){h.clearSection(2)})};f.prototype._rebuildOffsets=function(){e.each(this.subTables(),function(g,h){h.rebuildOffsets()})};f.prototype._removeBodyRow=function(l,k){var j=b.grid.rowType,r=this._wijgrid._rows(),m,n,h,p,q,g,o;if((l>=0)&&(l<(n=r.length()))){if(k){for(m=0;m<n;m++){h=this._getRowInfo(r.item(m));q=h.sectionRowIndex-l;if(h.sectionRowIndex>l){h.sectionRowIndex--;if(h.type&j.data){if(h.type&j.dataAlt){h.type&=~j.dataAlt}else{h.type|=j.dataAlt}h.dataItemIndex--;h.dataRowIndex--;h.virtualDataItemIndex--}this._setRowInfo(h.$rows,h)}}}h=this._getRowInfo(r.item(l));g=this.getAbsoluteRowIndex(h.$rows[0]);h.$rows.remove();o=this.getJoinedTables(false,g);if(o[0]){o[0].removeOffset(o[2])}if(o[1]){o[1].removeOffset(o[2])}}};f.prototype._insertBodyRow=function(l,m,h,r){var q=this._wijgrid._field("visibleLeaves"),k=b.grid.rowType,p=this._wijgrid._view(),s=this._wijgrid._rows(),n=s.length(),j=((l.rowType&k.data)!==0),i,g,o;if(m<0||m>=n||(!m&&m!==0)){m=n}i=this._insertEmptyRow(l.rowType,m,-1,h,r);this._renderRow(i,q,l);g=this.getAbsoluteRowIndex(i.$rows[0]);o=this.getJoinedTables(false,g);if(o[0]){o[0].insertOffset(g)}if(o[1]){o[1].insertOffset(g)}return i};f.prototype._findRowInfo=function(l){var h=this.bodyRows(),j=0,g=h.length(),k;if(e.isFunction(l)){for(j=0;j<g;j++){k=this._getRowInfo(h.item(j));if(l(k)===true){return k}}}return null};f.prototype._setRowInfo=function(l,k){var h="$rows" in k,g="data" in k,j,i;if(h){j=k.$rows;delete k.$rows}if(g){i=k.data;delete k.data}b.grid.dataPrefix(l,this._wijgrid._data$prefix,"rowInfo",k);if(h){k.$rows=j}if(g){k.data=i}};f.prototype._getRowInfo=function(h){var j=this._wijgrid,g=h[1]?e(h):e(h[0]),k=b.grid.dataPrefix(g,j._data$prefix,"rowInfo"),i;k.$rows=g;if((k.dataItemIndex>=0)&&(k.type&b.grid.rowType.data)){k.data=j._getDataItem(k.dataItemIndex)}return k};f.prototype._createRowInfo=function(o,m,i,k,j,g,n){var l,h={type:m,state:i,sectionRowIndex:k,dataRowIndex:j,dataItemIndex:g,virtualDataItemIndex:n,$rows:e(o)};if((g>=0)&&(m&b.grid.rowType.data)){h.data=this._wijgrid._getDataItem(g)}return h};return f})();d.baseView=c})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(b){(function(c){var e=jQuery;var d=(function(f){__extends(g,f);function g(h,i){f.call(this,h,i);this._dataTable=null;this._contentArea=null}g.prototype.dispose=function(){this._wijgrid.outerDiv.unbind("scroll",this._onScroll);f.prototype.dispose.call(this)};g.prototype.ensureWidth=function(k,l,j){var i=e(this._dataTable.element()),h=i.width()+l-j;f.prototype.ensureWidth.call(this,k,l,j);this._setTableWidth([i],h,l,k)};g.prototype.getVisibleAreaBounds=function(){var h=b.grid.bounds(this._dataTable.element()),i;if(this._wijgrid.options.scrollMode==="none"){return h}else{i=b.grid.bounds(this._wijgrid.outerDiv.find(".wijmo-wijgrid-split-area-se:first")[0]);return{top:h.top,left:h.left,width:Math.min(i.width,h.width),height:Math.min(i.height,h.height)}}};g.prototype.updateSplits=function(j){var t=this,n=this._wijgrid,i=n.options,l=n.element,h=[],q=[],k=[],p=n._field("visibleLeaves"),r=n.outerDiv,s,m;l.css({"table-layout":"",width:""});e.each(p,function(v,u){var x,o=u.width;if(o||(o===0)){x=((typeof(o)==="string")&&(o.length>1)&&(o[o.length-1]==="%"));if(x){o=r.width()*parseFloat(o)/100}else{o=parseFloat(o)}if(u.ensurePxWidth||(u.ensurePxWidth===undefined&&i.ensureColumnsPxWidth)){u._realWidth=o}t._setColumnWidth(v,o)}});e.each(p,function(u,o){t._getColumnWidth(u,h)});l.css("width","1px");e.each(p,function(u,o){t._getColumnWidth(u,q)});s=r.width();k=this._adjustWidthArray(h,q,s,i.ensureColumnsPxWidth,i.autoExpandColumnIndex);e.each(k,function(u,v){var o=p[u];if(o._realWidth!==undefined){delete o._realWidth;return}t._setColumnWidth(u,v.width)});m=k.length-1;if(m!==-1){this._setTableWidth([l],this._sumWidthArray(k,0,m),k[m].width,m)}};g.prototype.focusableElement=function(){return e(this._dataTable.element())};g.prototype.forEachColumnCell=function(h,j,i){return this._dataTable.forEachColumnCell(h,j,i)};g.prototype.forEachRowCell=function(j,i,h){return this._dataTable.forEachRowCell(j,i,h)};g.prototype.getAbsoluteCellInfo=function(h){return new b.grid.cellInfo(this.getColumnIndex(h),(h.parentNode).rowIndex,this._wijgrid,true)};g.prototype.getAbsoluteRowIndex=function(h){return h.rowIndex};g.prototype.getCell=function(k,j){var i=this._dataTable.getCellIdx(k,j),h;if(i>=0){h=this.getJoinedRows(j,0);if(h[0]){return h[0].cells[i]}}return null};g.prototype.getColumnIndex=function(h){return this._dataTable.getColumnIdx(h)};g.prototype.getHeaderCell=function(j){var h=this._wijgrid._field("visibleLeaves")[j],i;if(h&&(i=this._wijgrid._headerRows())){return b.grid.rowAccessor.getCell(i.item(h.thY),h.thX)}return null};g.prototype.getJoinedCols=function(h){var i=e(this._dataTable.element()).find("> colgroup");if(i.length){if(h<i[0].childNodes.length){return[i[0].childNodes[h],null]}}return[null,null]};g.prototype.getJoinedRows=function(i,h){return[this._dataTable.getSectionRow(i,h),null]};g.prototype.getJoinedTables=function(h,i){return[this._dataTable,null,i]};g.prototype.subTables=function(){return[this._dataTable]};g.prototype._preRender=function(){this._dataTable=new b.grid.htmlTableAccessor(this._wijgrid.element[0],true,true,true)};g.prototype._postRender=function(){this._wijgrid.element.find("> tbody").addClass(this._wijgrid.options.wijCSS.content+" wijmo-wijgrid-data");this._dataTable=new b.grid.htmlTableAccessor(this._wijgrid.element[0]);this._wijgrid._setAttr(this._wijgrid.element,{role:"grid",cellpadding:"0",border:"0",cellspacing:"0"});this._wijgrid.element.css("border-collapse","separate");this._wijgrid.outerDiv.bind("scroll",{wijgrid:this._wijgrid},e.proxy(this._onScroll,this));f.prototype._postRender.call(this)};g.prototype._insertRow=function(l,i,j){var h=b.grid.rowType,k;switch(l){case h.header:case h.filter:k=this._dataTable.ensureTHead();break;case h.footer:k=this._dataTable.ensureTFoot();break;default:k=this._dataTable.ensureTBody()}if(j){return[k.appendChild(j)]}else{if(i>k.rows.length){i=-1}return[k.insertRow(i)]}};g.prototype._rowRendered=function(k,h,i){var j=k.$rows[0];if(!j.cells.length&&this._isBodyRow(k)){j.parentNode.removeChild(j)}else{f.prototype._rowRendered.call(this,k,h,i)}};g.prototype._appendCell=function(j,h,i){j.$rows[0].appendChild(i[0])};g.prototype._createCol=function(i,h){return[document.createElement("col")]};g.prototype._appendCol=function(j,i,h){this._dataTable.appendCol(j[0])};g.prototype._onScroll=function(h){if(h.data.wijgrid.$superPanelHeader){h.data.wijgrid.$superPanelHeader.css("left",h.target.scrollLeft)}if(h.data.wijgrid.$bottomPagerDiv){h.data.wijgrid.$bottomPagerDiv.css("left",h.target.scrollLeft)}};return g})(c.baseView);c.flatView=d})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(g){__extends(f,g);function f(h,i){g.call(this,h,i);this._verScrollBarSize=18;this._viewTables={};this._splitAreas={};this.element=h.element;this._allowVirtualScrolling=h._allowVirtualScrolling(),this._staticDataRowIndex=h._getStaticIndex(true);this._staticRowIndex=h._getRealStaticRowIndex();this._staticColumnIndex=h._getRealStaticColumnIndex();this._staticAllColumnIndex=(this._staticColumnIndex===-1)?-1:h._field("visibleLeaves")[this._staticColumnIndex].leavesIdx;this._mouseWheelHandler=e.proxy(this._onMouseWheel,this)}f.prototype.dispose=function(){g.prototype.dispose.call(this);this._wijgrid.outerDiv.unbind("mousewheel",this._mouseWheelHandler)};f.prototype.ensureWidth=function(s,x,i){var q=this._wijgrid,k=q.options,l=this._staticColumnIndex,v=s<=l,r=e(this._viewTables.nw.element()),m=e(this._viewTables.ne.element()),w=e(this._viewTables.sw.element()),t=e(this._viewTables.se.element()),h=v?[r,w]:[m,t],p=(v?r.width():m.width())+x-i,n=q._field("frozener"),j=this.getScrollValue();this._destroySuperPanel();g.prototype.ensureWidth.call(this,s,x,i);this._setTableWidth(h,p,x,s);try{if(l>=0){k.splitDistanceX=r[0].offsetWidth}else{k.splitDistanceX=0}}catch(u){}this._updateSplitAreaBounds(0);this._adjustRowsHeights();try{if(this._staticRowIndex>=0){k.splitDistanceY=Math.max(r[0].offsetHeight,m[0].offsetHeight)}else{k.splitDistanceY=0}}catch(u){}this._updateSplitAreaBounds(1);this.refreshPanel(j);n.refresh()};f.prototype.ensureHeight=function(r){var l,m=this._wijgrid,i=m.options,n=e(this._viewTables.nw.element()),j=e(this._viewTables.ne.element()),s=e(this._viewTables.sw.element()),p=e(this._viewTables.se.element()),k=m._field("frozener"),h=this.getScrollValue(),t;this._destroySuperPanel();if(arguments.length>0){l=this.getJoinedRows(r,2);this._setRowHeight(l,this._getRowHeight(l))}p.css("height","");s.css("height","");t=Math.max(p.height(),s.height());p.height(t);s.height(t);try{if(this._staticRowIndex>=0){i.splitDistanceY=Math.max(n[0].offsetHeight,j[0].offsetHeight)}else{i.splitDistanceY=0}}catch(q){}this._updateSplitAreaBounds(1);this.refreshPanel(h);k.refresh()};f.prototype.getScrollValue=function(){var h=this._getSuperPanel();return h?{x:h.options.hScroller.scrollValue,y:h.options.vScroller.scrollValue}:null};f.prototype.getVisibleAreaBounds=function(){var h=b.grid.bounds(this._wijgrid.outerDiv.find(".wijmo-wijsuperpanel-contentwrapper:first"));if(!h){h=b.grid.bounds(this._wijgrid.outerDiv)}return h};f.prototype.getFixedAreaVisibleBounds=function(){var k=this.getVisibleAreaBounds(),j=b.grid.bounds(this._splitAreas.ne),h=b.grid.bounds(this._splitAreas.nw),i=null,l=null;if(j.height||h.height){i={left:k.left,top:k.top,width:k.width,height:Math.min(j.height||h.height,k.height)}}if(h.width){l={left:k.left,top:k.top,width:Math.min(h.width,k.width),height:k.height}}return[i,l]};f.prototype.refreshPanel=function(j){var o=this,l=this._wijgrid,p=l.options,m=this._getGridWidth(p.scrollMode),i=this._getMappedScrollMode(),k=this._testNeedVBar(l.outerDiv,l.element,e(this._viewTables.ne.element()),p.scrollMode,l._autoHeight),n=j?j.x:null,h=j?j.y:null;this._scroller.width(m);this._splitAreas.ne.width(m-p.splitDistanceX-(k?this._verScrollBarSize:0));if(!this._scroller.data("wijmo-wijsuperpanel")){if(this._allowVirtualScrolling){this.vsUI=new b.grid.uiVirtualScroller(l,this._splitAreas.se,p.splitDistanceY)}this._scroller.wijsuperpanel({disabled:l.options.disabled,scroll:e.proxy(this._onScroll,this),bubbleScrollingEvent:true,customScrolling:this._allowVirtualScrolling,vScroller:{scrollBarVisibility:i.vScrollBarVisibility,scrollValue:j?j.y:null},hScroller:{scrollBarVisibility:i.hScrollBarVisibility,scrollValue:j?j.x:null},hScrollerActivating:function(s,q){var r;if(l._autoHeight){r=l.element.height()+p.splitDistanceY-q.contentLength;if(r>0){o._scroller.height(o._scroller.height()+r);o._scroller.wijsuperpanel("paintPanel");return false}}o._splitAreas.sw.height(q.contentLength-p.splitDistanceY)}});this._scroller.find(".wijmo-wijsuperpanel-contentwrapper:first").scroll(function(q){if((q.target).scrollLeft){(q.target).scrollLeft=0}if((q.target).scrollTop){(q.target).scrollTop=0}q.preventDefault()});if(this._allowVirtualScrolling){this.vsUI.attach(this._scroller)}}else{this._scroller.wijsuperpanel("paintPanel")}this._scroller.find(".wijmo-wijsuperpanel-hbarcontainer, .wijmo-wijsuperpanel-vbarcontainer").css("zIndex",5)};f.prototype.scrollTo=function(w){if(!w.tableCell()){return}var i=this._wijgrid,z=i.options,t=this._getSuperPanel(),j=w.tableCell(),k=j.nodeType?e(j):j,m,B,p,r,C,v,u,A,h,D,x,n=null,s=null,l,y,E,q;if(t&&k.is(":visible")){m=(t).getContentElement();B=m.parent();p=parseInt((m.css("left")+"").replace("px",""),10)*-1;r=parseInt((m.css("top")+"").replace("px",""),10)*-1;C=B.outerWidth()-z.splitDistanceX;v=B.outerHeight()-z.splitDistanceY;u=k.position();A=u.left;h=u.top;D=k.outerWidth();x=k.outerHeight();l=i._getStaticIndex(true);y=i._getStaticIndex(false);E=w.rowIndex();q=w.cellIndex();if(E<=l){if(q<=y){n=0;s=0}else{A+=p;if(A+D>p+C){p=n=A+D-C}if(A<p){n=A}s=0}}else{if(q<=y){h+=r;if(h+x>r+v){r=s=h+x-v}if(h<r){s=h}n=0}else{A-=z.splitDistanceX;if(h+x>r+v){r=s=h+x-v}if(A+D>p+C){p=n=A+D-C}if(h<r){s=h}if(A<p){n=A}}}if(n!==null){(t).hScrollTo(n)}if(s!==null){if(this._allowVirtualScrolling){}else{(t).vScrollTo(s)}}}};f.prototype.updateSplits=function(t){var j=this._wijgrid,y=j.options,m,w=this,r=[],p=[],q=[],x=this._staticColumnIndex,v,u=y.scrollMode,k=j._field("visibleLeaves"),h=e(this._viewTables.se.element()),n=e(this._viewTables.ne.element()),z=e(this._viewTables.sw.element()),D=e(this._viewTables.nw.element()),l=j.outerDiv,C,A,s;this._destroySuperPanel();l.unbind("mousewheel",this._mouseWheelHandler);if((C=w._viewTables.se.element().tBodies)&&(C=C[0])){s=false;for(A=0;A<C.rows.length;A++){if(!e(C.rows[A]).hasClass("wijmo-wijgrid-groupheaderrow")){s=true;break}}if(!s){j.element.css("width","100%")}}e.each([h,n,z,D],function(i,o){o.css({"table-layout":"",width:""})});e.each(k,function(E,o){var F,i=o.width;if(i||(i===0)){F=((typeof(i)==="string")&&(i.length>1)&&(i[i.length-1]==="%"));if(F){i=l.width()*parseFloat(i)/100}else{i=parseFloat(i)}if(o.ensurePxWidth||(o.ensurePxWidth===undefined&&y.ensureColumnsPxWidth)){o._realWidth=i}w._setColumnWidth(E,i)}});e.each(k,function(o,i){w._getColumnWidth(o,q)});e.each([D,n,z,h],function(i,o){o.css({width:"1px"})});e.each(k,function(o,i){w._getColumnWidth(o,p)});m=l.width();r=this._adjustWidthArray(q,p,m,y.ensureColumnsPxWidth,y.autoExpandColumnIndex);e.each(r,function(o,E){var i=k[o];if(i._realWidth!==undefined){delete i._realWidth;return}w._setColumnWidth(o,E.width)});if(x>=0){v=x;this._setTableWidth([D,z],this._sumWidthArray(r,0,v),r[v].width,v)}try{if(x>=0){y.splitDistanceX=D[0].offsetWidth}else{y.splitDistanceX=0}}catch(B){}this._updateSplitAreaBounds(0);if(!y.ensureColumnsPxWidth){n.parent().width(m-y.splitDistanceX)}v=r.length-1;if(v!==-1){this._setTableWidth([n,h],this._sumWidthArray(r,x+1,v),r[v].width,v)}this._adjustRowsHeights();try{if(this._staticRowIndex>=0){y.splitDistanceY=Math.max(D[0].offsetHeight,n[0].offsetHeight)}else{y.splitDistanceY=0}}catch(B){}this._updateSplitAreaBounds(1);if(!y.ensureColumnsPxWidth){if(this._testNeedVBar(j.outerDiv,h,n,u,j._autoHeight)){m-=this._verScrollBarSize;r=this._adjustWidthArray(q,p,m,y.ensureColumnsPxWidth,y.autoExpandColumnIndex);e.each(r,function(i,o){if(!o.real){w._setColumnWidth(i,o.width)}});if(x>=0){v=x;this._setTableWidth([D,z],this._sumWidthArray(r,0,v),r[v].width,v)}try{if(x>=0){y.splitDistanceX=D[0].offsetWidth}else{y.splitDistanceX=0}}catch(B){}this._updateSplitAreaBounds(0);n.parent().width(m-y.splitDistanceX);v=r.length-1;if(v!==-1){this._setTableWidth([n,h],this._sumWidthArray(r,x+1,v),r[v].width,v)}this._adjustRowsHeights();try{if(this._staticRowIndex>=0){y.splitDistanceY=Math.max(D[0].offsetHeight,n[0].offsetHeight)}else{y.splitDistanceY=0}}catch(B){}this._updateSplitAreaBounds(1)}}this.refreshPanel(t);l.bind("mousewheel",e.proxy(this._mouseWheelHandler,this))};f.prototype._clearBody=function(){g.prototype._clearBody.call(this)};f.prototype.bodyRows=function(){var h=g.prototype.bodyRows.call(this);return h};f.prototype.focusableElement=function(){return this._wijgrid.outerDiv};f.prototype.forEachColumnCell=function(j,m,l){var k=this.getJoinedTables(true,j),i,h;if(k[0]!==null){i=k[2];h=k[0].forEachColumnCell(i,m,l);if(h!==true){return h}if(k[1]!==null){h=k[1].forEachColumnCell(i,m,l);if(h!==true){return h}}}return true};f.prototype.forEachRowCell=function(o,n,m){var l=this.getJoinedTables(false,o),k=l[0],j=l[1],h,i;if(k!==null){h=l[2];if(h<k.element().rows.length){i=k.forEachRowCell(h,n,m);if(i!==true){return i}}if((j!==null)&&(h<j.element().rows.length)){i=j.forEachRowCell(h,n,m);if(i!==true){return i}}}HTMLTableCellElement;return true};f.prototype.getAbsoluteCellInfo=function(h){return new b.grid.cellInfo(this.getColumnIndex(h),this.getAbsoluteRowIndex(h.parentNode),this._wijgrid,true)};f.prototype.getAbsoluteRowIndex=function(i){var h=i.rowIndex,j=i.parentNode;while(j.tagName.toLowerCase()!=="table"){j=j.parentNode}return(j===this._viewTables.nw.element()||j===this._viewTables.ne.element())?h:h+this._staticRowIndex+1};f.prototype.getCell=function(o,m){var h=this.getJoinedTables(false,m),l,k,n,j,i;if(h[0]!==null){l=this.getJoinedTables(true,o);if(l[0]!==null){k=h[2];n=l[2];j=null;if(h[1]!==null){j=(o===n)?h[0]:h[1]}else{j=h[0]}i=j.getCellIdx(n,k);if(i>=0){return j.element().rows[k].cells[i]}}}return null};f.prototype.getColumnIndex=function(l){var h=null,j=null,i=false,k;for(h=l.parentNode;h.tagName.toLowerCase()!=="table";h=h.parentNode){}if(h!==null){if(h===this._viewTables.nw.element()){j=this._viewTables.nw}else{if(h===this._viewTables.ne.element()){j=this._viewTables.ne;i=true}else{if(h===this._viewTables.sw.element()){j=this._viewTables.sw}else{if(h===this._viewTables.se.element()){j=this._viewTables.se;i=true}}}}if(j!==null){k=j.getColumnIdx(l);if(i){k+=this._staticColumnIndex+1}return k}}return -1};f.prototype.getHeaderCell=function(j){var h=this._wijgrid._field("visibleLeaves")[j],i;if(h&&(i=this._wijgrid._headerRows())){return b.grid.rowAccessor.getCell(i.item(h.thY),h.thX)}return null};f.prototype.getJoinedCols=function(j){var h=[],k=this.getJoinedTables(true,j),i=k[2];k.splice(k.length-1,1);e.each(k,function(l,m){h.push(m?e(m.element()).find("col")[i]:null)});return h};f.prototype.getJoinedRows=function(o,j){var u=null,t=null,s=null,q=null,p=this._staticRowIndex,h=this._staticColumnIndex,i=this._wijgrid._field("visibleLeaves").length-1,r=this._rowsCountRaw()-1,l=(p===r),n=(p<0),k=!l&&!n,m=0;if(l||k){if(h>=0&&h<i){s=this._viewTables.nw;q=this._viewTables.ne}else{s=(h<0)?this._viewTables.ne:this._viewTables.nw}m=s.getSectionLength(j);if(o<m){u=s.getSectionRow(o,j);if(q!==null){t=q.getSectionRow(o,j)}}}if(n||(k&&(u===null))){if(!n){o-=m}if(h>=0&&h<i){s=this._viewTables.sw;q=this._viewTables.se}else{s=(h<0)?this._viewTables.se:this._viewTables.sw}u=s.getSectionRow(o,j);if(q!==null){t=q.getSectionRow(o,j)}}return(u===null&&t===null)?null:[u,t]};f.prototype.getJoinedTables=function(i,k){var n=null,m=null,h=k,l=this._wijgrid,o=this._staticRowIndex,j=this._staticColumnIndex;if(i){if(k<=j){n=this._viewTables.nw;m=this._viewTables.sw}else{n=this._viewTables.ne;m=this._viewTables.se;h=h-(j+1)}if(o<0){n=null}if(o===this._rowsCountRaw()-1){m=null}}else{if(k<=o){n=this._viewTables.nw;m=this._viewTables.ne}else{n=this._viewTables.sw;m=this._viewTables.se;h=h-(o+1)}if(j<0){n=null}if(j===l._field("leaves").length-1){m=null}}if(n===null){n=m;m=null}return[n,m,h]};f.prototype.subTables=function(){return[this._viewTables.nw,this._viewTables.ne,this._viewTables.sw,this._viewTables.se]};f.prototype._getGridWidth=function(k){var j=this._wijgrid,i=j.element.outerWidth(true)+j.options.splitDistanceX,h=j.outerDiv.innerWidth();if(this._testNeedVBar(j.outerDiv,j.element,e(this._viewTables.ne.element()),k,j._autoHeight)){i+=this._verScrollBarSize}if(i>h){i=h}return i};f.prototype._getSuperPanel=function(){return this._scroller?this._scroller.data("wijmo-wijsuperpanel"):null};f.prototype._ensureRenderBounds=function(){if(this._wijgrid._allowVirtualScrolling()){this._wijgrid._ensureRenderBounds(this._bounds);if(this._wijgrid._serverSideVirtualScrolling()){}this._bounds.end=this._bounds.start+this._wijgrid.options.pageSize-1;this._wijgrid._ensureRenderBounds(this._bounds)}else{g.prototype._ensureRenderBounds.call(this)}};f.prototype._renderContent=function(){g.prototype._renderContent.call(this)};f.prototype._preRender=function(){var i=document.createDocumentFragment(),h=b.grid.htmlTableAccessor;this._wijgrid.outerDiv.wrapInner('<div class="wijmo-wijgrid-fixedview"><div class="wijmo-wijgrid-scroller"><div class="wijmo-wijgrid-split-area-se wijmo-wijgrid-content-area"></div></div></div>');this._scroller=this._wijgrid.outerDiv.find(".wijmo-wijgrid-scroller");this._scroller.css("padding",0);this._scroller.after(this._splitAreas.nw=e('<div class="wijmo-wijgrid-split-area wijmo-wijgrid-split-area-nw" style="overflow:hidden;position:absolute;z-index:4;top:0px;left:0px;"></div>'));this._scroller.after(this._splitAreas.ne=e('<div class="wijmo-wijgrid-split-area wijmo-wijgrid-split-area-ne" style="overflow:hidden;position:absolute;z-index:4;top:0px;left:0px;"></div>'));this._scroller.after(this._splitAreas.sw=e('<div class="wijmo-wijgrid-split-area wijmo-wijgrid-split-area-sw" style="overflow:hidden;position:absolute;z-index:4;top:0px;left:0px;"></div>'));this._splitAreas.se=this._scroller.find(".wijmo-wijgrid-split-area-se:first");this._viewTables={nw:new h(i.appendChild(document.createElement("table")),true,true,true),ne:new h(i.appendChild(document.createElement("table")),true,true,true),sw:new h(i.appendChild(document.createElement("table")),true,true,true),se:new h(i.appendChild(this._wijgrid.element[0]),true,true,true)}};f.prototype._postRender=function(){var j,h,m,l,i=b.grid.htmlTableAccessor,k=this;this._viewTables={nw:new i(j=this._viewTables.nw.element()),ne:new i(h=this._viewTables.ne.element()),sw:new i(m=this._viewTables.sw.element()),se:new i(l=this._viewTables.se.element())};this._splitAreas.nw.empty().append(j);this._splitAreas.ne.empty().append(h);this._splitAreas.sw.empty().append(m);this._splitAreas.se.empty().append(l);e.each(this._viewTables,function(n,p){var o=e(p.element());k._wijgrid._setAttr(o,{role:"grid",border:"0",cellpadding:"0",cellspacing:"0"});o.addClass("wijmo-wijgrid-table").css("border-collapse","separate").find("> tbody").addClass(k._wijgrid.options.wijCSS.content+" wijmo-wijgrid-data")});g.prototype._postRender.call(this)};f.prototype._rowsCountRaw=function(){var i=this._viewTables.nw.element(),h=this._viewTables.ne.element(),k=this._viewTables.sw.element(),j=this._viewTables.se.element(),l;l=Math.max(i.rows.length,h.rows.length)+Math.max(k.rows.length,j.rows.length);return l};f.prototype._createCol=function(i,h){return[document.createElement("col"),document.createElement("col")]};f.prototype._appendCol=function(j,i,h){if(h<=this._staticColumnIndex){this._viewTables.nw.appendCol(j[0]);this._viewTables.sw.appendCol(j[1])}else{this._viewTables.ne.appendCol(j[0]);this._viewTables.se.appendCol(j[1])}};f.prototype._insertRow=function(m,i,k){var h=b.grid.rowType,l,j,n=this._viewTables;switch(m){case h.header:case h.filter:l=n.nw.ensureTHead();j=n.ne.ensureTHead();break;case h.footer:l=n.sw.ensureTFoot();j=n.se.ensureTFoot();break;default:if(i<=this._staticDataRowIndex){l=n.nw.ensureTBody();j=n.ne.ensureTBody()}else{i-=this._staticDataRowIndex+1;l=n.sw.ensureTBody();j=n.se.ensureTBody()}}if(k){return[l.appendChild(k),j.appendChild(k.cloneNode(false))]}else{return[l.insertRow(i>l.rows.length?-1:i),j.insertRow(i>j.rows.length?-1:i)]}};f.prototype._rowRendered=function(l,h,i){var j=l.$rows[0],k=l.$rows[1];if(!j.cells.length&&this._isBodyRow(l)){j.parentNode.removeChild(j);j=null}if(!k.cells.length&&this._isBodyRow(l)){k.parentNode.removeChild(k);k=null}if(j||k){if(!j||!k){l.$rows=j?e(j):e(k)}g.prototype._rowRendered.call(this,l,h,i)}};f.prototype._appendCell=function(k,h,j){var i=(k.type!==b.grid.rowType.header)?this._staticColumnIndex:this._staticAllColumnIndex;if(h<=i){k.$rows[0].appendChild(j[0])}else{k.$rows[1].appendChild(j[0])}};f.prototype._getRowHeight=function(n,h){if(n[0]&&n[1]){var q=n[0],k=n[1],m=e(q),i=e(k),p,j,o,l=function(r){var t,s=r[0],u;for(t=0;t<s.cells.length;t++){u=s.cells[t];if(!u.rowSpan||u.rowSpan===1){return e(u).outerHeight()}}return r.height()};if(o=e.data(q,"customHeight")){p=j=parseInt(o)}else{m.css("height","");i.css("height","");if(h){p=l(m);j=l(i)}else{p=m.height();j=i.height()}}return Math.max(p,j)}return null};f.prototype._setRowHeight=function(h,k){if(h[0]&&h[1]){var j=[e(h[0]),e(h[1])],i;if(k===null){return}k+=1;e.each(j,function(l,m){m.height(k);i=k-m.height();if(i){m.height(k+i)}})}};f.prototype._adjustRowHeight=function(){var k=this._wijgrid,B=this._staticColumnIndex,A=k._field("visibleLeaves").length-1,p,o,q,C,n,t,x,u,m,l,w,s,z,y,v,h,r=[];if(B>-1&&B<A){p=this._staticRowIndex;o=this._rowsCountRaw()-1;q=this._viewTables;if(p>-1&&p<=o){C=q.ne.element();n=C.parentNode;t=q.nw.element();x=t.parentNode;v=t.rows;h=C.rows;s=v.length;for(z=0;z<s;z++){r.push(this._getRowHeight([v[z],h[z]],true))}}if(p>=-1&&p<o){u=q.se.element();m=u.parentNode;l=q.sw.element();w=l.parentNode;v=l.rows;h=u.rows;s=v.length;for(z=0;z<s;z++){r.push(this._getRowHeight([v[z],h[z]]))}}if(p>-1&&p<=o){x.removeChild(t);n.removeChild(C)}if(p>=-1&&p<o){w.removeChild(l);m.removeChild(u)}if(p>-1&&p<=o){v=t.rows;h=C.rows;s=v.length;for(z=0,y=0;z<s;z++){this._setRowHeight([v[z],h[z]],r[y++])}}if(p>=-1&&p<o){v=l.rows;h=u.rows;s=v.length;for(z=0;z<s;z++){this._setRowHeight([v[z],h[z]],r[y++])}}if(p>-1&&p<=o){x.appendChild(t);n.appendChild(C)}if(p>=-1&&p<o){w.appendChild(l);m.appendChild(u)}}};f.prototype._adjustRowsHeights=function(){var i=e(this._viewTables.sw.element()),j=e(this._viewTables.se.element()),h;j.css("height","");i.css("height","");this._adjustRowHeight();h=Math.max(j.height(),i.height());i.height(h);j.height(h)};f.prototype._destroySuperPanel=function(){if(this._scroller.data("wijmo-wijsuperpanel")){if(this.vsUI){this.vsUI.dispose()}this._scroller.wijsuperpanel("destroy")}};f.prototype._onScroll=function(h,j){var i=this._getSuperPanel();if(this._allowVirtualScrolling){if(j.dir==="h"){this._setFixedAreaPosition((i).getContentElement(),j.dir,j.position,j.animationOptions,false);this._setFixedAreaPosition(this._splitAreas.ne,j.dir,j.position,j.animationOptions,true)}}else{this._setFixedAreaPosition(j.dir==="h"?this._splitAreas.ne:this._splitAreas.sw,j.dir,j.position,j.animationOptions,true)}this._wijgrid._trackScrollingPosition(i.options.hScroller.scrollValue,i.options.vScroller.scrollValue)};f.prototype._onMouseWheel=function(l,m){var k,i=(m>0)?"top":"bottom",h=false,j;if(this._wijgrid._canInteract()){k=this.getFixedAreaVisibleBounds();e.each(k,function(n,p){if(p&&b.grid.isOver(l.pageY,l.pageX,p.top,p.left,p.height,p.width)){h=true;return false}});if(h&&this._scroller.data("wijmo-wijsuperpanel")){j=this._scroller.wijsuperpanel("option","vScroller").scrollValue;this._scroller.wijsuperpanel("doScrolling",i);if(j!==this._scroller.wijsuperpanel("option","vScroller").scrollValue){l.stopPropagation();l.preventDefault()}}}};f.prototype._setFixedAreaPosition=function(j,m,h,k,l){var n={},i;if(m==="h"){i=l?"scrollLeft":"left"}else{i=l?"scrollTop":"top"}if(!l){h=-h}if(k){n[i]=h;j.animate(n,k)}else{if(l){j[0][i]=h}else{j.css(i,h)}}};f.prototype._testNeedVBar=function(q,i,r,j,s){var o,k=this._wijgrid,l=r.width()+k.options.splitDistanceX,h=i.height()+k.options.splitDistanceY,u=q.width(),p=q.height(),n,t=0,m=0;if(this._allowVirtualScrolling&&k._totalRowsCount()>1){return true}if(k.$superPanelHeader!==null){t=k.$superPanelHeader.outerHeight(true)}if(k.$bottomPagerDiv!==null){m=k.$bottomPagerDiv.outerHeight(true)}n=p-t-m;if(j==="both"||j==="vertical"){o=true}else{o=(j==="auto")&&((h>n)||(!s&&l>u&&h>n-this._verScrollBarSize))}return o};f.prototype._updateSplitAreaBounds=function(n){var h=this._wijgrid,m=h.options,l,j,i=0,k=0;if(n===0||n===2){this._splitAreas.nw.width(m.splitDistanceX);this._splitAreas.sw.width(m.splitDistanceX);this._splitAreas.se.css("marginLeft",m.splitDistanceX);this._splitAreas.ne.css("marginLeft",m.splitDistanceX)}if(n===1||n===2){this._scroller.css("height","");this._splitAreas.se.css("marginTop",0);l=h.outerDiv.height();if(!h._autoHeight){this._scroller.height(l)}else{this._scroller.height(l+m.splitDistanceY)}this._splitAreas.nw.height(m.splitDistanceY);this._splitAreas.ne.height(m.splitDistanceY);if(h.$superPanelHeader!==null){i=h.$superPanelHeader.outerHeight(true)}if(h.$bottomPagerDiv!==null){k=h.$bottomPagerDiv.outerHeight(true)}j=l-i-k;if(h.$superPanelHeader!==null){this._splitAreas.nw.css("top",i+"px");this._splitAreas.ne.css("top",i+"px")}if(!h._autoHeight){this._splitAreas.sw.height(j-m.splitDistanceY)}else{this._splitAreas.sw.height(j)}this._splitAreas.sw.css("top",m.splitDistanceY+i);this._splitAreas.se.css("marginTop",m.splitDistanceY)}};return f})(d.baseView);d.fixedView=c})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var f=jQuery;var d=(function(){function g(h){this._updates=0;this._selectedColumns=null;this._selectedRows=null;this._extend_rules={singlecell:[0,0,0],singlecolumn:[1,1,1],singlerow:[2,2,2],singlerange:[0,1,2],multicolumn:[1,1,1],multirow:[2,2,2],multirange:[0,1,2]};if(!h){throw"invalid arguments"}this._wijgrid=h;this._addedCells=new e(h);this._removedCells=new e(h);this._selectedCells=new e(h);this._addedDuringCurTransactionCells=new e(h)}g.prototype.selectedCells=function(){return this._selectedCells};g.prototype.addColumns=function(i,h){if(!h&&h!==0){h=i}this.addRange(i,0,h,16777215)};g.prototype.addRange=function(i,l,j,k){if(!i&&(arguments.length===1)){throw"invalid argument"}var h=(arguments.length===4)?new b.grid.cellInfoRange(new b.grid.cellInfo(i,l),new b.grid.cellInfo(j,k)):i._clone();h._normalize();if(!h._isValid()){throw"invalid argument"}this.beginUpdate();this._startNewTransaction(this._wijgrid._field("currentCell"));this._selectRange(h,false,true,0,null);this.endUpdate()};g.prototype.addRows=function(i,h){if(!h&&h!==0){h=i}this.addRange(0,i,16777215,h)};g.prototype.removeRange=function(i,l,j,k){if(!i&&(arguments.length===1)){throw"invalid argument"}var h=(arguments.length===4)?new b.grid.cellInfoRange(new b.grid.cellInfo(i,l),new b.grid.cellInfo(j,k)):i._clone();h._normalize();if(!h._isValid()){throw"invalid argument"}this.beginUpdate();this._startNewTransaction(this._wijgrid._field("currentCell"));this._clearRange(h,0);this.endUpdate()};g.prototype.removeColumns=function(i,h){if(!h&&h!==0){h=i}this.removeRange(i,0,h,16777215)};g.prototype.removeRows=function(i,h){if(!h&&h!==0){h=i}this.removeRange(0,i,16777215,h)};g.prototype.clear=function(){this.beginUpdate();this._removedCells._clear();this._removedCells._addFrom(this._selectedCells);this.endUpdate()};g.prototype.selectAll=function(){this.beginUpdate();this._selectRange(this._wijgrid._getDataCellsRange(),false,false,0,null);this.endUpdate()};g.prototype.beginUpdate=function(){this._updates++};g.prototype.endUpdate=function(){if(this._updates>0){this._updates--;if(this._updates===0){this.doSelection();if(this._addedCells.length()||this._removedCells.length()){if(this._selectedColumns!==null){this._selectedColumns.UnderlyingDataChanged()}if(this._selectedRows!==null){this._selectedRows.UnderlyingDataChanged()}this._wijgrid._trigger("selectionChanged",null,{addedCells:this._addedCells,removedCells:this._removedCells})}this._addedCells=new b.grid.cellInfoOrderedCollection(this._wijgrid);this._removedCells._clear()}}};g.prototype._multipleRangesAllowed=function(){var h=this._wijgrid.options.selectionMode;return(h&&((h=h.toLowerCase())==="multicolumn"||h==="multirow"||h==="multirange"))};g.prototype._anchorCell=function(){return this.__anchorCell};g.prototype._startNewTransaction=function(h){if(h){this.__anchorCell=h._clone();this._addedDuringCurTransactionCells=new b.grid.cellInfoOrderedCollection(this._wijgrid)}};g.prototype._clearRange=function(o,m){var t=this._wijgrid.options.selectionMode.toLowerCase(),h,j,l,q,u,s,n,p,k,r=this._wijgrid._getDataCellsRange();if(o._isValid()&&(t!=="none")&&(this._selectedCells.length()>0)){h=o._clone();h._normalize();h._clip(r);if(!o._isValid()){return}h._extend(this._extend_rules[t][m],r);this.beginUpdate();for(n=0,p=this._selectedCells.length();n<p;n++){k=this._selectedCells.item(n);if(h._containsCellInfo(k)){this._removedCells._add(k)}}this.endUpdate()}};g.prototype._selectRange=function(i,o,m,l,k){var n=this._wijgrid.options.selectionMode.toLowerCase(),h,j=this._wijgrid._getDataCellsRange();if((n!=="none")&&i._isValid()){h=i._clone();h._normalize();h._clip(j);if(!h._isValid()){return}this.beginUpdate();if(!this._multipleRangesAllowed()){this.clear()}else{if(o||m){if(m){this._removedCells._clear();this._removedCells._addFrom(this._addedDuringCurTransactionCells)}}else{this.clear()}}switch(n){case"singlecell":case"singlecolumn":case"singlerow":h=(k===null)?new b.grid.cellInfoRange(h.topLeft(),h.topLeft()):new b.grid.cellInfoRange(k,k);break}h._extend(this._extend_rules[n][l],j);this.doRange(h,true);this.endUpdate()}};g.prototype.doSelection=function(){var o=this._wijgrid._getDataToAbsOffset(),m=o.x,q=o.y,u=this._wijgrid._view(),p,s,n,v,t,r,l=b.grid.renderState,j,h,k=-1;for(p=0,s=this._removedCells.length();p<s;p++){n=this._removedCells.item(p);if(this._addedCells.indexOf(n)<0){v=u.getCell(n.cellIndex()+m,n.rowIndex()+q);if(v){if(k!==n.rowIndex()){j=n.row();k=n.rowIndex()}t=f(v);h=u._changeCellRenderState(t,l.selected,false);this._wijgrid.cellStyleFormatter.format(t,n.cellIndex(),n.column(),j,h)}this._selectedCells._remove(n);this._addedDuringCurTransactionCells._remove(n)}else{this._removedCells._removeAt(p);p--;s--}}k=-1;for(p=0,s=this._addedCells.length();p<s;p++){n=this._addedCells.item(p);r=this._selectedCells.indexOf(n);if(r<0){v=u.getCell(n.cellIndex()+m,n.rowIndex()+q);if(v){if(k!==n.rowIndex()){j=n.row();k=n.rowIndex()}t=f(v);h=u._changeCellRenderState(t,l.selected,true);this._wijgrid.cellStyleFormatter.format(t,n.cellIndex(),n.column(),j,h)}this._selectedCells._insertUnsafe(n,~r);this._addedDuringCurTransactionCells._add(n)}else{this._addedCells._removeAt(p);p--;s--}}};g.prototype.doRange=function(m,r){var j=m.topLeft().cellIndex(),p=m.topLeft().rowIndex(),i=m.bottomRight().cellIndex(),o=m.bottomRight().rowIndex(),l,t,k,q,n=this._wijgrid._view(),h,s;if(r){l=this._addedCells.length();s=this._wijgrid._rows();for(t=p;t<=o;t++){h=n._getRowInfo(s.item(t));if(h.type&b.grid.rowType.data){for(k=j;k<=i;k++){q=new b.grid.cellInfo(k,t);if(l===0){this._addedCells._appendUnsafe(q)}else{this._addedCells._add(q)}}}}}else{l=this._removedCells.length();for(t=p;t<=o;t++){for(k=j;k<=i;k++){q=new b.grid.cellInfo(k,t);if(l===0){this._removedCells._appendUnsafe(q)}else{this._removedCells._add(q)}}}}};return g})();c.selection=d;var e=(function(){function g(h){this._clear=function(){this._list.length=0};if(!h){throw"invalid arguments"}this._wijgrid=h;this._list=[]}g.prototype.item=function(h){return this._list[h]};g.prototype.length=function(){return this._list.length};g.prototype.indexOf=function(i,n){if(arguments.length===1){n=i.rowIndex();i=i.cellIndex()}var j=0,h=this._list.length-1,l,m,k;while(j<=h){l=j+((h-j)>>1);m=this._list[l];k=m.rowIndex()-n;if(k===0){k=m.cellIndex()-i}if(k<0){j=l+1}else{if(k>0){h=l-1}else{return l}}}return ~j};g.prototype.toString=function(){var k="",j,h;for(j=0,h=this._list.length;j<h;j++){k+=this._list[j].toString()+"\n"}return k};g.prototype._add=function(i){var h=this.indexOf(i);if(h<0){this._list.splice(~h,0,i);i._setGridView(this._wijgrid);return true}return false};g.prototype._addFrom=function(j){if(j){var l=j.length(),h=this._list.length,k;if(h===0){this._list.length=l;for(k=0;k<l;k++){this._list[k]=j.item(k);this._list[k]._setGridView(this._wijgrid)}}else{for(k=0;k<l;k++){this._add(j.item(k))}}}};g.prototype._appendUnsafe=function(h){this._list[this._list.length]=h;h._setGridView(this._wijgrid)};g.prototype._insertUnsafe=function(i,h){this._list.splice(h,0,i)};g.prototype._remove=function(i){var h=this.indexOf(i);if(h>=0){this._list.splice(h,1);return true}return false};g.prototype._removeAt=function(h){this._list.splice(h,1)};g.prototype._getColumnsIndicies=function(){var m=[],h=this._list.length,j,l,k;if(h){j=[];for(l=0;l<h;l++){j[this._list[l].cellIndex()]=1}h=j.length;k=0;for(l=0;l<h;l++){if(j[l]){m[k++]=l}}}return m};g.prototype._getSelectedRowsIndicies=function(){var m=[],h=this._list.length,l,k,j;if(h){l=[];for(k=0;k<h;k++){l[this._list[k].rowIndex()]=1}h=l.length;j=0;for(k=0;k<h;k++){if(l[k]){m[j++]=k}}}return m};g.prototype._rectangulate=function(){var h=this._list.length,m=4294967295,o=4294967295,k=0,n=0,l,j;if(h){for(l=0;l<h;l++){j=this._list[l];m=Math.min(m,j.cellIndex());o=Math.min(o,j.rowIndex());k=Math.max(k,j.cellIndex());n=Math.max(n,j.rowIndex())}return new b.grid.cellInfoRange(new b.grid.cellInfo(m,o),new b.grid.cellInfo(k,n))}return null};return g})();c.cellInfoOrderedCollection=e})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var e=jQuery;var d=(function(){function f(g){this._gap_to_start=10;this._inProgress=false;this._additionalEventsAttached=false;this._wijgrid=g;this._evntFormat="{0}."+this._wijgrid.widgetName+".selectionui";this._addedCells=new b.grid.cellInfoOrderedCollection(this._wijgrid);this._view=this._wijgrid._view();this._rootElement=this._view.focusableElement();this._visLeavesLen=this._wijgrid._field("visibleLeaves").length;this._rootElement.bind(this._eventKey("mousedown"),e.proxy(this._onGridMouseDown,this))}f.prototype.dispose=function(){this._rootElement.unbind(this._eventKey("mousedown"),this._onGridMouseDown);this._detachAdditionalEvents()};f.prototype._onGridMouseDown=function(j){if(!this._wijgrid._canInteract()||this._wijgrid.options.selectionMode.toLowerCase()==="none"){return}var k=this._view.getVisibleAreaBounds(),i={x:j.pageX,y:j.pageY},h=((j.target&&(j.target).tagName!==undefined)?(j.target).tagName.toLowerCase():undefined),g=e(j.target);if((!h||g.is("td.wijgridtd, th.wijgridtd, div.wijmo-wijgrid-innercell"))&&(i.x>k.left&&i.x<k.left+k.width)&&(i.y>k.top&&i.y<k.top+k.height)){this._attachAdditionalEvents();this._startPos=i;this._startCellInfo=this._coordToDataCellInfo(this._startPos)}};f.prototype._onDocumentMouseMove=function(h){if(!this._startCellInfo||!this._startCellInfo._isValid()){return}var u={x:h.pageX,y:h.pageY},A,z,w,s,m,q,v,p,g,x,y,o,n,j,k,t=this._wijgrid._view(),r=this._wijgrid._rows(),l=b.grid.renderState;if(!this._inProgress){this._inProgress=(Math.abs(this._startPos.x-u.x)>this._gap_to_start)||(Math.abs(this._startPos.y-u.y)>this._gap_to_start)}if(this._inProgress){A=this._coordToDataCellInfo(u);if(!A._isValid()){return}this._endCellInfo=A;w=new b.grid.cellInfoRange(this._startCellInfo,this._endCellInfo);w._normalize();w._clip(this._wijgrid._getDataCellsRange());if(w._isValid()&&!w.isEqual(this._prevMouseMoveRange)){s=this._wijgrid._getDataToAbsOffset();this._prevMouseMoveRange=w;m=new b.grid.cellInfoOrderedCollection(this._wijgrid);q=w.bottomRight().rowIndex();v=w.bottomRight().cellIndex();for(p=w.topLeft().rowIndex();p<=q;p++){n=t._getRowInfo(r.item(p));if(n.type&b.grid.rowType.data){for(g=w.topLeft().cellIndex();g<=v;g++){m._appendUnsafe(new b.grid.cellInfo(g,p))}}}j=-1;for(x=0,y=this._addedCells.length();x<y;x++){z=this._addedCells.item(x);if(m.indexOf(z)<0){if(this._wijgrid.selection().selectedCells().indexOf(z)<0){g=this._view.getCell(z.cellIndex()+s.x,z.rowIndex()+s.y);if(g){if(j!==z.rowIndex()){n=z.row();j=z.rowIndex()}o=e(g);k=t._changeCellRenderState(o,l.selected,false);this._wijgrid.cellStyleFormatter.format(o,z.cellIndex(),z.column(),n,k)}}this._addedCells._removeAt(x);x--;y--}}j=-1;for(x=0,y=m.length();x<y;x++){z=m.item(x);if(this._addedCells.indexOf(z)<0&&this._wijgrid.selection().selectedCells().indexOf(z)<0){if(this._addedCells._add(z)){g=this._view.getCell(z.cellIndex()+s.x,z.rowIndex()+s.y);if(g){if(j!==z.rowIndex()){n=z.row();j=z.rowIndex()}o=e(g);k=t._changeCellRenderState(o,l.selected,true);this._wijgrid.cellStyleFormatter.format(o,z.cellIndex(),z.column(),n,k)}}}}}}};f.prototype._onDocumentMouseUp=function(p){this._detachAdditionalEvents();if(this._inProgress){this._inProgress=false;if(this._prevMouseMoveRange&&this._prevMouseMoveRange._isValid()){this._wijgrid._changeCurrentCell(p,this._endCellInfo);if(!p.shiftKey||(!this._wijgrid.selection()._multipleRangesAllowed()&&this._wijgrid.options.selectionMode.toLowerCase()!=="singleRange")){this._wijgrid.selection()._startNewTransaction(this._startCellInfo)}this._wijgrid.selection().beginUpdate();this._wijgrid.selection()._selectRange(this._prevMouseMoveRange,p.shiftKey,p.ctrlKey,0,this._endCellInfo);this._wijgrid.selection().endUpdate();var r=this._wijgrid._view(),m=this._wijgrid._getDataToAbsOffset(),n,o,l,s,q,j=-1,h,g,k=b.grid.renderState;for(n=0,o=this._addedCells.length();n<o;n++){l=this._addedCells.item(n);if(this._wijgrid.selection().selectedCells().indexOf(l)<0){s=r.getCell(l.cellIndex()+m.x,l.rowIndex()+m.y);if(s!==null){if(j!==l.rowIndex()){h=l.row();j=l.rowIndex()}q=e(s);g=r._changeCellRenderState(q,k.selected,false);this._wijgrid.cellStyleFormatter.format(q,l.cellIndex(),l.column(),h,g)}}}this._addedCells._clear();this._startCellInfo=this._endCellInfo=this._prevMouseMoveRange=null;return false}}};f.prototype._attachAdditionalEvents=function(){if(!this._additionalEventsAttached){try{this._view.toggleDOMSelection(false);e(document).bind(this._eventKey("mousemove"),e.proxy(this._onDocumentMouseMove,this)).bind(this._eventKey("mouseup"),e.proxy(this._onDocumentMouseUp,this))}finally{this._additionalEventsAttached=true}}};f.prototype._detachAdditionalEvents=function(){if(this._additionalEventsAttached){try{this._view.toggleDOMSelection(true);e(document).unbind(this._eventKey("mousemove"),this._onDocumentMouseMove).unbind(this._eventKey("mouseup"),this._onDocumentMouseUp)}finally{this._additionalEventsAttached=false}}};f.prototype._eventKey=function(g){return b.grid.stringFormat(this._evntFormat,g)};f.prototype._coordToDataCellInfo=function(g){var k=0,o=this._visLeavesLen-1,n=0,h=-1,i,p=new b.grid.rowAccessor(this._view,2,0,0),j,m,l,q;while(k<=o){n=((o-k)>>1)+k;i=b.grid.bounds(this._view.getHeaderCell(n));if(!i){m=p.item(0);i=b.grid.bounds(b.grid.rowAccessor.getCell(m,n))}if(!i){break}if(g.x<i.left){o=n-1}else{if(g.x>i.left+i.width){k=n+1}else{h=n;break}}}if(h===-1){return b.grid.cellInfo.outsideValue}p=new b.grid.rowAccessor(this._view,0,0,0);j=-1;k=0;o=p.length()-1;n=0;while(k<=o){n=((o-k)>>1)+k;m=p.item(n);i=b.grid.bounds(b.grid.rowAccessor.getCell(m,0));if(g.y<i.top){o=n-1}else{if(g.y>i.top+i.height){k=n+1}else{j=n;break}}}if(j===-1){return b.grid.cellInfo.outsideValue}l=this._wijgrid._getDataToAbsOffset();q=new b.grid.cellInfo(h-l.x,j-l.y);q._clip(this._wijgrid._getDataCellsRange());return q};return f})();c.uiSelection=d})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(){function h(j,m,l,k){this._view=j;this._scope=m;this._offsetBottom=k;this._offsetTop=l}h.prototype.item=function(k){var j=this.length();return(k<j)?this._view.getJoinedRows(k+this._offsetTop,this._scope):null};h.prototype.length=function(){var l=this._view.getJoinedTables(true,0),j=0,k;if(k=l[0]){j=k.getSectionLength(this._scope)}if(k=l[1]){j+=k.getSectionLength(this._scope)}j-=this._offsetTop+this._offsetBottom;if(j<0){j=0}return j};h.iterateCells=function f(q,s,k){if(q&&s){var n=0,m,o,p,l,r,t;for(m=0,o=q.length;m<o;m++){p=q[m];if(p){for(l=0,r=p.cells.length;l<r;l++){t=s(p.cells[l],n++,k);if(t!==true){return}}}}}};h.getCell=function g(j,m){var k,l;if(j&&(k=j[0])){l=k.cells.length;if(m<l){return k.cells[m]}m-=l;if(k=j[1]){l=k.cells.length;if(m<l){return k.cells[m]}}}return null};h.cellsCount=function i(j){var l=0,k;if(j&&(k=j[0])){l=k.cells.length;if(k=j[1]){l+=k.cells.length}}return l};return h})();d.rowAccessor=c})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var e=jQuery;var d=(function(){function f(){this._timeout=25}f.prototype.currentCellEditStart=function(g,j){var o=false,m=g.currentCell(),n=g._view(),h,k,l,i;if(m._isValid()&&!m._isEdit()&&(m.column().dataIndex>=0)){h=m.row();if(h){i=h.type;if(i&b.grid.rowType.data){k={cell:m,event:j,handled:false};if(o=g._trigger("beforeCellEdit",null,k)){if(!k.handled){o=this._defaultBeforeCellEdit(g,k)}}if(o){m._isEdit(true);if(g.options.showRowHeader){l=e((h.$rows[0]).cells[0]).children("div.wijmo-wijgrid-innercell");if(l.length){l.empty();l.append(e("<div>&nbsp;</div>").addClass(g.options.wijCSS.icon+" ui-icon-pencil"))}}}}}}return o};f.prototype.currentCellEditEnd=function(g,n){var q=g.currentCell(),w=false,r=g._view(),h,m,k,s,p,u,l=b.grid.getKeyCodeEnum();if(!q._isValid()||!q._isEdit()){return}h=q.row();if(h){m=h.type;if(!(m&b.grid.rowType.data)){return w}k=(n&&n.which===l.ESCAPE);if(!n||(!k)){var j={cell:q,value:undefined};if(w=g._trigger("beforeCellUpdate",null,j)){if(j.value===undefined){j.value=this._getCellValue(g,q)}s=j.value;try{j.value=g._parse(q.column(),j.value);s=j.value}catch(o){j.value=s}p=q.value();if(b.grid.getDataType(j.cell.column())==="datetime"){if(s instanceof Date){s=s.getTime()}if(p instanceof Date){p=p.getTime()}}if(s!==p){try{q.value(j.value)}catch(o){var v={cell:q,value:j.value};w=false;g._trigger("invalidCellValue",null,v)}if(w){var t={cell:q};g._trigger("afterCellUpdate",null,t)}}}}else{w=true}if(w){var i={cell:q,event:n,handled:false};g._trigger("afterCellEdit",null,i);if(!i.handled){w=this._defaultAfterCellEdit(g,i)}if(w){q._isEdit(false)}if(g.options.showRowHeader){e((h.$rows[0]).cells[0]).children("div.wijmo-wijgrid-innercell").html("&nbsp;")}window.setTimeout(function(){if(!g._destroyed){q=g.currentCell();if(u=q.tableCell()){e(u).attr("tabIndex",0).focus()}else{e(g._view().focusableElement()).focus()}}},this._timeout)}}return w};f.prototype._defaultBeforeCellEdit=function(g,k){var m=k.cell.column(),q=false,n,p,l,i,o,h=b.grid.getKeyCodeEnum();if(m.dataIndex>=0){n=k.cell.value();q=true;try{p=k.cell.container();if(b.grid.getDataType(m)==="boolean"){l=p.children("input");l.focus();if(k.event&&k.event.type==="keypress"){l.one("keyup",function(r){if(r.which===h.SPACE){r.preventDefault();(l[0]).checked=!n}})}}else{l=e("<input />").attr("type","text").addClass("wijgridinput wijmo-wijinput "+g.options.wijCSS.stateFocus).bind("keydown",g,e.proxy(this._checkBoxOrInputKeyDown,this));l.bind(((e.support).selectstart?"selectstart":"mousedown"),function(r){r.stopPropagation()});if(k.event&&k.event.type==="keypress"&&k.event.which){l.val(String.fromCharCode(k.event.which))}else{switch(b.grid.getDataType(k.cell.column())){case"currency":case"number":if(n!==null){l.val(n);break}default:l.val(g._toStr(k.cell.column(),n));break}}p.empty().append(l);i=l.val().length;new b.grid.domSelection(l[0]).setSelection({start:i,end:i});l.focus();setTimeout(function(){l.focus()},this._timeout*2)}}catch(j){alert(j.message);q=false}}return q};f.prototype._defaultAfterCellEdit=function(g,j){var m=j.cell.column(),p=false,n,o,l,h,k;if(m.dataIndex>=0){p=true;k=g._view();try{n=j.cell.container();o=g._toStr(m,j.cell.value());h=k._getRowInfo(g._rows().item(j.cell.rowIndex()));if(b.grid.getDataType(m)==="boolean"){l=n.children("input");if(o==="true"){l.attr("checked","checked")}else{l.removeAttr("checked")}}else{g.cellFormatter.format(n,m,o,h)}}catch(i){alert("defaultAfterCellEdit: "+i.message);p=false}}return p};f.prototype._checkBoxOrInputKeyDown=function(h){var g=b.grid.getKeyCodeEnum();if(h.which===g.ENTER){var i=h.data;if(i){i._endEditInternal(h);return false}}};f.prototype._getCellValue=function(h,i){var j=i.container().find(":input:first"),g=null;if(j.length){g=(j.attr("type")==="checkbox")?(j[0]).checked:j.val()}return g};return f})();c.cellEditorHelper=d})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(){function f(){}f._div=document.createElement("div");f.prototype.format=function(n,l,k,m){if(m.type&b.grid.rowType.footer){if(l.aggregate&&(l.aggregate!=="none")){k=b.grid.stringFormat(l.footerText||"{0}",l._totalsValue||"")}else{k=l.footerText||l._footerTextDOM||""}}var h=true,g=null,j={$container:n,column:l,formattedValue:k,row:m,afterDefaultCallback:null},i;if(e.isFunction(l.cellFormatter)){h=!l.cellFormatter(j)}if(h){switch(b.grid.getDataType(l)){case"boolean":g=this._boolFormatter;break;default:g=this._textFormatter}if(g){g.call(this,j);if(e.isFunction(i=j.afterDefaultCallback)){i(j)}}}};f.prototype._textFormatter=function(h){var g;switch(h.row.type){case b.grid.rowType.filter:this._defFormatFilterCell(h);break;default:g=h.$container[0];if(g.firstChild){while(g.firstChild){g.removeChild(g.firstChild)}}b.grid.cellFormatterHelper._div.innerHTML=h.formattedValue||"&nbsp;";while(b.grid.cellFormatterHelper._div.firstChild){g.appendChild(b.grid.cellFormatterHelper._div.firstChild)}}};f.prototype._boolFormatter=function(k){var l,n,h="disabled='disabled'",j,m,g=b.grid.rowType,i=b.grid.getKeyCodeEnum();switch(k.row.type){case g.data:case g.data|g.dataAlt:l=k.column.owner;n=l.options.allowEditing&&(k.column.readOnly!==true);if(n){h=""}if(l._parse(k.column,l._dataViewWrapper.getValue(k.row.data,k.column.dataKey))===true){k.$container.html("<input class='wijgridinput' type='checkbox' checked='checked' "+h+" />")}else{k.$container.html("<input class='wijgridinput' type='checkbox' "+h+" />")}if(n){k.$container.children("input").bind("mousedown",function(o){j=k.$container.parent()[0];m=l.currentCell();if(m.tableCell()!==j){l._onClick({target:j})}if(!m._isEdit()){l.beginEdit()}}).bind("keydown",function(o){if(o.which===i.ENTER){l._endEditInternal(o);return false}})}break;default:this._textFormatter(k)}};f.prototype._defFormatFilterCell=function(g){var h=g.column.owner,i=h.options.wijCSS;g.$container.addClass(i.widget+" "+i.stateDefault);if((g.column.dataIndex>=0)&&!g.column.isBand&&g.column.showFilter){g.$container.html('<div class="wijmo-wijgrid-filter '+i.cornerAll+'"><input type="text" class="wijmo-wijgrid-filter-input" style="width:100%" /><a class="wijmo-wijgrid-filter-trigger '+i.cornerRight+" "+i.stateDefault+'" href="#"><span class="'+i.icon+" "+i.iconArrowDown+'"></span></a></div>')}else{g.$container.html("&nbsp;")}};return f})();d.cellFormatterHelper=c})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var d=jQuery;var e=(function(){function f(g){this._elements=[];this._gap=10;this._step=1;this._inProgress=false;this._hoveredField=null;this._startLocation=null;this._lastLocation=null;this._proxy=null;this._wijgrid=g;this._evntFormat="{0}."+this._wijgrid.widgetName+".resizer"}f.prototype.addElement=function(g){if(g&&g.element){g.element.bind(this._eventKey("mousemove"),d.proxy(this._onMouseMove,this)).bind(this._eventKey("mousedown"),d.proxy(this._onMouseDown,this)).bind(this._eventKey("mouseout"),d.proxy(this._onMouseOut,this));this._elements.push(g)}};f.prototype.dispose=function(){var g=this;d.each(this._elements,function(h,i){i.element.unbind(g._eventKey("mousemove"),g._onMouseMove).unbind(g._eventKey("mousedown"),g._onMouseDown).unbind(g._eventKey("mouseout"),g._onMouseOut)});this._detachDocEvents()};f.prototype.inProgress=function(){return this._inProgress};f.prototype._onMouseMove=function(h){if(!this._inProgress){var g=this._getFieldByPos({x:h.pageX,y:h.pageY});if(g&&g._canSize()&&this._wijgrid._canInteract()){g.element.css("cursor","e-resize");this._hoveredField=g;h.stopPropagation()}else{this._onMouseOut(h)}}};f.prototype._onMouseOut=function(g){if(!this._inProgress){if(this._hoveredField){this._hoveredField.element.css("cursor","");this._hoveredField=null}}};f.prototype._onMouseDown=function(h){this._hoveredField=this._getFieldByPos({x:h.pageX,y:h.pageY});if(this._hoveredField&&(this._hoveredField)._canSize()&&this._wijgrid._canInteract()){try{this._hoveredField.element.css("cursor","");this._docCursor=document.body.style.cursor;document.body.style.cursor="e-resize";this._startLocation=this._lastLocation=b.grid.bounds(this._hoveredField.element);this._proxy=d('<div class="wijmo-wijgrid-resizehandle '+this._wijgrid.options.wijCSS.stateHightlight+'">&nbsp;</div>');var g=this._wijgrid._view().getVisibleAreaBounds();this._proxy.css({left:h.pageX,top:this._startLocation.top,height:g.height+g.top-this._startLocation.top});d(document.body).append(this._proxy)}finally{this._attachDocEvents();this._inProgress=true;h.stopPropagation()}}};f.prototype._onDocumentMouseMove=function(h){var g=this._step*Math.round((h.pageX-this._lastLocation.left)/this._step);this._lastLocation={left:this._lastLocation.left+g,top:h.pageY,width:undefined,height:undefined};this._proxy.css("left",this._lastLocation.left)};f.prototype._onDocumentMouseUp=function(g){try{document.body.style.cursor=this._docCursor;this._proxy.remove();if(this._startLocation!==this._lastLocation){this._wijgrid._fieldResized(this._hoveredField,this._startLocation.width,this._lastLocation.left-this._startLocation.left)}}finally{this._hoveredField=null;this._proxy=null;this._detachDocEvents();this._inProgress=false}};f.prototype._onSelectStart=function(g){g.preventDefault()};f.prototype._attachDocEvents=function(){if(!this._inProgress){d(document).bind(this._eventKey("mousemove"),d.proxy(this._onDocumentMouseMove,this)).bind(this._eventKey("mouseup"),d.proxy(this._onDocumentMouseUp,this));if(d.fn.disableSelection){d(document.body).disableSelection()}if("onselectstart" in document){d(document.body).bind("selectstart",this._onSelectStart)}}};f.prototype._detachDocEvents=function(){if(this._inProgress){d(document).unbind(this._eventKey("mousemove"),this._onDocumentMouseMove).unbind(this._eventKey("mouseup"),this._onDocumentMouseUp);if(d.fn.enableSelection){d(document.body).enableSelection()}if("onselectstart" in document){d(document.body).unbind("selectstart",this._onSelectStart)}}};f.prototype._getFieldByPos=function(h){var l,g,k,m,j;for(l=0,g=this._elements.length;l<g;l++){k=this._elements[l];m=b.grid.bounds(k.element);j=b.grid.isOver(h.y,h.x,m.top,m.left+m.width-this._gap,m.height,this._gap);if(j){return k}}return null};f.prototype._eventKey=function(g){return b.grid.stringFormat(this._evntFormat,g)};return f})();c.uiResizer=e})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(){function f(g){this._scope_guid="scope_"+b.grid.getUID();this._dragEnd=false;this._wijgrid=g;this._wijCSS=this._wijgrid.options.wijCSS;this._wrapHtml='<div class="'+this._wijCSS.widget+" wijmo-wijgrid "+this._wijCSS.content+" "+this._wijCSS.cornerAll+'"><table class="wijmo-wijgrid-root wijmo-wijgrid-table"><tr class="wijmo-wijgrid-headerrow"></tr></table></div>'}f.prototype.attachGroupArea=function(h){var i,g=this;if(!(e.ui).droppable||!(e.ui).draggable){return}h.droppable({scope:this._scope_guid,tolerance:"pointer",greedy:true,accept:function(j){if(g._wijgrid.options.allowColMoving){i=g._getWijFieldInstance(j);if(i){if((i instanceof e.wijmo.c1groupedfield)&&(i.options.groupedIndex===g._wijgrid._field("groupedColumns").length-1)){return false}return !i.options.isBand&&(i.options.groupedIndex===undefined||(i instanceof e.wijmo.c1groupedfield))}}return false},drop:function(k,j){if(!g._isInElement(k,j.draggable)&&(i=g._getWijFieldInstance(j.draggable))){g._dragEnd=true}},over:function(l,k){var j=g._wijgrid._field("groupedWidgets").length;g._dropTargetRedirected=(j>0);g._droppableWijField=(j>0)?g._wijgrid._field("groupedWidgets")[j-1]:h;h.data("thisDroppableWijField",g._droppableWijField)},out:function(k,j){if(g._droppableWijField===h.data("thisDroppableWijField")){g._droppableWijField=null}}})};f.prototype.attach=function(j){var h,i,g=this;if(!(e.ui).droppable||!(e.ui).draggable){return}if(!j||!(h=j.element)){return}h.draggable({helper:function(k){if(j instanceof e.wijmo.c1groupedfield){return h.clone().addClass("wijmo-wijgrid-dnd-helper")}else{return h.clone().wrap(g._wrapHtml).width(h.width()).height(h.height()).closest(".wijmo-wijgrid").addClass("wijmo-wijgrid-dnd-helper")}},appendTo:"body",scope:g._scope_guid,drag:function(m,l){g._hideArrows();if(g._droppableWijField&&!g._isInElement(m,h)){var k=g._droppableWijField.element;if(!k){k=(g._droppableWijField)}g._showArrows(k,g._getPosition(j,g._droppableWijField,m,l))}},start:function(p,o){if(g._wijgrid._canInteract()&&g._wijgrid.options.allowColMoving&&!g._wijgrid._field("resizer").inProgress()){var n=j.options,l=j.options.travIdx,m=(j instanceof e.wijmo.c1groupedfield),k=m?"groupArea":"columns";if(m){n=b.grid.search(g._wijgrid.columns(),function(q){return q.options.travIdx===l});n=(!n.found)?b.grid.getColumnByTravIdx(g._wijgrid.options.columns,l).found:n.found.options}if(j._canDrag()&&g._wijgrid._trigger("columnDragging",null,{drag:n,dragSource:k})){g._wijgrid._trigger("columnDragged",null,{drag:n,dragSource:k});return true}}return false},stop:function(l,k){g._hideArrows();try{if(g._dragEnd){if(!g._droppableWijField.element){g._wijgrid._handleDragnDrop(j.options.travIdx,-1,"left",j instanceof e.wijmo.c1groupedfield,true)}else{g._wijgrid._handleDragnDrop(j.options.travIdx,g._droppableWijField.options.travIdx,g._getPosition(j,g._droppableWijField,l,k),j instanceof e.wijmo.c1groupedfield,g._droppableWijField instanceof e.wijmo.c1groupedfield)}}}finally{g._droppableWijField=null;g._dragEnd=false}}}).droppable({hoverClass:g._wijCSS.stateHover,scope:g._scope_guid,tolerance:"pointer",greedy:true,accept:function(k){if(g._wijgrid.options.allowColMoving){if(h[0]!==k[0]){i=g._getWijFieldInstance(k);if(i){return i._canDropTo(j)}}}return false},drop:function(l,k){if(i=g._getWijFieldInstance(k.draggable)){g._dragEnd=true}},over:function(l,k){g._dropTargetRedirected=false;g._droppableWijField=j;h.data("thisDroppableWijField",g._droppableWijField)},out:function(l,k){if(g._droppableWijField===j.element.data("thisDroppableWijField")){g._droppableWijField=null}}})};f.prototype.detach=function(h){var g;if(h&&(g=h.element)){if(g.data("ui-draggable")){g.draggable("destroy")}if(g.data("ui-droppable")){g.droppable("destroy")}}};f.prototype.dispose=function(){if(this._$topArrow){this._$topArrow.remove();this._$topArrow=null}if(this._$bottomArrow){this._$bottomArrow.remove();this._$bottomArrow=null}};f.prototype._getWijFieldInstance=function(g){var h=b.grid.widgetName(g);if(!h){throw"widgetName is undedined"}return g.data(h)};f.prototype._showArrows=function(h,g){this._topArrow().show().position({my:"center",at:g+" top",of:h,collision:"none"});this._bottomArrow().show().position({my:"center",at:g+" bottom",of:h,collision:"none"})};f.prototype._hideArrows=function(){this._topArrow().hide();this._bottomArrow().hide()};f.prototype._topArrow=function(){if(!this._$topArrow){this._$topArrow=e("<div />").addClass("wijmo-wijgrid-dnd-arrow-top").append(e("<span />").addClass(this._wijCSS.icon+" ui-icon-arrowthick-1-s")).hide().appendTo(document.body)}return this._$topArrow};f.prototype._bottomArrow=function(){if(!this._$bottomArrow){this._$bottomArrow=e("<div />").addClass("wijmo-wijgrid-dnd-arrow-bottom").append(e("<span />").addClass(this._wijCSS.icon+" ui-icon-arrowthick-1-n")).hide().appendTo(document.body)}return this._$bottomArrow};f.prototype._isInElement=function(i,g){var h=b.grid.bounds(g,false);return((i.pageX>h.left&&i.pageX<h.left+h.width)&&(i.pageY>h.top&&i.pageY<h.top+h.height))};f.prototype._getPosition=function(k,i,l,m){if(!i.element){return"left"}if(this._dropTargetRedirected){return"right"}var g=b.grid.bounds(i.element,false),n=g.width/6,j=g.left+(g.width/2),o="right",h;if(l.pageX<j){o="left"}if(i instanceof e.wijmo.c1groupedfield){if(k instanceof e.wijmo.c1groupedfield){h=i.options.groupedIndex-k.options.groupedIndex;if(Math.abs(h)===1){o=(h<0)?"left":"right"}}return o}h=i.options.linearIdx-k.options.linearIdx;if(i.options.isBand&&(k.options.parentIdx!==i.options.travIdx)&&(Math.abs(l.pageX-j)<n)){return"center"}if(k.options.parentIdx===i.options.parentIdx&&Math.abs(h)===1){o=(h<0)?"left":"right"}return o};return f})();d.uiDragndrop=c})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var e=jQuery;var d=(function(){function f(g){if(!g){throw"invalid arguments"}this._wijgrid=g}f.prototype.format=function(r,q,l,g,h,p,k){var j=b.grid.renderState,i=b.grid.rowType,n=g.type,o,m=null;if(q===0&&this._wijgrid.options.showRowHeader){l=null}if(n===i.groupHeader||n===i.groupFooter){l=null;if(p&&(m=p.groupInfo)){l=this._wijgrid._field("leaves")[m.leafIndex];delete p.groupInfo}}o={$cell:r,state:h,row:g,column:l,_cellIndex:q,_purpose:m?m.purpose:undefined};if(h===j.rendering){this._renderingStateFormatter(o,p,k)}else{this._currentStateFormatter(o,h&j.current);this._selectedStateFormatter(o,h&j.selected)}if(e.isFunction(this._wijgrid.options.cellStyleFormatter)){this._wijgrid.options.cellStyleFormatter(o)}};f.prototype._renderingStateFormatter=function(i,m,l){var g=b.grid.rowType,j,n,h=i.column,k=i.row.type;switch(k){case g.header:i.$cell.addClass("wijgridth");break;default:i.$cell.addClass("wijgridtd")}if((k&g.data)&&h&&h.textAlignment){switch(h.textAlignment.toLowerCase()){case"left":i.$cell.addClass("wijalign-left");break;case"right":i.$cell.addClass("wijalign-right");break;case"center":i.$cell.addClass("wijalign-center");break}}if(m){for(j in m){if(m.hasOwnProperty(j)){n=m[j];if((j==="colSpan"||j==="rowSpan")&&!(n>1)){continue}if(j==="class"){i.$cell.addClass(n)}else{i.$cell.attr(j,n)}}}}if(l){for(j in l){if(l.hasOwnProperty(j)){if(j==="paddingLeft"){i.$cell.children(".wijmo-wijgrid-innercell").css(j,l[j]);continue}i.$cell.css(j,l[j])}}}if(i._cellIndex===0&&this._wijgrid.options.showRowHeader){i.$cell.attr({role:"rowheader",scope:"row"}).addClass(this._wijgrid.options.wijCSS.stateDefault+" "+this._wijgrid.options.wijCSS.content+" wijmo-wijgrid-rowheader")}else{switch(k){case (g.header):i.$cell.attr({role:"columnheader",scope:"col"});break;case (g.footer):i.$cell.attr({role:"columnfooter",scope:"col"});break;default:i.$cell.attr("role","gridcell")}}if(k&g.data){if(i._cellIndex>=0&&h){i.$cell.attr("headers",(window).escape(h.headerText));if(h.readOnly){i.$cell.attr("aria-readonly",true)}if(h.dataIndex>=0){i.$cell.addClass("wijdata-type-"+b.grid.getDataType(h))}}}if(k===g.groupHeader||k===g.groupFooter){if(h&&i._purpose===b.grid.groupRowCellPurpose.aggregateCell){i.$cell.addClass("wijdata-type-"+b.grid.getDataType(h))}}};f.prototype._currentStateFormatter=function(h,i){var g=b.grid.rowType;if(i){h.$cell.addClass(this._wijgrid.options.wijCSS.stateActive);if(h.row.type===g.header){h.$cell.addClass("wijmo-wijgrid-current-headercell")}else{h.$cell.addClass("wijmo-wijgrid-current-cell")}}else{h.$cell.removeClass(this._wijgrid.options.wijCSS.stateActive);if(h.row.type===g.header){h.$cell.removeClass("wijmo-wijgrid-current-headercell")}else{h.$cell.removeClass("wijmo-wijgrid-current-cell")}}};f.prototype._hoveredStateFormatter=function(g,h){if(h){}else{}};f.prototype._selectedStateFormatter=function(g,h){if(h){g.$cell.addClass(this._wijgrid.options.wijCSS.stateHightlight).attr("aria-selected","true")}else{g.$cell.removeClass(this._wijgrid.options.wijCSS.stateHightlight).removeAttr("aria-selected")}};return f})();c.cellStyleFormatterHelper=d})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var d=jQuery;var e=(function(){function f(g){if(!g){throw"invalid arguments"}this._wijgrid=g}f.prototype.format=function(m,h,j){var i=b.grid.renderState,g=b.grid.rowType,l=m.state,k=m;if(l===i.rendering){this._renderingStateFormatter(k,h,j)}else{this._currentStateFormatter(k,(l&i.current)!==0);this._hoveredStateFormatter(k,(l&i.hovered)!==0);this._selectedStateFormatter(k,(l&i.selected)!==0)}if(d.isFunction(this._wijgrid.options.rowStyleFormatter)){this._wijgrid.options.rowStyleFormatter(k)}};f.prototype._renderingStateFormatter=function(k,h,i){var m="wijmo-wijgrid-row "+this._wijgrid.options.wijCSS.content,j="wijmo-wijgrid-row "+this._wijgrid.options.wijCSS.content,g=b.grid.rowType,l;k.$rows.attr("role","row");if(h){for(l in h){if(h.hasOwnProperty(l)){if(l==="class"){k.$rows.addClass(h[l])}else{k.$rows.attr(l,h[l]);if(k.$rows[0].style.height){k.$rows.each(function(){d.data(this,"customHeight",this.style.height);return true})}}}}}if(i){for(l in i){if(i.hasOwnProperty(l)){k.$rows.css(l,i[l])}}}switch(k.type&~g.dataAlt){case (g.header):m="wijmo-wijgrid-headerrow";break;case (g.data):m=j+" wijmo-wijgrid-datarow";if(k.type&g.dataAlt){m+=" wijmo-wijgrid-alternatingrow"}break;case (g.emptyDataRow):m=j+" wijmo-wijgrid-emptydatarow";break;case (g.filter):m="wijmo-wijgrid-filterrow";break;case (g.groupHeader):m=j+" wijmo-wijgrid-groupheaderrow";break;case (g.groupFooter):m=j+" wijmo-wijgrid-groupfooterrow";break;case (g.footer):m="wijmo-wijgrid-footerrow "+this._wijgrid.options.wijCSS.stateHightlight;break;default:throw b.grid.stringFormat("unknown rowType: {0}",k.type)}k.$rows.addClass(m)};f.prototype._currentStateFormatter=function(h,g){if(this._wijgrid.options.showRowHeader){if(g){d((h.$rows[0]).cells[0]).addClass(this._wijgrid.options.wijCSS.stateActive+" wijmo-wijgrid-current-rowheadercell")}else{d((h.$rows[0]).cells[0]).removeClass(this._wijgrid.options.wijCSS.stateActive+" wijmo-wijgrid-current-rowheadercell")}}};f.prototype._hoveredStateFormatter=function(h,g){if(g){h.$rows.addClass(this._wijgrid.options.wijCSS.stateHover)}else{h.$rows.removeClass(this._wijgrid.options.wijCSS.stateHover)}};f.prototype._selectedStateFormatter=function(h,g){if(g){}else{}};return f})();c.rowStyleFormatterHelper=e})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(){function f(){this._sum=0;this._sum2=0;this._cntNumbers=0;this._cntStrings=0;this._cntDates=0;this._max=0;this._min=0;this._minDate=0;this._maxDate=0}f.prototype.add=function(h){if(h===null||h===""){return}var i,g=(h instanceof Date)?"datetime":typeof(h);i=h.toString();if(this._cntStrings++===0){this._minString=this._maxString=i}if(i<this._minString){this._minString=i}if(i>this._maxString){this._maxString=i}if(g==="number"){if(this._cntNumbers++===0){this._min=this._max=h}this._sum+=h;this._sum2+=h*h;if(h<this._min){this._min=h}if(h>this._max){this._max=h}}else{if(g==="datetime"){i=h.getTime();if(this._cntDates++===0){this._minDate=this._maxDate=i}if(i<this._minDate){this._minDate=i}if(i>this._maxDate){this._maxDate=i}}}};f.prototype.getValueString=function(h){var g=h.owner;if(this._cntNumbers&&(h.dataType==="number"||h.dataType==="currency")){var i=this._getValue(h.aggregate);return g._toStr(h,i)}if(this._cntDates&&(h.dataType==="datetime")){switch(h.aggregate){case"max":return g._toStr(h,new Date(this._maxDate));case"min":return g._toStr(h,new Date(this._minDate));case"count":return this._cntStrings+""}}if(this._cntStrings){switch(h.aggregate){case"max":return this._maxString;case"min":return this._minString;case"count":return this._cntStrings+""}}return""};f.prototype._getValue=function(h){switch(h){case"average":return(this._cntNumbers===0)?0:this._sum/this._cntNumbers;case"count":return this._cntStrings;case"max":return this._max;case"min":return this._min;case"sum":return this._sum;case"std":if(this._cntNumbers<=1){return 0}return Math.sqrt(this._getValue("var"));case"stdPop":if(this._cntNumbers<=1){return 0}return Math.sqrt(this._getValue("varPop"));case"var":if(this._cntNumbers<=1){return 0}return this._getValue("varPop")*this._cntNumbers/(this._cntNumbers-1);case"vapPop":if(this._cntNumbers<=1){return 0}var g=this._sum/this._cntNumbers;return this._sum2/this._cntNumbers-g*g}return 0};return f})();d.tally=c})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(){function f(g){this._docEventsUID="wijgridfrozener"+b.grid.getUID();this._docEventsAttached=false;this._newStaticIndex=-1;this._staticColumnIndex=-1;this._staticRowIndex=-1;this._staticOffsetH=0;this._staticOffsetV=0;this._inProgress=false;this._wijgrid=g;this.refresh()}f.prototype.inProgress=function(){return this._inProgress};f.prototype.refresh=function(){this.dispose();this._$outerDiv=this._wijgrid.outerDiv.find(".wijmo-wijgrid-fixedview");this._superPanel=(this._wijgrid._view())._getSuperPanel();this._staticOffsetH=this._wijgrid._getStaticOffsetIndex(false);this._staticOffsetV=this._wijgrid._getStaticOffsetIndex(true);this._staticColumnIndex=this._wijgrid._getStaticIndex(false);this._staticRowIndex=this._wijgrid._getStaticIndex(true);this._visibleBounds=this._wijgrid._view().getVisibleAreaBounds();var h=b.grid.bounds(this._$outerDiv.find(".wijmo-wijgrid-split-area-nw")),g=b.grid.bounds(this._$outerDiv);this._createVBar(this._visibleBounds,h,g);this._createHBar(this._visibleBounds,h,g)};f.prototype.dispose=function(){if(this._$hBar){this._$hBar.remove();this._$hBar=null}if(this._$vBar){this._$vBar.remove();this._$vBar=null}if(this._$proxy){this._$proxy.remove();this._$proxy=null}this._$outerDiv=null;this._superPanel=null;this._detachDocEvents()};f.prototype._createVBar=function(k,j,g){var i=j.width+j.left,h=this;if(i<=k.left+k.width){this._$vBar=e("<div><div></div></div>").addClass("wijmo-wijgrid-frozener-v").css({left:i-g.left,top:j.top-g.top,height:k.height+k.top-j.top}).bind("mousedown",function(l){l.data=true;h._onBarMouseDown.apply(h,arguments)}).appendTo(this._$outerDiv);this._$vBar.find("div").addClass(this._wijgrid.options.wijCSS.header).css({width:0,height:"100%"})}};f.prototype._createHBar=function(k,j,g){var i=j.top+j.height,h=this;if(i<=k.top+k.height){this._$hBar=e("<div><div></div></div>").addClass("wijmo-wijgrid-frozener-h").css({left:j.left-g.left,top:i-g.top,width:k.width+k.left-j.left}).bind("mousedown",function(l){l.data=false;h._onBarMouseDown.apply(h,arguments)}).appendTo(this._$outerDiv);this._$hBar.find("div").addClass(this._wijgrid.options.wijCSS.header).css({width:"100%",height:0})}};f.prototype._onBarMouseDown=function(g){this._visibleBounds=this._wijgrid._view().getVisibleAreaBounds();this._newStaticIndex=g.data?this._staticColumnIndex:this._staticRowIndex;this._$proxy=e('<div class="wijmo-wijgrid-resizehandle '+this._wijgrid.options.wijCSS.header+'"></div>').appendTo(document.body);this._attachDocEvents(g.data);this._inProgress=true;g.stopPropagation()};f.prototype._onDocumentMouseMove=function(g){if(g.data&&this._superPanel.options.hScroller.scrollValue){(this._superPanel).hScrollTo(0)}else{if(!g.data&&this._superPanel.options.vScroller.scrollValue){(this._superPanel).vScrollTo(0)}}this._showPosition(g)};f.prototype._onDocumentMouseUp=function(g){try{if(this._$proxy){this._$proxy.remove()}this._detachDocEvents();if(g.data){if(this._newStaticIndex!==this._staticColumnIndex){this._wijgrid.option("staticColumnIndex",this._newStaticIndex)}}else{if(this._newStaticIndex!==this._staticRowIndex){this._wijgrid.option("staticRowIndex",this._newStaticIndex)}}}finally{this._$proxy=null;this._inProgress=false}};f.prototype._attachDocEvents=function(g){if(!this._docEventsAttached){try{if(e.fn.disableSelection){e(document.body).disableSelection()}this._wijgrid._view().toggleDOMSelection(false);e(document).bind(this._docEventKey("mousemove"),g,e.proxy(this._onDocumentMouseMove,this)).bind(this._docEventKey("mouseup"),g,e.proxy(this._onDocumentMouseUp,this))}finally{this._docEventsAttached=true}}};f.prototype._detachDocEvents=function(){if(this._docEventsAttached){try{if(e.fn.enableSelection){e(document.body).enableSelection()}this._wijgrid._view().toggleDOMSelection(true);e(document).unbind("."+this._docEventsUID)}finally{this._docEventsAttached=false}}};f.prototype._docEventKey=function(g){return b.grid.stringFormat("{0}.{1}",g,this._docEventsUID)};f.prototype._showPosition=function(k){var i,n,h,m,o,l,j,g;if(k.data){g=b.grid.bounds(this._$vBar);if(Math.abs(k.pageX-(g.left+g.width/2))<g.width){this._$proxy.hide();return}if((i=this._getFieldByPos({x:k.pageX,y:k.pageY}))){n=b.grid.bounds(i.element);h=n.left+n.width/2;m=i.options.visLeavesIdx-this._staticOffsetV;o=Math.max(m-1,-1);l=k.pageX<h?(o!==this._staticColumnIndex):(m===this._staticColumnIndex);j=l?n.left:n.left+n.width;if(!b.grid.isOverAxis(j,this._visibleBounds.left-1,this._visibleBounds.width+2)){return}this._newStaticIndex=l?o:m;this._$proxy.show().css({left:j,top:n.top,width:3,height:this._visibleBounds.height+this._visibleBounds.top-n.top})}}else{g=b.grid.bounds(this._$hBar);if(Math.abs(k.pageY-(g.top+g.height/2))<g.height){this._$proxy.hide();return}if((i=this._getRowByPos({x:k.pageX,y:k.pageY}))){n=b.grid.bounds(i);h=n.top+n.height/2;m=this._wijgrid._view().getAbsoluteRowIndex(i)-this._staticOffsetH;o=Math.max(m-1,-1);l=k.pageY<h?(o!==this._staticRowIndex):(m===this._staticRowIndex);j=l?n.top:n.top+n.height;if(!b.grid.isOverAxis(j,this._visibleBounds.top-1,this._visibleBounds.height+2)){return}this._newStaticIndex=l?o:m;this._$proxy.show().css({left:n.left,top:j,width:this._visibleBounds.width+this._visibleBounds.left-n.left,height:3})}}};f.prototype._getFieldByPos=function(n){var k=this._wijgrid.columns(),j,g,h,m,l;for(j=0,g=k.length;j<g;j++){h=k[j];m=h.options;if(m.isLeaf){l=b.grid.bounds(h.element);if(b.grid.isOverAxis(n.x,l.left,l.width)){return h}}}return null};f.prototype._getRowByPos=function(m){var k=this._wijgrid._rows(),h,g,l,j;for(h=0,g=k.length();h<g;h++){l=k.item(h)[0];j=b.grid.bounds(e(l));if(b.grid.isOverAxis(m.y,j.top,j.height)){return l}}return null};return f})();d.uiFrozener=c})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var d=jQuery;var e=(function(){function i(){}i.generate=function g(m,l,k){switch(m){case"append":i._processAppendMode(l,k);break;case"merge":i._processMergeMode(l,k);break;case"none":break;default:throw b.grid.stringFormat('Unsupported value: "{0}"',m)}};i._processAppendMode=function h(m,l){var k={};b.grid.traverse(l,function(n){if(n.dynamic&&b.grid.validDataKey(n.dataKey)){k[n.dataKey]=true}});d.each(m,function(p,o){if(("name" in o)&&!k[o.name]){var n=i._createAutoField(o);l.push(n)}})};i._processMergeMode=function f(m,l){var n=[],k;b.grid.traverse(l,function(o){if(o.isLeaf&&!o.isBand){var p=o.dataKey;if(b.grid.validDataKey(p)){if(m[p]!==undefined){delete m[p]}}else{if(p!==null){n.push(o)}}}});if(n.length){k=0;d.each(m,function(p,q){var o=n[k++];if(o){o.dataKey=q.name;delete m[p]}})}d.each(m,function(p,q){var o=i._createAutoField(q);l.push(o)})};i._createAutoField=function j(k){return b.grid.createDynamicField({dataKey:k.name})};return i})();c.columnsGenerator=e})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var d=jQuery;var e=(function(){function f(i,h,k){this._timer=0;this._timeout=50;this._ignoreScrollEvents=false;this._wijgrid=i;this._fixedAreaHeight=k;this._view=this._wijgrid._view();this._N=this._wijgrid._totalRowsCount();var j=20,g=this._wijgrid.outerDiv.height()+this._N*j;h.height(g-k-(this._N>0?j:0));this._view._splitAreas.sw.height(g)}f.prototype.attach=function(m){this._$scroller=m;this._panelInst=m.data("wijmo-wijsuperpanel");var i,l=m.find(".wijmo-wijsuperpanel-contentwrapper:first"),j=(this._panelInst).getContentElement().height(),h=this._fixedAreaHeight+j,g=l.innerHeight(),k=(101/(this._N-1))*((h-g)/h);i=this._panelInst.options.vScroller;i.scrollSmallChange=k;this._panelInst.option("vScroller",i);m.bind("wijsuperpanelscrolled.wijgrid",d.proxy(this._onSuperpanelScrolled,this));m.bind("wijsuperpanelscrolling.wijgrid",d.proxy(this._onSuperpanelScrolling,this));m.bind("wijsuperpanelscrolled.wijgrid",d.proxy(this._onSuperpanelPostScrolled,this))};f.prototype.dispose=function(){this._$scroller.unbind(".wijgrid");this._clearTimer()};f.prototype._clearTimer=function(){window.clearTimeout(this._timer);this._timer=0};f.prototype._onSuperpanelScrolling=function(h,g){if(this._ignoreScrollEvents||(g.dir!=="v")){return}if(this._timer===-1){return false}};f.prototype._onSuperpanelScrolled=function(i,h){var g=this;if(this._ignoreScrollEvents||(h.dir!=="v")){return}if(this._timer>0){this._clearTimer()}if(this._timer!==-1){this._timer=window.setTimeout(function(){g._timer=-1;var k=Math.round(h.newValue/g._panelInst.options.vScroller.scrollSmallChange),j=g._view._bounds.start;if(k<0){k=0}if(k>=g._N){k=g._N-1}if(k!==j){g._wijgrid._handleVirtualScrolling(k,d.proxy(g._scrollingCompleted,g))}else{g._log();g._clearTimer()}},this._timeout)}};f.prototype._scrollingCompleted=function(g){this._wijgrid._trackScrollingIndex(g);this._log();this._clearTimer()};f.prototype._onSuperpanelPostScrolled=function(){if(d.isFunction(this._postScrolled)){this._postScrolled.apply(this,arguments)}};f.prototype._log=function(){};return f})();c.uiVirtualScroller=e})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(a){(function(e){var d=jQuery,g=Globalize;function f(m,k,j,i){var h=m;i=d.extend({nullString:"",format:""},i);function l(n){i.parser=i.parser||e.defaultParsers[n];if(!i.parser&&m!=null){e.errors.noParser(n)}return i.parser}k=k||m!=null&&typeof m;j=j||k;if(!j){return m}if(j=="string"){l(k);if(!i.parser){return m}return i.parser.toStr(m,i.culture,i.format,i.nullString,true)}l(j);if(!i.parser){return m}m=i.parser.parse(m,i.culture,i.format,i.nullString,true);if(isNaN(m)&&m!=null&&e.util.isNumeric(m)){if(i.ignoreError){return h}e.errors.cantConvert(j,h)}return m}e.convert=f;e.defaultParsers={string:{parse:function(k,j,l,i,h){switch(k){case null:return null;case i:if(h){return null}case undefined:case"&nbsp":return"";default:return""+k}},toStr:function(k,j,l,i,h){if(k===null&&h){return i}return""+k}},number:{parse:function(l,j,m,i,h){var k=typeof(l);if(k==="number"){return isNaN(l)?NaN:l}if((!l&&l!==0)||(l==="&nbsp;")||(l===i&&h)){return null}return g.parseFloat(l,10,j.name)},toStr:function(k,j,l,i,h){if(k===null&&h){return i}return g.format(k,l?l:"n",j.name)}},currency:{parse:function(l,j,m,i,h){var k=typeof(l);if(k==="number"){return isNaN(l)?NaN:l}if((!l&&l!==0)||(l==="&nbsp;")||(l===i&&h)){return null}if(k==="string"){l=l.replace(j.numberFormat.currency.symbol,"")}return g.parseFloat(l,10,j.name)},toStr:function(k,j,l,i,h){if(k===null&&h){return i}return g.format(k,l?l:"c",j.name)}},datetime:{parse:function(m,j,n,i,h){var l;if(m instanceof Date){return m}if(!m||(m==="&nbsp;")||(m===i&&h)){return null}l=/^\/Date\((\d+)\)\/$/.exec(m);if(l){return new Date(parseInt(l[1],10))}var k=g.parseDate(m,n,j.name);if(k==null||isNaN(k)){k=Date.parse(m);k=isNaN(k)?NaN:new Date(k)}return k},toStr:function(k,j,l,i,h){if(k===null&&h){return i}return g.format(k,l?l:"d",j.name)}},"boolean":{parse:function(k,j,l,i,h){var m=typeof(k);if(m==="number"){return k!=0}if(m==="boolean"){return k}if(m==="string"){k=d.trim(k)}if(!k||(k==="&nbsp;")||(k===i&&h)){return null}switch(k.toLowerCase()){case"true":return true;case"false":return false}return NaN},toStr:function(k,j,l,i,h){if(k===null&&h){return i}return(k)?"true":"false"}}};function c(h){return function(){if(!g){e.util.logError(e.errors.noGlobalize.create().message)}return h.apply(this,arguments)}}d.each(e.defaultParsers,function(h,i){i.parse=i.parse&&c(i.parse);i.toStr=i.toStr&&c(i.toStr)})})(a.data||(a.data={}));var b=a.data})(wijmo||(wijmo={}));var wijmo;(function(a){(function(c){(function(f){(function(g){g.Connective={AND:"and",OR:"or"};function i(l){function k(o){var m=[];if(o.length===0){return m}var n=g.Connective.AND;c.util.each(o,function(q,r){if(q==0&&c.util.isString(r)){var s=r.toLowerCase();if(s==g.Connective.AND||s==g.Connective.OR){n=s;return}}if($.isArray(r)){r=k(r);if(!r){return}if(r[0]===n||r.length==2){r.shift();m=m.concat(r);return}}else{var p=f.normalizeCondition(r);if(!p){return}p.property=r.property;r=p}m.push(r)});if(m.length==0){return null}else{m.unshift(n);return m}}return k(l)}function j(l){if(!$.isArray(l)){return null}var k={original:l,normalized:i(l),func:null};if(k.normalized==null){k.func=function(m){return true}}else{k.func=function(m){function n(q){var o=q[0]===g.Connective.AND,p=o?c.util.every:c.util.some;return p(q,function(s,r){if(r===0){return o}if($.isArray(s)){return n(s)}else{var t=c.util.getProperty(m,s.property);return s.op.apply(t,s.value)}})}return n(k.normalized)}}return k}function h(k){return j(k)||c.filtering.compile(k)}g.compile=h})(f.extended||(f.extended={}));var e=f.extended})(c.filtering||(c.filtering={}));var d=c.filtering})(a.data||(a.data={}));var b=a.data})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var g=jQuery;var f=b.data;var e=f.filtering.extended;var d=(function(){function i(j){this.real=j;this._updatingFilter=false;this._overrideFilter();this._makeMemberProxies()}i.prototype._overrideFilter=function(){var j=this;this.filter=f.observable(this.real.filter());this.filter.subscribe(function(k){if(j.real.filter()!==k&&!j._updatingFilter){j.refresh({filter:k})}});this.real.filter.subscribe(function(k){if(k!==j._lastSetFilter){j.filter(k)}})};i.prototype.refresh=function(j,l){if(typeof l==="undefined"){l=false}j=g.extend({},j);var k=j.filter;j.filter=this._coerceFilter(j.filter);this._lastSetFilter=j.filter;this._updatingFilter=true;try{if(g.isFunction(j.filter)&&!g.isFunction(k)){this.filter(k)}else{this.filter(j.filter)}}finally{this._updatingFilter=false}return this.real.refresh(j,l)};i.prototype._makeMemberProxies=function(){var j=this;f.util.each(this.real,function(k,l){if(!g.isFunction(l)||j[k]||k.charAt(0)==="_"){return}j[k]=g.isFunction(l.subscribe)?l:function(){return l.apply(j.real,arguments)}})};i.create=function h(j){return new i(j)};i.prototype._convertComplexPropertyFilterToExtendedFilterFormat=function(k){var j=[];g.each(k,function(o,l){if(!g.isArray(l)){l=[l]}else{var m=f.util.isString(l[0])&&l[0].toLowerCase();if(m===e.Connective.AND||m===e.Connective.OR){j.push(l);return}}var n=[];g.each(l,function(q,r){var p=f.filtering.normalizeCondition(r);if(p){p.property=o;n.push(p)}});if(n.length>0){j.push(n)}});return j.length>0?j:null};i.prototype._coerceFilter=function(j){if(g.isArray(j)){return e.compile(j).func}else{if(!g.isPlainObject(j)){return j}}j=g.extend(true,{},j);var l={};g.each(j,function(o,m){if(!g.isArray(m)){m=[m]}if(l){var n=f.util.isString(m[0])&&m[0].toLowerCase();if(m.length==1||m.length==2&&(n==="and"||n==="or")){l[o]=m[m.length-1];return}}j[o]=m;l=null});if(l){return l}var k=this._convertComplexPropertyFilterToExtendedFilterFormat(j);return e.compile(k).func};i.prototype._unsafeReplace=function(j,k){(this.real).sourceArray[j]=k;(this.real).local[j]=k};i.prototype._unsafeSplice=function(j,l,k){if(arguments.length===2){(this.real).sourceArray.splice(j,l);(this.real).local.splice(j,l)}else{(this.real).sourceArray.splice(j,l,k);(this.real).local.splice(j,l,k)}};i.prototype._unsafePush=function(j){(this.real).sourceArray.push(j);(this.real).local.push(j)};return i})();c.GridDataView=d})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){"use strict";var t=jQuery,n="wijlightbox";!window.S&&window.swfobject&&(window.S={flash:window.swfobject});var r=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n.prototype._keyDownHandler=function(e){var t=this.options,n=this,r=n.getKeyCodeEnum();if(e.keyCode&&e.keyCode===r.ESCAPE){n._isFullSize()?n._toggleFullSize():t.closeOnEscape&&n._close(),e.preventDefault();return}if(t.keyNav&&e.keyCode)switch(e.keyCode){case r.LEFT:case r.DOWN:n.back(),e.preventDefault();break;case r.RIGHT:case r.UP:n.next(),e.preventDefault();break;case r.HOME:t.groupItems.length>0&&n.show(0),e.preventDefault();break;case r.END:t.groupItems.length>0&&n.show(t.groupItems.length-1),e.preventDefault()}},n.prototype.getKeyCodeEnum=function(){if(t.ui&&t.ui.keyCode)return t.ui.keyCode;if(t.mobile&&t.mobile.keyCode)return t.mobile.keyCode;throw"keyCode object is not found"},n.prototype._create=function(){var e=this.options,n=this;window.wijmoApplyWijTouchUtilEvents&&(t=window.wijmoApplyWijTouchUtilEvents(t)),e.groupItems||(e.groupItems=[]),this._defaults={transAnimation:{animated:"fade",duration:400,easing:"linear"},resizeAnimation:{animated:"sync",duration:400},textShowOption:{duration:300,easing:"linear"},textHideOption:{duration:300,easing:"linear"}},this._parse(),this.container=t("<div/>").addClass("wijmo-wijlightbox "+e.wijCSS.widget+" wijmo-wijlightbox-controls-"+e.controlsPosition).css("z-index",e.zIndex).attr({tabIndex:-1,role:"dialog"}).bind("keydown.wijlightbox",t.proxy(n,"_keyDownHandler")).appendTo(document.body).hide(),this.frame=t("<div></div>").addClass(["wijmo-wijlightbox-frame",e.wijCSS.content,e.wijCSS.cornerAll,e.wijCSS.helperClearFix].join(" ")).appendTo(this.container),this.content=t("<div></div>").addClass("wijmo-wijlightbox-content").appendTo(this.frame),e.activeIndex===undefined?(typeof e.activeIndex!="number"&&e.cookie&&(e.activeIndex=parseInt(n._cookie(),10)),e.activeIndex=e.activeIndex||(e.groupItems.length?0:-1)):e.activeIndex===null&&(e.activeIndex=-1),e.activeIndex=e.activeIndex>=0&&e.groupItems[e.activeIndex]||e.activeIndex<0?e.activeIndex:0,this._initClickBehavior(),this._createTimerBar(),this._createDialogButtons(),this._createCtrlButtons(),this._createText(),this._createCounter(),this._refreshCounter(),this.toolBox&&this.toolBox.find(".wijmo-wijlightbox-toolbox-button").bind({mouseover:function(){n._addState("hover",t(this))},mouseout:function(){n._removeState("hover",t(this))},mousedown:function(){n._addState("active",t(this))},mouseup:function(){n._removeState("active",t(this))}}),this._groupMode()&&this._createNavButtons(),this._initHoverBehavior(),this.container.width(this.frame.outerWidth())},n.prototype.destroy=function(){var e=this.options,n=this;return this._hideWaiting(),this._hideOverlay(),e.cookie&&this._cookie(null,e.cookie),this.container.remove(),t.Widget.prototype.destroy.apply(n,arguments),n},n.prototype._setOption=function(e,n){t.Widget.prototype._setOption.apply(this,arguments);switch(e){case"groupItems":this.options.activeIndex>=n.length?this.show(n.length-1):this.options.activeIndex<0&&n.length?this.show(0):this.show(this.options.activeIndex);break;case"activeIndex":this.show(n);break;case"textPosition":this._resetText();break;case"clickPause":this._initClickBehavior();break;case"showNavButtons":this._createNavButtons();break;case"showControlsOnHover":this._initHoverBehavior()}},n.prototype._initClickBehavior=function(){var e=this.options,n=this;this.content.unbind("click"),e.clickPause?this._groupMode()&&this.content.click(function(){n[n.isPlaying()?"stop":"play"]()}):this._groupMode()&&this.content.click(function(r){if(n.isPlaying())return!1;var i=t.extend({},t(this).offset(),{width:t(this).outerWidth(!0),height:t(this).outerHeight(!0)});r.pageX>=i.left&&r.pageX<i.left+i.width/2?n.backBtn.hasClass(e.wijCSS.stateDisabled)||n.back():n.nextBtn.hasClass(e.wijCSS.stateDisabled)||n.next()})},n.prototype._initHoverBehavior=function(){var e=this.options,t=this;this.frame.unbind(".wijlightbox"),e.showControlsOnHover&&this.frame.bind({"mouseenter.wijlightbox":function(){if(t.container.data("moving.wijlightbox"))return!1;t._showAccessories(!0)},"mouseleave.wijlightbox":function(){if(t.container.data("moving.wijlightbox"))return!1;t._hideAccessories(!0)},"mousemove.wijlightbox":function(){t.container.data("moving.wijlightbox")===!1&&t.container.data("accessvisible.wijlightbox")===!1&&t.frame.trigger("mouseenter")}})},n.prototype._getPlugins=function(){var e=this.container.data("plugins.wijlightbox"),n,r,i;return e||(e={},window.navigator.plugins&&window.navigator.plugins.length?(n=[],t.each(window.navigator.plugins,function(e,t){n.push(t.name)}),n=n.join(","),i=n.indexOf("Flip4Mac")>-1,e={fla:n.indexOf("Shockwave Flash")>-1,qt:n.indexOf("QuickTime")>-1,wmp:!i&&n.indexOf("Windows Media")>-1,f4m:i}):(r=function(e){var t;try{t=new ActiveXObject(e)}catch(n){}return!!t},e={fla:r("ShockwaveFlash.ShockwaveFlash"),qt:r("QuickTime.QuickTime"),wmp:r("wmplayer.ocx"),f4m:!1}),this.container.data("plugins.wijlightbox",e)),e},n.prototype._sanitizeSelector=function(e){return e.replace(/:/g,"\\:")},n.prototype._getFragmentId=function(e){var n=/^#.+/,r=t(e).attr("href")||"",i=r.split("#")[0],s=t("base")[0];return i&&(i===window.location.toString().split("#")[0]||s&&i===s.attributes.href)&&(r=e.hash,e.href=r),n.test(r)?this._sanitizeSelector(r):""},n.prototype._parseLink=function(e){var n=this,r=this.options,i=t(e),s={href:undefined,player:undefined,img:undefined,gallery:undefined},o,u,a,f,l=["href","player","title","alt","height","width","gallery","wijvideosrc"];if(i.length>0&&i[0].tagName.toLowerCase()==="a"){o=i.attr("rel"),t.each(l,function(e,t){s[t]=i.attr(t)||""});if(!s.href)return;s.player||(s.player=r.player||n._getPlayerName(s.href)),u=i.find("img"),u&&u.length===0&&(u=i),u&&u.length>=1&&(t.each(["title","alt"],function(e,t){s[t]=u.attr(t)||s[t]}),s.img=u),o&&(a=o.match(/\[(.*?)\]/),a&&(s.gallery=a[1]||s.gallery),t.each(o.split(";"),function(e,t){var n=t.match(/\s*([a-z_]*?)\s*=\s*(.+)\s*/);n&&(s[n[1]]=n[2])})),s.player==="inline"&&(s.href=n._getFragmentId(e)),s.gallery?(f=r.groupItems.length,r.groupItems[f]=s,i.bind({click:function(e){return e.stopPropagation(),e.preventDefault(),r.disabled||n._open(u,f),!1}})):i.bind({click:function(e){return e.stopPropagation(),e.preventDefault(),r.disabled||n._open(u,s),!1}})}},n.prototype._parse=function(){var e=this;this._parseLink(this.element),this.element.find('a[rel^="wijlightbox"], a[rel^="lightbox"]').each(function(t,n){e._parseLink(n)})},n.prototype._showAccessories=function(e){this.container.data("accessvisible.wijlightbox",!0),this._showNavButtons(e),this._showToolboxButtons(e),this._showCounter(e)},n.prototype._hideAccessories=function(e){this.container.data("accessvisible.wijlightbox",!1),this._hideNavButtons(e),this._hideToolboxButtons(e),this._hideCounter(e)},n.prototype._groupMode=function(){var e=this.options;return e.groupItems&&e.groupItems.length>1},n.prototype._resetText=function(){this._removeText(),this._createText()},n.prototype._createText=function(e){var n=this,r=n.options,i,s,o,u,a;if(r.textPosition==="none")return;if(this.container.find(".wijmo-wijlightbox-text").length)return;i=r.textPosition.toLowerCase(),s=t("<div></div>").addClass("wijmo-wijlightbox-text wijmo-wijlightbox-text-"+i+" "+r.wijCSS.content+" "+r.wijCSS.helperClearFix),u=t("<h3></h3>").addClass("wijmo-wijlightbox-title wijmo-wijlightbox-title-"+i+" "+r.wijCSS.helperClearFix).appendTo(s),a=t("<p></p>").addClass("wijmo-wijlightbox-detail wijmo-wijlightbox-detail-"+i+" "+r.wijCSS.helperClearFix).appendTo(s);if(r.textPosition==="inside")s.addClass(r.wijCSS.content+" "+r.wijCSS.helperClearFix).width(this.frame.width()).appendTo(this.frame);else if(r.textPosition==="outside")s.addClass([r.wijCSS.content,r.wijCSS.cornerAll,r.wijCSS.helperClearFix].join(" ")).width(this.frame.width()).appendTo(this.container);else if(r.textPosition==="overlay"||r.textPosition==="titleOverlay")o=t("<div></div>").addClass("wijmo-wijlightbox-mask wijmo-wijlightbox-mask-"+i+" "+r.wijCSS.helperClearFix).width(this.frame.width()).appendTo(this.frame),s.width(this.frame.width()).appendTo(this.frame),r.textPosition==="titleOverlay"&&s.bind({mouseenter:function(){o.stop(),s.stop();var e=u.outerHeight(!0)+a.outerHeight(!0),i=t.extend({},n._defaults.textShowOption,r.textShowOption,{queue:!1});o.animate({height:e},i),s.animate({height:e},i)},mouseleave:function(){o.stop(),s.stop();var e=u.height(),i=t.extend({},n._defaults.textHideOption,r.textHideOption,{queue:!1});o.animate({height:e},i),s.animate({height:e},i)}});this._refreshText(e)},n.prototype._removeText=function(){this.container.find(".wijmo-wijlightbox-text,.wijmo-wijlightbox-mask").remove()},n.prototype._getActiveItem=function(){var e=this.options;return e.groupItems&&e.groupItems.length&&e.activeIndex>=0&&e.activeIndex<e.groupItems.length?e.groupItems[e.activeIndex]:null},n.prototype._refreshText=function(e){var n=this,r=this.options,i,s,o,u,a;if(r.textPosition==="none")return;i=this.container.data("item.wijlightbox")||this._getActiveItem();if(!i)return;s=this.container.find(".wijmo-wijlightbox-text"),o=this.container.find(".wijmo-wijlightbox-title"),u=this.container.find(".wijmo-wijlightbox-detail"),a=this.container.find(".wijmo-wijlightbox-mask"),a.stop(),s.stop(),o.html(i.title),u.html(i.alt),r.textPosition==="outside"&&s.width(this.frame.width());var f=o.outerHeight(!0),l=u.outerHeight(!0),c=t.extend({},n._defaults.textShowOption,r.textShowOption,{queue:!1});if(r.textPosition==="overlay"||r.textPosition==="titleOverlay"){var h=f+(r.textPosition==="overlay"?l:0);s.height(0),a.height(0),s.animate({height:h},c),a.animate({height:h},c)}else e?s.height(f+l):(s.height(0),s.animate({height:f+l},c))},n.prototype._addState=function(e,t){t.is(":not(."+this.options.wijCSS.stateDisabled+")")&&t.addClass("ui-state-"+e)},n.prototype._removeState=function(e,t){t.removeClass("ui-state-"+e)},n.prototype._createNavButtons=function(){var e=this,n=this.options;if(!n.showNavButtons||!this._groupMode()){this._removeNavButtons();return}this.backBtn||(this.backBtn=t("<a href='#'/>").addClass("wijmo-wijlightbox-button wijmo-wijlightbox-button-prev "+n.wijCSS.stateDefault+" "+(n.controlsPosition==="inside"?n.wijCSS.cornerRight:n.wijCSS.cornerLeft)).append("<span class='"+n.wijCSS.icon+" "+n.wijCSS.iconArrowLeft+"'></span>").hide().appendTo(this.frame).bind({click:function(){return t(this).hasClass(n.wijCSS.stateDisabled)||e.back(),!1},mouseover:function(){e._addState("hover",t(this))},mouseout:function(){e._removeState("hover",t(this))},mousedown:function(){e._addState("active",t(this))},mouseup:function(){e._removeState("active",t(this))}})),this.nextBtn||(this.nextBtn=t("<a href='#'/>").addClass("wijmo-wijlightbox-button wijmo-wijlightbox-button-next "+n.wijCSS.stateDefault+" "+(n.controlsPosition==="inside"?n.wijCSS.cornerLeft:n.wijCSS.cornerRight)).append("<span class='"+n.wijCSS.icon+" "+n.wijCSS.iconArrowRight+"'></span>").hide().appendTo(this.frame).bind({click:function(){return t(this).hasClass(n.wijCSS.stateDisabled)||e.next(),!1},mouseover:function(){e._addState("hover",t(this))},mouseout:function(){e._removeState("hover",t(this))},mousedown:function(){e._addState("active",t(this))},mouseup:function(){e._removeState("active",t(this))}}))},n.prototype._removeNavButtons=function(){this.backBtn&&(this.backBtn.remove(),this.backBtn=undefined),this.nextBtn&&(this.nextBtn.remove(),this.nextBtn=undefined)},n.prototype._refreshNavButtons=function(){var e=this.options,t;this.backBtn&&(t=e.activeIndex===0?"addClass":"removeClass",this.backBtn[t](e.wijCSS.stateDisabled)),this.nextBtn&&(t=e.activeIndex>=e.groupItems.length-1?"addClass":"removeClass",this.nextBtn[t](e.wijCSS.stateDisabled))},n.prototype._showNavButtons=function(e){if(this.isPlaying())return;this.container.find(".wijmo-wijlightbox-button").stop(!0,!0).fadeIn(e?600:0,function(){t(this).css("opacity","")})},n.prototype._hideNavButtons=function(e){this.container.find(".wijmo-wijlightbox-button").stop(!0,!0).fadeOut(e?600:0)},n.prototype._createToolbox=function(){this.toolBox||(this.toolBox=t("<div></div>").addClass("wijmo-wijlightbox-toolbox").appendTo(this.frame))},n.prototype._showToolboxButtons=function(e){this.container.find(".wijmo-wijlightbox-toolbox-button").stop(!0,!0).fadeIn(e?600:0,function(){t(this).css("opacity","")})},n.prototype._hideToolboxButtons=function(e){this.container.find(".wijmo-wijlightbox-toolbox-button").stop(!0,!0).fadeOut(e?600:0)},n.prototype._createCtrlButtons=function(){var e=this,n=this.options,r=n.wijCSS;if(!n.ctrlButtons||n.ctrlButtons.length===0||!this._groupMode()){this._removeCtrlButtons();return}this._createToolbox();var i=n.ctrlButtons.split("|");i.length===1&&i[0]===n.ctrlButtons&&(i=n.ctrlButtons.split(",")),t.each(i,function(i,s){s=t.trim(s),s==="play"&&!this.playBtn?e.playBtn=t("<a href='#'/>").addClass(["wijmo-wijlightbox-toolbox-button"," wijmo-wijlightbox-toolbox-button-play ",r.stateDefault,r.cornerAll].join(" ")).append("<span class='"+r.icon+" "+r.iconPlay+"'></span>").hide().click(function(){return e.isPlaying()?e.stop():(n.activeIndex>=n.groupItems.length-1&&e.show(0),e.play()),!1}):s==="stop"&&!this.stopBtn&&(e.stopBtn=t("<a href='#'/>").addClass(["wijmo-wijlightbox-toolbox-button","wijmo-wijlightbox-toolbox-button-stop",r.stateDefault,r.stateDisabled,r.cornerAll].join(" ")).append("<span class='"+r.icon+" "+r.iconStop+"'></span>").hide().click(function(){return e.isPlaying()&&(e.stop(),e.show(0)),!1}))}),this.stopBtn&&this.stopBtn.appendTo(this.toolBox),this.playBtn&&this.playBtn.appendTo(this.toolBox)},n.prototype._removeCtrlButtons=function(){this.playBtn&&(this.playBtn.remove(),this.playBtn=undefined),this.stopBtn&&(this.stopBtn.remove(),this.stopBtn=undefined)},n.prototype._refreshCtrlButtons=function(){var e=this.options.wijCSS;if(this.playBtn){var t=this.playBtn.find("."+e.icon);t&&(t.removeClass(e.iconPause+" "+e.iconPlay),t.addClass(this.isPlaying()?e.iconPause:e.iconPlay))}this.stopBtn&&this.stopBtn[this.isPlaying()?"removeClass":"addClass"](e.stateDisabled)},n.prototype._createDialogButtons=function(){var e=this,n=this.options,r;if(!n.dialogButtons||n.dialogButtons.length===0){this._removeDialogButtons();return}this._createToolbox(),r=n.dialogButtons.split("|"),r.length===1&&r[0]===n.dialogButtons&&(r=n.dialogButtons.split(",")),t.each(r,function(r,i){i=t.trim(i),i==="close"&&!this.closeBtn?e.closeBtn=t("<a href='#'/>").addClass("wijmo-wijlightbox-toolbox-button wijmo-wijlightbox-toolbox-button-close "+n.wijCSS.stateDefault+" "+n.wijCSS.cornerAll).append("<span class='"+n.wijCSS.icon+" "+n.wijCSS.iconClose+"'></span>").hide().click(function(){return e._close(),!1}):i==="fullSize"&&!this.fullBtn&&(e.fullBtn=t("<a href='#'/>").addClass("wijmo-wijlightbox-toolbox-button wijmo-wijlightbox-toolbox-button-fullsize "+n.wijCSS.stateDefault+" "+n.wijCSS.cornerAll).append("<span class='"+n.wijCSS.icon+" "+n.wijCSS.iconArrow4Diag+"'></span>").hide().click(function(){return e._toggleFullSize(),!1}))}),this.closeBtn&&this.closeBtn.appendTo(this.toolBox),this.fullBtn&&this.fullBtn.appendTo(this.toolBox),this.btnSep||(this.btnSep=t("<a href='#'/>").addClass("wijmo-wijlightbox-toolbox-separator").appendTo(this.toolBox))},n.prototype._removeDialogButtons=function(){this.closeBtn&&(this.closeBtn.remove(),this.closeBtn=undefined),this.fullBtn&&(this.fullBtn.remove(),this.fullBtn=undefined)},n.prototype._refreshDialogButtons=function(){var e=this.options.wijCSS;if(this.fullBtn){var t=this.fullBtn.find("."+e.icon);t&&(t.removeClass(e.iconArrow4Diag+" "+e.iconNewWin),t.addClass(this._isFullSize()?e.iconNewWin:e.iconArrow4Diag))}},n.prototype._createTimerBar=function(){var e=this,n=e.options;if(!n.showTimer||!e._groupMode()){e._removeTimerBar();return}e._createToolbox(),e.timerBar||(e.timerBar=t("<div></div>").addClass("wijmo-wijlightbox-timerbar "+n.wijCSS.content+" ui-priority-secondary "+n.wijCSS.cornerAll).appendTo(e.toolBox),e.timerMeter=t("<div></div>").addClass("wijmo-wijlightbox-timermeter ui-progressbar-value "+n.wijCSS.content+" "+n.wijCSS.cornerAll).appendTo(e.toolBox))},n.prototype._removeTimerBar=function(){this.timerMeter&&(this.timerMeter.remove(),this.timerMeter=undefined),this.timerBar&&(this.timerBar.remove(),this.timerBar=undefined)},n.prototype._createCounter=function(){var e=this,n=e.options;if(!n.showCounter||!e._groupMode()){e._removeCounter();return}e.counter||(e.counter=t("<div></div>").addClass("wijmo-wijlightbox-counter "+n.wijCSS.stateDefault+" "+(n.controlsPosition==="inside"?n.wijCSS.cornerTL:n.wijCSS.cornerAll)).hide().appendTo(e.frame))},n.prototype._removeCounter=function(){this.counter&&(this.counter.remove(),this.counter=undefined)},n.prototype._refreshCounter=function(e){var n=this,r=this.options,i="";if(!this.counter||!this._groupMode())return;this.counter.empty();if(r.showCounter&&r.groupItems.length>1&&this.counter){e===undefined&&(e=r.activeIndex);var s=r.groupItems.length;if(r.counterType==="sequence"){var o=0,u=s,a=parseInt(r.counterLimit,10)||0;if(a>=2&&a<s){var f=Math.floor(a/2);o=Math.min(u-a,Math.max(o,e-f)),u=Math.min(u,o+a)}while(o!==u)t("<a></a>").addClass("wijmo-wijlightbox-counter-item "+r.wijCSS.content+" "+r.wijCSS.stateDefault+(o===e?" wijmo-wijlightbox-counter-active "+r.wijCSS.stateActive:"")).text((++o).toString()).appendTo(this.counter);this.counter.find("a").click(function(e,r){return t(this).hasClass("wijmo-wijlightbox-counter-active")?!1:(n.show(parseInt(t(this).text(),10)-1),!1)})}else{var l=r.counterFormat||"[i] of [n]";i=l.replace("[i]",e+1),i=i.replace("[n]",s),t("<span></span>").text(i).appendTo(this.counter)}}},n.prototype._showCounter=function(e){this.container.find(".wijmo-wijlightbox-counter").stop(!0,!0).fadeIn(e?600:0,function(){t(this).css("opacity","")})},n.prototype._hideCounter=function(e){this.container.find(".wijmo-wijlightbox-counter").stop(!0,!0).fadeOut(e?600:0)},n.prototype._cookie=function(e,n){var r=this.cookie||(this.cookie=this.options.cookie.name);return t.cookie.apply(null,[r].concat(t.makeArray(arguments)))},n.prototype._showOverlay=function(){if(this.container.data("overlay.wijlightbox"))return;this.container.data("overlay.wijlightbox",new t.wijmo.wijlightbox.overlay(this))},n.prototype._hideOverlay=function(){var e=this.container.data("overlay.wijlightbox");if(!e)return;e.close(),this.container.removeData("overlay.wijlightbox")},n.prototype._hasOverlay=function(){return this.container.hasData("overlay.wijlightbox")},n.prototype._showWaiting=function(){if(this.container.data("waiting.wijlightbox"))return;this.container.data("waiting.wijlightbox",new t.wijmo.wijlightbox.overlay(this,!0))},n.prototype._hideWaiting=function(){var e=this.container.data("waiting.wijlightbox");if(!e)return;e.close(),this.container.removeData("waiting.wijlightbox")},n.prototype._hasWaiting=function(){return this.container.hasData("waiting.wijlightbox")},n.prototype._getUrl=function(e){var t=this.options,n=typeof e=="string"?e:e.href,r=t.rootUrl;return r&&r.length>0&&(r.indexOf("//")===-1&&(r=window.location.protocol+"//"+window.location.host+(r.startsWith("/")?"":"/")+r),r.substr(r.length-1,1)!=="/"&&(r+="/"),n=r+(n.substr(0,1)==="/"?n.substr(1):n)),n},n.prototype._preload=function(){var e=this.options,t;for(t=Math.max(0,e.activeIndex);t<Math.min(e.activeIndex+5,e.groupItems.length);t++)e.groupItems[t].image||(e.groupItems[t].image=new Image,e.groupItems[t].image.src=this._getUrl(e.groupItems[t]))},n.prototype._slideAnimate=function(e,n,r){var i=["position","top","bottom","left","right","width","height"],s=t.setMode(n,e.mode||"show"),o=s==="show",u=e.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left",l,c={};t.save(n,i),n.show(),l=e.distance||n[a==="top"?"outerHeight":"outerWidth"](!0),t.createWrapper(n).css({overflow:"hidden"}),o&&n.css(a,f?isNaN(l)?parseInt("-"+l):-l:l),c[a]=(o?f?"+=":"-=":f?"-=":"+=")+l,n.animate(c,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){s==="hide"&&n.hide(),t.restore(n,i),t.removeWrapper(n),r()}})},n.prototype._slideTo=function(e,n,r,i,s){var o=this.options,u=this,a=e.getElement(),f,l,c,h,p,d,v,m;a.parent().is(".wijmo-wijlightbox-aniwrapper")?f=a.parent():(f=t.createWrapper(a).css({overflow:"hidden"}),f.removeClass("ui-effects-wrapper"),f.addClass("wijmo-wijlightbox-aniwrapper")),f.parent().is(".wijmo-wijlightbox-aniwrapper")?l=f.parent():(l=t.createWrapper(f).css({overflow:"hidden"}),l.removeClass("ui-effects-wrapper"),l.addClass("wijmo-wijlightbox-aniwrapper")),c=o.slideDirection||"horizontal",h=a.outerWidth(),p=a.outerHeight(),c==="horizontal"?(a.width(h).css("float",i?"left":"right"),f.width(2*h).css({left:i?0:-1*h,position:"absolute"})):(a.height(p),f.width(h).css({top:i?0:-1*p,position:"absolute"}).height(2*p)),n.appendTo(f),d=n.getElement(),c==="horizontal"?d.width(h).css("float",i?"left":"right"):d.height(p),this.container.data("animating.wijlightbox",!0),v=function(){a=f.children(":last");while(a.parent().is(".wijmo-wijlightbox-aniwrapper"))a.parent().replaceWith(a);a.css({"float":"",width:"",height:""}),o.autoSize&&!u._isFullSize()?u._resize(s):(t.isFunction(s)&&s.apply(u),u._refreshText())},m={mode:"hide",direction:c==="horizontal"?i?"left":"right":i?"up":"down",easing:r.easing,distance:c==="horizontal"?h:p,duration:r.duration},t.effects?f.effect("slide",m,v):u._slideAnimate(m,f,v)},n.prototype._moveFrom=function(e,n,r){var i=this,s=this.options,o;t.isFunction(n)?(r=n,n=t.extend({},i._defaults.resizeAnimation,s.resizeAnimation)):n=t.extend({},i._defaults.resizeAnimation,s.resizeAnimation,n),i._removeText();if(n.animated==="none"||n.duration<=0){i._createText(),t.isFunction(r)&&r.apply(i),this.container.data("moving.wijlightbox",!1);return}o=t.extend({width:i.frame.width(),height:i.frame.height()},i.container.offset()),i.frame.width(e.width).height(e.height),i.container.css({left:e.left,top:e.top,width:i.frame.outerWidth(),position:"absolute",opacity:""}),i._moveTo(o,n,function(){i.frame.width(o.width),i.container.width(i.frame.outerWidth()),i._createText(),i.container.data("moving.wijlightbox",!1),t.isFunction(r)&&r.apply(i)})},n.prototype._moveTo=function(e,n,r){var i=this,s=this.options;t.isFunction(n)?(r=n,n=t.extend({},i._defaults.resizeAnimation,s.resizeAnimation)):n=t.extend({},i._defaults.resizeAnimation,s.resizeAnimation,n);var o=n.duration/2,u=n.animated,a=i._isOpen(),f=u==="wh"?{left:e.left,top:undefined}:{top:e.top},l=u==="wh"?{top:e.top,left:undefined}:{left:e.left},c=u==="wh"?{width:e.width,height:undefined}:{height:e.height},h=u==="wh"?{height:e.height,width:undefined}:{width:e.width};if(u==="wh"||u==="hw"){a&&i.container.animate(f,{duration:o,easing:n.easing,queue:!0}),i.frame.animate(c,{duration:o,easing:n.easing,complete:function(){a&&i.container.animate(l,{duration:o,easing:n.easing,queue:!0}),i.frame.animate(h,{duration:o,easing:n.easing,complete:function(){i.container.data("moving.wijlightbox",!1),t.isFunction(r)&&r.apply(i)}})}});return}a&&i.container.animate({left:e.left,top:e.top},{duration:n.duration,easing:n.easing,queue:!0}),i.frame.animate({width:e.width,height:e.height,opacity:1},{duration:n.duration,easing:n.easing,complete:function(){i.container.data("moving.wijlightbox",!1),t.isFunction(r)&&r.apply(i)}})},n.prototype.show=function(e){return this._show(e),this},n.prototype._resize=function(e){var n=this,r=t.extend({},n.container.offset(),{width:n.frame.width(),height:n.frame.height()});n._size(),n._isOpen()&&n._position(),n._moveFrom(r,e)},n.prototype._onAfterShow=function(){var e=this,t=this.options,n;e._refreshNavButtons(),e.container.data("animating.wijlightbox",!1),t.modal||e._hideOverlay(),n={index:t.activeIndex,item:t.groupItems[t.activeIndex]},e._trigger("show",null,n),e._startTimer()},n.prototype._show=function(e,n,r){var i=this,s=this.options,o,u;if(this.container.data("showing.wijlightbox"))return o=[function(){i._show(e,n,r)}],this.container.queue("showqueue",o),this;u=s.activeIndex;if(!t.isPlainObject(e)){u=e;if(u<0||u>=s.groupItems.length)return this;e=s.groupItems[u]}e&&this.container.data("item.wijlightbox",e),this._groupMode()&&this._preload(),t.isFunction(n)&&(r=n,n=undefined),r||(r=i._onAfterShow);var a={index:u,item:e};if(i._trigger("beforeShow",null,a)===!1)return this;this.container.data("showing.wijlightbox",!0);var f=function(){t.isFunction(r)&&r.apply(i),i.container.data("showing.wijlightbox",!1),i.container.dequeue("showqueue"),i.container.clearQueue("showqueue")};i._refreshCounter(u);var l=this.container.data("player.wijlightbox"),c,h=function(){i.container.data("playerwidth.wijlightbox",c.width),i.container.data("playerheight.wijlightbox",c.height);var e=t.extend({},i._defaults.transAnimation,s.transAnimation);if(s.activeIndex===u||e.animated==="none"||e.duration<=0||!i._isOpen()){s.activeIndex=u,l&&l.remove(),c.appendTo(i.content),i._refreshText(),f();return}s.cookie&&i._cookie(s.activeIndex,s.cookie);if(e.animated==="slide")n=n===undefined?u>s.activeIndex:n,i._slideTo(l,c,e,n,f),s.activeIndex=u;else{s.activeIndex=u;var r=function(){c&&(c.appendTo(i.content,!0),c.fadeIn(e.duration,f))};t.browser.msie&&i.frame.trigger("mouseleave");var o=function(){l&&l.remove(),s.autoSize&&!i._isFullSize()?i._resize(r):(r(),i._refreshText())};l?l.fadeOut(e.duration*.4,o):o()}};return c=this._createPlayer(e,h),this},n.prototype.next=function(){var e=this.options;if(!this._groupMode())return!1;var t=e.activeIndex+1;return e.loop&&(t%=e.groupItems.length),t<e.groupItems.length?(this._show(t,!0),!0):!1},n.prototype.back=function(){var e=this.options;if(!this._groupMode())return!1;var t=e.activeIndex-1;return e.loop&&(t=t<0?e.groupItems.length-1:t),t>=0?(this._show(t,!1),!0):!1},n.prototype.adjustPosition=function(){this._position()},n.prototype.isPlaying=function(){return!!this.container.data("playing.wijlightbox")},n.prototype._startTimer=function(){if(!this.isPlaying()||!this._groupMode())return;var e=this.options,t=this,n;e.showTimer===!0?(this.timerMeter||this._createTimerBar(),n=this.timerBar.width(),t.timerMeter.width("0"),t.timerMeter.animate({width:n},e.delay,null,function(){t.isPlaying()&&!t.next()&&t.stop()})):window.setTimeout(function(){t.isPlaying()&&!t.next()&&t.stop()},e.delay)},n.prototype.play=function(){if(!this._groupMode())return!1;this.container.data("playing.wijlightbox")||this.container.data("playing.wijlightbox",!0),this._refreshCtrlButtons(),this._hideNavButtons(),this._startTimer()},n.prototype.stop=function(){this.container.removeData("playing.wijlightbox"),this._refreshCtrlButtons(),this._removeTimerBar()},n.prototype._size=function(e,n){var r=this.options,i=r.width,s=r.height,o=r.autoSize?this.container.data("playerwidth.wijlightbox")||i:i,u=r.autoSize?this.container.data("playerheight.wijlightbox")||s:s,a,f=u/o;if(typeof e=="boolean")n=e;else if(t.isPlainObject(e)&&"width"in e&&"height"in e)i=e.width,s=e.height;else{a=this.container.data("player.wijlightbox"),r.autoSize&&a&&a.name==="img"&&(o>i&&(o=i,u=Math.round(i*f)),u>s&&(u=s,o=Math.round(s/f))),i=o,s=u;if(n)return{width:i,height:s}}this.frame.width(i).height(s),this.container.width(this.frame.outerWidth(!0))},n.prototype._position=function(){var e=this.options,n=[],r=[0,0],i,s=e.position;if(s){if(typeof s=="string"||typeof s=="object"&&"0"in s)n=s.split?s.split(" "):[s[0],s[1]],n.length===1&&(n[1]=n[0]),t.each(["left","top"],function(e,t){+n[e]===n[e]&&(r[e]=n[e],n[e]=t)}),s={my:n.join(" "),at:n.join(" "),offset:r.join(" ")};s=t.extend({},e.position,s)}i=this.container.is(":visible"),i||this.container.show(),this.container.css({top:0,left:0}).position(s),i||this.container.hide()},n.prototype._getRelRect=function(e){var n;return e&&(t.isPlainObject(e)&&"left"in e&&"top"in e&&"width"in e&&"height"in e?n=t.merge({},e):e=t(e),e.jquery&&e.length&&(n=t.extend({},e.offset(),{width:e.width(),height:e.height()}))),n},n.prototype._close=function(e){var n=this.options,r=this,i,s,o;if(!this._isOpen())return;s={rel:e};if(!1===this._trigger("beforeClose",null,s))return;e=s.rel,!e&&this._groupMode()&&(e=n.groupItems[n.activeIndex].img),this.container.data("moving.wijlightbox",!0),this._hideAccessories(!1),this._hideWaiting(),this._hideOverlay(),this.stop(),o=function(){r._removePlayer(),r.container.hide(),r._trigger("close"),r.container.unbind("keypress.wijlightbox"),r.container.removeData("open.wijlightbox").removeData("rect.wijlightbox").removeData("moving.wijlightbox").removeData("fullsize.wijlightbox"),t(document).unbind("keydown.wijlightbox").unbind("click.wijlightbox")},i=this._getRelRect(e),i||this.container.data("rect.wijlightbox")&&(i=this.container.data("rect.wijlightbox")),this._removeText();if(i){this._moveTo(i,{animated:"sync",duration:200},o);return}return o.call(),this},n.prototype._isOpen=function(){return!!this.container.data("open.wijlightbox")},n.prototype._open=function(e,n){if(this._isOpen())return;var r=this.options,i=this;this.toolBox&&(this._isFullSize()?this.toolBox.css({top:"2px",right:"4px"}):this.toolBox.css({top:"",right:""}));var s=function(){r.modal&&i._showOverlay(),r.showControlsOnHover?this._hideAccessories(!1):this._showAccessories(!1);var n=i._getRelRect(e);i.container.css("opacity",0),i.container.show(),i._size(),i._createText(!0),i._refreshText(!0),i._position(),i.container.data("open.wijlightbox",!0);if(e&&n)i.container.data("rect.wijlightbox",n),i._moveFrom(n,{animated:"sync"});else{var s=t.extend({},i._defaults.transAnimation,r.transAnimation);s.animated==="fade"?(i.container.hide(),i.container.fadeIn(s.duration,function(){i._createText()})):i._createText(),this.container.data("moving.wijlightbox",!1)}t(document).bind("keydown.wijlightbox",t.proxy(i,"_keyDownHandler")).bind("click.wijlightbox",function(e){var n=e.target||e.srcElement;i._isOpen()&&!!r.closeOnOuterClick&&n!==i.container.get(0)&&t(n).parents().index(i.container)<0&&i._close()}),r.autoPlay&&this.play(),i._refreshNavButtons(),i._refreshDialogButtons();var u={index:r.activeIndex,item:r.groupItems[r.activeIndex]};i._trigger("show",null,u),i._trigger("open")};return this.container.data("moving.wijlightbox",!0),this._show(n,!0,s),this},n.prototype._getWinRect=function(){var e=t(window);return t.extend({width:e.width(),height:e.height()},e.offset()||{left:2,top:2})},n.prototype._resizeHandler=function(){var e=this;e._removeText(),e._size(e._getWinRect()),e._createText()},n.prototype._isFullSize=function(){return!!this.container.data("fullsize.wijlightbox")},n.prototype._toggleFullSize=function(){var e=this,n=t(window);if(!e._isOpen())return;if(this._isFullSize())e.toolBox&&e.toolBox.css({top:"",right:""}),this.container.data("fullsize.wijlightbox",!1),n.unbind("resize.wijlightbox",t.proxy(this,"_resizeHandler")),e._resize(function(){e._adjustPlayerSize(e.content.innerWidth(),e.content.innerHeight())});else{this.container.data("fullsize.wijlightbox",!0),n.bind("resize.wijlightbox",t.proxy(this,"_resizeHandler"));var r=e._getWinRect(),i=this.frame.borderSize();r.width-=i.width,r.height-=i.height,e._removeText(),e._moveTo(r,{animated:"sync"},function(){e.toolBox&&e.toolBox.css({top:"2px",right:"4px"}),e.frame.width(r.width),e.container.width(e.frame.outerWidth()),e._createText(),e._adjustPlayerSize(e.content.innerWidth(),e.content.innerHeight())})}this._refreshDialogButtons()},n.prototype._getExt=function(e){var t,n,r=/[0-9a-z]+$/i,i=e.indexOf("?");return i>-1&&(e=e.substring(0,i)),n=e.match(r),n&&(t=n[0].toLowerCase()),t},n.prototype._getPlayerName=function(e){if(e.indexOf("#")===0||e.indexOf("#")>0&&e.indexOf(document.location.href)===0)return"inline";var n=["bmp","gif","jpg","jpeg","png"],r=["swf"],i=["flv","m4v"],s=["dv","mov","moov","movie","mp4","avi","mpg","mpeg"],o=["asf","avi","mpg","mpeg","wm","wmv"],u=["mp4","mpg","mpeg","ogg","ogv"],a=this._getExt(e);if(a){if(t.inArray(a,n)>=0)return"img";if(t.inArray(a,r)>=0)return"swf";if(t.inArray(a,i)>=0)return"flv";if(t.inArray(a,o)>=0)return"wmp";if(t.inArray(a,s)>=0)return"qt";if(t.inArray(a,u)>=0)return"wijvideo"}return"iframe"},n.prototype._adjustPlayerSize=function(e,t){var n=this.container.data("player.wijlightbox");n&&n.adjustSize&&n.adjustSize(e,t)},n.prototype._removePlayer=function(){var e=this.container.data("player.wijlightbox");e&&(e.remove(),this.container.data("player.wijlightbox",null))},n.prototype._createPlayer=function(e,n,r){var i=e.player;if(!t.isFunction(t.wijmo.wijlightbox[i]))throw"unknown player "+i;var s=this,o=!1,u,a=function(){o=!0,this._hideWaiting(),t.isFunction(n)&&window.setTimeout(function(){n.apply(s)},1)},f=function(){this._hideWaiting(),t.isFunction(r)&&r.apply(s)};return u=new t.wijmo.wijlightbox[i](this,e,a,f),this.container.data("player.wijlightbox",u),window.setTimeout(function(){o===!1&&s._showWaiting()},200),u},n}(e.wijmoWidget);e.WijLightBox=r,r.prototype.options=t.extend(!0,{},e.wijmoWidget.prototype.options,{wijMobileCSS:{header:"ui-header ui-bar-a",content:"ui-body-c",stateDefault:"ui-btn-up-a",stateHover:"ui-btn-down-a",stateActive:"ui-btn-down-a",iconPlay:"ui-icon-arrow-r",iconPause:"ui-icon-grid"},initSelector:":jqmData(role='wijlightbox')",textPosition:"overlay",width:600,height:400,autoSize:!0,player:"",groupItems:null,rootUrl:"",ctrlButtons:"",dialogButtons:"close",counterType:"default",counterFormat:"[i] of [n]",counterLimit:10,showCounter:!0,showNavButtons:!0,showTimer:!1,controlsPosition:"inside",showControlsOnHover:!0,clickPause:!1,keyNav:!1,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var n=t(this).css(e).offset().top;n<0&&t(this).css("top",e.top-n)}},zIndex:1e3,closeOnEscape:!0,closeOnOuterClick:!0,autoPlay:!1,delay:2e3,loop:!0,cookie:null,transAnimation:{animated:"fade",duration:400,easing:"linear"},slideDirection:"horizontal",resizeAnimation:{animated:"sync",duration:400},textShowOption:{duration:300,easing:"linear"},textHideOption:{duration:300,easing:"linear"},showMovieControls:!0,autoPlayMovies:!0,flashParams:{bgcolor:"#000000",allowfullscreen:!0},flashVars:{},flashVersion:"9.0.115",flvPlayer:"player\\player.swf",flashInstall:"player\\expressInstall.swf",beforeShow:null,show:null,open:null,beforeClose:null,close:null}),t.wijmo.registerWidget("wijlightbox",r.prototype),t.extend(t.wijmo.wijlightbox,{img:function(e,n,r,i){this.name="img",this.lightbox=e,this.item=n,this.url=this.lightbox._getUrl(n);var s=this;t("<img></img>").css({width:"auto",height:"auto",display:"none"}).appendTo(document.body).bind({load:function(){var i=t(this);s.width=n.width?parseInt(n.width,10):i.width(),s.height=n.height?parseInt(n.height,10):i.height(),i.remove(),r&&t.isFunction(r)&&r.apply(e)},error:function(){t(this).remove(),i&&t.isFunction(i)&&i.apply(e)}}).attr("src",this.url)},swf:function(e,n,r,i){this.name="swf";var s=e.options;this.id="flashhost",this.lightbox=e,this.item=n,this.url=this.lightbox._getUrl(n),this.width=n.width?parseInt(n.width,10):s.width,this.height=n.height?parseInt(n.height,10):s.height,r&&t.isFunction(r)&&r.apply(e)},iframe:function(e,n,r,i){this.name="swf",this.lightbox=e,this.item=n,this.url=this.lightbox._getUrl(n),n.width&&(this.width=parseInt(n.width,10)),n.height&&(this.height=parseInt(n.height,10)),this.$iframe=t("<iframe></iframe>").addClass("wijmo-wijlightbox-iframe").attr({frameborder:"0",marginwidth:"0",marginheight:"0",scrolling:"auto",allowtransparency:"true"}).hide().appendTo(e.content).bind("load",function(){r&&t.isFunction(r)&&r.apply(e)}).attr("src",this.url)},inline:function(e,n,r,i){this.name="inline";var s=e.options,o=s.wijCSS,u="wijmo-wijlightbox-frame "+o.content;" "+o.cornerAll+" "+o.helperClearFix,this.lightbox=e,this.item=n,this.width=n.width?parseInt(n.width,10):s.width;if(n.height)this.height=parseInt(n.height,10);else{var a=t(this.item.href).clone().show().append('<br clear="all" />').wrap('<div class="wijmo-wijlightbox '+o.widget+'">'+'<div class="'+u+'">'+'<div class="'+u+'">'+'<div class="wijmo-wijlightbox-content"> '+"</div></div></div></div>").appendTo(document.body).width(this.width);this.height=a.outerHeight(!0)+10,a.unwrap(),a.remove()}r&&t.isFunction(r)&&r.apply(e)},flv:function(e,n,r,i){this.name="flv";var s=e.options;this.id="flvhost",this.lightbox=e,this.item=n,this.url=this.lightbox._getUrl(n);var o=20;this.width=n.width?parseInt(n.width,10):s.width,this.height=n.height?parseInt(n.height,10):s.height,s.showMovieControls&&(this.height+=o),r&&t.isFunction(r)&&r.apply(e)},wmp:function(e,n,r,i){var s=e.options,o;this.name="wmp",this.id="wmphost",this.lightbox=e,this.item=n,this.url=this.lightbox._getUrl(n),o=t.browser.msie?70:45,this.width=n.width?parseInt(n.width,10):s.width,this.height=n.height?parseInt(n.height,10):s.height,s.showMovieControls&&(this.height+=o),r&&t.isFunction(r)&&r.apply(e)},qt:function(e,n,r,i){var s=e.options,o=16;this.name="qt",this.id="qthost",this.lightbox=e,this.item=n,this.url=this.lightbox._getUrl(n),this.width=n.width?parseInt(n.width,10):s.width,this.height=n.height?parseInt(n.height,10):s.height,s.showMovieControls&&(this.height+=o),r&&t.isFunction(r)&&r.apply(e)},wijvideo:function(e,n,r,i){var s=e.options;this.name="wijvideo",this.id="wijvideohost",this.lightbox=e,this.item=n,this.url=this.lightbox._getUrl(n),this.wijvideosrc=!n.wijvideosrc||n.wijvideosrc===""?null:this.lightbox._getUrl(n.wijvideosrc),this.width=n.width?parseInt(n.width,10):s.width,this.height=n.height?parseInt(n.height,10):s.height,r&&t.isFunction(r)&&r.apply(e)}}),t.extend(t.wijmo.wijlightbox.img.prototype,{appendTo:function(e,n){this.$element=t("<img></img>").addClass("wijmo-wijlightbox-image").attr("src",this.url),n&&this.$element.hide(),this.lightbox.options.transAnimation&&this.lightbox.options.transAnimation.animated=="fade"?(e.children().length&&e.empty(),this.$element.prependTo(e)):this.$element.appendTo(e)},remove:function(){this.$element&&this.$element.remove()},fadeOut:function(e,t){this.$element&&this.$element.fadeOut(e,t)},fadeIn:function(e,t){this.$element&&this.$element.fadeIn(e,t)},getElement:function(){return this.$element}}),t.extend(t.wijmo.wijlightbox.swf.prototype,{appendTo:function(e){this.$container=t("<div/>").css({width:"100%",height:"100%",overflow:"hidden"}).attr("id",this.id).appendTo(e);var n=this.lightbox.options,r=n.flashInstall,i=n.flashVersion,s=n.flashVars,o=n.flashParams;S.flash.embedSWF(this.item.href,this.id,"100%","100%",i,r,s,o)},remove:function(){S.flash.expressInstallCallback(),S.flash.removeSWF(this.id),this.$container.remove()},fadeOut:function(e,t){this.$container&&this.$container.fadeOut(e,t)},fadeIn:function(e,t){this.$container&&this.$container.fadeIn(e,t)},getElement:function(){return this.$container}}),t.extend(t.wijmo.wijlightbox.iframe.prototype,{appendTo:function(e,t){t||this.$iframe.show()},remove:function(){this.$iframe&&this.$iframe.remove()},fadeOut:function(e,t){this.$iframe&&this.$iframe.fadeOut(e,t)},fadeIn:function(e,t){this.$iframe&&this.$iframe.fadeIn(e,t)},getElement:function(){return this.$iframe}}),t.extend(t.wijmo.wijlightbox.inline.prototype,{appendTo:function(e,n){this.$element=t(this.item.href).clone().appendTo(e),n||this.$element.show()},remove:function(){this.$element&&this.$element.remove()},fadeOut:function(e,t){this.$element&&this.$element.fadeOut(e,t)},fadeIn:function(e,t){this.$element&&this.$element.fadeIn(e,t)},getElement:function(){return this.$element}}),t.extend(t.wijmo.wijlightbox.flv.prototype,{appendTo:function(e){this.$container=t("<div/>").css({width:"100%",height:"100%",overflow:"hidden"}).attr("id",this.id).appendTo(e);var n=this.lightbox.options,r="100%",i="100%",s=n.flvPlayer,o=n.flashInstall,u=n.flashVersion,a=t.extend({file:this.url,width:r,height:i,autostart:n.autoPlayMovies?"true":"false",controlbar:n.showMovieControls?"bottom":"none",backcolor:"0x000000",frontcolor:"0xCCCCCC",lightcolor:"0x557722"},n.flashVars),f=t.extend({autostart:n.autoPlayMovies?"true":"false",allowscriptaccess:"always"},n.flashParams);S.flash.embedSWF(s,this.id,r,i,u,o,a,f)},remove:function(){S.flash.expressInstallCallback(),S.flash.removeSWF(this.id),this.$container.remove()},fadeOut:function(e,t){this.$container&&this.$container.fadeOut(e,t)},fadeIn:function(e,t){this.$container&&this.$container.fadeIn(e,t)},getElement:function(){return this.$container}}),t.extend(t.wijmo.wijlightbox.wmp.prototype,{appendTo:function(e){this.$container=t("<div/>").css({width:"100%",height:"100%",overflow:"hidden"}).appendTo(e);var n=this.lightbox.options,r='<object id="'+this.id+'" name="'+this.id+'" height="'+this.height+'" width="'+this.width+'"',i={autostart:n.autoPlayMovies?1:0,url:undefined,uimode:undefined,showcontrols:undefined},s;t.browser.msie?(r+=' classid="clsid:6BF52A52-394A-11d3-B153-00C04F79FAA6"',i.url=this.url,i.uimode=n.showMovieControls?"full":"none"):(r+=' type="video/x-ms-wmv"',r+=' data="'+this.url+'"',i.showcontrols=n.showMovieControls?1:0),r+=">";for(s in i)r+='<param name="'+s+'" value="'+i[s]+'">';r+="</object>",this.$container.html(r)},remove:function(){if(t.browser.msie)try{window[this.id].controls.stop(),window[this.id].URL="movie"+now()+".wmv",window[this.id]=function(){}}catch(e){}this.$container.remove()},fadeOut:function(e,t){this.$container&&this.$container.fadeOut(e,t)},fadeIn:function(e,t){this.$container&&this.$container.fadeIn(e,t)},getElement:function(){return this.$container}}),t.extend(t.wijmo.wijlightbox.qt.prototype,{appendTo:function(e,n){this.$container=t("<div/>").css({width:"100%",height:"100%",overflow:"hidden"}).appendTo(e);var r=this.lightbox.options,i=r.autoPlayMovies?"true":"false",s=r.showMovieControls?"true":"false",o="<object",u={id:this.id,name:this.id,width:this.width,height:this.height,kioskmode:"true",classid:undefined,codebase:undefined,type:undefined,data:undefined},a,f;t.browser.msie?(u.classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B",u.codebase="http://www.apple.com/qtactivex/qtplugin.cab#version=6,0,2,0"):(u.type="video/quicktime",u.data=this.url);for(a in u)o+=" "+a+'="'+u[a]+'"';o+=">";var l={src:this.url,scale:"aspect",controller:s,autoplay:i};for(f in l)o+='<param name="'+f+'" value="'+l[f]+'">';o+="</object>",n&&e.hide(),this.$container.html(o),n&&e.show()},remove:function(){try{document[this.id].Stop(),document[this.id]=null}catch(e){}this.$container.remove()},fadeOut:function(e,t){t.call();return},fadeIn:function(e,t){t.call();return},getElement:function(){return this.$container}}),t.extend(t.wijmo.wijlightbox.wijvideo.prototype,{appendTo:function(e){var n=this.lightbox.options;this.$container=t("<video/>").css({overflow:"hidden"}).attr({width:this.width,height:this.height,autoPlay:n.autoPlayMovies?"true":"false",controls:n.showMovieControls?"controls":""}).appendTo(e),!this.url||t("<source/>").attr({src:this.url}).appendTo(this.$container),!this.wijvideosrc||t("<source/>").attr({src:this.wijvideosrc}).appendTo(this.$container),this.$container.wijvideo({fullScreenButtonVisible:!1})},remove:function(){this.$container.remove()},fadeOut:function(e,t){this.$container&&this.$container.fadeOut(e,t)},fadeIn:function(e,t){this.$container&&this.$container.fadeIn(e,t)},getElement:function(){return this.$container},adjustSize:function(e,t){this.$container.wijvideo("setWidth",e),this.$container.wijvideo("setHeight",t)}}),t.extend(t.wijmo.wijlightbox,{overlay:function(e,n){this.mask=t("<div></div>").addClass(e.options.wijCSS.overlay+" wijmo-wijlightbox-overlay"+(n?" wijmo-wijlightbox-waitingoverlay":"")).appendTo(document.body).css({width:this.width(),height:this.height()}).bind("click",function(){return e._close(),!1}),t.fn.bgiframe&&this.mask.bgiframe();if(n){this.mask.css("z-index",this.zIndex);var r=t("<div></div>").addClass("wijmo-wijlightbox-waiting").css("z-index",this.zIndex+1).appendTo(this.mask);r.css({left:(this.mask.width()-r.width())/2,top:(this.mask.height()-r.height())/2})}t(window).bind("resize.wijlightbox-overlay",t.proxy(this,"resize")),window.setTimeout(function(){var e;this.mask&&(e=t.wijmo.wijlightbox.overlay,t(document).bind(e.events,function(n){if(t(n.target).zIndex()<e.zIndex)return!1}))},1)}}),t.extend(t.wijmo.wijlightbox.overlay.prototype,{mask:null,zIndex:1e3,events:t.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(e){return e+".wijlightbox-overlay"}).join(" "),close:function(){t(document).unbind(".wijlightbox-overlay"),t(window).unbind(".wijlightbox-overlay"),this.mask.remove(),this.mask=undefined},height:function(){var e,n;return t.browser.msie&&parseInt(t.browser.version)<7?(e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),n=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),e<n?t(window).height():e):t(document).height()},width:function(){var e,n;return t.browser.msie&&parseInt(t.browser.version)<7?(e=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),n=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),e<n?t(window).width():e):t(document).width()},resize:function(){this.mask&&this.mask.css({width:this.width(),height:this.height()})}})})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){"use strict";var t=jQuery,n="wijtooltip",r="@wijtp@",i="wijmo-wijtooltip",s=i+"-arrow-",o=parseFloat,u=window,a=document,f=Math,l=f.max,c={},h=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n._tooltips=new Array,n.prototype._setOption=function(n,r){var i=this,s="_set_"+n,o=i.options[n];e.prototype._setOption.call(this,n,r),t.isPlainObject(r)&&(i.options[n]=t.extend({},o,r)),i[s]&&i[s](o)},n.prototype._set_cssClass=function(){var e=this,t=e.options,n=e._tooltipCache._$tooltip;if(!n)return;n.hasClass(t.cssClass)||n.addClass(t.cssClass)},n.prototype._set_content=function(e){var t=this;t._isAjaxCallback?(t._callbacked=!0,t.show(),t._callbacked=!1):t._setText()},n.prototype._create=function(){var e=this,i=e.options,s=e.element,o=s&&s.attr("id"),u="",a="",f=i.group||r,l=n._getTooltip(f);window.wijmoApplyWijTouchUtilEvents&&(t=window.wijmoApplyWijTouchUtilEvents(t)),l?l.count++:(l=e._createTooltip(),l.count=0,n._tooltips[f]=l),a=i.cssClass?i.cssClass:"",l._$tooltip.hasClass(a)||l._$tooltip.addClass(a),i.position.of=e.element,e._bindLiveEvents(),e._tooltipCache=l,o!==""&&(u=l._$tooltip.attr("aria-describedby"),u=u===undefined?"":u+" ",l._$tooltip.attr("aria-describedby",u+o))},n.prototype.destroy=function(){var t=this,i=t.element,s=t.options.group||r;i.unbind(".tooltip"),i.attr("title",t._content),n._removeTooltip(s),e.prototype.destroy.call(this)},n.prototype.widget=function(){return this._tooltipCache._$tooltip},n.prototype.show=function(){var e=this,n=e._tooltipCache,r=n?n._$tooltip:null,i=e.options;if(!n||i.disabled)return;n._showAnimationTimer&&(clearTimeout(n._showAnimationTimer),n._showAnimationTimer=null),n._showAtAnimationTimer&&(clearTimeout(n._showAtAnimationTimer),n._showAtAnimationTimer=null),n._hideAnimationTimer&&(clearTimeout(n._hideAnimationTimer),n._hideAnimationTimer=null),r.stop(!0,!0);if(i.ajaxCallback&&t.isFunction(i.ajaxCallback)&&!e._callbacked){e._isAjaxCallback=!0,i.ajaxCallback.call(e.element);return}e._setText(),n._showAnimationTimer=setTimeout(function(){c=r.offset();if(i.mouseTrailing){e._setCalloutCss();return}e._setPosition(),e._showTooltip()},e.options.showDelay)},n.prototype.showAt=function(e){var t=this,n=t._tooltipCache,r=n?n._$tooltip:null,i=n?n._callout:null,s,o=0,u=0,a={},f,l,h,p,d,v;if(!n||!i)return;r.stop(!0,!0),n._showAtAnimationTimer&&(clearTimeout(n._showAtAnimationTimer),n._showAtAnimationTimer=null),n._hideAnimationTimer&&(clearTimeout(n._hideAnimationTimer),n._hideAnimationTimer=null),n._showAtAnimationTimer=setTimeout(function(){var n=r.is(":visible");t._setText(),c=r.offset(),r.offset({left:0,top:0}).show(),s=i.position(),o=s.left,u=s.top,l=t._getBorder(i),h=l.left||l.right,p=l.top||l.bottom,d=r.width(),v=r.height(),f=t._getCalloutShape(),a={rt:{left:e.x-d-h,top:e.y-u},rc:{left:e.x-d-h,top:e.y-v/2},rb:{left:e.x-d-h,top:e.y-u-p},lt:{left:e.x+h,top:e.y-u},lc:{left:e.x+h,top:e.y-v/2},lb:{left:e.x+h,top:e.y-u-p},tl:{left:e.x-o,top:e.y+p},tc:{left:e.x-d/2,top:e.y+p},tr:{left:e.x-o-h,top:e.y+p},bl:{left:e.x-o,top:e.y-v-p},bc:{left:e.x-d/2,top:e.y-v-p},br:{left:e.x-o-h,top:e.y-v-p},cc:{left:e.x-d/2,top:e.y-v/2}}[f],f=t._flipTooltip(a,f,l),t._setUnfilledCallout(f),r.offset(a),n||r.hide(),t._calloutShape=f,t._showTooltip()},t.options.showDelay)},n.prototype.hide=function(){var e=this,n=e._tooltipCache;if(!n)return;n._showAnimationTimer&&(clearTimeout(n._showAnimationTimer),n._showAnimationTimer=null),n._showAtAnimationTimer&&(clearTimeout(n._showAtAnimationTimer),n._showAtAnimationTimer=null),n._hideAnimationTimer&&(clearTimeout(n._hideAnimationTimer),n._hideAnimationTimer=null),n._hideAnimationTimer=setTimeout(t.proxy(e._hideTooltip,e),e.options.hideDelay)},n.prototype._createTooltip=function(){var e=this,n=e.options,r=new TooltipCache,i=t("<div></div>").addClass(n.wijCSS.tooltip).addClass(n.wijCSS.widget).addClass(n.wijCSS.content).addClass(n.wijCSS.cornerAll),s=t("<div></div>").addClass(n.wijCSS.tooltipContainer),o=t("<div></div>").addClass(n.wijCSS.content).addClass(n.wijCSS.tooltipPointer).append(t("<div></div>").addClass(n.wijCSS.tooltipPointerInner)),u=t("<div></div>").addClass(n.wijCSS.tooltipTitle).addClass(n.wijCSS.header).addClass(n.wijCSS.cornerAll),a=t("<a href='#'></a>").addClass(n.wijCSS.tooltipClose).addClass(n.wijCSS.stateDefault).addClass(n.wijCSS.cornerAll);return a.append(t("<span></span>").addClass(n.wijCSS.icon).addClass(n.wijCSS.iconClose)).bind("click",t.proxy(e._onClickCloseBtn,e)),n.closeBehavior!=="sticky"&&a.hide(),n.showCallout||o.hide(),i.append(u).append(a).append(s).append(o).css("position","absolute").attr("role","tooltip").appendTo("body").hide(),r._$tooltip=i,r._container=s,r._callout=o,r._closeBtn=a,r._title=u,r},n.prototype._bindLiveEvents=function(){var e=this,n=e.options,r=e.element;e._content===undefined&&(e._content=r.attr("title"),r.attr("title","")),r.unbind(".tooltip"),n.mouseTrailing&&r.bind("mousemove.tooltip",function(t){if(n.disabled)return;var r=n.position.offset||"",i=r.split(" ");i.length===2?e.showAt({x:t.pageX+parseInt(i[0],10),y:t.pageY+parseInt(i[1],10)}):e.showAt({x:t.pageX,y:t.pageY})});switch(n.triggers){case"hover":r.bind("mouseover.tooltip",t.proxy(e.show,e)).bind("mouseout.tooltip",t.proxy(e._hideIfNeeded,e));break;case"click":r.bind("click.tooltip",t.proxy(e.show,e));break;case"focus":r.bind("focus.tooltip",t.proxy(e.show,e)).bind("blur.tooltip",t.proxy(e._hideIfNeeded,e));break;case"rightClick":r.bind("contextmenu.tooltip",function(t){e.show(),t.preventDefault()})}},n.prototype._hideIfNeeded=function(){var e=this,t=e.options,n=t.closeBehavior;if(n==="sticky"||t.modal||n==="none"||t.disabled)return;e.hide()},n.prototype._flipTooltip=function(e,t,n){var r=this,i=r._tooltipCache,s=i?i._$tooltip:null,o={width:s.width(),height:s.height()},u=r._flipCallout(e,o,t),a=u&&u.flip,f,l;return!i||!u||!a.h&&!a.v?u.calloutShape:(f=s.width(),l=s.height(),a.h==="l"?e.left-=f+n.right*2+1:a.h==="r"?e.left+=f+n.left*2+1:a.v==="t"?e.top-=l+n.bottom*2+1:a.v==="b"&&(e.top+=l+n.top*2+1),u.calloutShape)},n.prototype._flipCallout=function(e,n,r){var i=this,o=i.options,a=i._tooltipCache,f=a._$tooltip,l={h:!1,v:!1},c=t(u),h=(o.position.collision||"flip").split(" ");h.length===1&&(h[1]=h[0]);if(!a||h[0]!=="flip"&&h[1]!=="flip")return{flip:l,calloutShape:null};h[0]==="flip"&&(e.left<0||e.left+n.width>c.width()+c.scrollLeft())&&(l.h=!0),h[0]==="flip"&&(e.top<0||e.top+n.height>c.height()+c.scrollTop())&&(l.v=!0);if(o.showCallout){l.h&&(r.indexOf("l")>-1?(r=r.replace(/l/,"r"),l.h="l"):r.indexOf("r")>-1&&(r=r.replace(/r/,"l"),l.h="r")),l.v&&(r.indexOf("t")>-1?(r=r.replace(/t/,"b"),l.v="t"):r.indexOf("b")>-1&&(r=r.replace(/b/,"t"),l.v="b"));if(l.h||l.v)i._removeCalloutCss(),f.addClass(s+r)}return{flip:l,calloutShape:r}},n.prototype._set_position=function(e){var t=this,n=t.options,r=n.position;n.showCallout&&((e.my!==r.my||e.at!==r.at)&&t._setPosition(),t._setCalloutOffset(!0)),t._setText()},n.prototype._set_showCallout=function(){var e=this,t=e._tooltipCache,n=t?t._callout:null;if(!t||!n)return;e.options.showCallout?(e._setCalloutCss(),n.show()):n.hide()},n.prototype._set_closeBehavior=function(){var e=this,t=e._tooltipCache,n=t?t._closeBtn:null;n&&n[e.options.closeBehavior==="sticky"?"show":"hide"]()},n.prototype._set_triggers=function(){this._bindLiveEvents()},n.prototype._set_mouseTrailing=function(){this._bindLiveEvents()},n.prototype._getCalloutShape=function(){var e=this,n=e.options.position,r=function(e){return t.makeArray(t.map(e,function(e){return e.substr(0,1)}))},i=r(n.my.split(" ")),s=r(n.at.split(" ")),o=[];return i.length===2&&(o=i),i[0]===s[0]?(i[1]==="t"&&s[1]==="b"||i[1]==="b"&&s[1]==="t")&&o.reverse():s[0]==="c"&&o.reverse(),o[0]==="c"&&o.reverse(),o.join("")},n.prototype._setCalloutCss=function(){var e=this,n=e.options,r=e._tooltipCache,i=r?r._$tooltip:null,o="",u="",a=t.support.isTouchEnabled;if(!n.showCallout&&!a)return;return e._removeCalloutCss(),u=e._getCalloutShape(),o=s+u,i&&i.addClass(o),u},n.prototype._removeCalloutCss=function(){var e=this._tooltipCache,n;e&&(n=e._$tooltip,t.each(["tl","tc","tr","bl","bc","br","rt","rc","rb","lt","lc","lb","cc"],function(e,t){var r=s+t;if(n.hasClass(r))return n.removeClass(r),!1}))},n.prototype._getBorder=function(e){var n={};return t.each(["top","right","left","bottom"],function(t,r){n[r]=o(e.css("border-"+r+"-width"))}),n},n.prototype._setPosition=function(){var e=this,n=e.options,r=n.position,i=r.my,s=e._tooltipCache,u=s?s._$tooltip:null,a=u.is(":hidden"),f=e._setCalloutCss(),l=f?f.split(""):null,c=[0,0],h=s._callout,p,d,v,m,g,y={width:u.width(),height:u.height()},b,w,E=t.support.isTouchEnabled;a&&u.show(),u.css({left:0,top:0});if(n.showCallout){p=e._getBorder(h),v=o(h.css("left")),d=o(h.css("top")),m=o(h.css("right")),g=o(h.css("bottom"));switch(l[0]){case"l":c[0]=p.right;break;case"r":c[0]=-p.left;break;case"b":c[1]=g;break;case"t":c[1]=-d}switch(l[1]){case"t":c[1]=-d;break;case"b":c[1]=g;break;case"r":c[0]=m;break;case"l":c[0]=-v}}if(E&&E()){switch(l[0]){case"l":c[0]=c[0]+30;break;case"r":c[0]=c[0]-30;break;case"b":c[1]=c[1]-30;break;case"t":c[1]=c[1]+30}switch(l[1]){case"t":c[1]=c[1]+30;break;case"b":c[1]=c[1]-30;break;case"r":c[0]=c[0]-30;break;case"l":c[0]=c[0]+30}}r.my.indexOf(" ")>-1?i=r.my.split(" ")[0]+"+"+c[0]+" "+r.my.split(" ")[1]+"+"+c[1]:i=r.my+"+"+c[0]+" "+r.my+"+"+c[1],u.position({my:i,at:r.at,of:r.of,collision:"none none"}),b=e._flipCallout(u.offset(),y,f),w=b.flip;if(w.h||w.v)u.css({left:0,top:0}),u.position({my:i,at:r.at,of:r.of,collision:r.collision});n.showCallout&&e._setUnfilledCallout(f),e._calloutShape=f,a&&u.hide()},n.prototype._setCalloutOffset=function(e){var n=this,r=n.options,i=n._tooltipCache,s=i?i._$tooltip:null,o=i&&i._callout,u=n._calloutShape,a=!1,f=r.position.offset,l="",c=[],h=r.calloutAnimation;if(!o)return;if(!f||f.length===0)return;o.stop(!0,!0),t.each(["tr","tc","tl","bl","bc","br"],function(e,t){if(u===t)return a=!0,!1}),f&&(c=f.split(" "),c.length===2?l=a?c[0]:c[1]:c.length===1&&(l=c[0])),c&&c.length===2&&c[0]==="none"&&c[1]==="none"?o.css("left","").css("top",""):l==="none"?o.css(a?"left":"top",""):l!==""&&(e&&!e.disabled?a?o.animate({left:l},h.duration,h.easing):o.animate({top:l},h.duration,h.easing):o.css(a?"left":"top",l))},n.prototype._setUnfilledCallout=function(e){var t=this,n=t._tooltipCache,r=n?n._$tooltip:null,i=n&&n._callout,s=i&&i.children(),o=e.split(""),u=r?r.css("background-color"):"";if(!s)return;s.css({"border-left-color":"","border-top-color":"","border-bottom-color":"","border-right-color":""});if(!t.options.calloutFilled)switch(o[0]){case"l":s.css("border-right-color",u);break;case"t":s.css("border-bottom-color",u);break;case"r":s.css("border-left-color",u);break;case"b":s.css("border-top-color",u)}},n.prototype._showTooltip=function(){var e=this,r=e.options,i=e._tooltipCache,s=i?i._$tooltip:null,o,u,a;if(!i)return;if(e._trigger("showing",null,e)===!1)return;e._showModalLayer(),s.css("z-index",99999),t.fn.wijshow?(u={show:!0,context:s},o=t.extend({},r.animation,r.showAnimation),s.is(":visible")&&(a=s.offset(),s.offset(c),t.extend(u,{pos:a}),o.animated="tooltipSlide"),s.wijshow(o,n.animations,u,null,function(){e._trigger("shown")})):(s.show(),e._trigger("shown")),e._setCalloutOffset(!1)},n.prototype._hideTooltip=function(){var e=this,r=e.options,i=e._tooltipCache,s=i?i._$tooltip:null,o=t.extend({},r.animation,r.hideAnimation),u;if(!i)return;if(e._trigger("hiding",null,e)===!1)return;e._hideModalLayer(),t.fn.wijhide?(u={show:!1,context:s},s.wijhide(o,n.animations,u,null,function(){e._trigger("hidden"),s.css("z-index","")})):(s.hide(),e._trigger("hidden"),s.css("z-index",""))},n.prototype._getContent=function(e){var n={data:""},r;return t.isFunction(e)?(r=e.call(this.element,n),n.data!==""?n.data:r):window[e]&&t.isFunction(window[e])?(r=window[e].call(this.element,n),n.data!==""?n.data:r):e},n.prototype._setText=function(){var e=this,t=e.options,n=e._tooltipCache,r="",i="",s=n?n._title:null;if(!n)return;r=e._getContent(t.content),r=r===""?e._content:r,n._container.html(r),i=e._getContent(t.title),i!==""?s.html(i).show():s.hide()},n.prototype._showModalLayer=function(){var e=this,n=e.options,r=null;e.options.modal&&(r=t("<div>").addClass(n.wijCSS.overlay).css("z-index",99e3).width(e._getDocSize("Width")).height(e._getDocSize("Height")).appendTo("body"),t(window).bind("resize.wijtooltip",function(){r.width(e._getDocSize("Width")).height(e._getDocSize("Height"))}),e._tooltipCache._modalLayer=r)},n.prototype._hideModalLayer=function(){var e=this,n=e._tooltipCache._modalLayer;n&&(n.css("z-index","").remove(),t(window).unbind("resize.wijtooltip"))},n.prototype._getDocSize=function(e){var n,r,i="documentElement",s="body";return t.browser.msie&&parseFloat(t.browser.version)<9?(n=l(a[i]["scroll"+e],a[s]["scroll"+e]),r=l(a[i]["offset"+e],a[s]["offset"+e]),n<r?t(u)[e.toLowerCase()]()+"px":n+"px"):t(a)[e.toLowerCase()]()+"px"},n.prototype._onClickCloseBtn=function(e){this.hide(),e.preventDefault()},n.animations={fade:function(e,n){e=t.extend({duration:300,easing:"swing"},e,n),e.context.stop(!0,!0).animate(e.show?{opacity:"show"}:{opacity:"hide"},e)},tooltipSlide:function(e,n){e=t.extend({duration:300,easing:"swing"},e,n),e.context.stop(!0,!0).animate({left:e.pos.left,top:e.pos.top},e)}},n._getTooltip=function(t){return n._tooltips[t]},n._removeTooltip=function(t){var r=n._tooltips[t],i=r?r._$tooltip:null;r&&(r.count--,r.count<=0&&(i.remove(),n._tooltips[t]=null))},n}(e.wijmoWidget);e.wijtooltip=h,h.prototype.options=t.extend(!0,{},e.wijmoWidget.prototype.options,{initSelector:":jqmData(role='wijtooltip')",wijCSS:{tooltip:"wijmo-wijtooltip",tooltipContainer:"wijmo-wijtooltip-container",tooltipPointer:"wijmo-wijtooltip-pointer",tooltipPointerInner:"wijmo-wijtooltip-pointer-inner",tooltipTitle:"wijmo-wijtooltip-title",tooltipClose:"wijmo-wijtooltip-close"},wijMobileCSS:{header:"ui-header ui-bar-a",content:"ui-body-a",stateDefault:"ui-btn-up-a",stateHover:"ui-btn-down-a",stateActive:"ui-btn-down-a"},content:"",title:"",closeBehavior:"auto",mouseTrailing:!1,triggers:"hover",position:{my:"left bottom",at:"right top",offset:null},showCallout:!0,animation:{animated:"fade",duration:500,easing:null},showAnimation:{},hideAnimation:{},showDelay:150,hideDelay:150,calloutAnimation:{duration:1e3,disabled:!1,easing:null},calloutFilled:!1,modal:!1,group:null,ajaxCallback:null,showing:null,shown:null,hiding:null,hidden:null,cssClass:""}),t.wijmo.registerWidget(n,h.prototype)})(wijmo||(wijmo={}));var TooltipCache=function(){function e(){}return e}();;
define("jquery.migrate");define("jquery.cookie");define("jquery.globalize");define("jquery.globalize.cultures");define("jquery.mousewheel");define("jquery-form");define("jquery-ui.core");define("jquery-ui.widget");define("jquery-ui.position");define("jquery-ui.mouse");define("jquery-ui.draggable");define("jquery-ui.droppable");define("jquery-ui.resizable");define("jquery-ui.sortable");define("jquery-ui.dialog");define("jquery-ui.button");define("jquery-ui.datepicker");define("jquery-ui.effects.core");define("jquery-ui.effects.blind");define("jquery-ui.effects.slide");define("jquery-ui.effects.scale");define("jquery-ui.effects.transfer");define("jquery-ui.effects.fade");define("jquery-ui.datepicker.i18n");define("wijmo.widget");define("wijmo.data");define("wijmo.data.wijdatasource");define("wijmo.wijtextselection");define("wijmo.wijutil");define("wijmo.wijinputcore");define("wijmo.wijinputdate");define("wijmo.wijinputmask");define("wijmo.wijinputnumber");define("wijmo.wijlist");define("wijmo.wijpopup");define("wijmo.wijcalendar");define("wijmo.wijtabs");define("wijmo.wijdatasource");define("wijmo.wijsplitter");define("wijmo.wijsuperpanel");define("wijmo.wijmenu");define("wijmo.wijexpander");define("wijmo.wijaccordion");define("wijmo.wijdialog");define("wijmo.wijpager");define("wijmo.wijgrid");define("wijmo.wijlightbox");define("wijmo.wijtooltip");
